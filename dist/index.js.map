{"version":3,"sources":["../src/index.ts","../src/utils/cn.ts","../src/utils/data-utils.ts","../src/utils/format-utils.ts","../src/utils/shared-components.tsx","../src/utils/component-error-boundary.tsx","../src/utils/component-hooks.ts","../src/utils/shared-schemas.ts","../src/domain/CalendarAgenda/component.tsx","../src/domain/CalendarAgenda/components/utils.ts","../src/domain/CalendarAgenda/components/event-card.tsx","../src/domain/CalendarAgenda/components/event-detail.tsx","../src/domain/CalendarAgenda/schema.ts","../src/domain/Workout/component.tsx","../src/domain/Workout/components/session-timer.tsx","../src/domain/Workout/components/exercise-item-card.tsx","../src/domain/Workout/components/WorkoutExerciseCard.tsx","../src/domain/Workout/components/WorkoutSetRow.tsx","../src/domain/Workout/components/exercise-parts.tsx","../src/domain/Workout/adapters/workout.adapter.ts","../src/domain/Workout/hooks/useWorkoutLogic.ts","../src/domain/Workout/schema.ts","../src/domain/Nutrition/component.tsx","../src/domain/Nutrition/components/types.ts","../src/domain/Nutrition/components/macro-metric.tsx","../src/domain/Nutrition/components/meal-ticket.tsx","../src/domain/Nutrition/schema.ts","../src/domain/Flight/component.tsx","../src/domain/Flight/components/flight-segment.tsx","../src/domain/Flight/components/types.ts","../src/domain/Flight/components/flight-cards.tsx","../src/domain/Flight/adapters/flight.adapter.ts","../src/domain/Flight/hooks/useFlightLogic.ts","../src/domain/Flight/schema.ts","../src/domain/Hotel/component.tsx","../src/domain/Hotel/adapters/hotel.adapter.ts","../src/domain/Hotel/schema.ts","../src/domain/Hotel/hooks/useHotelLogic.ts","../src/domain/Trip/component.tsx","../src/domain/Trip/schema.ts","../src/domain/BookingForms/component.tsx","../src/domain/BookingForms/adapters/booking-forms.adapter.ts","../src/domain/BookingForms/hooks/useBookingFormsLogic.ts","../src/domain/BookingForms/schema.ts","../src/domain/social/profile-card.tsx","../src/domain/feed/activity-feed.tsx","../src/domain/commerce/pricing.tsx","../src/domain/content/article-card.tsx","../src/domain/Kanban/component.tsx","../src/domain/Kanban/components/types.ts","../src/domain/Kanban/components/sub-items-list.tsx","../src/domain/Kanban/components/kanban-card.tsx","../src/domain/Kanban/adapters/kanban.adapter.ts","../src/domain/Kanban/hooks/useKanbanDrag.ts","../src/domain/Kanban/hooks/useKanbanState.ts","../src/domain/Kanban/schema.ts","../src/domain/TodoList/component.tsx","../src/domain/TodoList/adapters/todolist.adapter.ts","../src/domain/TodoList/hooks/useTodoListLogic.ts","../src/domain/TodoList/schema.ts","../src/domain/RoutineScheduler/component.tsx","../src/domain/RoutineScheduler/components/time-block-card.tsx","../src/domain/RoutineScheduler/components/utils.ts","../src/domain/RoutineScheduler/components/day-column.tsx","../src/domain/RoutineScheduler/adapters/routine-scheduler.adapter.ts","../src/domain/RoutineScheduler/hooks/useRoutineSchedulerLogic.ts","../src/domain/RoutineScheduler/schema.ts","../src/domain/SupplementTracker/component.tsx","../src/domain/SupplementTracker/components/supplement-card.tsx","../src/domain/SupplementTracker/components/utils.ts","../src/domain/SupplementTracker/components/timing-group.tsx","../src/domain/SupplementTracker/components/progress-dashboard.tsx","../src/domain/SupplementTracker/adapters/supplement-tracker.adapter.ts","../src/domain/SupplementTracker/hooks/useSupplementTrackerLogic.ts","../src/domain/SupplementTracker/schema.ts","../src/domain/Calendar/component.tsx","../src/domain/Calendar/components/event-card.tsx","../src/domain/Calendar/components/utils.ts","../src/domain/Calendar/components/day-cell.tsx","../src/domain/Calendar/adapters/calendar.adapter.ts","../src/domain/Calendar/hooks/useCalendarLogic.ts","../src/domain/Calendar/schema.ts","../src/domain/Diary/component.tsx","../src/domain/Diary/components/diary-entry-card.tsx","../src/domain/Diary/components/sub-components.tsx","../src/domain/Diary/components/utils.ts","../src/domain/Diary/adapters/diary.adapter.ts","../src/domain/Diary/hooks/useDiaryLogic.ts","../src/domain/Diary/schema.ts","../src/domain/research/ResearchReport.tsx","../src/domain/research/components/types.ts","../src/domain/research/components/video-player.tsx","../src/domain/research/components/citation-badge.tsx","../src/domain/research/components/source-card.tsx","../src/domain/research/components/report-section.tsx","../src/domain/DocumentIndex/component.tsx","../src/domain/DocumentIndex/schema.ts","../src/domain/DocumentIndex/index.ts","../src/domain/SourceCitation/component.tsx","../src/domain/SourceCitation/schema.ts","../src/domain/SourceCitation/index.ts","../src/visualization/charts/Chart/component.tsx","../src/visualization/utils/data-utils.ts","../src/visualization/utils/cn.ts","../src/visualization/charts/Chart/schema.ts","../src/visualization/utils/shared-schemas.ts","../src/visualization/charts/StockChart/component.tsx","../src/visualization/charts/StockChart/schema.ts","../src/visualization/graphs/Graph/component.tsx","../src/visualization/graphs/Graph/components/types.ts","../src/visualization/graphs/Graph/components/edges-renderer.tsx","../src/visualization/graphs/Graph/components/nodes-renderer.tsx","../src/visualization/graphs/Graph/schema.ts","../src/visualization/graphs/MindMap/component.tsx","../src/visualization/graphs/MindMap/components/types.ts","../src/visualization/graphs/MindMap/components/node-renderer.tsx","../src/visualization/graphs/MindMap/schema.ts","../src/visualization/graphs/Gantt/component.tsx","../src/visualization/graphs/Gantt/schema.ts","../src/communication/Message/component.tsx","../src/communication/Message/schema.ts","../src/communication/Email/component.tsx","../src/communication/Email/components/unread-dot.tsx","../src/communication/Email/components/compose-modal.tsx","../src/communication/Email/components/types.ts","../src/communication/Email/components/email-list.tsx","../src/communication/Email/components/email-detail.tsx","../src/communication/Email/schema.ts","../src/document/DocumentExplorer.tsx","../src/document/KnowledgeGraph.tsx","../src/document/DocumentTimeline.tsx","../src/document/DeepAnalysisPanel.tsx","../src/document/CitationViewer.tsx","../src/document/EntityExplorer.tsx","../src/document/hooks/useKnowledgeBase.ts","../src/document/hooks/useDocumentExplorer.ts","../src/document/hooks/useQuestionAnswer.ts"],"sourcesContent":["/**\n * @onegenui/components\n *\n * Standard UI component library for json-render framework.\n * Auto-generated exports with domain organization.\n */\n\nimport type { ComponentType } from \"react\";\n\n// ============================================================================\n// Primitives Re-exports (from @onegenui/ui)\n// ============================================================================\nexport * from \"@onegenui/ui\";\n\n// ============================================================================\n// Shared Components\n// ============================================================================\nexport { EmptyState, LoadingIndicator } from \"./utils\";\n\n// ============================================================================\n// Domain Components Exports\n// ============================================================================\n\nexport {\n  CalendarAgenda,\n  CalendarAgendaSchema,\n  CalendarAgendaDefinition,\n  type CalendarAgendaProps,\n} from \"./domain/CalendarAgenda\";\n\nexport {\n  Workout,\n  WorkoutPropsSchema,\n  WorkoutDefinition,\n  type WorkoutProps,\n} from \"./domain/Workout\";\nexport {\n  Nutrition,\n  NutritionPropsSchema,\n  NutritionDefinition,\n  type NutritionProps,\n} from \"./domain/Nutrition\";\nexport {\n  Flight,\n  FlightPropsSchema,\n  FlightDefinition,\n  type FlightProps,\n} from \"./domain/Flight\";\nexport {\n  Hotel,\n  HotelPropsSchema,\n  HotelDefinition,\n  type HotelProps,\n} from \"./domain/Hotel\";\nexport {\n  Trip,\n  TripPropsSchema,\n  TripDefinition,\n  type TripProps,\n} from \"./domain/Trip\";\nexport {\n  BookingForms,\n  BookingFormsPropsSchema,\n  BookingFormsDefinition,\n  type BookingFormsProps,\n} from \"./domain/BookingForms\";\nexport {\n  ProfileCard,\n  type ProfileCardProps,\n} from \"./domain/social/profile-card\";\nexport {\n  ActivityFeed,\n  type ActivityFeedProps,\n} from \"./domain/feed/activity-feed\";\nexport { Pricing, type PricingProps } from \"./domain/commerce/pricing\";\nexport {\n  ArticleCard,\n  type ArticleCardProps,\n} from \"./domain/content/article-card\";\nexport {\n  Kanban,\n  KanbanPropsSchema,\n  KanbanDefinition,\n  type KanbanProps,\n} from \"./domain/Kanban\";\nexport {\n  TodoList,\n  TodoListPropsSchema,\n  TodoListDefinition,\n  type TodoListProps,\n} from \"./domain/TodoList\";\n\nexport {\n  RoutineScheduler,\n  RoutineSchedulerPropsSchema,\n  RoutineSchedulerDefinition,\n  type RoutineSchedulerProps,\n} from \"./domain/RoutineScheduler\";\n\nexport {\n  SupplementTracker,\n  SupplementTrackerPropsSchema,\n  SupplementTrackerDefinition,\n  type SupplementTrackerProps,\n} from \"./domain/SupplementTracker\";\n\nexport {\n  Calendar,\n  CalendarPropsSchema,\n  CalendarDefinition,\n  type CalendarProps,\n} from \"./domain/Calendar\";\n\nexport {\n  Diary,\n  DiaryPropsSchema,\n  DiaryDefinition,\n  type DiaryProps,\n} from \"./domain/Diary\";\n\nexport {\n  ResearchReport,\n  type ResearchReportProps,\n  type Source as ResearchSource,\n  type ReportSection,\n} from \"./domain/research\";\n\n// Document Analysis Components (Vectorless Integration)\nexport {\n  DocumentIndex,\n  DocumentIndexPropsSchema,\n  DocumentIndexDefinition,\n  type DocumentIndexProps,\n} from \"./domain/DocumentIndex\";\n\nexport {\n  SourceCitation,\n  SourceCitationPropsSchema,\n  SourceCitationDefinition,\n  type SourceCitationProps,\n} from \"./domain/SourceCitation\";\n\n// ============================================================================\n// Visualization Components (formerly @onegenui/viz)\n// ============================================================================\n\nexport * from \"./visualization\";\n\n// ============================================================================\n// Component Registry\n// ============================================================================\n\nimport {\n  Card,\n  Grid,\n  Stack,\n  Divider,\n  Heading,\n  Text,\n  CodeBlock,\n  Document,\n  Badge,\n  Alert,\n  Empty,\n  BrowserAction,\n  Button,\n  TextField,\n  Select,\n  DatePicker,\n  Metric,\n  Table,\n  List,\n  Timeline,\n  SearchResults,\n  DriveFile,\n  DriveFileList,\n  Weather,\n  Audio,\n  Video,\n  Image,\n  Gallery,\n  // Definitions\n  CardDefinition,\n  GridDefinition,\n  StackDefinition,\n  DividerDefinition,\n  HeadingDefinition,\n  TextDefinition,\n  CodeBlockDefinition,\n  DocumentDefinition,\n  BadgeDefinition,\n  AlertDefinition,\n  EmptyDefinition,\n  BrowserActionDefinition,\n  ButtonDefinition,\n  TextFieldDefinition,\n  SelectDefinition,\n  DatePickerDefinition,\n  MetricDefinition,\n  TableDefinition,\n  ListDefinition,\n  TimelineDefinition,\n  SearchResultsDefinition,\n  DriveFileDefinition,\n  DriveFileListDefinition,\n  WeatherDefinition,\n  AudioDefinition,\n  VideoDefinition,\n  ImageDefinition,\n  GalleryDefinition,\n} from \"@onegenui/ui\";\n\nimport { Message } from \"./communication/Message\";\nimport { Email } from \"./communication/Email\";\nimport { MessageDefinition } from \"./communication/Message\";\nimport { EmailDefinition } from \"./communication/Email\";\n\n// Communication exports (these remained in components? check list_dir step 27)\n// Step 27 showed \"communication\" folder. So they are still here.\nexport {\n  Message,\n  MessagePropsSchema,\n  MessageDefinition,\n  type MessageProps,\n} from \"./communication/Message\";\nexport {\n  Email,\n  EmailPropsSchema,\n  EmailDefinition,\n  type EmailProps,\n} from \"./communication/Email\";\n\nimport {\n  CalendarAgenda,\n  CalendarAgendaDefinition,\n} from \"./domain/CalendarAgenda\";\nimport { Workout, WorkoutDefinition } from \"./domain/Workout\";\nimport { Nutrition, NutritionDefinition } from \"./domain/Nutrition\";\nimport { Flight, FlightDefinition } from \"./domain/Flight\";\nimport { Hotel, HotelDefinition } from \"./domain/Hotel\";\nimport { Trip, TripDefinition } from \"./domain/Trip\";\nimport { BookingForms, BookingFormsDefinition } from \"./domain/BookingForms\";\nimport { Kanban, KanbanDefinition } from \"./domain/Kanban\";\nimport { TodoList, TodoListDefinition } from \"./domain/TodoList\";\nimport {\n  RoutineScheduler,\n  RoutineSchedulerDefinition,\n} from \"./domain/RoutineScheduler\";\nimport {\n  SupplementTracker,\n  SupplementTrackerDefinition,\n} from \"./domain/SupplementTracker\";\nimport { Calendar, CalendarDefinition } from \"./domain/Calendar\";\nimport { Diary, DiaryDefinition } from \"./domain/Diary\";\nimport { ResearchReport } from \"./domain/research\";\nimport { ProfileCard } from \"./domain/social/profile-card\";\nimport { ActivityFeed } from \"./domain/feed/activity-feed\";\nimport { Pricing } from \"./domain/commerce/pricing\";\nimport { ArticleCard } from \"./domain/content/article-card\";\nimport { DocumentIndex, DocumentIndexDefinition } from \"./domain/DocumentIndex\";\nimport {\n  SourceCitation,\n  SourceCitationDefinition,\n} from \"./domain/SourceCitation\";\n\n// Visualization components\nimport {\n  Chart,\n  ChartDefinition,\n  StockChart,\n  StockChartDefinition,\n  Graph,\n  GraphDefinition,\n  MindMap,\n  MindMapDefinition,\n  Gantt,\n  GanttDefinition,\n} from \"./visualization\";\n\n/** Registry type for component lookup by name */\nexport type ComponentRegistry = Record<string, ComponentType<any>>;\n\n/**\n * Component registry - auto-generated from all domains.\n * Use with Renderer to render UI trees.\n */\nexport const componentRegistry: ComponentRegistry = {\n  Card,\n  Grid,\n  Stack,\n  Divider,\n  Heading,\n  Text,\n  CodeBlock,\n  Document,\n  Badge,\n  Alert,\n  Empty,\n  BrowserAction,\n  Button,\n  TextField,\n  Select,\n  DatePicker,\n  Metric,\n  Table,\n  List,\n  Timeline,\n\n  SearchResults,\n  DriveFile,\n  Weather,\n  Audio,\n  Video,\n  Image,\n  Gallery,\n\n  Message,\n  Email,\n  CalendarAgenda,\n  DriveFileList,\n  Workout,\n  Nutrition,\n  Flight,\n  Hotel,\n  Trip,\n  BookingForms,\n  Kanban,\n  ProfileCard,\n  ActivityFeed,\n  Pricing,\n  ArticleCard,\n  TodoList,\n  RoutineScheduler,\n  SupplementTracker,\n  Calendar,\n  Diary,\n  ResearchReport,\n  DocumentIndex,\n  SourceCitation,\n  // Visualization\n  Chart,\n  StockChart,\n  Graph,\n  MindMap,\n  Gantt,\n};\n\n/**\n * Component definitions - auto-generated from all domains.\n * Use with createCatalog() to build a catalog.\n */\nexport const componentDefinitions = {\n  Card: CardDefinition,\n  Grid: GridDefinition,\n  Stack: StackDefinition,\n  Divider: DividerDefinition,\n  Heading: HeadingDefinition,\n  Text: TextDefinition,\n  CodeBlock: CodeBlockDefinition,\n  Document: DocumentDefinition,\n  Badge: BadgeDefinition,\n  Alert: AlertDefinition,\n  Empty: EmptyDefinition,\n  BrowserAction: BrowserActionDefinition,\n  Button: ButtonDefinition,\n  TextField: TextFieldDefinition,\n  Select: SelectDefinition,\n  DatePicker: DatePickerDefinition,\n  Metric: MetricDefinition,\n  Table: TableDefinition,\n  List: ListDefinition,\n  Timeline: TimelineDefinition,\n\n  SearchResults: SearchResultsDefinition,\n  DriveFile: DriveFileDefinition,\n  Weather: WeatherDefinition,\n  Audio: AudioDefinition,\n  Video: VideoDefinition,\n  Image: ImageDefinition,\n  Gallery: GalleryDefinition,\n\n  Message: MessageDefinition,\n  Email: EmailDefinition,\n\n  CalendarAgenda: CalendarAgendaDefinition,\n  DriveFileList: DriveFileListDefinition,\n  Workout: WorkoutDefinition,\n  Nutrition: NutritionDefinition,\n  Flight: FlightDefinition,\n  Hotel: HotelDefinition,\n  Trip: TripDefinition,\n  BookingForms: BookingFormsDefinition,\n  Kanban: KanbanDefinition,\n  TodoList: TodoListDefinition,\n  RoutineScheduler: RoutineSchedulerDefinition,\n  SupplementTracker: SupplementTrackerDefinition,\n  Calendar: CalendarDefinition,\n  Diary: DiaryDefinition,\n  DocumentIndex: DocumentIndexDefinition,\n  SourceCitation: SourceCitationDefinition,\n  // Visualization\n  Chart: ChartDefinition,\n  StockChart: StockChartDefinition,\n  Graph: GraphDefinition,\n  MindMap: MindMapDefinition,\n  Gantt: GanttDefinition,\n};\n\n// ============================================================================\n// Helpers\n// ============================================================================\n\n/** Get list of all registered component names */\nexport const componentNames = Object.keys(componentRegistry);\n\n/** Check if a component is registered */\nexport function hasComponent(name: string): boolean {\n  return name in componentRegistry;\n}\n\n// ============================================================================\n// Document Components (Vectorless Integration)\n// ============================================================================\n\nexport * from \"./document/index.js\";\n\n// ============================================================================\n// Version\n// ============================================================================\n\nexport const VERSION = \"0.1.0\";\n","// Re-export from shared utils package\nexport { cn } from \"@onegenui/utils\";\n","// Re-export from shared utils package\nexport {\n  resolveArrayProp,\n  resolveValueProp,\n  resolveString,\n} from \"@onegenui/utils\";\n","/**\n * Shared formatting utilities for domain components\n * Following DRY principle - centralize common formatting logic\n */\n\n// Currency symbols map\nconst CURRENCY_SYMBOLS: Record<string, string> = {\n  EUR: \"€\",\n  USD: \"$\",\n  GBP: \"£\",\n  JPY: \"¥\",\n  CHF: \"CHF\",\n  CAD: \"C$\",\n  AUD: \"A$\",\n};\n\n/**\n * Format a monetary amount with currency symbol\n */\nexport function formatCurrency(amount: number, currency: string): string {\n  const symbol = CURRENCY_SYMBOLS[currency] || currency;\n  return `${symbol}${amount.toLocaleString()}`;\n}\n\n/**\n * Format duration from seconds to human-readable string\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n\n  if (hours > 0) {\n    return minutes > 0 ? `${hours}h ${minutes}m` : `${hours}h`;\n  }\n  return `${minutes}m`;\n}\n\n/**\n * Format duration from minutes to human-readable string\n */\nexport function formatDurationMinutes(minutes: number): string {\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n\n  if (hours > 0) {\n    return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n  }\n  return `${mins}m`;\n}\n\n/**\n * Format time in MM:SS format\n */\nexport function formatTimeMMSS(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Format a date to localized short format\n */\nexport function formatDateShort(\n  date: string | Date,\n  options?: Intl.DateTimeFormatOptions,\n): string {\n  const d = typeof date === \"string\" ? new Date(date) : date;\n  return d.toLocaleDateString(undefined, {\n    month: \"short\",\n    day: \"numeric\",\n    ...options,\n  });\n}\n\n/**\n * Format a date range\n */\nexport function formatDateRange(\n  start: string | Date,\n  end: string | Date,\n): string {\n  return `${formatDateShort(start)} - ${formatDateShort(end)}`;\n}\n\n/**\n * Calculate calories from macros\n */\nexport function calculateCalories(\n  protein: number,\n  carbs: number,\n  fats: number,\n): number {\n  return Math.round(protein * 4 + carbs * 4 + fats * 9);\n}\n\n/**\n * Format a number with K/M suffix for large numbers\n */\nexport function formatCompactNumber(num: number): string {\n  if (num >= 1_000_000) {\n    return `${(num / 1_000_000).toFixed(1)}M`;\n  }\n  if (num >= 1_000) {\n    return `${(num / 1_000).toFixed(1)}K`;\n  }\n  return num.toString();\n}\n\n/**\n * Truncate text with ellipsis\n */\nexport function truncate(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return `${text.slice(0, maxLength - 3)}...`;\n}\n","/**\n * Shared UI primitives for domain components\n * Following DRY principle - reusable sub-components\n */\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"./cn\";\n\n// --- Status Badge ---\n\nexport type StatusVariant =\n  | \"success\"\n  | \"warning\"\n  | \"error\"\n  | \"info\"\n  | \"neutral\";\n\nconst STATUS_STYLES: Record<\n  StatusVariant,\n  { bg: string; text: string; border: string }\n> = {\n  success: {\n    bg: \"bg-emerald-500/10\",\n    text: \"text-emerald-400\",\n    border: \"border-emerald-500/20\",\n  },\n  warning: {\n    bg: \"bg-amber-500/10\",\n    text: \"text-amber-400\",\n    border: \"border-amber-500/20\",\n  },\n  error: {\n    bg: \"bg-rose-500/10\",\n    text: \"text-rose-400\",\n    border: \"border-rose-500/20\",\n  },\n  info: {\n    bg: \"bg-blue-500/10\",\n    text: \"text-blue-400\",\n    border: \"border-blue-500/20\",\n  },\n  neutral: {\n    bg: \"bg-zinc-500/10\",\n    text: \"text-zinc-400\",\n    border: \"border-zinc-500/20\",\n  },\n};\n\ninterface StatusBadgeProps {\n  label: string;\n  variant?: StatusVariant;\n  pulse?: boolean;\n  className?: string;\n}\n\nexport const StatusBadge = memo(function StatusBadge({\n  label,\n  variant = \"neutral\",\n  pulse = false,\n  className,\n}: StatusBadgeProps) {\n  const styles = STATUS_STYLES[variant];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border\",\n        styles.bg,\n        styles.text,\n        styles.border,\n        pulse && \"animate-pulse\",\n        className,\n      )}\n    >\n      <div className=\"w-1.5 h-1.5 rounded-full bg-current\" />\n      {label}\n    </motion.div>\n  );\n});\n\n// --- Progress Bar ---\n\ninterface ProgressBarProps {\n  value: number;\n  max: number;\n  color?: string;\n  showLabel?: boolean;\n  label?: string;\n  className?: string;\n}\n\nexport const ProgressBar = memo(function ProgressBar({\n  value,\n  max,\n  color = \"bg-blue-500\",\n  showLabel = false,\n  label,\n  className,\n}: ProgressBarProps) {\n  const percentage = Math.min(100, Math.max(0, (value / max) * 100));\n\n  return (\n    <div className={cn(\"flex flex-col gap-1.5\", className)}>\n      {(showLabel || label) && (\n        <div className=\"text-[10px] uppercase font-bold text-muted-foreground tracking-wider flex justify-between\">\n          <span>{label}</span>\n          <span className=\"font-mono text-white/50\">{Math.round(value)}</span>\n        </div>\n      )}\n      <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\n          className={cn(\"h-full rounded-full\", color)}\n        />\n      </div>\n    </div>\n  );\n});\n\n// --- Empty State ---\n\ninterface EmptyStateProps {\n  icon?: React.ReactNode;\n  message?: string;\n  title?: string;\n  description?: string;\n  className?: string;\n}\n\nexport const EmptyState = memo(function EmptyState({\n  icon,\n  message,\n  title,\n  description,\n  className,\n}: EmptyStateProps) {\n  const hasDetails = Boolean(title || description);\n\n  return (\n    <div\n      className={cn(\n        \"py-20 flex flex-col items-center justify-center border border-dashed border-white/10 rounded-2xl bg-zinc-900/20 text-muted-foreground\",\n        className,\n      )}\n    >\n      {icon && (\n        <div className={cn(\"mb-4\", hasDetails ? \"opacity-60\" : \"opacity-20\")}>\n          {icon}\n        </div>\n      )}\n      {hasDetails ? (\n        <div className=\"flex flex-col items-center text-center gap-2\">\n          {title && (\n            <h3 className=\"text-base font-semibold text-foreground\">{title}</h3>\n          )}\n          {description && (\n            <p className=\"text-sm text-muted-foreground max-w-xs\">\n              {description}\n            </p>\n          )}\n        </div>\n      ) : (\n        message && (\n          <p className=\"font-mono text-xs uppercase tracking-widest opacity-50\">\n            {message}\n          </p>\n        )\n      )}\n    </div>\n  );\n});\n\n// --- Section Header ---\n\ninterface SectionHeaderProps {\n  title: string;\n  icon?: React.ReactNode;\n  action?: React.ReactNode;\n  className?: string;\n}\n\nexport const SectionHeader = memo(function SectionHeader({\n  title,\n  icon,\n  action,\n  className,\n}: SectionHeaderProps) {\n  return (\n    <div className={cn(\"flex items-center justify-between\", className)}>\n      <h3 className=\"m-0 text-xl font-bold tracking-tight flex items-center gap-2\">\n        {icon}\n        {title}\n      </h3>\n      {action}\n    </div>\n  );\n});\n\n// --- Card Container ---\n\ninterface CardContainerProps {\n  children: React.ReactNode;\n  highlighted?: boolean;\n  className?: string;\n}\n\nexport const CardContainer = memo(function CardContainer({\n  children,\n  highlighted = false,\n  className,\n}: CardContainerProps) {\n  return (\n    <div\n      className={cn(\n        \"relative rounded-2xl border backdrop-blur-xl overflow-hidden transition-all duration-300 isolate\",\n        highlighted\n          ? \"bg-zinc-900/80 border-white/20 shadow-2xl\"\n          : \"bg-zinc-900/40 border-white/10 hover:bg-zinc-900/60 hover:border-white/15\",\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n});\n\n// --- Accent Bar ---\n\ninterface AccentBarProps {\n  active?: boolean;\n  gradient?: string;\n  className?: string;\n}\n\nexport const AccentBar = memo(function AccentBar({\n  active = false,\n  gradient = \"from-blue-500 to-purple-500\",\n  className,\n}: AccentBarProps) {\n  return (\n    <div\n      className={cn(\n        \"w-full h-1 absolute top-0 left-0 right-0 z-10 transition-colors\",\n        active ? `bg-gradient-to-r ${gradient}` : \"bg-white/5\",\n        className,\n      )}\n    />\n  );\n});\n\n// --- Perforated Divider (ticket style) ---\n\nexport const PerforatedDivider = memo(function PerforatedDivider({\n  className,\n}: {\n  className?: string;\n}) {\n  return (\n    <div className={cn(\"relative h-px w-full\", className)}>\n      <div className=\"absolute inset-0 border-t border-dashed border-white/10\" />\n      <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-r border-white/10\" />\n      <div className=\"absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-l border-white/10\" />\n    </div>\n  );\n});\n\n// --- Info Pill ---\n\ninterface InfoPillProps {\n  icon?: React.ReactNode;\n  children: React.ReactNode;\n  variant?: \"default\" | \"primary\" | \"secondary\";\n  className?: string;\n}\n\nexport const InfoPill = memo(function InfoPill({\n  icon,\n  children,\n  variant = \"default\",\n  className,\n}: InfoPillProps) {\n  const variantStyles = {\n    default: \"bg-white/5 text-white/60\",\n    primary: \"bg-sky-500/10 text-sky-400\",\n    secondary: \"bg-purple-500/10 text-purple-400\",\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-medium\",\n        variantStyles[variant],\n        className,\n      )}\n    >\n      {icon}\n      {children}\n    </div>\n  );\n});\n\n// --- Error State ---\n\ninterface ErrorStateProps {\n  title?: string;\n  message: string;\n  onRetry?: () => void;\n  className?: string;\n}\n\nexport const ErrorState = memo(function ErrorState({\n  title = \"Something went wrong\",\n  message,\n  onRetry,\n  className,\n}: ErrorStateProps) {\n  return (\n    <div\n      className={cn(\n        \"py-12 flex flex-col items-center justify-center border border-rose-500/20 rounded-2xl bg-rose-950/20 text-center\",\n        className,\n      )}\n    >\n      <div className=\"text-rose-500 mb-3\">\n        <svg\n          className=\"w-10 h-10\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={1.5}\n            d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n          />\n        </svg>\n      </div>\n      <h4 className=\"text-sm font-semibold text-rose-400 mb-1\">{title}</h4>\n      <p className=\"text-xs text-rose-400/60 max-w-xs\">{message}</p>\n      {onRetry && (\n        <button\n          onClick={onRetry}\n          className=\"mt-4 px-4 py-1.5 text-xs font-medium bg-rose-500/20 hover:bg-rose-500/30 text-rose-400 rounded-lg transition-colors\"\n        >\n          Retry\n        </button>\n      )}\n    </div>\n  );\n});\n\n// --- Skeleton Components ---\n\ninterface SkeletonProps {\n  className?: string;\n}\n\nexport const Skeleton = memo(function Skeleton({ className }: SkeletonProps) {\n  return <div className={cn(\"animate-pulse bg-white/5 rounded\", className)} />;\n});\n\nexport const SkeletonText = memo(function SkeletonText({\n  lines = 1,\n  className,\n}: {\n  lines?: number;\n  className?: string;\n}) {\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      {Array.from({ length: lines }).map((_, i) => (\n        <Skeleton\n          key={i}\n          className={cn(\n            \"h-3 rounded\",\n            i === lines - 1 && lines > 1 ? \"w-3/4\" : \"w-full\",\n          )}\n        />\n      ))}\n    </div>\n  );\n});\n\nexport const SkeletonCard = memo(function SkeletonCard({\n  className,\n}: SkeletonProps) {\n  return (\n    <div\n      className={cn(\n        \"p-4 rounded-xl border border-white/5 bg-zinc-900/40 space-y-3\",\n        className,\n      )}\n    >\n      <Skeleton className=\"h-4 w-1/3\" />\n      <SkeletonText lines={2} />\n      <div className=\"flex gap-2 pt-2\">\n        <Skeleton className=\"h-6 w-16 rounded-full\" />\n        <Skeleton className=\"h-6 w-20 rounded-full\" />\n      </div>\n    </div>\n  );\n});\n\n// --- Loading State ---\n\ninterface LoadingStateProps {\n  message?: string;\n  className?: string;\n}\n\nexport const LoadingState = memo(function LoadingState({\n  message = \"Loading...\",\n  className,\n}: LoadingStateProps) {\n  return (\n    <div\n      className={cn(\n        \"py-16 flex flex-col items-center justify-center text-muted-foreground\",\n        className,\n      )}\n    >\n      <div className=\"w-8 h-8 border-2 border-white/10 border-t-white/40 rounded-full animate-spin mb-4\" />\n      <p className=\"font-mono text-xs uppercase tracking-widest opacity-50\">\n        {message}\n      </p>\n    </div>\n  );\n});\n\n// --- Loading Indicator ---\n\ninterface LoadingIndicatorProps {\n  message?: string;\n  className?: string;\n}\n\nexport const LoadingIndicator = memo(function LoadingIndicator({\n  message,\n  className,\n}: LoadingIndicatorProps) {\n  const label = message ?? \"Loading\";\n\n  return (\n    <div\n      role=\"status\"\n      aria-live=\"polite\"\n      aria-label={label}\n      className={cn(\"flex items-center gap-2 text-muted-foreground\", className)}\n    >\n      <div className=\"flex items-center gap-1\">\n        {[0, 1, 2].map((i) => (\n          <motion.span\n            key={i}\n            className=\"w-2 h-2 rounded-full bg-current\"\n            animate={{ opacity: [0.2, 1, 0.2], y: [0, -4, 0] }}\n            transition={{\n              duration: 0.9,\n              repeat: Infinity,\n              delay: i * 0.15,\n              ease: \"easeInOut\",\n            }}\n          />\n        ))}\n      </div>\n      {message && (\n        <span className=\"text-xs uppercase font-mono tracking-widest opacity-60\">\n          {message}\n        </span>\n      )}\n    </div>\n  );\n});\n","/**\n * Error boundary wrapper for domain components\n * Provides consistent error handling across all components\n */\n\nimport { Component, type ReactNode } from \"react\";\nimport { ErrorState } from \"./shared-components\";\n\ninterface Props {\n  children: ReactNode;\n  componentName: string;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ComponentErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(`[${this.props.componentName}] Error:`, error, errorInfo);\n    this.props.onError?.(error, errorInfo);\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <ErrorState\n          title={`${this.props.componentName} Error`}\n          message={\n            this.state.error?.message ||\n            \"An unexpected error occurred while rendering this component.\"\n          }\n          onRetry={this.handleRetry}\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * HOC to wrap a component with error boundary\n */\nexport function withErrorBoundary<P extends object>(\n  WrappedComponent: React.ComponentType<P>,\n  componentName: string,\n) {\n  const displayName =\n    WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n\n  const WithErrorBoundary = (props: P) => (\n    <ComponentErrorBoundary componentName={componentName}>\n      <WrappedComponent {...props} />\n    </ComponentErrorBoundary>\n  );\n\n  WithErrorBoundary.displayName = `WithErrorBoundary(${displayName})`;\n\n  return WithErrorBoundary;\n}\n","/**\n * Shared hooks for domain components\n * Extracted patterns for streaming, selection, and error handling\n */\n\nimport { useMemo, useCallback, useState } from \"react\";\n\n// --- useComponentStreaming ---\n\ninterface StreamingState<T> {\n  data: T;\n  isComplete: boolean;\n  hasPartialData: boolean;\n}\n\ninterface UseComponentStreamingOptions<T> {\n  initialData: T | undefined | null;\n  defaultValue: T;\n  isValidData?: (data: T) => boolean;\n}\n\n/**\n * Hook for handling streaming data in components\n * Provides safe defaults and streaming state detection\n */\nexport function useComponentStreaming<T>({\n  initialData,\n  defaultValue,\n  isValidData,\n}: UseComponentStreamingOptions<T>): StreamingState<T> {\n  const data = useMemo(() => {\n    if (initialData === undefined || initialData === null) {\n      return defaultValue;\n    }\n    return initialData;\n  }, [initialData, defaultValue]);\n\n  const hasPartialData = useMemo(() => {\n    if (initialData === undefined || initialData === null) {\n      return false;\n    }\n    if (isValidData) {\n      return !isValidData(initialData);\n    }\n    // Default: arrays with some items are partial\n    if (Array.isArray(initialData)) {\n      return initialData.length > 0;\n    }\n    return true;\n  }, [initialData, isValidData]);\n\n  const isComplete = useMemo(() => {\n    if (initialData === undefined || initialData === null) {\n      return false;\n    }\n    if (isValidData) {\n      return isValidData(initialData);\n    }\n    return true;\n  }, [initialData, isValidData]);\n\n  return { data, isComplete, hasPartialData };\n}\n\n// --- useComponentSelection ---\n\ninterface SelectionItem {\n  id: string;\n  [key: string]: unknown;\n}\n\ninterface UseComponentSelectionOptions<T extends SelectionItem> {\n  items: T[];\n  elementKey: string;\n  onSelect?: (item: T) => void;\n}\n\n/**\n * Hook for handling item selection in components\n * Integrates with the global selection context\n */\nexport function useComponentSelection<T extends SelectionItem>({\n  items,\n  elementKey,\n  onSelect,\n}: UseComponentSelectionOptions<T>) {\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n\n  const selectedItem = useMemo(() => {\n    if (!selectedId) return null;\n    return items.find((item) => item.id === selectedId) || null;\n  }, [items, selectedId]);\n\n  const handleSelect = useCallback(\n    (item: T) => {\n      setSelectedId(item.id);\n      onSelect?.(item);\n    },\n    [onSelect],\n  );\n\n  const clearSelection = useCallback(() => {\n    setSelectedId(null);\n  }, []);\n\n  const getSelectableProps = useCallback(\n    (item: T) => ({\n      \"data-selectable-item\": true,\n      \"data-element-key\": elementKey,\n      \"data-item-id\": item.id,\n      onClick: () => handleSelect(item),\n    }),\n    [elementKey, handleSelect],\n  );\n\n  return {\n    selectedId,\n    selectedItem,\n    handleSelect,\n    clearSelection,\n    getSelectableProps,\n  };\n}\n\n// --- useComponentError ---\n\ninterface ComponentError {\n  type: \"validation\" | \"runtime\" | \"data\";\n  message: string;\n  details?: unknown;\n}\n\ninterface UseComponentErrorOptions {\n  componentName: string;\n  onError?: (error: ComponentError) => void;\n}\n\n/**\n * Hook for consistent error handling in components\n */\nexport function useComponentError({\n  componentName,\n  onError,\n}: UseComponentErrorOptions) {\n  const [error, setError] = useState<ComponentError | null>(null);\n\n  const setValidationError = useCallback(\n    (message: string, details?: unknown) => {\n      const err: ComponentError = {\n        type: \"validation\",\n        message,\n        details,\n      };\n      console.warn(`[${componentName}] Validation error:`, message, details);\n      setError(err);\n      onError?.(err);\n    },\n    [componentName, onError],\n  );\n\n  const setRuntimeError = useCallback(\n    (message: string, details?: unknown) => {\n      const err: ComponentError = {\n        type: \"runtime\",\n        message,\n        details,\n      };\n      console.error(`[${componentName}] Runtime error:`, message, details);\n      setError(err);\n      onError?.(err);\n    },\n    [componentName, onError],\n  );\n\n  const setDataError = useCallback(\n    (message: string, details?: unknown) => {\n      const err: ComponentError = {\n        type: \"data\",\n        message,\n        details,\n      };\n      console.warn(`[${componentName}] Data error:`, message, details);\n      setError(err);\n      onError?.(err);\n    },\n    [componentName, onError],\n  );\n\n  const clearError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  return {\n    error,\n    setValidationError,\n    setRuntimeError,\n    setDataError,\n    clearError,\n    hasError: error !== null,\n  };\n}\n\n// --- useLockMode ---\n\n/**\n * Hook for handling lock/edit mode in components\n */\nexport function useLockMode(lock: boolean | undefined) {\n  const isLocked = lock ?? false;\n\n  const guardedAction = useCallback(\n    <T extends (...args: unknown[]) => unknown>(action: T) => {\n      return ((...args: Parameters<T>) => {\n        if (isLocked) return;\n        return action(...args);\n      }) as T;\n    },\n    [isLocked],\n  );\n\n  return {\n    isLocked,\n    guardedAction,\n  };\n}\n","/**\n * Re-export from shared schemas package\n */\nexport {\n  chartDatumSchema,\n  listItemSchema,\n  timelineItemSchema,\n  toDoItemSchema,\n  tableRowSchema,\n  mindMapNodeSchema,\n  graphNodeSchema,\n  graphEdgeSchema,\n  kanbanItemSchema,\n  kanbanColumnSchema,\n  ganttTaskSchema,\n  emailItemSchema,\n  workoutSetSchema,\n  exerciseSchema,\n  mealItemSchema,\n  mealSchema,\n  messageItemSchema,\n  participantSchema,\n  type WorkoutSet,\n  type ExerciseItem,\n} from \"@onegenui/schemas\";\n","\"use client\";\n\nimport { memo, useState, useMemo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport {\n  type CalendarEventItem,\n  formatDateHeader,\n  groupEventsByDate,\n  EventCard,\n  EventDetailView,\n} from \"./components\";\n\nexport const CalendarAgenda = memo(function CalendarAgenda({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    events: initialEvents,\n    selectedDate,\n  } = element.props as {\n    title?: string | null;\n    events?: CalendarEventItem[] | null;\n    selectedDate?: string;\n  };\n\n  const [selectedEvent, setSelectedEvent] = useState<CalendarEventItem | null>(\n    null,\n  );\n  const events = initialEvents || [];\n  const groupedEvents = useMemo(() => groupEventsByDate(events), [events]);\n  const currentDate = selectedDate ? new Date(selectedDate) : new Date();\n\n  return (\n    <div className=\"flex flex-col h-[400px] sm:h-[500px] lg:h-[600px] w-full bg-zinc-950 border border-white/10 rounded-2xl sm:rounded-3xl shadow-2xl relative overflow-hidden isolate\">\n      <div className=\"absolute top-0 right-0 w-[250px] sm:w-[300px] lg:w-[400px] h-[250px] sm:h-[300px] lg:h-[400px] bg-indigo-600/5 rounded-full blur-[60px] sm:blur-[80px] lg:blur-[100px] pointer-events-none -z-10\" />\n      <div className=\"absolute bottom-0 left-0 w-[200px] sm:w-[250px] lg:w-[300px] h-[200px] sm:h-[250px] lg:h-[300px] bg-purple-600/5 rounded-full blur-[50px] sm:blur-[70px] lg:blur-[90px] pointer-events-none -z-10\" />\n\n      <AnimatePresence mode=\"wait\">\n        {selectedEvent ? (\n          <EventDetailView\n            key=\"detail\"\n            event={selectedEvent}\n            onBack={() => setSelectedEvent(null)}\n          />\n        ) : (\n          <motion.div\n            key=\"list\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"flex flex-col h-full\"\n          >\n            <div className=\"p-4 sm:p-5 lg:p-6 pb-2\">\n              <div className=\"flex items-center justify-between mb-4 sm:mb-5 lg:mb-6\">\n                <h2 className=\"text-xl sm:text-2xl lg:text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50\">\n                  {title || \"Agenda\"}\n                </h2>\n                <div className=\"w-8 h-8 sm:w-9 sm:h-9 lg:w-10 lg:h-10 rounded-full bg-white/5 border border-white/5 flex items-center justify-center\">\n                  <CalendarIcon className=\"text-white/60 w-4 h-4 sm:w-5 sm:h-5\" />\n                </div>\n              </div>\n\n              <div className=\"text-xs sm:text-sm font-bold text-indigo-400 uppercase tracking-widest pl-1 mb-1.5 sm:mb-2\">\n                {currentDate.toLocaleDateString(undefined, {\n                  month: \"long\",\n                  year: \"numeric\",\n                })}\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto px-3 sm:px-4 pb-4 sm:pb-6 custom-scrollbar touch-pan-y\">\n              {events.length === 0 ? (\n                <EmptyState\n                  icon={<CalendarIcon className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n                  message=\"No upcoming events\"\n                />\n              ) : (\n                <div className=\"space-y-6 sm:space-y-8\">\n                  {Array.from(groupedEvents.entries()).map(\n                    ([dateStr, dayEvents]) => {\n                      const { label, sub } = formatDateHeader(\n                        new Date(dateStr),\n                      );\n                      return (\n                        <div key={dateStr} className=\"relative pl-3 sm:pl-4\">\n                          <div className=\"flex items-baseline gap-2 sm:gap-3 mb-3 sm:mb-4 sticky top-0 bg-zinc-950/80 backdrop-blur-xl py-1.5 sm:py-2 z-10 -ml-3 sm:-ml-4 pl-3 sm:pl-4 border-b border-white/5 w-[calc(100%+1.5rem)] sm:w-[calc(100%+2rem)]\">\n                            <span className=\"text-lg sm:text-xl font-bold text-white\">\n                              {label}\n                            </span>\n                            <span className=\"text-xs sm:text-sm font-medium text-white/40\">\n                              {sub}\n                            </span>\n                          </div>\n\n                          <div className=\"absolute left-0 top-8 sm:top-10 bottom-0 w-px bg-white/10\" />\n\n                          <div className=\"space-y-2 sm:space-y-3\">\n                            {dayEvents.map((event) => (\n                              <EventCard\n                                key={event.id}\n                                event={event}\n                                onSelect={setSelectedEvent}\n                                elementKey={element.key}\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      );\n                    },\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      {children}\n    </div>\n  );\n});\n","import type { StatusVariant } from \"../../../utils/shared-components\";\n\nexport const RESPONSE_TO_VARIANT: Record<string, StatusVariant> = {\n  accepted: \"success\",\n  declined: \"error\",\n  tentative: \"warning\",\n  needsAction: \"neutral\",\n};\n\nexport interface CalendarEventItem {\n  id: string;\n  title: string;\n  description?: string | null;\n  location?: string | null;\n  start: string;\n  end?: string | null;\n  allDay?: boolean;\n  attendees?: Array<{\n    email: string;\n    name?: string;\n    responseStatus?: string;\n  }> | null;\n  meetingLink?: string | null;\n  color?: string | null;\n}\n\nexport function formatEventTime(\n  start: string,\n  end?: string | null,\n  allDay?: boolean,\n): string {\n  if (allDay) return \"All day\";\n  try {\n    const startDate = new Date(start);\n    const startTime = startDate.toLocaleTimeString(undefined, {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n    if (end) {\n      const endDate = new Date(end);\n      const endTime = endDate.toLocaleTimeString(undefined, {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n      return `${startTime} - ${endTime}`;\n    }\n    return startTime;\n  } catch {\n    return start;\n  }\n}\n\nexport function formatDateHeader(date: Date): { label: string; sub: string } {\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n\n  const isToday = date.toDateString() === today.toDateString();\n  const isTomorrow = date.toDateString() === tomorrow.toDateString();\n\n  return {\n    label: isToday\n      ? \"Today\"\n      : isTomorrow\n        ? \"Tomorrow\"\n        : date.toLocaleDateString(undefined, { weekday: \"long\" }),\n    sub: date.toLocaleDateString(undefined, { day: \"numeric\", month: \"short\" }),\n  };\n}\n\nexport function groupEventsByDate(\n  events: CalendarEventItem[],\n): Map<string, CalendarEventItem[]> {\n  const grouped = new Map<string, CalendarEventItem[]>();\n  const sorted = [...events].sort(\n    (a, b) => new Date(a.start).getTime() - new Date(b.start).getTime(),\n  );\n\n  for (const event of sorted) {\n    const date = new Date(event.start).toDateString();\n    const existing = grouped.get(date) || [];\n    existing.push(event);\n    grouped.set(date, existing);\n  }\n  return grouped;\n}\n","import { memo } from \"react\";\nimport { MapPin, Video, ChevronRight } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport type { CalendarEventItem } from \"./utils\";\n\ninterface EventCardProps {\n  event: CalendarEventItem;\n  onSelect: (e: CalendarEventItem) => void;\n  elementKey: string;\n}\n\nexport const EventCard = memo(function EventCard({\n  event,\n  onSelect,\n  elementKey,\n}: EventCardProps) {\n  const eventColor = event.color || \"var(--primary)\";\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      whileHover={{ scale: 1.01, x: 4 }}\n      onClick={() => onSelect(event)}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={event.id}\n      className=\"group relative pl-4 pr-4 py-4 rounded-2xl bg-zinc-900/40 hover:bg-zinc-900/60 border border-white/5 hover:border-white/10 cursor-pointer transition-all mb-3 overflow-hidden\"\n      style={{ \"--accent\": eventColor } as React.CSSProperties}\n    >\n      <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-[var(--accent)]\" />\n      <div className=\"absolute inset-0 bg-gradient-to-r from-[var(--accent)] to-transparent opacity-0 group-hover:opacity-10 transition-opacity duration-300 pointer-events-none\" />\n\n      <div className=\"flex items-start justify-between gap-4 relative z-10\">\n        <div className=\"flex flex-col gap-1 min-w-[70px]\">\n          <span className=\"text-xs font-bold text-white/50 font-mono\">\n            {new Date(event.start).toLocaleTimeString(undefined, {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              hour12: false,\n            })}\n          </span>\n          {event.end && (\n            <span className=\"text-[10px] font-medium text-white/30 font-mono\">\n              {new Date(event.end).toLocaleTimeString(undefined, {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: false,\n              })}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"text-base font-bold text-foreground leading-tight mb-1 group-hover:text-white transition-colors\">\n            {event.title}\n          </h4>\n          {event.location && (\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1\">\n              <MapPin size={10} className=\"text-white/40\" />\n              <span className=\"truncate\">{event.location}</span>\n            </div>\n          )}\n          {event.meetingLink && (\n            <div className=\"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-[var(--accent)]/10 text-[var(--accent)] text-[10px] font-bold border border-[var(--accent)]/20 mt-1\">\n              <Video size={10} /> Video Call\n            </div>\n          )}\n        </div>\n\n        <ChevronRight\n          size={16}\n          className=\"text-white/20 group-hover:text-white/60 self-center\"\n        />\n      </div>\n    </motion.div>\n  );\n});\n","import { memo } from \"react\";\nimport {\n  Calendar as CalendarIcon,\n  Clock,\n  MapPin,\n  Video,\n  ArrowLeft,\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport type { CalendarEventItem } from \"./utils\";\nimport { formatEventTime, RESPONSE_TO_VARIANT } from \"./utils\";\n\ninterface EventDetailViewProps {\n  event: CalendarEventItem;\n  onBack: () => void;\n}\n\nexport const EventDetailView = memo(function EventDetailView({\n  event,\n  onBack,\n}: EventDetailViewProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 20 }}\n      className=\"flex-1 overflow-auto flex flex-col h-full bg-zinc-950/50\"\n    >\n      <div className=\"p-4 border-b border-white/10 flex items-center gap-2\">\n        <button\n          onClick={onBack}\n          className=\"p-2 rounded-full hover:bg-white/10 text-white/70 hover:text-white transition-colors\"\n        >\n          <ArrowLeft size={20} />\n        </button>\n        <span className=\"text-sm font-bold text-white/40 uppercase tracking-widest\">\n          Event Details\n        </span>\n      </div>\n\n      <div className=\"p-6 md:p-8\">\n        <div className=\"flex gap-5 mb-8\">\n          <div\n            className=\"w-1.5 rounded-full shadow-[0_0_15px_var(--accent)]\"\n            style={\n              {\n                backgroundColor: event.color || \"var(--primary)\",\n                \"--accent\": event.color || \"var(--primary)\",\n              } as React.CSSProperties\n            }\n          />\n          <div>\n            <h1 className=\"text-3xl font-black text-white leading-tight mb-2\">\n              {event.title}\n            </h1>\n            <div className=\"flex items-center gap-2 text-lg text-white/60\">\n              <CalendarIcon size={18} />\n              {new Date(event.start).toLocaleDateString(undefined, {\n                weekday: \"long\",\n                month: \"long\",\n                day: \"numeric\",\n              })}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div className=\"bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center\">\n                <Clock size={20} />\n              </div>\n              <div>\n                <div className=\"text-xs font-bold text-white/40 uppercase\">\n                  Time\n                </div>\n                <div className=\"font-semibold text-white\">\n                  {formatEventTime(event.start, event.end, event.allDay)}\n                </div>\n              </div>\n            </div>\n\n            {event.location && (\n              <div className=\"bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center\">\n                  <MapPin size={20} />\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-white/40 uppercase\">\n                    Location\n                  </div>\n                  <div className=\"font-semibold text-white\">\n                    {event.location}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {event.meetingLink && (\n            <a\n              href={event.meetingLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"flex items-center justify-center gap-2 w-full p-4 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition-all hover:scale-[1.02] shadow-lg shadow-indigo-600/20\"\n            >\n              <Video size={18} /> Join Meeting\n            </a>\n          )}\n\n          {event.description && (\n            <div>\n              <div className=\"text-sm font-bold text-white/50 mb-3 uppercase tracking-wider\">\n                About\n              </div>\n              <div className=\"bg-white/5 border border-white/5 rounded-2xl p-5 text-white/80 leading-relaxed whitespace-pre-wrap\">\n                {event.description}\n              </div>\n            </div>\n          )}\n\n          {event.attendees && event.attendees.length > 0 && (\n            <div>\n              <div className=\"text-sm font-bold text-white/50 mb-3 uppercase tracking-wider\">\n                Attendees\n              </div>\n              <div className=\"flex flex-col gap-2\">\n                {event.attendees.map((attendee, i) => (\n                  <div\n                    key={i}\n                    className=\"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-zinc-700 to-zinc-800 flex items-center justify-center text-xs font-bold text-white border border-white/10\">\n                      {(attendee.name || attendee.email)\n                        .charAt(0)\n                        .toUpperCase()}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"text-sm font-bold text-white\">\n                        {attendee.name || attendee.email}\n                      </div>\n                      {attendee.name && (\n                        <div className=\"text-xs text-white/40\">\n                          {attendee.email}\n                        </div>\n                      )}\n                    </div>\n                    {attendee.responseStatus && (\n                      <StatusBadge\n                        label={attendee.responseStatus}\n                        variant={\n                          RESPONSE_TO_VARIANT[attendee.responseStatus] ||\n                          \"neutral\"\n                        }\n                      />\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n","import { z } from \"zod\";\n\nexport const CalendarAgendaSchema = z.object({\n  title: z\n    .string()\n    .optional()\n    .nullable()\n    .describe(\"Title for the calendar agenda\"),\n  description: z\n    .string()\n    .optional()\n    .nullable()\n    .describe(\"Description or subtitle\"),\n  view: z\n    .enum([\"day\", \"week\", \"agenda\"])\n    .optional()\n    .default(\"agenda\")\n    .describe(\"View mode: day, week, or agenda (list)\"),\n  selectedDate: z\n    .string()\n    .optional()\n    .describe(\"Selected date in ISO 8601 format\"),\n  events: z\n    .array(\n      z.object({\n        id: z.string().describe(\"Unique event identifier\"),\n        title: z.string().describe(\"Event title\"),\n        description: z\n          .string()\n          .optional()\n          .nullable()\n          .describe(\"Event description\"),\n        location: z.string().optional().nullable().describe(\"Event location\"),\n        start: z.string().describe(\"Start date/time in ISO 8601 format\"),\n        end: z\n          .string()\n          .optional()\n          .nullable()\n          .describe(\"End date/time in ISO 8601 format\"),\n        allDay: z\n          .boolean()\n          .optional()\n          .describe(\"Whether this is an all-day event\"),\n        attendees: z\n          .array(\n            z.object({\n              email: z.string().describe(\"Attendee email\"),\n              name: z.string().optional().describe(\"Attendee display name\"),\n              responseStatus: z\n                .enum([\"accepted\", \"declined\", \"tentative\", \"needsAction\"])\n                .optional()\n                .describe(\"RSVP status\"),\n            }),\n          )\n          .optional()\n          .nullable()\n          .describe(\"List of event attendees\"),\n        meetingLink: z\n          .string()\n          .optional()\n          .nullable()\n          .describe(\"Video meeting URL (Google Meet, Zoom, etc.)\"),\n        color: z\n          .string()\n          .optional()\n          .nullable()\n          .describe(\"Event color (hex code)\"),\n      }),\n    )\n    .optional()\n    .nullable()\n    .describe(\"List of calendar events to display\"),\n});\n\nexport type CalendarAgendaProps = z.infer<typeof CalendarAgendaSchema>;\n\n/**\n * CalendarAgenda component definition for catalog registration\n */\nexport const CalendarAgendaDefinition = {\n  name: \"CalendarAgenda\" as const,\n  props: CalendarAgendaSchema,\n  description:\n    \"Displays a list of Google Calendar events with day/week/agenda views and event details.\",\n  hasChildren: false,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { Lock, Unlock, Activity, BicepsFlexed } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { WorkoutProps } from \"./schema\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { SessionTimer } from \"./components/session-timer\";\nimport {\n  ExerciseItemCard,\n  SupersetGroup,\n} from \"./components/exercise-item-card\";\nimport { getWorkoutAdapter, getWorkoutStateAdapter, ensureSeriesGeneratedDeep } from \"./adapters\";\nimport { useWorkoutLogic } from \"./hooks\";\n\nexport const Workout = memo(function Workout({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    items,\n    exercises,\n    lock: initialLock = false,\n  } = element.props as WorkoutProps;\n\n  const resolvedItems = useMemo(() => {\n    const raw = items || exercises || [];\n    const arr = Array.isArray(raw) ? raw : [];\n    // Convert sets/reps to series array for rendering\n    return ensureSeriesGeneratedDeep(arr);\n  }, [items, exercises]);\n\n  const workoutAdapter = getWorkoutAdapter();\n  const stateAdapter = getWorkoutStateAdapter();\n\n  // useWorkoutLogic now uses useElementState internally\n  // State is automatically synced to Zustand -> Tree -> Supabase\n  const {\n    displayItems,\n    expandedIds,\n    isLocked,\n    toggleExpand,\n    toggleLock,\n    updateExercise,\n    updateSeries,\n    addSet,\n    removeSet,\n  } = useWorkoutLogic(workoutAdapter, stateAdapter, {\n    initialItems: resolvedItems,\n    lock: initialLock,\n    elementKey: element.key,\n  });\n\n  // Domain auto-save to separate workout table (for queries/analytics)\n  useDomainAutoSave(\"workout\", element.key, {\n    title,\n    date: new Date().toISOString(),\n    items: displayItems,\n    status: \"active\",\n  });\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6 w-full\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n        {title && (\n          <h3 className=\"m-0 text-base sm:text-lg lg:text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60 tracking-tight flex items-center gap-2 sm:gap-3\">\n            <Activity className=\"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500\" />\n            {title}\n          </h3>\n        )}\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <SessionTimer />\n          <button\n            onClick={toggleLock}\n            className={cn(\n              \"h-8 w-8 sm:h-9 sm:w-9 flex items-center justify-center rounded-lg border transition-colors touch-manipulation\",\n              isLocked\n                ? \"bg-red-500/10 border-red-500/20 text-red-500\"\n                : \"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white\",\n            )}\n          >\n            {isLocked ? <Lock className=\"w-3 h-3\" /> : <Unlock className=\"w-3 h-3\" />}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-3 sm:gap-4\">\n        {displayItems.length === 0 ? (\n          <EmptyState\n            icon={<BicepsFlexed className=\"w-10 h-10 sm:w-12 sm:h-12\" />}\n            message=\"No exercises programmed\"\n          />\n        ) : (\n          displayItems.map((item) =>\n            item.items && item.items.length > 0 ? (\n              <SupersetGroup\n                key={item.id}\n                item={item}\n                elementKey={element.key}\n                expandedIds={expandedIds}\n                isLocked={isLocked}\n                onToggleExpand={toggleExpand}\n                onUpdateExercise={updateExercise}\n                onUpdateSeries={updateSeries}\n                onAddSet={addSet}\n                onRemoveSet={removeSet}\n              />\n            ) : (\n              <ExerciseItemCard\n                key={item.id}\n                item={item}\n                elementKey={element.key}\n                isExpanded={expandedIds.has(item.id)}\n                isLocked={isLocked}\n                onToggleExpand={toggleExpand}\n                onUpdateExercise={updateExercise}\n                onUpdateSeries={updateSeries}\n                onAddSet={addSet}\n                onRemoveSet={removeSet}\n              />\n            ),\n          )\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useEffect } from \"react\";\nimport { Timer, Play, RotateCcw } from \"lucide-react\";\n\nexport const SessionTimer = memo(function SessionTimer() {\n  const [time, setTime] = useState(0);\n  const [isActive, setIsActive] = useState(false);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isActive) {\n      interval = setInterval(() => {\n        setTime((t) => t + 1);\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [isActive]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  return (\n    <div className=\"flex items-center gap-3 px-3 py-1.5 rounded-lg border border-white/10 bg-black/40 backdrop-blur-md\">\n      <Timer\n        className={\n          isActive ? \"text-emerald-400 animate-pulse\" : \"text-zinc-500\"\n        }\n        size={14}\n      />\n      <div className=\"font-mono text-sm font-medium text-white tracking-widest tabular-nums\">\n        {formatTime(time)}\n      </div>\n      {isActive ? (\n        <button\n          onClick={() => setIsActive(false)}\n          className=\"text-zinc-400 hover:text-white transition-colors\"\n        >\n          <span className=\"w-2 h-2 rounded-sm bg-current block\" />\n        </button>\n      ) : (\n        <button\n          onClick={() => setIsActive(true)}\n          className=\"text-zinc-400 hover:text-white transition-colors\"\n        >\n          <Play size={10} fill=\"currentColor\" />\n        </button>\n      )}\n      <button\n        onClick={() => {\n          setIsActive(false);\n          setTime(0);\n        }}\n        className=\"text-zinc-600 hover:text-white transition-colors\"\n      >\n        <RotateCcw size={10} />\n      </button>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ChevronDown } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport { WorkoutExerciseCard } from \"./WorkoutExerciseCard\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\n\ninterface ExerciseItemCardProps {\n  item: ExerciseItem;\n  elementKey: string;\n  isExpanded: boolean;\n  isLocked: boolean;\n  onToggleExpand: (id: string) => void;\n  onUpdateExercise: (id: string, field: keyof ExerciseItem, value: ExerciseItem[keyof ExerciseItem]) => void;\n  onUpdateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: WorkoutSet[keyof WorkoutSet],\n  ) => void;\n  onAddSet: (exerciseId: string) => void;\n  onRemoveSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport const ExerciseItemCard = memo(function ExerciseItemCard({\n  item,\n  elementKey,\n  isExpanded,\n  isLocked,\n  onToggleExpand,\n  onUpdateExercise,\n  onUpdateSeries,\n  onAddSet,\n  onRemoveSet,\n}: ExerciseItemCardProps) {\n  const series = item.series || [];\n  const completedSets = series.filter((s) => s.completed).length;\n  const totalSets = series.length;\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      key={item.id}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={item.id}\n        className={cn(\n          \"group relative overflow-hidden rounded-2xl border transition-all duration-300 isolate\",\n          isExpanded\n            ? \"bg-zinc-900/80 border-white/20 shadow-2xl\"\n            : \"bg-zinc-900/40 border-white/5 hover:bg-zinc-900/60 hover:border-white/10\",\n        )}\n      >\n        <div\n          className={cn(\n            \"w-full h-1 absolute top-0 left-0 right-0 z-10 transition-colors\",\n            isExpanded\n              ? \"bg-gradient-to-r from-emerald-500 to-teal-500\"\n              : \"bg-white/5\",\n          )}\n        />\n\n        <div\n          onClick={() => onToggleExpand(item.id)}\n          className=\"p-4 flex items-center gap-4 cursor-pointer relative z-20\"\n        >\n          <div\n            className={cn(\n              \"w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg border transition-all duration-300\",\n              isExpanded\n                ? \"bg-emerald-500/10 border-emerald-500/30 text-emerald-400\"\n                : \"bg-white/5 border-white/5 text-zinc-500 group-hover:text-zinc-300\",\n            )}\n          >\n            {item.name[0]}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <h4 className=\"text-base font-bold text-white tracking-tight leading-tight group-hover:text-emerald-50 transition-colors\">\n              {item.name}\n            </h4>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className=\"text-xs font-mono text-muted-foreground\">\n                {completedSets}/{totalSets} DONE\n              </span>\n              <div className=\"w-1 h-1 rounded-full bg-zinc-700\" />\n              <span className=\"text-xs font-mono text-muted-foreground\">\n                LAST: {series[series.length - 1]?.weight || \"-\"} KG\n              </span>\n            </div>\n          </div>\n\n          <div\n            className={cn(\n              \"w-8 h-8 flex items-center justify-center rounded-lg transition-transform duration-300\",\n              isExpanded\n                ? \"bg-white/10 rotate-180 text-white\"\n                : \"text-zinc-500\",\n            )}\n          >\n            <ChevronDown size={14} />\n          </div>\n        </div>\n\n        <AnimatePresence>\n          {isExpanded && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: \"auto\", opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n              className=\"relative z-0\"\n            >\n              <PerforatedDivider />\n\n              <div className=\"p-4 pt-6 bg-black/20\">\n                <WorkoutExerciseCard\n                  exercise={item}\n                  lock={isLocked}\n                  onUpdateExercise={(field, val) =>\n                    onUpdateExercise(item.id, field, val)\n                  }\n                  onUpdateSeries={(sId, field, val) =>\n                    onUpdateSeries(item.id, sId, field, val)\n                  }\n                  onAddSet={() => onAddSet(item.id)}\n                  onRemoveSet={(sId) => onRemoveSet(item.id, sId)}\n                  isExpanded={true}\n                  onToggleExpand={() => {}}\n                />\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n\ninterface SupersetGroupProps {\n  item: ExerciseItem;\n  elementKey: string;\n  expandedIds: Set<string>;\n  isLocked: boolean;\n  onToggleExpand: (id: string) => void;\n  onUpdateExercise: (id: string, field: keyof ExerciseItem, value: ExerciseItem[keyof ExerciseItem]) => void;\n  onUpdateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: WorkoutSet[keyof WorkoutSet],\n  ) => void;\n  onAddSet: (exerciseId: string) => void;\n  onRemoveSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport const SupersetGroup = memo(function SupersetGroup({\n  item,\n  elementKey,\n  expandedIds,\n  isLocked,\n  onToggleExpand,\n  onUpdateExercise,\n  onUpdateSeries,\n  onAddSet,\n  onRemoveSet,\n}: SupersetGroupProps) {\n  return (\n    <div className=\"mb-6 relative pl-4 border-l border-dashed border-white/10\">\n      <div className=\"absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full bg-zinc-800 border border-zinc-600\" />\n      <div className=\"flex items-center gap-2 mb-3\">\n        <span className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest bg-zinc-900 border border-white/10 px-2 py-0.5 rounded\">\n          Superset\n        </span>\n      </div>\n      <div className=\"flex flex-col gap-4\">\n        {item.items?.map((sub) => (\n          <ExerciseItemCard\n            key={sub.id}\n            item={sub}\n            elementKey={elementKey}\n            isExpanded={expandedIds.has(sub.id)}\n            isLocked={isLocked}\n            onToggleExpand={onToggleExpand}\n            onUpdateExercise={onUpdateExercise}\n            onUpdateSeries={onUpdateSeries}\n            onAddSet={onAddSet}\n            onRemoveSet={onRemoveSet}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport {\n  Dumbbell,\n  Plus,\n  ChevronDown,\n  Activity,\n  Flame,\n  Target,\n  Clock,\n  TrendingUp,\n} from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { ExerciseItem, WorkoutSet } from \"../types\";\nimport { WorkoutSetRow } from \"./WorkoutSetRow\";\nimport {\n  ProgressRing,\n  CardioDetails,\n  getExerciseGradient,\n} from \"./exercise-parts\";\n\ninterface WorkoutExerciseCardProps {\n  exercise: ExerciseItem;\n  lock: boolean;\n  onUpdateExercise: (field: keyof ExerciseItem, value: ExerciseItem[keyof ExerciseItem]) => void;\n  onUpdateSeries: (\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: WorkoutSet[keyof WorkoutSet],\n  ) => void;\n  onAddSet: () => void;\n  onRemoveSet: (seriesId: string) => void;\n  isExpanded: boolean;\n  onToggleExpand: () => void;\n}\n\n// Get icon based on exercise type\nconst getExerciseIcon = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return <Activity size={18} />;\n    case \"warmup\":\n      return <Flame size={18} />;\n    default:\n      return <Dumbbell size={18} />;\n  }\n};\n\nexport const WorkoutExerciseCard = memo(\n  ({\n    exercise,\n    lock,\n    onUpdateExercise,\n    onUpdateSeries,\n    onAddSet,\n    onRemoveSet,\n    isExpanded,\n    onToggleExpand,\n  }: WorkoutExerciseCardProps) => {\n    // Series are now generated in the adapter via mergeEdits\n    const series = exercise.series || [];\n\n    const completedSets = series.filter((s) => s.completed).length;\n    const totalSets = series.length;\n    const progress = totalSets > 0 ? (completedSets / totalSets) * 100 : 0;\n    const hasProgress = totalSets > 0;\n    const isCardio = exercise.type === \"cardio\";\n\n    return (\n      <div\n        className={cn(\n          \"group/card relative rounded-2xl overflow-hidden mb-3 transition-all duration-300\",\n          \"bg-gradient-to-br from-white/[0.08] to-white/[0.02]\",\n          \"border border-white/[0.08]\",\n          \"shadow-[0_8px_32px_-8px_rgba(0,0,0,0.4),0_2px_8px_-2px_rgba(0,0,0,0.2)]\",\n          \"hover:border-white/15 hover:shadow-[0_12px_40px_-8px_rgba(0,0,0,0.5),0_4px_12px_-2px_rgba(0,0,0,0.3)]\",\n          \"backdrop-blur-xl\",\n          isExpanded && \"ring-1 ring-white/5\",\n        )}\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500/[0.02] via-transparent to-purple-500/[0.02] pointer-events-none\" />\n\n        {/* Header */}\n        <div\n          className=\"relative p-4 flex items-center gap-4 cursor-pointer select-none\"\n          onClick={onToggleExpand}\n        >\n          <div className=\"relative\">\n            {!isCardio && hasProgress && (\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <ProgressRing progress={progress} size={48} />\n              </div>\n            )}\n            <div\n              className={cn(\n                \"relative z-10 p-2.5 rounded-xl shadow-lg ring-1 transition-transform duration-300 group-hover/card:scale-105 bg-gradient-to-br\",\n                getExerciseGradient(exercise.type),\n              )}\n            >\n              {getExerciseIcon(exercise.type)}\n            </div>\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-[15px] font-bold text-white truncate pr-2 group-hover/card:text-blue-100 transition-colors\">\n              {exercise.name}\n            </h3>\n            <div className=\"text-xs text-white/40 flex items-center gap-2 mt-1 flex-wrap\">\n              {isCardio ? (\n                <>\n                  {exercise.duration && (\n                    <span className=\"flex items-center gap-1 bg-violet-500/15 text-violet-300 px-2 py-0.5 rounded-full font-medium\">\n                      <Clock size={10} />\n                      {exercise.duration}\n                    </span>\n                  )}\n                  {exercise.intensity && (\n                    <span className=\"flex items-center gap-1 bg-rose-500/15 text-rose-300 px-2 py-0.5 rounded-full font-medium capitalize\">\n                      <Flame size={10} />\n                      {exercise.intensity}\n                    </span>\n                  )}\n                </>\n              ) : (\n                <>\n                  <span className=\"font-semibold text-white/60\">\n                    {completedSets}/{totalSets} done\n                  </span>\n                  {hasProgress && (\n                    <span className=\"text-[10px] font-mono text-emerald-400/80 bg-emerald-500/10 px-2 py-0.5 rounded-full border border-emerald-500/20\">\n                      {Math.round(progress)}%\n                    </span>\n                  )}\n                  {exercise.reps && (\n                    <span className=\"bg-white/5 px-2 py-0.5 rounded-full text-[10px] font-bold text-white/50\">\n                      {exercise.reps} reps\n                    </span>\n                  )}\n                  {exercise.rpe && (\n                    <span className=\"flex items-center gap-1 bg-amber-500/15 text-amber-300 px-2 py-0.5 rounded-full text-[10px] font-bold\">\n                      <Target size={9} />\n                      RPE {exercise.rpe}\n                    </span>\n                  )}\n                </>\n              )}\n              {exercise.notes && !isExpanded && (\n                <span className=\"text-white/30 text-[10px] italic truncate max-w-[120px]\">\n                  {exercise.notes}\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div\n            className={cn(\n              \"p-2 rounded-lg transition-all duration-300\",\n              \"text-white/20 group-hover/card:text-white/50\",\n              isExpanded && \"bg-white/5 text-white/40\",\n            )}\n          >\n            <ChevronDown\n              size={18}\n              className={cn(\n                \"transition-transform duration-300\",\n                !isExpanded && \"-rotate-90\",\n              )}\n            />\n          </div>\n        </div>\n\n        {/* Expanded Content */}\n        <div\n          className={cn(\n            \"overflow-hidden transition-all duration-300 ease-out\",\n            isExpanded ? \"max-h-[800px] opacity-100\" : \"max-h-0 opacity-0\",\n          )}\n        >\n          <div className=\"px-4 pb-4 pt-0 border-t border-white/5\">\n            {(exercise.rationale || exercise.notes) && (\n              <div className=\"mt-4 mb-4 p-3 bg-gradient-to-r from-blue-500/10 to-indigo-500/5 border-l-2 border-blue-500 rounded-r-lg\">\n                <div className=\"flex items-center gap-1.5 text-[10px] uppercase tracking-widest font-bold text-blue-300/60 mb-1\">\n                  <TrendingUp size={10} />\n                  {exercise.rationale ? \"Coach Notes\" : \"Notes\"}\n                </div>\n                <p className=\"text-sm text-blue-200/80\">\n                  {exercise.rationale || exercise.notes}\n                </p>\n              </div>\n            )}\n\n            {isCardio ? (\n              <div className=\"mt-4\">\n                <CardioDetails\n                  duration={exercise.duration}\n                  intensity={exercise.intensity}\n                  notes={!exercise.rationale ? exercise.notes : undefined}\n                />\n              </div>\n            ) : (\n              <>\n                {series.length > 0 && (\n                  <div className=\"grid grid-cols-[36px_1fr_1fr_1fr_36px_36px] gap-2 mt-4 mb-2 px-2 text-[9px] uppercase font-bold text-white/25 tracking-[0.15em] text-center\">\n                    <span>Set</span>\n                    <span>Weight</span>\n                    <span>Reps</span>\n                    <span>RPE</span>\n                    <span>Done</span>\n                    <span></span>\n                  </div>\n                )}\n                <div className=\"space-y-1.5\">\n                  {series.map((set, idx) => (\n                    <WorkoutSetRow\n                      key={set.id || idx}\n                      set={set}\n                      index={idx}\n                      lock={lock}\n                      onUpdate={(field, val) =>\n                        onUpdateSeries(set.id, field, val)\n                      }\n                      onRemove={() => onRemoveSet(set.id)}\n                    />\n                  ))}\n                </div>\n                {!lock && (\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onAddSet();\n                    }}\n                    className={cn(\n                      \"mt-4 w-full py-3 flex items-center justify-center gap-2 rounded-xl\",\n                      \"border-2 border-dashed border-white/10\",\n                      \"text-sm font-semibold text-white/30\",\n                      \"transition-all duration-300\",\n                      \"hover:text-white hover:border-blue-500/40 hover:bg-blue-500/10\",\n                      \"active:scale-[0.98]\",\n                      \"group/add\",\n                    )}\n                  >\n                    <Plus\n                      size={16}\n                      className=\"transition-transform duration-300 group-hover/add:rotate-90\"\n                    />\n                    Add Set\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\n","import { Check, Trash2 } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { WorkoutSet } from \"../types\";\n\ninterface WorkoutSetRowProps {\n  set: WorkoutSet;\n  index: number;\n  lock: boolean;\n  onUpdate: (field: keyof WorkoutSet, value: WorkoutSet[keyof WorkoutSet]) => void;\n  onRemove: () => void;\n}\n\nexport const WorkoutSetRow = ({\n  set,\n  index,\n  lock,\n  onUpdate,\n  onRemove,\n}: WorkoutSetRowProps) => {\n  const isCompleted = set.completed;\n\n  return (\n    <div\n      className={cn(\n        \"group relative grid grid-cols-[36px_1fr_1fr_1fr_36px_36px] gap-2 items-center p-2.5 rounded-xl transition-all duration-300 border text-sm\",\n        isCompleted\n          ? \"bg-gradient-to-r from-emerald-500/15 via-emerald-500/10 to-green-500/5 border-emerald-500/25 shadow-[0_0_20px_-5px_rgba(16,185,129,0.25),inset_0_1px_0_rgba(255,255,255,0.05)]\"\n          : \"bg-white/[0.03] border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10\",\n      )}\n    >\n      {/* Completion glow effect */}\n      {isCompleted && (\n        <div className=\"absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500/5 to-transparent pointer-events-none\" />\n      )}\n\n      {/* Set Number */}\n      <div className=\"flex justify-center items-center relative z-10\">\n        <span\n          className={cn(\n            \"w-6 h-6 flex items-center justify-center rounded-lg text-[11px] font-bold transition-all duration-300\",\n            isCompleted\n              ? \"bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-500/30 scale-105\"\n              : \"bg-white/5 text-white/50 border border-white/10\",\n          )}\n        >\n          {set.setNumber || index + 1}\n        </span>\n      </div>\n\n      {/* Weight Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold tracking-wider py-1.5\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n          >\n            {set.weight ?? <span className=\"text-white/15\">—</span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.weight ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"weight\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n            placeholder=\"—\"\n          />\n        )}\n      </div>\n\n      {/* Reps Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold tracking-wider py-1.5\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n          >\n            {set.reps ?? <span className=\"text-white/15\">—</span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.reps ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"reps\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n            placeholder=\"—\"\n          />\n        )}\n      </div>\n\n      {/* RPE Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold py-1.5\",\n              isCompleted ? \"text-emerald-200/70\" : \"text-white/60\",\n            )}\n          >\n            {set.rpe ?? <span className=\"text-white/15\">—</span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.rpe ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"rpe\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-200/80\" : \"text-white/80\",\n            )}\n            placeholder=\"—\"\n          />\n        )}\n      </div>\n\n      {/* Complete Toggle */}\n      <div className=\"flex justify-center relative z-10\">\n        <button\n          onClick={() => !lock && onUpdate(\"completed\", !isCompleted)}\n          disabled={lock}\n          className={cn(\n            \"w-7 h-7 rounded-lg flex items-center justify-center transition-all duration-300 border\",\n            isCompleted\n              ? \"bg-gradient-to-br from-emerald-500 to-green-600 border-emerald-400/50 text-white shadow-lg shadow-emerald-500/40 scale-105\"\n              : \"bg-white/5 border-white/10 text-white/20 hover:text-white hover:bg-white/10 hover:border-white/20 hover:scale-105\",\n            lock && \"cursor-not-allowed opacity-50\",\n          )}\n        >\n          {isCompleted ? (\n            <Check size={14} strokeWidth={3} className=\"drop-shadow-sm\" />\n          ) : (\n            <div className=\"w-2 h-2 rounded-full bg-white/10\" />\n          )}\n        </button>\n      </div>\n\n      {/* Delete Button - Only visible on hover if not locked */}\n      <div className=\"relative z-10\">\n        {!lock && (\n          <div className=\"flex justify-center opacity-0 group-hover:opacity-100 transition-all duration-200\">\n            <button\n              onClick={onRemove}\n              className=\"w-7 h-7 rounded-lg flex items-center justify-center text-red-400/40 hover:text-red-400 hover:bg-red-500/15 transition-all duration-200 border border-transparent hover:border-red-500/20\"\n            >\n              <Trash2 size={13} />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","/**\n * WorkoutExerciseCard sub-components\n */\n\nimport { memo } from \"react\";\nimport { Clock, Flame } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\n\n// Progress ring component for visual completion indicator\nexport const ProgressRing = memo(function ProgressRing({\n  progress,\n  size = 44,\n}: {\n  progress: number;\n  size?: number;\n}) {\n  const strokeWidth = 3;\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (progress / 100) * circumference;\n\n  return (\n    <svg width={size} height={size} className=\"transform -rotate-90\">\n      <circle\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth={strokeWidth}\n        className=\"text-white/5\"\n      />\n      <circle\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        fill=\"none\"\n        stroke=\"url(#progressGradient)\"\n        strokeWidth={strokeWidth}\n        strokeDasharray={circumference}\n        strokeDashoffset={offset}\n        strokeLinecap=\"round\"\n        className=\"transition-all duration-500 ease-out\"\n      />\n      <defs>\n        <linearGradient id=\"progressGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#22c55e\" />\n          <stop offset=\"100%\" stopColor=\"#86efac\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n});\n\n// Cardio details component\nexport const CardioDetails = memo(function CardioDetails({\n  duration,\n  intensity,\n  notes,\n}: {\n  duration?: string | null;\n  intensity?: string | null;\n  notes?: string | null;\n}) {\n  const intensityColors: Record<string, string> = {\n    low: \"from-emerald-500/20 to-emerald-600/10 text-emerald-400 border-emerald-500/30\",\n    moderate:\n      \"from-amber-500/20 to-amber-600/10 text-amber-400 border-amber-500/30\",\n    high: \"from-rose-500/20 to-rose-600/10 text-rose-400 border-rose-500/30\",\n  };\n\n  const getIntensityColor = (int?: string | null) => {\n    if (!int) return intensityColors.moderate;\n    const lower = int.toLowerCase();\n    if (lower.includes(\"low\") || lower.includes(\"easy\"))\n      return intensityColors.low;\n    if (\n      lower.includes(\"high\") ||\n      lower.includes(\"hard\") ||\n      lower.includes(\"intense\")\n    )\n      return intensityColors.high;\n    return intensityColors.moderate;\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Duration & Intensity Row */}\n      <div className=\"flex gap-3\">\n        {duration && (\n          <div className=\"flex-1 bg-gradient-to-br from-violet-500/15 to-violet-600/5 rounded-xl p-4 border border-violet-500/20\">\n            <div className=\"flex items-center gap-2 text-violet-300/60 text-[10px] uppercase tracking-widest font-bold mb-1\">\n              <Clock size={12} />\n              Duration\n            </div>\n            <div className=\"text-2xl font-black text-white tracking-tight\">\n              {duration}\n            </div>\n          </div>\n        )}\n        {intensity && (\n          <div\n            className={cn(\n              \"flex-1 bg-gradient-to-br rounded-xl p-4 border\",\n              getIntensityColor(intensity),\n            )}\n          >\n            <div className=\"flex items-center gap-2 text-current/60 text-[10px] uppercase tracking-widest font-bold mb-1\">\n              <Flame size={12} />\n              Intensity\n            </div>\n            <div className=\"text-lg font-bold text-current capitalize\">\n              {intensity}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Notes */}\n      {notes && (\n        <div className=\"bg-white/5 rounded-xl p-3 border border-white/5\">\n          <div className=\"text-[10px] uppercase tracking-widest font-bold text-white/40 mb-1\">\n            Notes\n          </div>\n          <div className=\"text-sm text-white/70\">{notes}</div>\n        </div>\n      )}\n    </div>\n  );\n});\n\n// Exercise type utilities\nexport const getExerciseIcon = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return \"activity\";\n    case \"warmup\":\n      return \"flame\";\n    default:\n      return \"dumbbell\";\n  }\n};\n\nexport const getExerciseGradient = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return \"from-rose-500/25 to-pink-600/15 text-rose-400 ring-rose-500/20\";\n    case \"warmup\":\n      return \"from-amber-500/25 to-orange-600/15 text-amber-400 ring-amber-500/20\";\n    default:\n      return \"from-blue-500/25 to-indigo-600/15 text-blue-400 ring-blue-500/20\";\n  }\n};\n","/**\n * Workout Adapter - Implementation of WorkoutPort\n * Pure functions for workout operations\n */\n\nimport type { WorkoutPort, WorkoutStatePort } from \"../ports\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\nimport { v4 as uuidv4 } from \"uuid\";\n\n/**\n * Generate series from sets/reps if not already present\n */\nfunction ensureSeriesGenerated(exercise: ExerciseItem): ExerciseItem {\n  if (exercise.series?.length) return exercise;\n  if (typeof exercise.sets === \"number\" && exercise.sets > 0) {\n    const generatedSeries: WorkoutSet[] = Array.from(\n      { length: exercise.sets },\n      (_, i) => ({\n        id: `gen-${exercise.id}-${i}`,\n        setNumber: i + 1,\n        reps: exercise.reps ?? null,\n        weight: exercise.weight ?? null,\n        rpe: exercise.rpe ?? null,\n        completed: false,\n        type: \"normal\" as const,\n      }),\n    );\n    return { ...exercise, series: generatedSeries };\n  }\n  return exercise;\n}\n\n/**\n * Recursively ensure all exercises have series generated from sets/reps\n */\nexport function ensureSeriesGeneratedDeep(items: ExerciseItem[]): ExerciseItem[] {\n  return items.map((item) => {\n    const withSeries = ensureSeriesGenerated(item);\n    if (withSeries.items && withSeries.items.length > 0) {\n      return {\n        ...withSeries,\n        items: ensureSeriesGeneratedDeep(withSeries.items),\n      };\n    }\n    return withSeries;\n  });\n}\n\n/**\n * Create a workout adapter with exercise operations\n */\nexport function createWorkoutAdapter(): WorkoutPort {\n  return {\n    findExerciseById(\n      items: ExerciseItem[],\n      id: string,\n    ): ExerciseItem | undefined {\n      for (const item of items) {\n        if (item.id === id) return item;\n        if (item.items) {\n          const found = this.findExerciseById(item.items, id);\n          if (found) return found;\n        }\n      }\n      return undefined;\n    },\n\n    mergeEdits(\n      items: ExerciseItem[],\n      edits: Record<string, ExerciseItem>,\n    ): ExerciseItem[] {\n      return items.map((item) => {\n        const edit = edits[item.id];\n        const base = edit ? { ...item, ...edit } : item;\n        // Ensure series is generated for exercises without explicit series\n        const withSeries = ensureSeriesGenerated(base);\n        if (withSeries.items) {\n          return {\n            ...withSeries,\n            items: this.mergeEdits(withSeries.items, edits),\n          };\n        }\n        return withSeries;\n      });\n    },\n\n    createNewSet(currentSeries: WorkoutSet[]): WorkoutSet {\n      const lastSet = currentSeries[currentSeries.length - 1];\n      return {\n        id: uuidv4(),\n        setNumber: currentSeries.length + 1,\n        weight: lastSet?.weight ?? null,\n        reps: lastSet?.reps ?? null,\n        rpe: null,\n        completed: false,\n        type: \"normal\",\n      };\n    },\n\n    removeSetAndRenumber(series: WorkoutSet[], seriesId: string): WorkoutSet[] {\n      return series\n        .filter((s) => s.id !== seriesId)\n        .map((s, idx) => ({ ...s, setNumber: idx + 1 }));\n    },\n  };\n}\n\n/**\n * Create a workout state adapter for state management\n */\nexport function createWorkoutStateAdapter(): WorkoutStatePort {\n  return {\n    updateExerciseField(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      field: keyof ExerciseItem,\n      value: unknown,\n    ): Record<string, ExerciseItem> {\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, [field]: value },\n      };\n    },\n\n    updateSetField(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      seriesId: string,\n      field: keyof WorkoutSet,\n      value: unknown,\n    ): Record<string, ExerciseItem> {\n      const nextSeries = (exercise.series || []).map((s) =>\n        s.id === seriesId ? { ...s, [field]: value } : s,\n      );\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: nextSeries },\n      };\n    },\n\n    addSetToExercise(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      newSet: WorkoutSet,\n    ): Record<string, ExerciseItem> {\n      const currentSeries = exercise.series || [];\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: [...currentSeries, newSet] },\n      };\n    },\n\n    removeSetFromExercise(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      updatedSeries: WorkoutSet[],\n    ): Record<string, ExerciseItem> {\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: updatedSeries },\n      };\n    },\n  };\n}\n\n// Singleton instances\nlet workoutAdapterInstance: WorkoutPort | null = null;\nlet stateAdapterInstance: WorkoutStatePort | null = null;\n\nexport function getWorkoutAdapter(): WorkoutPort {\n  if (!workoutAdapterInstance) {\n    workoutAdapterInstance = createWorkoutAdapter();\n  }\n  return workoutAdapterInstance;\n}\n\nexport function getWorkoutStateAdapter(): WorkoutStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createWorkoutStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useWorkoutLogic - Custom hook for workout state management\n * \n * Uses useElementState for centralized state management.\n * All state modifications are automatically synced to:\n * 1. Zustand store (immediate)\n * 2. UI tree (debounced)\n * 3. Supabase via chat persistence (automatic)\n */\n\nimport { useState, useMemo, useCallback, useEffect } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { WorkoutPort, WorkoutStatePort } from \"../ports\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\n\nexport interface UseWorkoutLogicOptions {\n  initialItems: ExerciseItem[];\n  lock?: boolean | null;\n  elementKey: string;\n}\n\n/** State stored in Zustand via useElementState */\ninterface WorkoutElementState extends Record<string, unknown> {\n  items: ExerciseItem[];\n  isLocked: boolean;\n}\n\nexport interface UseWorkoutLogicReturn {\n  // State\n  displayItems: ExerciseItem[];\n  expandedIds: Set<string>;\n  isLocked: boolean;\n\n  // Actions\n  toggleExpand: (id: string) => void;\n  toggleLock: () => void;\n  updateExercise: (\n    id: string,\n    field: keyof ExerciseItem,\n    value: unknown,\n  ) => void;\n  updateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: unknown,\n  ) => void;\n  addSet: (exerciseId: string) => void;\n  removeSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport function useWorkoutLogic(\n  workoutAdapter: WorkoutPort,\n  stateAdapter: WorkoutStatePort,\n  options: UseWorkoutLogicOptions,\n): UseWorkoutLogicReturn {\n  const { initialItems, lock: initialLock = false, elementKey } = options;\n\n  // Centralized state via Zustand - synced to tree and Supabase\n  const [state, updateState] = useElementState<WorkoutElementState>(\n    elementKey,\n    {\n      items: initialItems,\n      isLocked: !!initialLock,\n    },\n  );\n\n  // Local UI state (not synced - just for expand/collapse)\n  const [expandedIds, setExpandedIds] = useState<Set<string>>(new Set());\n\n  // Auto-expand first exercise on mount\n  useEffect(() => {\n    if (initialItems.length > 0 && initialItems[0]?.id) {\n      setExpandedIds(new Set([initialItems[0].id]));\n    }\n  }, [initialItems]);\n\n  // displayItems comes from centralized state\n  const displayItems = state.items;\n  const isLocked = state.isLocked;\n\n  const toggleExpand = useCallback((id: string) => {\n    setExpandedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id);\n      else next.add(id);\n      return next;\n    });\n  }, []);\n\n  const toggleLock = useCallback(() => {\n    updateState({ isLocked: !isLocked });\n  }, [isLocked, updateState]);\n\n  const updateExercise = useCallback(\n    (id: string, field: keyof ExerciseItem, value: unknown) => {\n      if (isLocked) return;\n\n      const exercise = workoutAdapter.findExerciseById(displayItems, id);\n      if (!exercise) return;\n      \n      // Create updated items using adapter\n      const edits = stateAdapter.updateExerciseField({}, exercise, field, value);\n      const updatedItems = workoutAdapter.mergeEdits(displayItems, edits);\n      \n      updateState({ items: updatedItems });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems, updateState],\n  );\n\n  const updateSeries = useCallback(\n    (\n      exerciseId: string,\n      seriesId: string,\n      field: keyof WorkoutSet,\n      value: unknown,\n    ) => {\n      if (isLocked) return;\n\n      const exercise = workoutAdapter.findExerciseById(displayItems, exerciseId);\n      if (!exercise) return;\n      \n      // Create updated items using adapter\n      const edits = stateAdapter.updateSetField({}, exercise, seriesId, field, value);\n      const updatedItems = workoutAdapter.mergeEdits(displayItems, edits);\n      \n      updateState({ items: updatedItems });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems, updateState],\n  );\n\n  const addSet = useCallback(\n    (exerciseId: string) => {\n      if (isLocked) return;\n\n      const exercise = workoutAdapter.findExerciseById(displayItems, exerciseId);\n      if (!exercise) return;\n      \n      const newSet = workoutAdapter.createNewSet(exercise.series || []);\n      const edits = stateAdapter.addSetToExercise({}, exercise, newSet);\n      const updatedItems = workoutAdapter.mergeEdits(displayItems, edits);\n      \n      updateState({ items: updatedItems });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems, updateState],\n  );\n\n  const removeSet = useCallback(\n    (exerciseId: string, seriesId: string) => {\n      if (isLocked) return;\n\n      const exercise = workoutAdapter.findExerciseById(displayItems, exerciseId);\n      if (!exercise) return;\n      \n      const updatedSeries = workoutAdapter.removeSetAndRenumber(\n        exercise.series || [],\n        seriesId,\n      );\n      const edits = stateAdapter.removeSetFromExercise({}, exercise, updatedSeries);\n      const updatedItems = workoutAdapter.mergeEdits(displayItems, edits);\n      \n      updateState({ items: updatedItems });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems, updateState],\n  );\n\n  return {\n    displayItems,\n    expandedIds,\n    isLocked,\n    toggleExpand,\n    toggleLock,\n    updateExercise,\n    updateSeries,\n    addSet,\n    removeSet,\n  };\n}\n","import { z } from \"zod\";\nimport { exerciseSchema } from \"../../utils/shared-schemas\";\n\n/**\n * Workout component schema definition\n */\nexport const WorkoutPropsSchema = z.object({\n  title: z.string().nullable(),\n  items: z\n    .array(exerciseSchema)\n    .min(1)\n    .describe(\"List of exercises/activities (REQUIRED, min 1)\"),\n  lock: z.boolean().nullable(),\n  exercises: z.array(exerciseSchema).nullable().optional(),\n});\n\n/** Type inference for Workout props */\nexport type WorkoutProps = z.infer<typeof WorkoutPropsSchema>;\n\n/**\n * Workout component definition for catalog registration\n */\nexport const WorkoutDefinition = {\n  name: \"Workout\" as const,\n  props: WorkoutPropsSchema,\n  description:\n    \"Workout logger with exercises, sets, reps, and agent suggestions.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo, useState, useCallback } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Utensils, Flame, Target } from \"lucide-react\";\nimport { calculateCalories } from \"../../utils/format-utils\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { motion } from \"framer-motion\";\nimport {\n  type Meal,\n  MACRO_TARGETS,\n  MacroMetric,\n  MealTicket,\n} from \"./components\";\n\n// --- Main Component ---\n\nexport const Nutrition = memo(function Nutrition({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    meals: initialMeals,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    meals?: Meal[] | null;\n    lock?: boolean;\n  };\n\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Record<string, { consumed?: boolean }>>\n  >({});\n\n  const displayMeals = useMemo(() => {\n    return (initialMeals || []).map((meal) => {\n      const mealEdits = localEdits[meal.id] || {};\n      return {\n        ...meal,\n        items: meal.items.map((item) => {\n          const itemEdit = mealEdits[item.id];\n          if (itemEdit) return { ...item, ...itemEdit };\n          return item;\n        }),\n      };\n    });\n  }, [initialMeals, localEdits]);\n\n  useDomainAutoSave(\"meal\", element.key, {\n    type: \"meal_plan\",\n    foods: displayMeals.flatMap((m) => m.items),\n    meals: displayMeals,\n    date: new Date().toISOString(),\n  });\n\n  const toggleConsumed = useCallback(\n    (mealId: string, itemId: string) => {\n      if (lock) return;\n      setLocalEdits((prev) => {\n        const m = prev[mealId] || {};\n        const itemVal = !displayMeals\n          .find((x) => x.id === mealId)\n          ?.items.find((y) => y.id === itemId)?.consumed;\n        return { ...prev, [mealId]: { ...m, [itemId]: { consumed: itemVal } } };\n      });\n    },\n    [lock, displayMeals],\n  );\n\n  const stats = useMemo(() => {\n    let p = 0,\n      c = 0,\n      f = 0,\n      cal = 0;\n    displayMeals.forEach((m) =>\n      m.items.forEach((i) => {\n        const iCal =\n          i.calories ?? calculateCalories(i.protein, i.carbs, i.fats);\n        p += i.protein;\n        c += i.carbs;\n        f += i.fats;\n        cal += iCal;\n      }),\n    );\n    return { p, c, f, cal };\n  }, [displayMeals]);\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6 w-full\">\n      {/* Header */}\n      {title && (\n        <h3 className=\"m-0 text-base sm:text-lg lg:text-xl font-bold font-sans tracking-tight flex items-center gap-2 sm:gap-3\">\n          <Flame className=\"w-4 h-4 sm:w-5 sm:h-5 text-orange-500\" />\n          {title}\n        </h3>\n      )}\n\n      {/* Dashboard */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"p-4 sm:p-5 rounded-xl sm:rounded-2xl bg-zinc-900 border border-white/10 shadow-lg relative overflow-hidden\"\n      >\n        <div className=\"absolute top-0 right-0 p-2 sm:p-3 opacity-10\">\n          <Target className=\"w-16 h-16 sm:w-20 sm:h-20\" strokeWidth={1} />\n        </div>\n\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-end mb-4 sm:mb-6 relative z-10 gap-2\">\n          <div>\n            <div className=\"text-[0.625rem] font-bold text-muted-foreground uppercase tracking-widest mb-1\">\n              Daily Target\n            </div>\n            <div className=\"text-2xl sm:text-3xl font-black text-white leading-none\">\n              {Math.round(stats.cal)}\n              <span className=\"text-xs sm:text-sm font-medium text-white/40 ml-1\">\n                / {MACRO_TARGETS.cal} kcal\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-2 sm:gap-4 relative z-10\">\n          <MacroMetric\n            label=\"Protein\"\n            value={stats.p}\n            max={MACRO_TARGETS.p}\n            color=\"bg-indigo-500\"\n          />\n          <MacroMetric\n            label=\"Carbs\"\n            value={stats.c}\n            max={MACRO_TARGETS.c}\n            color=\"bg-amber-500\"\n          />\n          <MacroMetric\n            label=\"Fats\"\n            value={stats.f}\n            max={MACRO_TARGETS.f}\n            color=\"bg-rose-500\"\n          />\n        </div>\n      </motion.div>\n\n      {/* Meals List */}\n      <div className=\"flex flex-col gap-3 sm:gap-4\">\n        {displayMeals.length === 0 ? (\n          <EmptyState\n            icon={<Utensils className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n            message=\"Empty Plan\"\n          />\n        ) : (\n          displayMeals.map((meal, i) => (\n            <MealTicket\n              key={meal.id}\n              meal={meal}\n              index={i}\n              onToggleItem={toggleConsumed}\n              lock={!!lock}\n              elementKey={element.key}\n            />\n          ))\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","/**\n * Nutrition types and utilities\n */\n\nexport type MealItem = {\n  id: string;\n  name: string;\n  protein: number;\n  carbs: number;\n  fats: number;\n  calories?: number;\n  grams?: number;\n  consumed?: boolean;\n  alternatives?: Array<{\n    id: string;\n    name: string;\n    protein: number;\n    carbs: number;\n    fats: number;\n    calories?: number;\n    grams?: number;\n    reason?: string;\n  }>;\n};\n\nexport type Meal = {\n  id: string;\n  name: string;\n  items: MealItem[];\n  source?: string;\n  conflict?: string;\n  alternatives?: Array<{\n    id: string;\n    name: string;\n    items: MealItem[];\n    reason?: string;\n  }>;\n};\n\nexport const MACRO_TARGETS = { p: 180, c: 250, f: 70, cal: 2400 };\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"../../../utils/cn\";\n\ninterface MacroMetricProps {\n  label: string;\n  value: number;\n  max: number;\n  color: string;\n}\n\nexport const MacroMetric = memo(function MacroMetric({\n  label,\n  value,\n  max,\n  color,\n}: MacroMetricProps) {\n  const percentage = Math.min(100, (value / max) * 100);\n\n  return (\n    <div className=\"flex flex-col gap-1.5\">\n      <div className=\"text-[10px] uppercase font-bold text-muted-foreground tracking-wider flex justify-between\">\n        <span>{label}</span>\n        <span className=\"font-mono text-white/50\">{Math.round(value)}g</span>\n      </div>\n      <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\n          className={cn(\"h-full rounded-full\", color)}\n        />\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { calculateCalories } from \"../../../utils/format-utils\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport type { Meal } from \"./types\";\n\ninterface MealTicketProps {\n  meal: Meal;\n  onToggleItem: (mealId: string, itemId: string) => void;\n  lock: boolean;\n  index: number;\n  elementKey: string;\n}\n\nexport const MealTicket = memo(function MealTicket({\n  meal,\n  onToggleItem,\n  lock,\n  index,\n  elementKey,\n}: MealTicketProps) {\n  const totalCal = meal.items.reduce(\n    (acc, i) =>\n      acc + (i.calories || calculateCalories(i.protein, i.carbs, i.fats)),\n    0,\n  );\n  const consumedCount = meal.items.filter((i) => i.consumed).length;\n  const isFullyConsumed =\n    consumedCount === meal.items.length && meal.items.length > 0;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.98 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.4, delay: index * 0.1 }}\n      className=\"group relative\"\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={meal.id}\n    >\n      <div\n        className={cn(\n          \"rounded-2xl border bg-zinc-900/60 backdrop-blur-xl overflow-hidden transition-all duration-300 isolate\",\n          isFullyConsumed\n            ? \"border-emerald-500/20 bg-emerald-500/5 shadow-[0_0_20px_-10px_rgba(16,185,129,0.2)]\"\n            : \"border-white/10 hover:border-white/20 hover:bg-zinc-900/80 hover:shadow-xl\",\n        )}\n      >\n        {/* Side Accent */}\n        <div\n          className={cn(\n            \"absolute top-0 left-0 bottom-0 w-1 transition-colors\",\n            isFullyConsumed\n              ? \"bg-emerald-500\"\n              : \"bg-white/10 group-hover:bg-amber-500\",\n          )}\n        />\n\n        <div className=\"p-5 pl-7\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <div className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1 font-mono\">\n                Meal 0{index + 1}\n              </div>\n              <h4\n                className={cn(\n                  \"text-lg font-bold tracking-tight\",\n                  isFullyConsumed ? \"text-emerald-100\" : \"text-foreground\",\n                )}\n              >\n                {meal.name}\n              </h4>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-xl font-black text-white tabular-nums leading-none\">\n                {Math.round(totalCal)}\n              </div>\n              <div className=\"text-[10px] font-bold text-muted-foreground uppercase mt-0.5\">\n                kcal\n              </div>\n            </div>\n          </div>\n\n          <PerforatedDivider className=\"my-4\" />\n\n          {/* Items List */}\n          <div className=\"flex flex-col gap-2 relative z-10\">\n            {meal.items.map((item) => {\n              const itemCal =\n                item.calories ||\n                calculateCalories(item.protein, item.carbs, item.fats);\n\n              return (\n                <div\n                  key={item.id}\n                  onClick={() => !lock && onToggleItem(meal.id, item.id)}\n                  className={cn(\n                    \"flex items-center justify-between p-2 -mx-2 rounded-lg transition-colors cursor-pointer group/item\",\n                    item.consumed ? \"opacity-50\" : \"hover:bg-white/5\",\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div\n                      className={cn(\n                        \"w-4 h-4 rounded border flex items-center justify-center transition-colors\",\n                        item.consumed\n                          ? \"bg-emerald-500 border-emerald-500\"\n                          : \"border-white/20 group-hover/item:border-white/40\",\n                      )}\n                    >\n                      {item.consumed && (\n                        <Check size={10} className=\"text-black stroke-[4]\" />\n                      )}\n                    </div>\n                    <div>\n                      <div\n                        className={cn(\n                          \"text-sm font-medium leading-none\",\n                          item.consumed && \"line-through\",\n                        )}\n                      >\n                        {item.name}\n                      </div>\n                      <div className=\"text-[10px] text-muted-foreground font-mono mt-0.5\">\n                        {item.grams ? `${item.grams}g • ` : \"\"}\n                        {Math.round(item.protein)}P {Math.round(item.carbs)}C{\" \"}\n                        {Math.round(item.fats)}F\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"font-mono text-xs text-white/60\">\n                    {itemCal}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n","import { z } from \"zod\";\n\n/**\n * Food item schema with AI alternatives\n */\nexport const mealItemSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  name: z.string().describe(\"Food name\"),\n  protein: z.number().describe(\"Protein in grams\"),\n  carbs: z.number().describe(\"Carbs in grams\"),\n  fats: z.number().describe(\"Fats in grams\"),\n  calories: z.number().nullable().optional(),\n  grams: z.number().nullable().optional(),\n  consumed: z.boolean().nullable().optional(),\n  alternatives: z\n    .array(\n      z.object({\n        id: z.string().describe(\"Alternative food id\"),\n        name: z.string().describe(\"Alternative food name\"),\n        protein: z.number().describe(\"Protein in grams\"),\n        carbs: z.number().describe(\"Carbs in grams\"),\n        fats: z.number().describe(\"Fats in grams\"),\n        calories: z.number().nullable().optional(),\n        grams: z.number().nullable().optional(),\n        reason: z\n          .string()\n          .nullable()\n          .optional()\n          .describe(\"Why it's a good swap\"),\n      }),\n    )\n    .nullable()\n    .optional()\n    .describe(\"AI-suggested alternative foods for this item\"),\n});\n\nexport const mealSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  name: z.string().describe(\"Meal name\"),\n  items: z.array(mealItemSchema).describe(\"Foods for this meal\"),\n  alternatives: z\n    .array(\n      z.object({\n        id: z.string().describe(\"Alternative meal id\"),\n        name: z.string().describe(\"Alternative meal name\"),\n        items: z.array(mealItemSchema).describe(\"Alternative meal items\"),\n        reason: z\n          .string()\n          .nullable()\n          .optional()\n          .describe(\"Why it's a good swap\"),\n      }),\n    )\n    .nullable()\n    .optional()\n    .describe(\"AI-suggested alternative meals\"),\n});\n\nexport const dailyTargetsSchema = z\n  .object({\n    calories: z.number().nullable().optional(),\n    protein: z.number().nullable().optional(),\n    carbs: z.number().nullable().optional(),\n    fats: z.number().nullable().optional(),\n  })\n  .nullable()\n  .optional();\n\n/**\n * Nutrition component schema definition\n */\nexport const NutritionPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  meals: z.array(mealSchema).describe(\"Meals with items (REQUIRED)\"),\n  dailyTargets: dailyTargetsSchema,\n  lock: z.boolean().nullable().optional(),\n});\n\n/** Type inference for Nutrition props */\nexport type NutritionProps = z.infer<typeof NutritionPropsSchema>;\n\n/**\n * Nutrition component definition for catalog registration\n */\nexport const NutritionDefinition = {\n  name: \"Nutrition\" as const,\n  props: NutritionPropsSchema,\n  description:\n    \"Advanced nutrition plan with meal items, macro targets, and AI-generated alternatives for foods and meals.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plane } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  RoundTripCard,\n  SingleFlightCard,\n  type FlightData,\n  type FlightTrip,\n} from \"./components\";\nimport { getFlightAdapter, getFlightStateAdapter } from \"./adapters\";\nimport { useFlightLogic } from \"./hooks\";\n\n/** Animation variants */\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1, transition: { staggerChildren: 0.1 } },\n};\n\nconst headerVariants = {\n  hidden: { opacity: 0, y: \"-0.625rem\" },\n  visible: { opacity: 1, y: 0 },\n};\n\nexport const Flight = memo(function Flight({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    flights,\n    trips,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    flights?: FlightData[] | null;\n    trips?: FlightTrip[] | null;\n    lock?: boolean;\n  };\n\n  const flightAdapter = getFlightAdapter();\n  const stateAdapter = getFlightStateAdapter();\n\n  const { displayTrips, getTripKey, isRoundTrip } = useFlightLogic(\n    element.key,\n    flightAdapter,\n    stateAdapter,\n    { trips, flights, lock },\n  );\n\n  const totalPrice = useMemo(() => {\n    return displayTrips.reduce((sum, trip) => {\n      const outPrice = trip.outbound?.price?.amount || 0;\n      const retPrice = trip.return?.price?.amount || 0;\n      return sum + outPrice + retPrice;\n    }, 0);\n  }, [displayTrips]);\n\n  const currency = displayTrips[0]?.outbound?.price?.currency || \"EUR\";\n\n  useDomainAutoSave(\"flight\", element.key, {\n    title,\n    trips: displayTrips,\n    status: \"search\",\n    totalPrice: totalPrice > 0 ? totalPrice : null,\n    currency,\n  });\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"flex flex-col gap-4 sm:gap-6 w-full\"\n    >\n      {title && (\n        <motion.h3\n          variants={headerVariants}\n          className=\"m-0 text-lg sm:text-xl font-bold text-foreground tracking-tight flex items-center gap-2\"\n        >\n          <Plane className=\"w-4 h-4 sm:w-5 sm:h-5 text-sky-500\" />\n          {title}\n        </motion.h3>\n      )}\n\n      <AnimatePresence mode=\"popLayout\">\n        {displayTrips.map((trip, i) => {\n          const itemKey = getTripKey(trip, i);\n\n          if (isRoundTrip(trip)) {\n            return (\n              <RoundTripCard\n                key={itemKey}\n                trip={trip}\n                index={i}\n                elementKey={element.key}\n                lock={lock}\n              />\n            );\n          }\n\n          return (\n            <SingleFlightCard\n              key={itemKey}\n              flight={trip.outbound}\n              index={i}\n              elementKey={element.key}\n              lock={lock}\n            />\n          );\n        })}\n      </AnimatePresence>\n\n      {children}\n    </motion.div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Plane, Clock, ArrowRight, Calendar } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport { motion } from \"framer-motion\";\nimport type { FlightData } from \"./types\";\nimport { STATUS_VARIANT_MAP } from \"./types\";\n\nexport const FlightStatus = memo(function FlightStatus({\n  status,\n}: {\n  status?: string;\n}) {\n  const config = status ? STATUS_VARIANT_MAP[status] : null;\n  return (\n    <StatusBadge\n      label={status || \"Scheduled\"}\n      variant={config?.variant || \"neutral\"}\n      pulse={config?.pulse}\n    />\n  );\n});\n\nexport const FlightSegment = memo(function FlightSegment({\n  flight,\n  label,\n  isReturn = false,\n  index = 0,\n}: {\n  flight: FlightData;\n  label?: string;\n  isReturn?: boolean;\n  index?: number;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: isReturn ? 20 : -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ duration: 0.4, delay: index * 0.15 }}\n      className=\"relative\"\n    >\n      {label && (\n        <div className=\"flex items-center gap-2 mb-4\">\n          <div\n            className={cn(\n              \"info-pill\",\n              isReturn ? \"bg-purple-500/10\" : \"bg-sky-500/10\",\n            )}\n          >\n            {isReturn ? (\n              <ArrowRight className=\"w-2.5 h-2.5 rotate-180\" />\n            ) : (\n              <ArrowRight className=\"w-2.5 h-2.5\" />\n            )}\n            <span className={isReturn ? \"text-purple-400\" : \"text-sky-400\"}>\n              {label}\n            </span>\n          </div>\n          {flight.departure.date && (\n            <div className=\"info-pill\">\n              <Calendar className=\"w-2.5 h-2.5\" />\n              {flight.departure.date}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex justify-between items-start mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <motion.div\n            whileHover={{ scale: 1.05 }}\n            className=\"w-10 h-10 rounded-xl glass-surface flex items-center justify-center text-white/80 font-bold text-lg\"\n          >\n            {flight.airline[0]}\n          </motion.div>\n          <div>\n            <div className=\"font-bold text-foreground text-sm tracking-tight\">\n              {flight.airline}\n            </div>\n            <div className=\"text-mono-tech mt-0.5\">{flight.flightNumber}</div>\n          </div>\n        </div>\n        <FlightStatus status={flight.status} />\n      </div>\n\n      <div className=\"flex items-center justify-between relative\">\n        <div className=\"text-left z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-display text-2xl sm:text-3xl\"\n          >\n            {flight.departure.code}\n          </motion.div>\n          <div className=\"text-xs sm:text-sm font-medium text-muted-foreground mt-1 max-w-24 sm:max-w-none truncate\">\n            {flight.departure.city}\n          </div>\n          <div className=\"value-badge mt-1\">{flight.departure.time}</div>\n        </div>\n\n        <div className=\"flex-1 px-4 sm:px-8 flex flex-col items-center justify-center relative\">\n          {flight.duration && (\n            <div className=\"info-pill mb-2 z-10\">\n              <Clock className=\"w-2.5 h-2.5\" />\n              {flight.duration}\n            </div>\n          )}\n          <div className=\"w-full h-0.5 bg-white/10 relative overflow-hidden\">\n            <motion.div\n              className={cn(\n                \"absolute inset-y-0 left-0 w-1/2\",\n                isReturn\n                  ? \"bg-gradient-to-r from-transparent via-purple-500 to-transparent\"\n                  : \"bg-gradient-to-r from-transparent via-sky-500 to-transparent\",\n              )}\n              animate={{ x: [\"-100%\", \"200%\"] }}\n              transition={{\n                duration: 2,\n                repeat: Infinity,\n                ease: \"linear\",\n              }}\n            />\n          </div>\n          <Plane\n            className={cn(\n              \"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 stroke-1.5\",\n              isReturn\n                ? \"text-purple-400/50 -rotate-90\"\n                : \"text-sky-400/50 rotate-90\",\n            )}\n          />\n        </div>\n\n        <div className=\"text-right z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"text-display text-2xl sm:text-3xl\"\n          >\n            {flight.arrival.code}\n          </motion.div>\n          <div className=\"text-xs sm:text-sm font-medium text-muted-foreground mt-1 max-w-24 sm:max-w-none truncate ml-auto\">\n            {flight.arrival.city}\n          </div>\n          <div className=\"value-badge mt-1\">{flight.arrival.time}</div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-4 sm:gap-6 mt-6 pt-4 border-t border-dashed border-white/5\">\n        {flight.departure.terminal && (\n          <div>\n            <div className=\"text-label mb-0.5\">Terminal</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.departure.terminal}\n            </div>\n          </div>\n        )}\n        {flight.gate && (\n          <div>\n            <div className=\"text-label mb-0.5\">Gate</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.gate}\n            </div>\n          </div>\n        )}\n        {flight.seat && (\n          <div className=\"hidden sm:block\">\n            <div className=\"text-label mb-0.5\">Seat</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.seat}\n            </div>\n          </div>\n        )}\n        {flight.class && (\n          <div className=\"hidden sm:block\">\n            <div className=\"text-label mb-0.5\">Class</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.class}\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n});\n","import {\n  StatusBadge,\n  type StatusVariant,\n} from \"../../../utils/shared-components\";\n\n// --- Types ---\n\nexport type FlightData = {\n  id: string;\n  airline: string;\n  flightNumber: string;\n  departure: {\n    code: string;\n    city: string;\n    time: string;\n    date?: string;\n    terminal?: string;\n  };\n  arrival: {\n    code: string;\n    city: string;\n    time: string;\n    date?: string;\n    terminal?: string;\n  };\n  gate?: string;\n  seat?: string;\n  class?: string;\n  status?: \"On Time\" | \"Delayed\" | \"Boarding\" | \"Departed\" | \"Cancelled\";\n  duration?: string;\n  price?: {\n    amount: number;\n    currency: string;\n  };\n  bookingUrl?: string;\n  stops?: number;\n};\n\nexport type FlightTrip = {\n  outbound: FlightData;\n  return?: FlightData;\n  totalPrice?: {\n    amount: number;\n    currency: string;\n  };\n  bookingUrl?: string;\n};\n\n// --- Constants ---\n\nexport const STATUS_VARIANT_MAP: Record<\n  string,\n  { variant: StatusVariant; pulse?: boolean }\n> = {\n  \"On Time\": { variant: \"success\" },\n  Boarding: { variant: \"info\", pulse: true },\n  Delayed: { variant: \"warning\" },\n  Departed: { variant: \"neutral\" },\n  Cancelled: { variant: \"error\" },\n};\n\n// --- Helpers ---\n\nexport function pairFlightsIntoTrips(flights: FlightData[]): FlightTrip[] {\n  const trips: FlightTrip[] = [];\n  const used = new Set<string>();\n\n  for (const flight of flights) {\n    if (used.has(flight.id)) continue;\n\n    const returnFlight = flights.find((f) => {\n      if (used.has(f.id) || f.id === flight.id) return false;\n      return (\n        f.departure.code === flight.arrival.code &&\n        f.arrival.code === flight.departure.code\n      );\n    });\n\n    if (returnFlight) {\n      used.add(flight.id);\n      used.add(returnFlight.id);\n\n      const totalPrice = flight.price\n        ? { amount: flight.price.amount, currency: flight.price.currency }\n        : undefined;\n\n      trips.push({\n        outbound: flight,\n        return: returnFlight,\n        totalPrice,\n        bookingUrl: flight.bookingUrl,\n      });\n    } else {\n      used.add(flight.id);\n      trips.push({ outbound: flight });\n    }\n  }\n\n  return trips;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ArrowRight, ArrowLeftRight } from \"lucide-react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { sanitizeUrl } from \"@onegenui/utils\";\nimport { formatCurrency } from \"../../../utils/format-utils\";\nimport { motion } from \"framer-motion\";\nimport type { FlightData, FlightTrip } from \"./types\";\nimport { FlightSegment } from \"./flight-segment\";\n\nexport const RoundTripCard = memo(function RoundTripCard({\n  trip,\n  index,\n  elementKey,\n  lock,\n}: {\n  trip: FlightTrip;\n  index: number;\n  elementKey: string;\n  lock: boolean;\n}) {\n  const price = trip.totalPrice || trip.outbound.price;\n  const bookingUrl = trip.bookingUrl || trip.outbound.bookingUrl;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={trip.outbound.id}\n        className=\"card-glass group\"\n      >\n        <div className=\"gradient-bar\" />\n\n        <div className=\"p-5 sm:p-6\">\n          {trip.return && (\n            <motion.div\n              initial={{ opacity: 0, x: -10 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-2 mb-6\"\n            >\n              <div className=\"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider bg-gradient-to-r from-sky-500/10 to-purple-500/10 text-white/80 px-3 py-1.5 rounded-full border border-white/10\">\n                <ArrowLeftRight className=\"w-3.5 h-3.5\" />\n                Round Trip\n              </div>\n            </motion.div>\n          )}\n\n          <FlightSegment\n            flight={trip.outbound}\n            label={trip.return ? \"Outbound\" : undefined}\n            index={0}\n          />\n\n          {trip.return && (\n            <>\n              <div className=\"divider-perforated my-6\" />\n              <FlightSegment\n                flight={trip.return}\n                label=\"Return\"\n                isReturn\n                index={1}\n              />\n            </>\n          )}\n\n          {(price || bookingUrl) && (\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n              className=\"flex items-center justify-between mt-6 pt-5 border-t border-white/5\"\n            >\n              {price && (\n                <div>\n                  <div className=\"text-label mb-0.5\">\n                    {trip.return ? \"Total Price\" : \"Price\"}\n                  </div>\n                  <div className=\"text-xl sm:text-2xl font-black text-white leading-none\">\n                    {formatCurrency(price.amount, price.currency)}\n                  </div>\n                </div>\n              )}\n\n              {bookingUrl && !lock && (\n                <motion.a\n                  href={sanitizeUrl(bookingUrl)}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"btn-primary no-underline\"\n                >\n                  Book <ArrowRight className=\"w-3 h-3\" strokeWidth={3} />\n                </motion.a>\n              )}\n            </motion.div>\n          )}\n        </div>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n\nexport const SingleFlightCard = memo(function SingleFlightCard({\n  flight,\n  index,\n  elementKey,\n  lock,\n}: {\n  flight: FlightData;\n  index: number;\n  elementKey: string;\n  lock: boolean;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={flight.id}\n        className=\"card-glass group\"\n      >\n        <div className=\"gradient-bar\" />\n\n        <div className=\"p-5 sm:p-6\">\n          <FlightSegment flight={flight} index={0} />\n\n          {(flight.price || flight.bookingUrl) && (\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"flex items-center justify-between mt-6 pt-5 border-t border-white/5\"\n            >\n              {flight.price && (\n                <div>\n                  <div className=\"text-label mb-0.5\">Price</div>\n                  <div className=\"text-xl sm:text-2xl font-black text-white leading-none\">\n                    {formatCurrency(flight.price.amount, flight.price.currency)}\n                  </div>\n                </div>\n              )}\n\n              {flight.bookingUrl && !lock && (\n                <motion.a\n                  href={sanitizeUrl(flight.bookingUrl)}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"btn-primary no-underline\"\n                >\n                  Book <ArrowRight className=\"w-3 h-3\" strokeWidth={3} />\n                </motion.a>\n              )}\n            </motion.div>\n          )}\n        </div>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n","/**\n * Flight Adapter - Implementation of FlightPort\n * Pure functions for flight operations\n */\n\nimport type { FlightPort, FlightStatePort } from \"../ports\";\nimport type { FlightData, FlightTrip } from \"../components/types\";\n\n/**\n * Create a flight adapter with flight operations\n */\nexport function createFlightAdapter(): FlightPort {\n  return {\n    pairFlightsIntoTrips(flights: FlightData[]): FlightTrip[] {\n      const trips: FlightTrip[] = [];\n      const used = new Set<string>();\n\n      for (const flight of flights) {\n        if (used.has(flight.id)) continue;\n\n        const returnFlight = flights.find((f) => {\n          if (used.has(f.id) || f.id === flight.id) return false;\n          return (\n            f.departure.code === flight.arrival.code &&\n            f.arrival.code === flight.departure.code\n          );\n        });\n\n        if (returnFlight) {\n          used.add(flight.id);\n          used.add(returnFlight.id);\n\n          const totalPrice = flight.price\n            ? { amount: flight.price.amount, currency: flight.price.currency }\n            : undefined;\n\n          trips.push({\n            outbound: flight,\n            return: returnFlight,\n            totalPrice,\n            bookingUrl: flight.bookingUrl,\n          });\n        } else {\n          used.add(flight.id);\n          trips.push({ outbound: flight });\n        }\n      }\n\n      return trips;\n    },\n\n    formatPrice(amount: number, currency: string): string {\n      return new Intl.NumberFormat(undefined, {\n        style: \"currency\",\n        currency,\n      }).format(amount);\n    },\n\n    getTripKey(trip: FlightTrip, index: number): string {\n      return trip.outbound.id || `trip-${index}`;\n    },\n\n    isRoundTrip(trip: FlightTrip): boolean {\n      return !!trip.return;\n    },\n  };\n}\n\n/**\n * Create a flight state adapter for state management\n */\nexport function createFlightStateAdapter(): FlightStatePort {\n  return {\n    computeDisplayTrips(\n      trips: FlightTrip[] | null | undefined,\n      flights: FlightData[] | null | undefined,\n      pairFn: (flights: FlightData[]) => FlightTrip[],\n    ): FlightTrip[] {\n      const hasTrips = trips && trips.length > 0;\n      const hasFlights = flights && flights.length > 0;\n\n      if (hasTrips) return trips;\n      if (hasFlights) return pairFn(flights);\n      return [];\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet flightAdapterInstance: FlightPort | null = null;\nlet stateAdapterInstance: FlightStatePort | null = null;\n\nexport function getFlightAdapter(): FlightPort {\n  if (!flightAdapterInstance) {\n    flightAdapterInstance = createFlightAdapter();\n  }\n  return flightAdapterInstance;\n}\n\nexport function getFlightStateAdapter(): FlightStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createFlightStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useFlightLogic - Custom hook for flight state management\n * Separates business logic from presentation\n */\n\nimport { useMemo } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { FlightPort, FlightStatePort } from \"../ports\";\nimport type { FlightData, FlightTrip } from \"../components/types\";\n\nexport interface UseFlightLogicOptions {\n  trips?: FlightTrip[] | null;\n  flights?: FlightData[] | null;\n  lock?: boolean;\n}\n\nexport interface UseFlightLogicReturn {\n  displayTrips: FlightTrip[];\n  hasContent: boolean;\n  getTripKey: (trip: FlightTrip, index: number) => string;\n  isRoundTrip: (trip: FlightTrip) => boolean;\n  updateTrips: (trips: FlightTrip[]) => void;\n}\n\nexport function useFlightLogic(\n  elementKey: string,\n  flightAdapter: FlightPort,\n  stateAdapter: FlightStatePort,\n  options: UseFlightLogicOptions,\n): UseFlightLogicReturn {\n  const { trips, flights, lock = false } = options;\n\n  // Compute initial trips from props\n  const computedTrips = useMemo(\n    () =>\n      stateAdapter.computeDisplayTrips(\n        trips,\n        flights,\n        flightAdapter.pairFlightsIntoTrips.bind(flightAdapter),\n      ),\n    [stateAdapter, flightAdapter, trips, flights],\n  );\n\n  // Synced state for flight data (sent to AI)\n  const [{ localTrips }, updateState] = useElementState(elementKey, {\n    localTrips: null as FlightTrip[] | null,\n  });\n\n  // Use local edits if available, otherwise computed trips\n  const displayTrips = localTrips ?? computedTrips;\n  const hasContent = displayTrips.length > 0;\n\n  const updateTrips = (newTrips: FlightTrip[]) => {\n    if (lock) return;\n    updateState({ localTrips: newTrips });\n  };\n\n  return {\n    displayTrips,\n    hasContent,\n    getTripKey: flightAdapter.getTripKey.bind(flightAdapter),\n    isRoundTrip: flightAdapter.isRoundTrip.bind(flightAdapter),\n    updateTrips,\n  };\n}\n","import { z } from \"zod\";\n\nconst flightDetailsSchema = z.object({\n  code: z.string(),\n  city: z.string(),\n  time: z.string(),\n  date: z.string().optional(),\n  terminal: z.string().optional(),\n});\n\nconst flightSchema = z.object({\n  id: z.string().describe(\"Unique ID (REQUIRED)\"),\n  airline: z.string(),\n  flightNumber: z.string(),\n  departure: flightDetailsSchema,\n  arrival: flightDetailsSchema,\n  duration: z.string().describe(\"Flight duration (e.g. '7h 30m') - REQUIRED\"),\n  price: z\n    .object({\n      amount: z.number().describe(\"Price amount\"),\n      currency: z.string().default(\"EUR\").describe(\"Currency code\"),\n    })\n    .optional()\n    .describe(\"Flight price\"),\n  bookingUrl: z.string().url().optional().describe(\"Deep link to booking page\"),\n  status: z\n    .enum([\"On Time\", \"Delayed\", \"Cancelled\", \"Boarding\", \"Departed\"])\n    .nullable()\n    .optional(),\n  gate: z.string().nullable().optional(),\n  seat: z.string().nullable().optional(),\n  class: z.string().nullable().optional(),\n  foundBy: z.string().nullable().optional(),\n});\n\nconst tripSchema = z.object({\n  outbound: flightSchema.describe(\"Outbound flight details\"),\n  return: flightSchema\n    .optional()\n    .describe(\"Return flight details (for round trips)\"),\n  totalPrice: z\n    .object({\n      amount: z.number(),\n      currency: z.string().default(\"EUR\"),\n    })\n    .optional()\n    .describe(\"Total price for round trip\"),\n  bookingUrl: z.string().url().optional().describe(\"Combined booking URL\"),\n});\n\nexport const FlightPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  flights: z\n    .array(flightSchema)\n    .optional()\n    .describe(\n      \"List of individual flights (will be auto-paired into round trips if possible)\",\n    ),\n  trips: z\n    .array(tripSchema)\n    .optional()\n    .describe(\"Pre-defined round trips with outbound and return flights\"),\n  lock: z.boolean().nullable().optional(),\n});\n\nexport type FlightProps = z.infer<typeof FlightPropsSchema>;\n\nexport const FlightDefinition = {\n  name: \"Flight\" as const,\n  props: FlightPropsSchema,\n  description:\n    \"Flight details card with boarding pass style. Supports both individual flights and round trips. \" +\n    \"When flights array is provided, it will automatically pair matching routes into round trips. \" +\n    \"Alternatively, use trips array for explicit round trip definitions.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport {\n  type ComponentRenderProps,\n  SelectableItem,\n  useDomainAutoSave,\n} from \"@onegenui/react\";\nimport {\n  MapPin,\n  Star,\n  Calendar,\n  Bed,\n  Users,\n  Hotel as HotelIcon,\n  ArrowRight,\n} from \"lucide-react\";\nimport { sanitizeUrl } from \"@onegenui/utils\";\nimport { cn } from \"../../utils/cn\";\nimport { formatCurrency, formatDateShort } from \"../../utils/format-utils\";\nimport { StatusBadge } from \"../../utils/shared-components\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { HotelData, HotelStatus as HotelStatusType } from \"./ports\";\nimport { getHotelAdapter } from \"./adapters\";\n\nconst hotelAdapter = getHotelAdapter();\n\n/** Animation variants */\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1, transition: { staggerChildren: 0.1 } },\n};\n\nconst cardVariants = {\n  hidden: { opacity: 0, y: \"1.25rem\" },\n  visible: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: \"-1.25rem\" },\n};\n\nconst HotelStatusBadge = ({ status }: { status: HotelStatusType }) => (\n  <StatusBadge\n    label={status}\n    variant={hotelAdapter.getStatusVariant(status)}\n    pulse\n  />\n);\n\nexport const Hotel = memo(function Hotel({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    hotels,\n    layout = \"list\",\n  } = element.props as {\n    title?: string | null;\n    hotels?: HotelData[] | null;\n    layout?: \"list\" | \"card\";\n  };\n\n  const { checkIn, checkOut, totalPrice, currency } = useMemo(() => {\n    const hotelList = hotels || [];\n    let minCheckIn: Date | null = null;\n    let maxCheckOut: Date | null = null;\n    let total = 0;\n    let curr = \"EUR\";\n\n    for (const hotel of hotelList) {\n      if (hotel.dates?.checkIn) {\n        const cin = new Date(hotel.dates.checkIn);\n        if (!minCheckIn || cin < minCheckIn) minCheckIn = cin;\n      }\n      if (hotel.dates?.checkOut) {\n        const cout = new Date(hotel.dates.checkOut);\n        if (!maxCheckOut || cout > maxCheckOut) maxCheckOut = cout;\n      }\n      if (hotel.price?.amount) {\n        total += hotel.price.amount;\n        curr = hotel.price.currency || curr;\n      }\n    }\n\n    return {\n      checkIn: minCheckIn?.toISOString() || null,\n      checkOut: maxCheckOut?.toISOString() || null,\n      totalPrice: total > 0 ? total : null,\n      currency: curr,\n    };\n  }, [hotels]);\n\n  useDomainAutoSave(\"hotel\", element.key, {\n    title,\n    hotels: hotels || [],\n    status: \"search\",\n    checkIn,\n    checkOut,\n    totalPrice,\n    currency,\n  });\n\n  return (\n    <motion.div\n      variants={containerVariants}\n      initial=\"hidden\"\n      animate=\"visible\"\n      className=\"flex flex-col gap-4 sm:gap-6 w-full\"\n    >\n      {title && (\n        <h3 className=\"m-0 text-lg sm:text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60 tracking-tight flex items-center gap-2\">\n          <HotelIcon className=\"w-5 h-5 sm:w-6 sm:h-6 text-amber-400 hidden\" />\n          {title}\n        </h3>\n      )}\n\n      <div\n        className={cn(\n          \"grid gap-4 sm:gap-6\",\n          // Mobile-first: single column, then responsive\n          layout === \"card\"\n            ? \"grid-cols-1 sm:grid-cols-[repeat(auto-fill,minmax(16rem,1fr))]\"\n            : \"grid-cols-1\",\n        )}\n      >\n        <AnimatePresence mode=\"popLayout\">\n          {(hotels || []).map((hotel, i) => {\n            return (\n              <motion.div\n                variants={cardVariants}\n                initial=\"hidden\"\n                animate=\"visible\"\n                exit=\"exit\"\n                key={hotel.id}\n              >\n              <SelectableItem\n                elementKey={element.key}\n                itemId={hotel.id}\n                className={cn(\n                  \"group relative bg-zinc-900/40 backdrop-blur-md border border-white/10 overflow-hidden cursor-pointer transition-all duration-500\",\n                  \"hover:shadow-2xl hover:shadow-black/50 hover:border-white/20 hover:-translate-y-0.5\",\n                  \"flex isolate rounded-xl sm:rounded-3xl\",\n                  // Mobile: always stack vertically\n                  \"flex-col\",\n                  // Desktop list: side-by-side\n                  layout === \"list\" && \"sm:flex-row sm:min-h-[12.5rem]\",\n                )}\n              >\n                {/* Hotel Image & Overlay */}\n                <div\n                  className={cn(\n                    \"relative overflow-hidden z-0\",\n                    // Mobile: fixed height on top\n                    \"h-36 w-full\",\n                    // Desktop list: side image\n                    layout === \"list\" && \"sm:w-[15rem] sm:min-w-[15rem] sm:h-full sm:absolute sm:inset-y-0 sm:left-0\",\n                  )}\n                >\n                  {hotel.image ? (\n                    <div className=\"absolute inset-0 transition-transform duration-700 group-hover:scale-110\">\n                      <img\n                        src={hotel.image}\n                        alt={hotel.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"absolute inset-0 bg-gradient-to-br from-zinc-800 to-zinc-950 flex items-center justify-center\">\n                      <HotelIcon className=\"w-10 h-10 sm:w-12 sm:h-12 text-white/10\" />\n                    </div>\n                  )}\n\n                  {/* Gradients */}\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-80\" />\n                  {layout === \"list\" && (\n                    <div className=\"hidden sm:block absolute inset-0 bg-gradient-to-r from-transparent via-black/60 to-zinc-950\" />\n                  )}\n\n                  {/* Status Badge */}\n                  {hotel.status && (\n                    <div className=\"absolute top-3 left-3 sm:top-4 sm:left-4\">\n                      <HotelStatusBadge status={hotel.status} />\n                    </div>\n                  )}\n                </div>\n\n                {/* Content Section */}\n                <div\n                  className={cn(\n                    \"relative z-10 flex flex-col p-4 sm:p-6 flex-1\",\n                    layout === \"list\" && \"sm:pl-[14rem]\",\n                  )}\n                >\n                  <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 sm:gap-4 mb-2\">\n                    <div className=\"space-y-1 min-w-0\">\n                      <h4 className=\"text-base sm:text-xl font-bold text-foreground group-hover:text-amber-400 transition-colors leading-tight truncate\">\n                        {hotel.name}\n                      </h4>\n                      {hotel.address && (\n                        <div className=\"flex items-center gap-1 sm:gap-1.5 text-[0.625rem] sm:text-xs font-medium text-white/60\">\n                          <MapPin className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white/40 flex-shrink-0\" />\n                          <span className=\"truncate\">{hotel.address}</span>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Rating */}\n                    {hotel.rating && (\n                      <div className=\"flex items-center gap-1 bg-black/40 backdrop-blur-md px-2 py-1 rounded-lg border border-white/10 shrink-0 self-start\">\n                        <Star className=\"w-3 h-3 fill-amber-400 text-amber-400\" />\n                        <span className=\"text-xs sm:text-sm font-bold text-foreground\">\n                          {hotel.rating}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Divider */}\n                  <div className=\"h-px bg-white/10 w-full my-3 sm:my-4 group-hover:bg-white/20 transition-colors\" />\n\n                  {/* Trip Details */}\n                  <div className=\"grid grid-cols-2 gap-3 sm:gap-4 text-[0.625rem] sm:text-xs\">\n                    {hotel.dates && (\n                      <div className=\"space-y-0.5 sm:space-y-1\">\n                        <div className=\"text-white/40 uppercase tracking-wider font-bold text-[0.5rem] sm:text-[0.625rem]\">\n                          Dates\n                        </div>\n                        <div className=\"text-foreground font-medium flex items-center gap-1 sm:gap-1.5\">\n                          <Calendar className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 text-indigo-400 flex-shrink-0\" />\n                          <span className=\"truncate\">\n                            {formatDateShort(hotel.dates.checkIn)}\n                            <span className=\"text-white/30 mx-0.5\">-</span>\n                            {formatDateShort(hotel.dates.checkOut)}\n                          </span>\n                        </div>\n                      </div>\n                    )}\n\n                    <div className=\"space-y-0.5 sm:space-y-1\">\n                      <div className=\"text-white/40 uppercase tracking-wider font-bold text-[0.5rem] sm:text-[0.625rem]\">\n                        Details\n                      </div>\n                      <div className=\"text-foreground font-medium flex items-center gap-1.5 sm:gap-2 flex-wrap\">\n                        {hotel.guests && (\n                          <span className=\"flex items-center gap-0.5 sm:gap-1\">\n                            <Users className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 text-emerald-400\" />\n                            {hotel.guests}\n                          </span>\n                        )}\n                        {hotel.roomType && (\n                          <span\n                            className=\"flex items-center gap-0.5 sm:gap-1 truncate max-w-[5rem] sm:max-w-[6.25rem]\"\n                            title={hotel.roomType}\n                          >\n                            <Bed className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 text-rose-400 flex-shrink-0\" />\n                            <span className=\"truncate\">{hotel.roomType}</span>\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Footer: Price & Action */}\n                  <div className=\"mt-auto pt-4 sm:pt-6 flex w-full items-end justify-between gap-2\">\n                    {hotel.amenities && hotel.amenities.length > 0 && (\n                      <div className=\"hidden sm:flex -space-x-2\">\n                        {hotel.amenities.slice(0, 3).map((a, idx) => (\n                          <div\n                            key={idx}\n                            className=\"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center text-[0.5rem] sm:text-[0.625rem] text-zinc-400 font-bold uppercase overflow-hidden\"\n                            title={a}\n                          >\n                            {a[0]}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {hotel.price && (\n                      <div className=\"ml-auto flex items-center gap-3 sm:gap-4\">\n                        <div className=\"text-right\">\n                          <div className=\"text-[0.5rem] sm:text-[0.625rem] text-white/40 font-bold uppercase tracking-wide\">\n                            {hotel.price.perNight ? \"Per Night\" : \"Total\"}\n                          </div>\n                          <div className=\"text-lg sm:text-2xl font-black text-foreground tracking-tight leading-none\">\n                            {formatCurrency(\n                              hotel.price.amount,\n                              hotel.price.currency,\n                            )}\n                          </div>\n                        </div>\n\n                        {hotel.bookingUrl ? (\n                          <a\n                            href={sanitizeUrl(hotel.bookingUrl)}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"h-9 w-9 sm:h-10 sm:w-10 flex items-center justify-center rounded-full bg-white text-black hover:scale-110 active:scale-95 transition-transform shadow-lg shadow-white/10 touch-manipulation\"\n                          >\n                            <ArrowRight className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" strokeWidth={2.5} />\n                          </a>\n                        ) : (\n                          <button className=\"h-9 w-9 sm:h-10 sm:w-10 flex items-center justify-center rounded-full bg-white text-black hover:scale-110 active:scale-95 transition-transform shadow-lg shadow-white/10 touch-manipulation\">\n                            <ArrowRight className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" strokeWidth={2.5} />\n                          </button>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </SelectableItem>\n            </motion.div>\n          );\n        })}\n        </AnimatePresence>\n      </div>\n\n      {children}\n    </motion.div>\n  );\n});\n","/**\n * Hotel Adapter - Implementation of HotelPort\n * Pure functions for hotel operations\n */\n\nimport type {\n  HotelPort,\n  HotelStatePort,\n  HotelData,\n  HotelStatus,\n  StatusVariantType,\n} from \"../ports\";\n\nconst STATUS_VARIANT_MAP: Record<HotelStatus, StatusVariantType> = {\n  Available: \"info\",\n  Booked: \"success\",\n  Reserved: \"success\",\n  \"Sold Out\": \"error\",\n};\n\n/**\n * Create a hotel adapter with hotel operations\n */\nexport function createHotelAdapter(): HotelPort {\n  return {\n    getStatusVariant(status: HotelStatus): StatusVariantType {\n      return STATUS_VARIANT_MAP[status] || \"neutral\";\n    },\n\n    calculateNights(checkIn: string, checkOut: string): number {\n      const start = new Date(checkIn);\n      const end = new Date(checkOut);\n      const diffTime = end.getTime() - start.getTime();\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    },\n\n    calculateTotalPrice(\n      pricePerNight: number,\n      checkIn: string,\n      checkOut: string,\n    ): number {\n      const nights = this.calculateNights(checkIn, checkOut);\n      return pricePerNight * Math.max(1, nights);\n    },\n\n    formatAmenities(amenities: string[], limit: number): string[] {\n      return amenities.slice(0, limit);\n    },\n\n    isBookable(status?: HotelStatus): boolean {\n      if (!status) return true;\n      return status === \"Available\";\n    },\n  };\n}\n\n/**\n * Create a hotel state adapter for selection management\n */\nexport function createHotelStateAdapter(): HotelStatePort {\n  return {\n    toggleSelection(\n      selections: Record<string, boolean>,\n      hotelId: string,\n    ): Record<string, boolean> {\n      const current = selections[hotelId] ?? false;\n      return { ...selections, [hotelId]: !current };\n    },\n\n    getSelectedIds(selections: Record<string, boolean>): string[] {\n      return Object.entries(selections)\n        .filter(([, selected]) => selected)\n        .map(([id]) => id);\n    },\n\n    filterByStatus(hotels: HotelData[], status?: HotelStatus): HotelData[] {\n      if (!status) return hotels;\n      return hotels.filter((hotel) => hotel.status === status);\n    },\n\n    sortByPrice(hotels: HotelData[], ascending: boolean): HotelData[] {\n      return [...hotels].sort((a, b) => {\n        const priceA = a.price?.amount ?? 0;\n        const priceB = b.price?.amount ?? 0;\n        return ascending ? priceA - priceB : priceB - priceA;\n      });\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet hotelAdapterInstance: HotelPort | null = null;\nlet stateAdapterInstance: HotelStatePort | null = null;\n\nexport function getHotelAdapter(): HotelPort {\n  if (!hotelAdapterInstance) {\n    hotelAdapterInstance = createHotelAdapter();\n  }\n  return hotelAdapterInstance;\n}\n\nexport function getHotelStateAdapter(): HotelStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createHotelStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","import { z } from \"zod\";\n\n/**\n * Hotel data schema for a single hotel\n */\nconst HotelDataSchema = z.object({\n  id: z.string().describe(\"Unique identifier for the hotel\"),\n  name: z.string().describe(\"Hotel name\"),\n  rating: z.number().optional().describe(\"Hotel rating (e.g., 4.5)\"),\n  address: z.string().optional().describe(\"Hotel address\"),\n  dates: z\n    .object({\n      checkIn: z.string().describe(\"Check-in date (ISO format)\"),\n      checkOut: z.string().describe(\"Check-out date (ISO format)\"),\n    })\n    .optional()\n    .describe(\"Booking dates\"),\n  price: z\n    .object({\n      amount: z.number().describe(\"Price amount\"),\n      currency: z.string().describe(\"Currency code (e.g., EUR, USD)\"),\n      perNight: z.boolean().optional().describe(\"Whether price is per night\"),\n    })\n    .optional()\n    .describe(\"Price information\"),\n  image: z\n    .string()\n    .optional()\n    .describe(\n      \"URL to hotel image - ALWAYS include when available from web search\",\n    ),\n  amenities: z.array(z.string()).optional().describe(\"List of amenities\"),\n  status: z\n    .enum([\"Available\", \"Booked\", \"Sold Out\", \"Reserved\"])\n    .optional()\n    .describe(\"Booking status\"),\n  roomType: z\n    .string()\n    .optional()\n    .describe(\"Type of room (e.g., Double, Suite)\"),\n  guests: z.number().optional().describe(\"Number of guests\"),\n  bookingUrl: z\n    .string()\n    .optional()\n    .describe(\"URL to the hotel booking page - ALWAYS include when available\"),\n});\n\n/**\n * Hotel component schema definition\n */\nexport const HotelPropsSchema = z.object({\n  title: z.string().optional().describe(\"Section title for the hotel list\"),\n  hotels: z\n    .array(HotelDataSchema)\n    .optional()\n    .describe(\"Array of hotels to display\"),\n  layout: z\n    .enum([\"list\", \"card\"])\n    .optional()\n    .describe(\"Display layout: 'list' (default) or 'card'\"),\n});\n\n/** Type inference for Hotel props */\nexport type HotelProps = z.infer<typeof HotelPropsSchema>;\n\n/**\n * Hotel component definition for catalog registration\n */\nexport const HotelDefinition = {\n  name: \"Hotel\" as const,\n  props: HotelPropsSchema,\n  description:\n    \"Display hotel listings with images, ratings, prices, and booking links\",\n  hasChildren: true,\n};\n","/**\n * useHotelLogic - Custom hook for hotel state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type {\n  HotelPort,\n  HotelStatePort,\n  HotelData,\n  HotelStatus,\n} from \"../ports\";\n\ninterface HotelElementState extends Record<string, unknown> {\n  selections: Record<string, boolean>;\n}\n\nexport interface UseHotelLogicOptions {\n  initialHotels: HotelData[];\n  lock?: boolean;\n}\n\nexport interface UseHotelLogicReturn {\n  // State\n  hotels: HotelData[];\n  selections: Record<string, boolean>;\n  filterStatus: HotelStatus | undefined;\n  sortAscending: boolean;\n\n  // Derived\n  filteredHotels: HotelData[];\n  selectedIds: string[];\n  selectedCount: number;\n\n  // Actions\n  toggleSelection: (hotelId: string) => void;\n  setFilterStatus: (status: HotelStatus | undefined) => void;\n  toggleSortOrder: () => void;\n  clearSelections: () => void;\n\n  // Utilities\n  getStatusVariant: HotelPort[\"getStatusVariant\"];\n  isBookable: HotelPort[\"isBookable\"];\n  calculateNights: HotelPort[\"calculateNights\"];\n  calculateTotalPrice: HotelPort[\"calculateTotalPrice\"];\n}\n\nexport function useHotelLogic(\n  elementKey: string,\n  hotelAdapter: HotelPort,\n  stateAdapter: HotelStatePort,\n  options: UseHotelLogicOptions,\n): UseHotelLogicReturn {\n  const { initialHotels, lock = false } = options;\n\n  // Selection state (persisted via Zustand)\n  const [elementState, updateElementState] = useElementState<HotelElementState>(\n    elementKey,\n    { selections: {} },\n  );\n  const { selections } = elementState;\n\n  // Filter state\n  const [filterStatus, setFilterStatus] = useState<HotelStatus | undefined>(\n    undefined,\n  );\n\n  // Sort state\n  const [sortAscending, setSortAscending] = useState(true);\n\n  // Derived: filtered and sorted hotels\n  const filteredHotels = useMemo(() => {\n    const filtered = stateAdapter.filterByStatus(initialHotels, filterStatus);\n    return stateAdapter.sortByPrice(filtered, sortAscending);\n  }, [stateAdapter, initialHotels, filterStatus, sortAscending]);\n\n  // Derived: selected IDs\n  const selectedIds = useMemo(\n    () => stateAdapter.getSelectedIds(selections),\n    [stateAdapter, selections],\n  );\n\n  const selectedCount = selectedIds.length;\n\n  // Actions\n  const toggleSelection = useCallback(\n    (hotelId: string) => {\n      if (lock) return;\n      updateElementState({\n        selections: stateAdapter.toggleSelection(selections, hotelId),\n      });\n    },\n    [lock, stateAdapter, selections, updateElementState],\n  );\n\n  const toggleSortOrder = useCallback(() => {\n    setSortAscending((prev) => !prev);\n  }, []);\n\n  const clearSelections = useCallback(() => {\n    if (lock) return;\n    updateElementState({ selections: {} });\n  }, [lock, updateElementState]);\n\n  return {\n    // State\n    hotels: initialHotels,\n    selections,\n    filterStatus,\n    sortAscending,\n\n    // Derived\n    filteredHotels,\n    selectedIds,\n    selectedCount,\n\n    // Actions\n    toggleSelection,\n    setFilterStatus,\n    toggleSortOrder,\n    clearSelections,\n\n    // Utilities from adapter\n    getStatusVariant: hotelAdapter.getStatusVariant.bind(hotelAdapter),\n    isBookable: hotelAdapter.isBookable.bind(hotelAdapter),\n    calculateNights: hotelAdapter.calculateNights.bind(hotelAdapter),\n    calculateTotalPrice: hotelAdapter.calculateTotalPrice.bind(hotelAdapter),\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plane, Hotel, MapPin, Calendar, Wallet } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { TripProps } from \"./schema\";\nimport { formatCurrency } from \"../../utils/format-utils\";\nimport { StatusBadge, type StatusVariant } from \"../../utils/shared-components\";\n\n// --- Types ---\n\ntype TripData = {\n  id: string;\n  title: string;\n  dates?: {\n    start: string;\n    end: string;\n  };\n  destination?: string;\n  status: \"Upcoming\" | \"Completed\" | \"Draft\" | \"Cancelled\";\n  totalCost?: {\n    amount: number;\n    currency: string;\n  };\n  stats?: {\n    flights: number;\n    hotels: number;\n    activities: number;\n  };\n  imageUrl?: string;\n};\n\n// Map trip status to badge variant\nconst STATUS_TO_VARIANT: Record<string, StatusVariant> = {\n  Upcoming: \"info\",\n  Completed: \"success\",\n  Draft: \"warning\",\n  Cancelled: \"error\",\n};\n\nexport const Trip = memo(function Trip({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, trips, activeTripId } = element.props as {\n    title?: string | null;\n    trips?: TripData[] | null;\n    activeTripId?: string | null;\n  };\n\n  const activeTrip = useMemo(\n    () => trips?.find((t) => t.id === activeTripId),\n    [trips, activeTripId],\n  );\n\n  // Auto-save trip data to database when it changes\n  useDomainAutoSave(\n    \"trip\",\n    element.key,\n    activeTrip\n      ? {\n          name: activeTrip.title,\n          destinations: [activeTrip.destination],\n          startDate: activeTrip.dates?.start,\n          endDate: activeTrip.dates?.end,\n          status: activeTrip.status?.toLowerCase() || \"planning\",\n          budget: activeTrip.totalCost?.amount,\n          currency: activeTrip.totalCost?.currency,\n        }\n      : null,\n  );\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-6 lg:gap-8 w-full\">\n      {/* Header Section */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl sm:text-2xl lg:text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50\">\n          {title || \"My Trips\"}\n        </h2>\n      </div>\n\n      {/* Trip Selector / Cards */}\n      {trips && trips.length > 0 && (\n        <div className=\"flex gap-3 sm:gap-4 overflow-x-auto pb-4 -mx-1 px-1 scrollbar-none snap-x snap-mandatory perspective-[1000px] touch-pan-x\">\n          {trips.map((trip, index) => {\n            const isActive = activeTripId === trip.id;\n\n            return (\n              <motion.div\n                key={trip.id}\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                data-selectable-item\n                data-element-key={element.key}\n                data-item-id={trip.id}\n                className={cn(\n                  \"min-w-[16rem] sm:min-w-[17.5rem] h-[10rem] sm:h-[11.25rem] p-4 sm:p-5 rounded-2xl sm:rounded-3xl cursor-pointer relative overflow-hidden group snap-center transition-all duration-500 border touch-manipulation\",\n                  isActive\n                    ? \"border-primary/50 shadow-[0_0_40px_-10px_rgba(99,102,241,0.4)] scale-100\"\n                    : \"border-white/5 hover:border-white/20 bg-black/40 hover:bg-black/60 scale-[0.98] hover:scale-[1.0]\",\n                )}\n              >\n                {/* Background Image / Gradient */}\n                <div className=\"absolute inset-0 z-0\">\n                  <div\n                    className={cn(\n                      \"absolute inset-0 bg-gradient-to-br transition-opacity duration-500\",\n                      isActive\n                        ? \"from-indigo-600/20 to-purple-600/20 opacity-100\"\n                        : \"from-zinc-900 to-black opacity-100\",\n                    )}\n                  />\n                  {/* Placeholder for future Image integration */}\n                  {trip.imageUrl && (\n                    <img\n                      src={trip.imageUrl}\n                      alt=\"\"\n                      className=\"w-full h-full object-cover opacity-30 mix-blend-overlay transition-transform duration-700 group-hover:scale-110\"\n                    />\n                  )}\n                </div>\n\n                {/* Content Layer */}\n                <div className=\"relative z-10 flex flex-col h-full justify-between\">\n                  <div className=\"flex justify-between items-start gap-2\">\n                    <div className=\"flex items-center gap-1.5 text-white/90 font-bold tracking-tight bg-black/30 backdrop-blur-md px-2 sm:px-3 py-1 sm:py-1.5 rounded-full border border-white/5\">\n                      <MapPin className=\"w-3 h-3 text-indigo-400\" />\n                      <span className=\"text-[0.625rem] sm:text-xs uppercase whitespace-nowrap\">\n                        {trip.destination || \"Unknown\"}\n                      </span>\n                    </div>\n                    <StatusBadge\n                      label={trip.status}\n                      variant={STATUS_TO_VARIANT[trip.status] || \"neutral\"}\n                    />\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    <h4\n                      className={cn(\n                        \"text-base sm:text-lg lg:text-xl font-bold leading-tight transition-colors line-clamp-2\",\n                        isActive ? \"text-white\" : \"text-zinc-200\",\n                      )}\n                    >\n                      {trip.title}\n                    </h4>\n                    <div className=\"flex items-center gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs font-medium text-white/50\">\n                      <Calendar className=\"w-3 h-3\" />\n                      {trip.dates?.start\n                        ? new Date(trip.dates.start).toLocaleDateString(\n                            undefined,\n                            { month: \"short\", day: \"numeric\" },\n                          )\n                        : \"TBD\"}\n                      {\" - \"}\n                      {trip.dates?.end\n                        ? new Date(trip.dates.end).toLocaleDateString(\n                            undefined,\n                            { month: \"short\", day: \"numeric\" },\n                          )\n                        : \"TBD\"}\n                    </div>\n                  </div>\n\n                  {/* Stats Strip */}\n                  <div className=\"pt-3 sm:pt-4 mt-auto border-t border-white/10 flex items-center gap-3 sm:gap-4 text-[0.625rem] sm:text-xs font-medium text-white/60\">\n                    {trip.stats?.flights ? (\n                      <span className=\"flex items-center gap-1\">\n                        <Plane className=\"w-3 h-3 text-sky-400\" />{\" \"}\n                        {trip.stats.flights} <span className=\"hidden sm:inline\">Flights</span>\n                      </span>\n                    ) : null}\n                    {trip.stats?.hotels ? (\n                      <span className=\"flex items-center gap-1\">\n                        <Hotel className=\"w-3 h-3 text-amber-400\" />{\" \"}\n                        {trip.stats.hotels} <span className=\"hidden sm:inline\">Hotels</span>\n                      </span>\n                    ) : null}\n                  </div>\n                </div>\n              </motion.div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Trip Details & Children */}\n      <AnimatePresence mode=\"wait\">\n        {activeTripId && (\n          <motion.div\n            key={activeTripId}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            transition={{ duration: 0.4 }}\n            className=\"flex flex-col gap-6\"\n          >\n            {/* Total Budget Overview if Available */}\n            {activeTrip?.totalCost && (\n              <div className=\"glass-panel p-4 sm:p-5 lg:p-6 rounded-xl sm:rounded-2xl flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/20\">\n                    <Wallet className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n                  </div>\n                  <div>\n                    <div className=\"text-xs sm:text-sm font-medium text-muted-foreground\">\n                      Total Budget\n                    </div>\n                    <div className=\"text-lg sm:text-xl lg:text-2xl font-bold tracking-tight font-mono\">\n                      {formatCurrency(\n                        activeTrip.totalCost.amount,\n                        activeTrip.totalCost.currency,\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-[0.625rem] sm:text-xs text-muted-foreground bg-white/5 px-2 sm:px-3 py-1 sm:py-1.5 rounded-full self-start sm:self-auto\">\n                  Estimated\n                </div>\n              </div>\n            )}\n\n            {/* Itinerary Container */}\n            <div className=\"relative pl-4 sm:pl-6 lg:pl-8 border-l-2 border-dashed border-white/10 space-y-4 sm:space-y-6 lg:space-y-8\">\n              {/* Render Children (Flights, Hotels, Activities) */}\n              {children}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n","import { z } from \"zod\";\n\n/**\n * Trip component schema definition\n */\nexport const TripPropsSchema = z.object({});\n\n/** Type inference for Trip props */\nexport type TripProps = z.infer<typeof TripPropsSchema>;\n\n/**\n * Trip component definition for catalog registration\n */\nexport const TripDefinition = {\n  name: \"Trip\" as const,\n  props: TripPropsSchema,\n  description: \"Trip component\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport {\n  Plane,\n  Hotel,\n  ArrowRight,\n  Calendar,\n  MapPin,\n  User,\n  Search,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { BookingType, BookingMode } from \"./ports\";\nimport {\n  getBookingFormsValidationAdapter,\n  getBookingFormsStateAdapter,\n} from \"./adapters\";\nimport { useBookingFormsLogic } from \"./hooks\";\n\nexport const BookingForms = memo(function BookingForms({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    type = \"flight\",\n    mode = \"create\",\n    title,\n  } = element.props as {\n    type: BookingType;\n    mode: BookingMode;\n    title?: string;\n  };\n\n  const validationAdapter = getBookingFormsValidationAdapter();\n  const stateAdapter = getBookingFormsStateAdapter();\n\n  const {\n    activeTab,\n    setActiveTab,\n    flightForm,\n    hotelForm,\n    updateFlightField,\n    updateHotelField,\n    actionLabel,\n    promoText,\n  } = useBookingFormsLogic(element.key, validationAdapter, stateAdapter, {\n    initialType: type,\n    mode,\n  });\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.98 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"glass-panel w-full max-w-[500px] rounded-2xl sm:rounded-3xl border border-white/10 bg-zinc-900/60 backdrop-blur-xl shadow-2xl relative overflow-hidden isolate\"\n    >\n      {/* Decorative Top Bar */}\n      <div className=\"absolute top-0 left-0 right-0 h-1 sm:h-1.5 bg-gradient-to-r from-sky-500 via-indigo-500 to-purple-500\" />\n\n      <div className=\"p-4 sm:p-6 lg:p-8\">\n        {/* Header & Tabs */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 gap-3 sm:gap-4\">\n          <h3 className=\"text-lg sm:text-xl font-bold tracking-tight text-white m-0\">\n            {title || \"Booking\"}\n          </h3>\n\n          <div className=\"flex bg-black/40 p-1 rounded-lg sm:rounded-xl border border-white/5\">\n            {([\"flight\", \"hotel\"] as const).map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={cn(\n                  \"px-2 sm:px-3 py-1 sm:py-1.5 rounded-md sm:rounded-lg text-[0.625rem] sm:text-xs font-bold uppercase tracking-wider flex items-center gap-1.5 sm:gap-2 transition-all relative touch-manipulation\",\n                  activeTab === tab\n                    ? \"text-white\"\n                    : \"text-zinc-500 hover:text-zinc-300\",\n                )}\n              >\n                {activeTab === tab && (\n                  <motion.div\n                    layoutId=\"activeTab\"\n                    className=\"absolute inset-0 bg-white/10 rounded-md sm:rounded-lg border border-white/10 shadow-sm\"\n                  />\n                )}\n                <span className=\"relative z-10 flex items-center gap-1 sm:gap-1.5\">\n                  {tab === \"flight\" ? <Plane className=\"w-3 h-3\" /> : <Hotel className=\"w-3 h-3\" />}\n                  <span className=\"hidden sm:inline\">{tab}</span>\n                </span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Form Content */}\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, x: 10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -10 }}\n            transition={{ duration: 0.2 }}\n            className=\"flex flex-col gap-4 sm:gap-6\"\n          >\n            {activeTab === \"flight\" ? (\n              <>\n                {/* Route Input Group (Ticket Style) */}\n                <div className=\"bg-black/20 border border-white/5 rounded-xl sm:rounded-2xl p-3 sm:p-4 flex items-center gap-3 sm:gap-4 relative\">\n                  <div className=\"flex-1\">\n                    <label className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase tracking-widest pl-1 mb-0.5 sm:mb-1 block\">\n                      From\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"JFK\"\n                      value={flightForm.from}\n                      onChange={(e) =>\n                        updateFlightField(\"from\", e.target.value.toUpperCase())\n                      }\n                      className=\"w-full bg-transparent text-xl sm:text-2xl font-black text-white placeholder-zinc-700 outline-none uppercase font-mono tracking-tight min-h-[2.75rem]\"\n                    />\n                    <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 font-medium\">\n                      {flightForm.fromCity || \"Origin City\"}\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col items-center justify-center opacity-50\">\n                    <div className=\"w-px h-6 sm:h-8 bg-zinc-700 mx-auto mb-0.5 sm:mb-1\" />\n                    <div className=\"p-1 sm:p-1.5 rounded-full bg-zinc-800 border border-zinc-700\">\n                      <Plane className=\"w-2.5 h-2.5 sm:w-3 sm:h-3 rotate-90 text-zinc-400\" />\n                    </div>\n                    <div className=\"w-px h-6 sm:h-8 bg-zinc-700 mx-auto mt-0.5 sm:mt-1\" />\n                  </div>\n\n                  <div className=\"flex-1 text-right\">\n                    <label className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase tracking-widest pr-1 mb-0.5 sm:mb-1 block\">\n                      To\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"LHR\"\n                      value={flightForm.to}\n                      onChange={(e) =>\n                        updateFlightField(\"to\", e.target.value.toUpperCase())\n                      }\n                      className=\"w-full bg-transparent text-xl sm:text-2xl font-black text-white placeholder-zinc-700 outline-none uppercase font-mono tracking-tight text-right min-h-[2.75rem]\"\n                    />\n                    <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 font-medium\">\n                      {flightForm.toCity || \"Destination City\"}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Detail Inputs */}\n                <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\n                  <div className=\"bg-black/20 border border-white/5 rounded-lg sm:rounded-xl p-2 sm:p-3 hover:border-white/20 transition-colors cursor-pointer group touch-manipulation\">\n                    <div className=\"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 text-zinc-500 group-hover:text-zinc-300\">\n                      <Calendar className=\"w-3 h-3\" />\n                      <span className=\"text-[0.5rem] sm:text-[0.625rem] font-bold uppercase tracking-widest\">\n                        Date\n                      </span>\n                    </div>\n                    <div className=\"text-xs sm:text-sm font-semibold text-white\">\n                      {flightForm.date || \"Select Date\"}\n                    </div>\n                  </div>\n                  <div className=\"bg-black/20 border border-white/5 rounded-lg sm:rounded-xl p-2 sm:p-3 hover:border-white/20 transition-colors cursor-pointer group touch-manipulation\">\n                    <div className=\"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 text-zinc-500 group-hover:text-zinc-300\">\n                      <User className=\"w-3 h-3\" />\n                      <span className=\"text-[0.5rem] sm:text-[0.625rem] font-bold uppercase tracking-widest\">\n                        Passengers\n                      </span>\n                    </div>\n                    <div className=\"text-xs sm:text-sm font-semibold text-white\">\n                      {flightForm.passengers} Adult\n                      {flightForm.passengers > 1 ? \"s\" : \"\"}\n                    </div>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <>\n                {/* Location Input */}\n                <div className=\"bg-black/20 border border-white/5 rounded-xl sm:rounded-2xl p-3 sm:p-4 flex items-center gap-3 sm:gap-4 group hover:border-white/20 transition-colors touch-manipulation\">\n                  <MapPin\n                    className=\"text-zinc-600 group-hover:text-sky-500 transition-colors w-5 h-5 sm:w-6 sm:h-6\"\n                  />\n                  <div className=\"flex-1\">\n                    <label className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase tracking-widest mb-0.5 block\">\n                      Destination\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Where to?\"\n                      value={hotelForm.destination}\n                      onChange={(e) =>\n                        updateHotelField(\"destination\", e.target.value)\n                      }\n                      className=\"w-full bg-transparent text-base sm:text-lg font-bold text-white placeholder-zinc-700 outline-none min-h-[2.75rem]\"\n                    />\n                  </div>\n                </div>\n\n                {/* Date Range */}\n                <div className=\"grid grid-cols-2 gap-px bg-white/10 rounded-lg sm:rounded-xl overflow-hidden border border-white/5\">\n                  <div className=\"bg-black/30 p-2 sm:p-3 hover:bg-black/40 transition-colors cursor-pointer text-center touch-manipulation\">\n                    <div className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase tracking-widest mb-0.5 sm:mb-1\">\n                      Check-in\n                    </div>\n                    <div className=\"text-xs sm:text-sm font-semibold text-white\">\n                      {hotelForm.checkIn || \"Add Date\"}\n                    </div>\n                  </div>\n                  <div className=\"bg-black/30 p-2 sm:p-3 hover:bg-black/40 transition-colors cursor-pointer text-center touch-manipulation\">\n                    <div className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase tracking-widest mb-0.5 sm:mb-1\">\n                      Check-out\n                    </div>\n                    <div className=\"text-xs sm:text-sm font-semibold text-white\">\n                      {hotelForm.checkOut || \"Add Date\"}\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n          </motion.div>\n        </AnimatePresence>\n\n        {/* Action Button */}\n        <div className=\"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-dashed border-white/10 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 font-medium text-center sm:text-left\">{promoText}</div>\n          <button className=\"h-9 sm:h-10 px-4 sm:px-6 bg-white text-black text-xs sm:text-sm font-bold uppercase tracking-wide rounded-lg flex items-center gap-2 hover:scale-105 transition-transform shadow-lg shadow-white/10 touch-manipulation w-full sm:w-auto justify-center\">\n            {mode === \"create\" ? (\n              <Search className=\"w-3.5 h-3.5\" strokeWidth={3} />\n            ) : (\n              <ArrowRight className=\"w-3.5 h-3.5\" strokeWidth={3} />\n            )}\n            {actionLabel}\n          </button>\n        </div>\n      </div>\n      {children}\n    </motion.div>\n  );\n});\n","/**\n * BookingForms Adapter - Implementation of BookingForms ports\n * Pure functions for form validation and state management\n */\n\nimport type {\n  BookingFormsValidationPort,\n  BookingFormsStatePort,\n  FlightFormData,\n  HotelFormData,\n  ValidationResult,\n  BookingMode,\n  BookingType,\n} from \"../ports\";\n\n/**\n * Create a validation adapter for booking forms\n */\nexport function createBookingFormsValidationAdapter(): BookingFormsValidationPort {\n  return {\n    validateFlightForm(data: FlightFormData): ValidationResult {\n      const errors: Record<string, string> = {};\n\n      if (!data.from || !this.isValidAirportCode(data.from)) {\n        errors.from = \"Valid airport code required\";\n      }\n      if (!data.to || !this.isValidAirportCode(data.to)) {\n        errors.to = \"Valid airport code required\";\n      }\n      if (data.from && data.to && data.from === data.to) {\n        errors.to = \"Destination must differ from origin\";\n      }\n      if (!data.date) {\n        errors.date = \"Date required\";\n      }\n      if (data.passengers < 1) {\n        errors.passengers = \"At least 1 passenger required\";\n      }\n\n      return {\n        isValid: Object.keys(errors).length === 0,\n        errors,\n      };\n    },\n\n    validateHotelForm(data: HotelFormData): ValidationResult {\n      const errors: Record<string, string> = {};\n\n      if (!data.destination || data.destination.trim().length < 2) {\n        errors.destination = \"Destination required\";\n      }\n      if (!data.checkIn) {\n        errors.checkIn = \"Check-in date required\";\n      }\n      if (!data.checkOut) {\n        errors.checkOut = \"Check-out date required\";\n      }\n      if (data.checkIn && data.checkOut && data.checkIn >= data.checkOut) {\n        errors.checkOut = \"Check-out must be after check-in\";\n      }\n      if (data.guests < 1) {\n        errors.guests = \"At least 1 guest required\";\n      }\n\n      return {\n        isValid: Object.keys(errors).length === 0,\n        errors,\n      };\n    },\n\n    isValidAirportCode(code: string): boolean {\n      return /^[A-Z]{3}$/i.test(code.trim());\n    },\n  };\n}\n\n/**\n * Create a state adapter for booking forms\n */\nexport function createBookingFormsStateAdapter(): BookingFormsStatePort {\n  return {\n    getDefaultFlightForm(): FlightFormData {\n      return {\n        from: \"\",\n        fromCity: \"\",\n        to: \"\",\n        toCity: \"\",\n        date: null,\n        passengers: 1,\n      };\n    },\n\n    getDefaultHotelForm(): HotelFormData {\n      return {\n        destination: \"\",\n        checkIn: null,\n        checkOut: null,\n        guests: 1,\n      };\n    },\n\n    updateFlightField<K extends keyof FlightFormData>(\n      form: FlightFormData,\n      field: K,\n      value: FlightFormData[K],\n    ): FlightFormData {\n      return { ...form, [field]: value };\n    },\n\n    updateHotelField<K extends keyof HotelFormData>(\n      form: HotelFormData,\n      field: K,\n      value: HotelFormData[K],\n    ): HotelFormData {\n      return { ...form, [field]: value };\n    },\n\n    getActionLabel(mode: BookingMode): string {\n      return mode === \"create\" ? \"Search\" : \"Update\";\n    },\n\n    getPromoText(type: BookingType): string {\n      return type === \"flight\"\n        ? \"Best price guaranteed\"\n        : \"Free cancellation available\";\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet validationAdapterInstance: BookingFormsValidationPort | null = null;\nlet stateAdapterInstance: BookingFormsStatePort | null = null;\n\nexport function getBookingFormsValidationAdapter(): BookingFormsValidationPort {\n  if (!validationAdapterInstance) {\n    validationAdapterInstance = createBookingFormsValidationAdapter();\n  }\n  return validationAdapterInstance;\n}\n\nexport function getBookingFormsStateAdapter(): BookingFormsStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createBookingFormsStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useBookingFormsLogic - Custom hook for booking form state management\n * Separates business logic from presentation\n * Uses useElementState for AI-synced state\n */\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type {\n  BookingType,\n  BookingMode,\n  FlightFormData,\n  HotelFormData,\n  BookingFormsValidationPort,\n  BookingFormsStatePort,\n  ValidationResult,\n} from \"../ports\";\n\nexport interface UseBookingFormsLogicOptions {\n  initialType?: BookingType;\n  mode?: BookingMode;\n}\n\nexport interface UseBookingFormsLogicReturn {\n  // State\n  activeTab: BookingType;\n  flightForm: FlightFormData;\n  hotelForm: HotelFormData;\n  flightValidation: ValidationResult | null;\n  hotelValidation: ValidationResult | null;\n\n  // Derived\n  actionLabel: string;\n  promoText: string;\n  isFlightFormValid: boolean;\n  isHotelFormValid: boolean;\n\n  // Actions\n  setActiveTab: (tab: BookingType) => void;\n  updateFlightField: <K extends keyof FlightFormData>(\n    field: K,\n    value: FlightFormData[K],\n  ) => void;\n  updateHotelField: <K extends keyof HotelFormData>(\n    field: K,\n    value: HotelFormData[K],\n  ) => void;\n  validateFlight: () => ValidationResult;\n  validateHotel: () => ValidationResult;\n  resetFlightForm: () => void;\n  resetHotelForm: () => void;\n}\n\ninterface BookingFormsState extends Record<string, unknown> {\n  activeTab: BookingType;\n  flightForm: FlightFormData;\n  hotelForm: HotelFormData;\n}\n\nexport function useBookingFormsLogic(\n  elementKey: string,\n  validationAdapter: BookingFormsValidationPort,\n  stateAdapter: BookingFormsStatePort,\n  options: UseBookingFormsLogicOptions,\n): UseBookingFormsLogicReturn {\n  const { initialType = \"flight\", mode = \"create\" } = options;\n\n  // AI-synced state via useElementState\n  const [state, updateState] = useElementState<BookingFormsState>(elementKey, {\n    activeTab: initialType,\n    flightForm: stateAdapter.getDefaultFlightForm(),\n    hotelForm: stateAdapter.getDefaultHotelForm(),\n  });\n\n  const { activeTab, flightForm, hotelForm } = state;\n\n  // UI-only validation state (not synced to AI)\n  const [flightValidation, setFlightValidation] =\n    useState<ValidationResult | null>(null);\n  const [hotelValidation, setHotelValidation] =\n    useState<ValidationResult | null>(null);\n\n  // Derived values\n  const actionLabel = stateAdapter.getActionLabel(mode);\n  const promoText = stateAdapter.getPromoText(activeTab);\n\n  const isFlightFormValid = useMemo(\n    () => validationAdapter.validateFlightForm(flightForm).isValid,\n    [validationAdapter, flightForm],\n  );\n\n  const isHotelFormValid = useMemo(\n    () => validationAdapter.validateHotelForm(hotelForm).isValid,\n    [validationAdapter, hotelForm],\n  );\n\n  // Actions\n  const setActiveTab = useCallback(\n    (tab: BookingType) => {\n      updateState({ activeTab: tab });\n    },\n    [updateState],\n  );\n\n  const updateFlightField = useCallback(\n    <K extends keyof FlightFormData>(field: K, value: FlightFormData[K]) => {\n      const updated = stateAdapter.updateFlightField(flightForm, field, value);\n      updateState({ flightForm: updated });\n      setFlightValidation(null);\n    },\n    [stateAdapter, flightForm, updateState],\n  );\n\n  const updateHotelField = useCallback(\n    <K extends keyof HotelFormData>(field: K, value: HotelFormData[K]) => {\n      const updated = stateAdapter.updateHotelField(hotelForm, field, value);\n      updateState({ hotelForm: updated });\n      setHotelValidation(null);\n    },\n    [stateAdapter, hotelForm, updateState],\n  );\n\n  const validateFlight = useCallback(() => {\n    const result = validationAdapter.validateFlightForm(flightForm);\n    setFlightValidation(result);\n    return result;\n  }, [validationAdapter, flightForm]);\n\n  const validateHotel = useCallback(() => {\n    const result = validationAdapter.validateHotelForm(hotelForm);\n    setHotelValidation(result);\n    return result;\n  }, [validationAdapter, hotelForm]);\n\n  const resetFlightForm = useCallback(() => {\n    updateState({ flightForm: stateAdapter.getDefaultFlightForm() });\n    setFlightValidation(null);\n  }, [stateAdapter, updateState]);\n\n  const resetHotelForm = useCallback(() => {\n    updateState({ hotelForm: stateAdapter.getDefaultHotelForm() });\n    setHotelValidation(null);\n  }, [stateAdapter, updateState]);\n\n  return {\n    // State\n    activeTab,\n    flightForm,\n    hotelForm,\n    flightValidation,\n    hotelValidation,\n\n    // Derived\n    actionLabel,\n    promoText,\n    isFlightFormValid,\n    isHotelFormValid,\n\n    // Actions\n    setActiveTab,\n    updateFlightField,\n    updateHotelField,\n    validateFlight,\n    validateHotel,\n    resetFlightForm,\n    resetHotelForm,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * BookingForms component schema definition\n */\nexport const BookingFormsPropsSchema = z.object({});\n\n/** Type inference for BookingForms props */\nexport type BookingFormsProps = z.infer<typeof BookingFormsPropsSchema>;\n\n/**\n * BookingForms component definition for catalog registration\n */\nexport const BookingFormsDefinition = {\n  name: \"BookingForms\" as const,\n  props: BookingFormsPropsSchema,\n  description: \"BookingForms component\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  MapPin,\n  Link as LinkIcon,\n  Calendar,\n  MessageCircle,\n  UserPlus,\n  Check,\n  User,\n} from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype Profile = {\n  name: string;\n  handle: string;\n  bio?: string;\n  avatar?: string;\n  coverImage?: string;\n  location?: string;\n  website?: string;\n  joinedDate?: string;\n  stats?: {\n    followers: number;\n    following: number;\n    posts: number;\n  };\n  isFollowing?: boolean;\n};\n\nexport type ProfileCardProps = {\n  profile?: Profile;\n};\n\nexport const ProfileCard = memo(function ProfileCard({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { profile } = element.props as ProfileCardProps;\n\n  if (!profile) {\n    return (\n      <EmptyState icon={<User className=\"w-10 h-10\" />} message=\"No profile\" />\n    );\n  }\n\n  return (\n    <div className=\"group relative rounded-2xl sm:rounded-3xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden shadow-2xl\">\n      {/* Cover Image */}\n      <div className=\"h-24 sm:h-32 lg:h-40 relative bg-zinc-800 border-b border-white/5\">\n        {profile.coverImage ? (\n          <div className=\"absolute inset-0\">\n            <img\n              src={profile.coverImage}\n              className=\"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-700\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-t from-zinc-900 to-transparent opacity-80\" />\n          </div>\n        ) : (\n          <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-zinc-900 to-zinc-950\" />\n        )}\n\n        {/* Tech Grid Overlay */}\n        <div\n          className=\"absolute inset-0 opacity-10\"\n          style={{\n            backgroundImage: \"radial-gradient(#fff 1px, transparent 1px)\",\n            backgroundSize: \"12px 12px\",\n          }}\n        />\n      </div>\n\n      <div className=\"px-4 sm:px-5 lg:px-6 pb-4 sm:pb-5 lg:pb-6 relative\">\n        {/* Avatar - Floating */}\n        <div className=\"absolute -top-10 sm:-top-12 left-4 sm:left-6\">\n          <div className=\"w-20 h-20 sm:w-24 sm:h-24 rounded-xl sm:rounded-2xl bg-black border-3 sm:border-4 border-zinc-900 shadow-2xl overflow-hidden ring-1 ring-white/10 group-hover:ring-white/30 transition-all group-hover:scale-105 duration-300\">\n            {profile.avatar ? (\n              <img\n                src={profile.avatar}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-zinc-800 text-xl sm:text-2xl font-bold text-zinc-500 uppercase\">\n                {profile.name[0]}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex justify-end pt-3 sm:pt-4 mb-3 sm:mb-4 gap-1.5 sm:gap-2\">\n          <button className=\"h-8 sm:h-9 px-3 sm:px-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-white font-bold text-[0.625rem] sm:text-xs uppercase tracking-wider flex items-center gap-1.5 sm:gap-2 transition-colors touch-manipulation\">\n            <MessageCircle className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n            <span className=\"hidden sm:inline\">Message</span>\n          </button>\n          <button\n            className={cn(\n              \"h-8 sm:h-9 px-3 sm:px-4 rounded-lg font-bold text-[0.625rem] sm:text-xs uppercase tracking-wider flex items-center gap-1.5 sm:gap-2 transition-all shadow-lg touch-manipulation\",\n              profile.isFollowing\n                ? \"bg-transparent border border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/10 shadow-emerald-500/10\"\n                : \"bg-white text-black hover:bg-zinc-200 border border-transparent shadow-white/10\",\n            )}\n          >\n            {profile.isFollowing ? (\n              <Check className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" strokeWidth={3} />\n            ) : (\n              <UserPlus className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" strokeWidth={3} />\n            )}\n            {profile.isFollowing ? \"Following\" : \"Follow\"}\n          </button>\n        </div>\n\n        {/* Info */}\n        <div className=\"mt-1.5 sm:mt-2\">\n          <h2 className=\"text-xl sm:text-2xl font-black text-white tracking-tight leading-none mb-0.5 sm:mb-1 flex items-center gap-1.5 sm:gap-2\">\n            {profile.name}\n            {profile.isFollowing && (\n              <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgb(16,185,129)]\" />\n            )}\n          </h2>\n          <div className=\"text-xs sm:text-sm text-zinc-500 font-mono mb-3 sm:mb-4\">\n            @{profile.handle}\n          </div>\n\n          {profile.bio && (\n            <p className=\"text-xs sm:text-sm text-zinc-300 leading-relaxed mb-4 sm:mb-6 max-w-md border-l-2 border-white/10 pl-2 sm:pl-3 italic\">\n              {profile.bio}\n            </p>\n          )}\n\n          {/* Meta Grid */}\n          <div className=\"flex flex-wrap gap-3 sm:gap-4 text-[0.625rem] sm:text-xs text-zinc-500 mb-4 sm:mb-6 font-medium\">\n            {profile.location && (\n              <div className=\"flex items-center gap-1 sm:gap-1.5\">\n                <MapPin className=\"w-3 h-3 text-zinc-600\" />\n                {profile.location}\n              </div>\n            )}\n            {profile.website && (\n              <a\n                href={profile.website}\n                target=\"_blank\"\n                className=\"flex items-center gap-1 sm:gap-1.5 text-sky-500/80 hover:text-sky-400 hover:underline transition-colors decoration-sky-500/30\"\n              >\n                <LinkIcon className=\"w-3 h-3\" />\n                <span className=\"truncate max-w-[8rem] sm:max-w-none\">{profile.website.replace(/^https?:\\/\\//, \"\")}</span>\n              </a>\n            )}\n            {profile.joinedDate && (\n              <div className=\"flex items-center gap-1 sm:gap-1.5\">\n                <Calendar className=\"w-3 h-3 text-zinc-600\" />\n                Joined {profile.joinedDate}\n              </div>\n            )}\n          </div>\n\n          {/* Stats Bar */}\n          <div className=\"flex items-center gap-6 sm:gap-8 pt-4 sm:pt-6 border-t border-dashed border-white/10\">\n            {profile.stats &&\n              Object.entries(profile.stats).map(([key, value]) => (\n                <div\n                  key={key}\n                  className=\"flex flex-col gap-0.5 hover:opacity-80 transition-opacity cursor-pointer\"\n                >\n                  <span className=\"text-base sm:text-lg font-black text-white leading-none\">\n                    {value}\n                  </span>\n                  <span className=\"text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-600 uppercase tracking-wider\">\n                    {key}\n                  </span>\n                </div>\n              ))}\n          </div>\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  MessageSquare,\n  Heart,\n  Share2,\n  MoreHorizontal,\n  Activity,\n} from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype FeedItem = {\n  id: string;\n  user: {\n    name: string;\n    avatar?: string;\n    handle?: string;\n  };\n  content: string;\n  image?: string;\n  likes?: number;\n  comments?: number;\n  timestamp: string;\n};\n\nexport type ActivityFeedProps = {\n  items?: FeedItem[];\n};\n\nexport const ActivityFeed = memo(function ActivityFeed({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { items = [] } = element.props as ActivityFeedProps;\n\n  if (!items || items.length === 0) {\n    return (\n      <EmptyState\n        icon={<Activity className=\"w-10 h-10\" />}\n        message=\"No activity\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-3 sm:gap-4 max-w-xl mx-auto\">\n      {items.map((item, index) => (\n        <div\n          key={item.id}\n          className=\"group relative pl-6 sm:pl-8 pb-6 sm:pb-8 last:pb-0\"\n          data-selectable-item\n          data-element-key={element.key}\n          data-item-id={item.id}\n        >\n          {/* Timeline Line */}\n          <div className=\"absolute left-[11px] sm:left-[15px] top-8 sm:top-10 bottom-0 w-px bg-white/10 group-last:hidden\" />\n\n          {/* Avatar Node */}\n          <div className=\"absolute left-0 top-0 w-6 h-6 sm:w-8 sm:h-8 rounded-lg bg-zinc-900 border border-white/10 overflow-hidden ring-2 sm:ring-4 ring-zinc-950 z-10 transition-transform group-hover:scale-110\">\n            {item.user.avatar ? (\n              <img\n                src={item.user.avatar}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-zinc-800 text-[0.5rem] sm:text-[0.625rem] font-bold text-zinc-500 uppercase\">\n                {item.user.name[0]}\n              </div>\n            )}\n          </div>\n\n          {/* Card Content */}\n          <div className=\"bg-zinc-900/60 backdrop-blur-md border border-white/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 lg:p-5 hover:bg-zinc-900/80 hover:border-white/20 transition-all shadow-lg hover:shadow-2xl hover:-translate-y-1\">\n            {/* Decorative corner accent */}\n            <div className=\"absolute top-0 right-0 p-1.5 sm:p-2 opacity-50\">\n              <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full border border-white/20\" />\n            </div>\n\n            <div className=\"flex justify-between items-start mb-2 sm:mb-3 gap-2\">\n              <div>\n                <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2\">\n                  <span className=\"text-xs sm:text-sm font-bold text-white tracking-tight\">\n                    {item.user.name}\n                  </span>\n                  <span className=\"text-[0.625rem] sm:text-xs text-zinc-500 font-mono\">\n                    @\n                    {item.user.handle ||\n                      item.user.name.toLowerCase().replace(\" \", \"\")}\n                  </span>\n                </div>\n                <div className=\"text-[0.5rem] sm:text-[0.625rem] font-mono text-zinc-600 mt-0.5 sm:mt-1 uppercase tracking-wide flex items-center gap-1 sm:gap-1.5\">\n                  <span>Logged</span>\n                  <span className=\"w-1 h-1 rounded-full bg-zinc-700\" />\n                  {item.timestamp}\n                </div>\n              </div>\n              <button className=\"text-zinc-600 hover:text-white transition-colors p-0.5 sm:p-1 rounded hover:bg-white/5 touch-manipulation\">\n                <MoreHorizontal className=\"w-3.5 h-3.5\" />\n              </button>\n            </div>\n\n            <div className=\"text-xs sm:text-sm text-zinc-300 leading-relaxed mb-3 sm:mb-4\">\n              {render(item.content, { inline: true })}\n            </div>\n\n            {item.image && (\n              <div className=\"rounded-lg sm:rounded-xl overflow-hidden border border-white/10 mb-3 sm:mb-4 bg-zinc-950 min-h-[100px] sm:min-h-[150px] relative group/image\">\n                <img\n                  src={item.image}\n                  className=\"w-full h-auto object-cover max-h-[200px] sm:max-h-[300px] transition-transform duration-700 group-hover/image:scale-105\"\n                />\n                <div className=\"absolute inset-0 ring-1 ring-inset ring-white/5 rounded-lg sm:rounded-xl pointer-events-none\" />\n              </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex items-center gap-4 sm:gap-6 border-t border-dashed border-white/10 pt-2 sm:pt-3 mt-1.5 sm:mt-2\">\n              <button className=\"flex items-center gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs font-bold text-zinc-500 hover:text-rose-400 transition-colors group/action py-0.5 sm:py-1 px-1.5 sm:px-2 rounded hover:bg-white/5 -ml-1.5 sm:-ml-2 touch-manipulation\">\n                <Heart\n                  className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 group-hover/action:scale-110 transition-transform\"\n                />\n                {item.likes || 0}\n              </button>\n              <button className=\"flex items-center gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs font-bold text-zinc-500 hover:text-sky-400 transition-colors group/action py-0.5 sm:py-1 px-1.5 sm:px-2 rounded hover:bg-white/5 touch-manipulation\">\n                <MessageSquare\n                  className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 group-hover/action:scale-110 transition-transform\"\n                />\n                {item.comments || 0}\n              </button>\n              <button className=\"flex items-center gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs font-bold text-zinc-500 hover:text-emerald-400 transition-colors ml-auto py-0.5 sm:py-1 px-1.5 sm:px-2 rounded hover:bg-white/5 -mr-1.5 sm:-mr-2 touch-manipulation\">\n                <Share2 className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\n                <span className=\"hidden sm:inline\">Share</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      ))}\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { Check, Star } from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype PricingPlan = {\n  id?: string | null;\n  name: string;\n  price: string;\n  cadence?: string | null;\n  description?: string | null;\n  features?: string[] | null;\n  highlight?: boolean | null;\n  badge?: string | null;\n};\n\nexport type PricingProps = {\n  title?: string | null;\n  plans?: PricingPlan[] | null;\n};\n\nexport const Pricing = memo(function Pricing({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { title, plans = [] } = element.props as PricingProps;\n\n  if (!plans || plans.length === 0) {\n    return (\n      <EmptyState\n        icon={<Star className=\"w-10 h-10\" />}\n        message=\"No pricing plans\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6\">\n      {title && (\n        <h3 className=\"m-0 text-base sm:text-lg lg:text-xl font-bold tracking-tight text-white\">\n          {title}\n        </h3>\n      )}\n      <div className=\"grid grid-cols-1 sm:grid-cols-[repeat(auto-fit,minmax(16rem,1fr))] gap-4 sm:gap-5 lg:gap-6\">\n        {plans.map((plan, index) => {\n          const isHighlight = plan.highlight;\n\n          return (\n            <div\n              key={plan.id ?? `${index}`}\n              data-selectable-item\n              data-element-key={element.key}\n              data-item-id={plan.id ?? `${index}`}\n              className={cn(\n                \"group relative bg-zinc-900 border transition-all duration-300 flex flex-col isolate overflow-hidden\",\n                // Flight/Invoice Style:\n                \"rounded-xl sm:rounded-2xl border-white/10\",\n                isHighlight\n                  ? \"shadow-2xl shadow-indigo-500/10 ring-1 ring-indigo-500/50 bg-zinc-900/80\"\n                  : \"hover:border-white/20 hover:shadow-xl hover:-translate-y-1\",\n              )}\n            >\n              {isHighlight && (\n                <div className=\"absolute top-0 inset-x-0 h-1 bg-indigo-500 z-10\" />\n              )}\n\n              <div className=\"p-4 sm:p-5 lg:p-6 pb-6 sm:pb-8 border-b border-dashed border-white/10\">\n                <div className=\"flex justify-between items-start mb-3 sm:mb-4 gap-2\">\n                  <div>\n                    <h4 className=\"font-bold text-base sm:text-lg text-white mb-1\">\n                      {plan.name}\n                    </h4>\n                    {plan.badge && (\n                      <span className=\"inline-block px-1.5 py-0.5 rounded text-[0.5rem] sm:text-[0.625rem] font-bold uppercase tracking-wider bg-white/10 text-white/80 border border-white/10\">\n                        {plan.badge}\n                      </span>\n                    )}\n                  </div>\n                  {isHighlight && (\n                    <div className=\"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg shadow-indigo-500/40 shrink-0\">\n                      <Star className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" fill=\"currentColor\" />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex items-baseline gap-1\">\n                  <span className=\"text-2xl sm:text-3xl lg:text-4xl font-black text-white tracking-tight leading-none\">\n                    {plan.price}\n                  </span>\n                  {plan.cadence && (\n                    <span className=\"text-[0.625rem] sm:text-xs font-mono text-zinc-500 uppercase\">\n                      /{plan.cadence}\n                    </span>\n                  )}\n                </div>\n\n                {plan.description && (\n                  <p className=\"mt-2 sm:mt-3 text-xs sm:text-sm text-zinc-400 leading-snug\">\n                    {render(plan.description, { inline: true })}\n                  </p>\n                )}\n              </div>\n\n              {/* Receipt edge visual (perforations) */}\n              <div className=\"relative h-px w-full my-0 -mt-px z-10\">\n                <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-black border-r border-white/10\" />\n                <div className=\"absolute -right-2 top-1/2 -translate-y-1/2 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-black border-l border-white/10\" />\n              </div>\n\n              <div className=\"p-4 sm:p-5 lg:p-6 flex-1 bg-black/20\">\n                {plan.features && plan.features.length > 0 && (\n                  <ul className=\"space-y-2 sm:space-y-3 mb-6 sm:mb-8\">\n                    {plan.features.map((feature) => (\n                      <li\n                        key={feature}\n                        className=\"flex items-start gap-2 sm:gap-3 text-xs sm:text-sm text-zinc-300\"\n                      >\n                        <div\n                          className={cn(\n                            \"w-3.5 h-3.5 sm:w-4 sm:h-4 rounded-full flex items-center justify-center shrink-0 mt-0.5\",\n                            isHighlight\n                              ? \"bg-indigo-500/20 text-indigo-400\"\n                              : \"bg-white/10 text-zinc-400\",\n                          )}\n                        >\n                          <Check className=\"w-2 h-2 sm:w-2.5 sm:h-2.5\" strokeWidth={4} />\n                        </div>\n                        <span className=\"leading-tight\">\n                          {render(feature, { inline: true })}\n                        </span>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n\n                <button\n                  className={cn(\n                    \"w-full py-2 sm:py-3 rounded-lg text-[0.625rem] sm:text-xs font-bold uppercase tracking-widest transition-all touch-manipulation min-h-[2.75rem]\",\n                    isHighlight\n                      ? \"bg-indigo-500 hover:bg-indigo-400 text-white shadow-lg shadow-indigo-500/25\"\n                      : \"bg-zinc-800 hover:bg-zinc-700 text-white border border-white/5\",\n                  )}\n                >\n                  Get Started\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { ArrowUpRight, Clock, Calendar, FileText } from \"lucide-react\";\nimport { formatDateShort } from \"../../utils/format-utils\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype Article = {\n  id?: string;\n  title: string;\n  excerpt?: string;\n  coverImage?: string;\n  author?: {\n    name: string;\n    avatar?: string;\n  };\n  date?: string;\n  readTime?: string;\n  category?: string;\n  url?: string;\n};\n\nexport type ArticleCardProps = {\n  article?: Article;\n};\n\nexport const ArticleCard = memo(function ArticleCard({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { article } = element.props as ArticleCardProps;\n\n  if (!article) {\n    return (\n      <EmptyState\n        icon={<FileText className=\"w-10 h-10\" />}\n        message=\"No article\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"group relative rounded-xl sm:rounded-2xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden hover:border-white/20 hover:shadow-2xl transition-all duration-500 hover:-translate-y-1\">\n      {/* Top Accent */}\n      <div className=\"absolute top-0 left-0 right-0 h-1 bg-white/5 group-hover:bg-gradient-to-r from-sky-500 to-indigo-500 transition-all duration-500 z-10\" />\n\n      <div className=\"flex flex-col sm:flex-row h-full\">\n        {/* Image Section */}\n        <div className=\"sm:w-1/3 min-h-[10rem] sm:min-h-[12.5rem] relative overflow-hidden bg-zinc-800\">\n          {article.coverImage ? (\n            <div className=\"absolute inset-0 transition-transform duration-700 group-hover:scale-105\">\n              <img\n                src={article.coverImage}\n                className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\"\n              />\n            </div>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-zinc-800 to-zinc-900 flex items-center justify-center\">\n              <span className=\"text-[0.5rem] sm:text-[0.625rem] font-mono text-zinc-500 uppercase tracking-widest\">\n                No Cover\n              </span>\n            </div>\n          )}\n          {article.category && (\n            <div className=\"absolute top-3 sm:top-4 left-3 sm:left-4 px-1.5 sm:px-2 py-0.5 sm:py-1 bg-black/60 backdrop-blur-md rounded text-[0.5rem] sm:text-[0.625rem] font-bold text-white uppercase tracking-wider border border-white/10\">\n              {article.category}\n            </div>\n          )}\n        </div>\n\n        {/* Content Section */}\n        <div className=\"flex-1 p-4 sm:p-5 lg:p-6 flex flex-col\">\n          <div className=\"flex items-center gap-2 sm:gap-3 text-[0.625rem] sm:text-xs text-zinc-500 font-mono mb-2 sm:mb-3\">\n            {article.date && (\n              <div className=\"flex items-center gap-1 sm:gap-1.5\">\n                <Calendar className=\"w-3 h-3\" />\n                {new Date(article.date).toLocaleDateString()}\n              </div>\n            )}\n            {article.readTime && (\n              <>\n                <span>•</span>\n                <div className=\"flex items-center gap-1 sm:gap-1.5\">\n                  <Clock className=\"w-3 h-3\" />\n                  {article.readTime}\n                </div>\n              </>\n            )}\n          </div>\n\n          <h3 className=\"text-base sm:text-lg lg:text-xl font-bold text-white leading-tight mb-2 sm:mb-3 group-hover:text-sky-300 transition-colors\">\n            {article.title}\n          </h3>\n\n          {article.excerpt && (\n            <p className=\"text-xs sm:text-sm text-zinc-400 line-clamp-2 leading-relaxed mb-4 sm:mb-6 flex-1\">\n              {render(article.excerpt, { inline: true })}\n            </p>\n          )}\n\n          <div className=\"flex items-center justify-between pt-3 sm:pt-4 border-t border-dashed border-white/10 mt-auto\">\n            {article.author && (\n              <div className=\"flex items-center gap-1.5 sm:gap-2\">\n                <div className=\"w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-zinc-800 border border-white/10 overflow-hidden\">\n                  {article.author.avatar && <img src={article.author.avatar} />}\n                </div>\n                <span className=\"text-[0.625rem] sm:text-xs font-bold text-zinc-300 uppercase tracking-wide\">\n                  {article.author.name}\n                </span>\n              </div>\n            )}\n\n            <div className=\"relative overflow-hidden w-7 h-7 sm:w-8 sm:h-8 rounded-full border border-white/10 flex items-center justify-center text-zinc-400 group-hover:text-white group-hover:border-white/30 transition-colors\">\n              <ArrowUpRight className=\"w-4 h-4\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plus, Layout } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { KanbanCard, type KanbanColumn } from \"./components\";\nimport { getKanbanAdapter, getKanbanDragAdapter } from \"./adapters\";\nimport { useKanbanState, useKanbanDrag } from \"./hooks\";\n\n/** Animation variants */\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1, transition: { staggerChildren: 0.05 } },\n};\n\nconst columnVariants = {\n  hidden: { opacity: 0, x: \"1rem\" },\n  visible: { opacity: 1, x: 0 },\n};\n\nexport const Kanban = memo(function Kanban({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    columns: initialColumns,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    columns?: KanbanColumn[] | null;\n    lock?: boolean;\n  };\n\n  const adapter = useMemo(() => getKanbanAdapter(), []);\n  const dragAdapter = useMemo(() => getKanbanDragAdapter(), []);\n\n  const { displayColumns, moveItem, toggleSubItem, isSubItemCompleted } =\n    useKanbanState(element.key, adapter, {\n      initialColumns: initialColumns || [],\n      lock,\n    });\n\n  const {\n    draggedItem,\n    dropTarget,\n    handleDragStart,\n    handleDragEnd,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragOver,\n    handleDrop,\n  } = useKanbanDrag(dragAdapter, { lock, onMoveItem: moveItem });\n\n  useDomainAutoSave(\"project\", element.key, {\n    title: title || \"Kanban Board\",\n    viewType: \"kanban\",\n    status: \"active\",\n    columns: displayColumns.map((col) => ({\n      id: col.id,\n      title: col.title,\n      color: col.color,\n      itemIds: col.items.map((item) => item.id),\n    })),\n    items: displayColumns.flatMap((col) =>\n      col.items.map((item) => ({\n        id: item.id,\n        title: item.title,\n        description: item.description,\n        columnId: col.id,\n        tags: item.tags,\n        assignee: item.assignee,\n        priority: item.priority,\n        dueDate: item.dueDate,\n      })),\n    ),\n  });\n\n  if (!displayColumns.length) {\n    return (\n      <div className=\"flex flex-col w-full min-h-[12.5rem]\">\n        {title && (\n          <h3 className=\"text-xl sm:text-2xl font-black tracking-tight text-foreground mb-4 sm:mb-6\">\n            {title}\n          </h3>\n        )}\n        <EmptyState\n          icon={<Layout className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n          message=\"No columns\"\n        />\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {title && (\n        <div className=\"mb-4 sm:mb-6 flex items-center justify-between flex-wrap gap-3 sm:gap-4\">\n          <h3 className=\"text-xl sm:text-2xl font-black tracking-tight text-foreground\">\n            {title}\n          </h3>\n          {!lock && (\n            <button className=\"flex items-center gap-1.5 sm:gap-2 px-3 py-2 sm:py-1.5 rounded-full bg-primary text-primary-foreground text-[0.625rem] sm:text-xs font-bold shadow-lg shadow-primary/20 hover:scale-105 active:scale-95 transition-transform min-h-[2.75rem] sm:min-h-0 touch-manipulation\">\n              <Plus className=\"w-3.5 h-3.5 sm:w-3.5 sm:h-3.5\" />\n              <span className=\"hidden sm:inline\">NEW TASK</span>\n              <span className=\"sm:hidden\">ADD</span>\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Mobile: vertical stack, Desktop: horizontal scroll */}\n      <motion.div\n        variants={containerVariants}\n        initial=\"hidden\"\n        animate=\"visible\"\n        className={cn(\n          \"flex flex-col gap-3 sm:gap-4\",\n          \"sm:flex-row sm:overflow-x-auto sm:pb-4\",\n          \"sm:snap-x sm:snap-mandatory\",\n          \"scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent\",\n        )}\n      >\n        {displayColumns.map((col) => (\n          <motion.div\n            key={col.id}\n            variants={columnVariants}\n            onDragEnter={(e) => handleDragEnter(e, col.id)}\n            onDragLeave={(e) => handleDragLeave(e, col.id)}\n            onDragOver={handleDragOver}\n            onDrop={(e) => handleDrop(e, col.id)}\n            className={cn(\n              // Mobile: full width, stacked\n              \"w-full\",\n              // Desktop: fixed width, side-by-side\n              \"sm:min-w-[17rem] sm:max-w-[20rem] sm:flex-shrink-0 sm:snap-start\",\n              // Common styles\n              \"flex flex-col min-h-[10rem] sm:min-h-[12.5rem]\",\n              \"rounded-xl sm:rounded-2xl bg-zinc-900/40 backdrop-blur-md\",\n              \"border border-white/5 relative overflow-hidden transition-all duration-200\",\n              dropTarget === col.id &&\n                \"border-primary/50 bg-primary/5 ring-2 ring-primary/30\",\n            )}\n          >\n            {/* Column color indicator */}\n            <div\n              className=\"absolute top-0 left-0 right-0 h-1\"\n              style={{ backgroundColor: col.color || \"var(--border)\" }}\n            />\n\n            {/* Column header */}\n            <div className=\"flex justify-between items-center p-3 sm:p-4 border-b border-white/5 bg-white/[0.02]\">\n              <span className=\"font-bold text-xs sm:text-sm tracking-wide text-foreground\">\n                {col.title}\n              </span>\n              <span className=\"text-[0.5625rem] sm:text-[0.625rem] font-bold text-muted-foreground bg-white/5 px-1.5 sm:px-2 py-0.5 rounded-full border border-white/10\">\n                {col.items.length}\n              </span>\n            </div>\n\n            {/* Column items */}\n            <div className=\"flex flex-col gap-2 sm:gap-3 overflow-y-auto p-2 sm:p-3 flex-1 min-h-[5rem] sm:min-h-[6.25rem]\">\n              <AnimatePresence mode=\"popLayout\">\n                {col.items.map((item) => (\n                  <KanbanCard\n                    key={item.id}\n                    item={item}\n                    elementKey={element.key}\n                    colId={col.id}\n                    lock={lock}\n                    isDragging={draggedItem?.item.id === item.id}\n                    onDragStart={handleDragStart}\n                    onDragEnd={handleDragEnd}\n                    isSubItemCompleted={isSubItemCompleted}\n                    toggleSubItem={toggleSubItem}\n                  />\n                ))}\n              </AnimatePresence>\n\n              {col.items.length === 0 && (\n                <div\n                  className={cn(\n                    \"flex-1 min-h-[4rem] sm:min-h-[5rem] rounded-lg border-2 border-dashed border-white/10\",\n                    \"flex items-center justify-center text-[0.625rem] sm:text-xs text-muted-foreground\",\n                    dropTarget === col.id && \"border-primary/50 bg-primary/5\",\n                  )}\n                >\n                  {dropTarget === col.id ? \"Drop here\" : \"No items\"}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        ))}\n      </motion.div>\n\n      {children}\n    </div>\n  );\n});\n","import type { StatusVariant } from \"../../../utils/shared-components\";\n\nexport type KanbanItem = {\n  id: string;\n  title: string;\n  description?: string | null;\n  assignee?: string | null;\n  priority?: \"low\" | \"medium\" | \"high\" | null;\n  dueDate?: string | null;\n  tags?: string[] | null;\n  subItems?: KanbanItem[] | null;\n};\n\nexport type KanbanColumn = {\n  id: string;\n  title: string;\n  color?: string | null;\n  items?: KanbanItem[] | null;\n};\n\nexport type DisplayColumn = {\n  id: string;\n  title: string;\n  color?: string | null;\n  items: KanbanItem[];\n};\n\nexport const PRIORITY_TO_VARIANT: Record<string, StatusVariant> = {\n  high: \"error\",\n  medium: \"warning\",\n  low: \"success\",\n};\n","import { memo } from \"react\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { KanbanItem } from \"./types\";\n\ninterface SubItemsListProps {\n  item: KanbanItem;\n  lock: boolean;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n}\n\nexport const SubItemsList = memo(function SubItemsList({\n  item,\n  lock,\n  isSubItemCompleted,\n  toggleSubItem,\n}: SubItemsListProps) {\n  if (!item.subItems || item.subItems.length === 0) return null;\n\n  return (\n    <div className=\"mt-3 flex flex-col gap-2 p-2 rounded-lg bg-black/20 border border-white/5\">\n      {item.subItems.map((subItem) => {\n        const completed = isSubItemCompleted(item.id, subItem.id);\n        return (\n          <div\n            key={subItem.id}\n            className={cn(\n              \"flex items-center gap-2.5 text-xs transition-all\",\n              completed\n                ? \"text-muted-foreground line-through opacity-60\"\n                : \"text-foreground\",\n            )}\n          >\n            <div\n              onClick={(e) => {\n                e.stopPropagation();\n                toggleSubItem(item.id, subItem.id);\n              }}\n              data-interactive\n              className={cn(\n                \"w-3.5 h-3.5 rounded border-[1.5px] flex items-center justify-center cursor-pointer transition-colors shrink-0\",\n                completed\n                  ? \"bg-emerald-500 border-emerald-500 text-black\"\n                  : \"border-muted-foreground/40 hover:border-primary/60 bg-transparent\",\n                lock && \"pointer-events-none opacity-50\",\n              )}\n            >\n              {completed && (\n                <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }}>\n                  <Check size={8} strokeWidth={4} />\n                </motion.div>\n              )}\n            </div>\n            <span className=\"truncate\">{subItem.title}</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport { GripVertical } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport type { KanbanItem } from \"./types\";\nimport { PRIORITY_TO_VARIANT } from \"./types\";\nimport { SubItemsList } from \"./sub-items-list\";\n\ninterface KanbanCardProps {\n  item: KanbanItem;\n  elementKey: string;\n  colId: string;\n  lock: boolean;\n  isDragging: boolean;\n  onDragStart: (e: React.DragEvent, item: KanbanItem, colId: string) => void;\n  onDragEnd: (e: React.DragEvent) => void;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n}\n\nexport const KanbanCard = memo(function KanbanCard({\n  item,\n  elementKey,\n  colId,\n  lock,\n  isDragging,\n  onDragStart,\n  onDragEnd,\n  isSubItemCompleted,\n  toggleSubItem,\n}: KanbanCardProps) {\n  return (\n    <div\n      draggable={!lock}\n      onDragStart={(e) => onDragStart(e, item, colId)}\n      onDragEnd={onDragEnd}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={item.id}\n    >\n      <motion.div\n        layout\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.9 }}\n        transition={{ duration: 0.2 }}\n        className={cn(\n          \"group relative bg-card/40 hover:bg-card/60 p-3.5 rounded-xl border border-white/5 transition-all shadow-sm hover:shadow-lg hover:border-white/10\",\n          !lock && \"cursor-grab active:cursor-grabbing hover:-translate-y-0.5\",\n          isDragging && \"opacity-50\",\n        )}\n      >\n        {!lock && (\n          <div\n            data-interactive\n            className=\"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-foreground cursor-grab active:cursor-grabbing\"\n          >\n            <GripVertical size={14} />\n          </div>\n        )}\n\n        <div\n          className={cn(\n            \"text-sm font-medium text-foreground leading-snug\",\n            !lock && \"pl-5 group-hover:pl-5\",\n          )}\n        >\n          {item.title}\n        </div>\n\n        {item.description && (\n          <div\n            className={cn(\n              \"text-xs text-muted-foreground mt-1 line-clamp-2\",\n              !lock && \"pl-5 group-hover:pl-5\",\n            )}\n          >\n            {item.description}\n          </div>\n        )}\n\n        <SubItemsList\n          item={item}\n          lock={lock}\n          isSubItemCompleted={isSubItemCompleted}\n          toggleSubItem={toggleSubItem}\n        />\n\n        <div className=\"flex justify-between items-center pt-3 mt-2 border-t border-white/5\">\n          <div className=\"flex flex-wrap gap-1.5 items-center\">\n            {item.priority && (\n              <StatusBadge\n                label={item.priority}\n                variant={PRIORITY_TO_VARIANT[item.priority] || \"neutral\"}\n              />\n            )}\n            {(item.tags || []).map((tag) => (\n              <span\n                key={tag}\n                className=\"text-[10px] bg-white/5 text-muted-foreground px-2 py-0.5 rounded border border-white/5 font-semibold\"\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n\n          {item.assignee && (\n            <div\n              title={item.assignee}\n              className=\"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 text-white flex items-center justify-center text-[10px] font-bold shadow-md border border-white/10\"\n            >\n              {item.assignee.charAt(0).toUpperCase()}\n            </div>\n          )}\n        </div>\n      </motion.div>\n    </div>\n  );\n});\n","/**\n * Kanban Adapter - Implementation of KanbanPort\n */\nimport type {\n  KanbanPort,\n  KanbanDragPort,\n  KanbanColumn,\n  DisplayColumn,\n} from \"../ports\";\n\nexport function createKanbanAdapter(): KanbanPort {\n  return {\n    buildDisplayColumns(\n      columns: KanbanColumn[],\n      itemMoves: Record<string, string>,\n    ): DisplayColumn[] {\n      const colMap = new Map<string, DisplayColumn>();\n\n      columns.forEach((col) => {\n        colMap.set(col.id, {\n          id: col.id,\n          title: col.title,\n          color: col.color,\n          items: [],\n        });\n      });\n\n      columns.forEach((col) => {\n        (col.items || []).forEach((item) => {\n          const targetColId = itemMoves[item.id] || col.id;\n          const targetCol = colMap.get(targetColId);\n          if (targetCol) {\n            targetCol.items.push(item);\n          }\n        });\n      });\n\n      return Array.from(colMap.values());\n    },\n\n    getTotalItemCount(columns: DisplayColumn[]): number {\n      return columns.reduce((sum, col) => sum + col.items.length, 0);\n    },\n  };\n}\n\nexport function createKanbanDragAdapter(): KanbanDragPort {\n  return {\n    isValidDrop(fromColId: string, targetColId: string): boolean {\n      return fromColId !== targetColId;\n    },\n  };\n}\n\n// Singleton instances\nlet kanbanAdapter: KanbanPort | null = null;\nlet kanbanDragAdapter: KanbanDragPort | null = null;\n\nexport function getKanbanAdapter(): KanbanPort {\n  if (!kanbanAdapter) {\n    kanbanAdapter = createKanbanAdapter();\n  }\n  return kanbanAdapter;\n}\n\nexport function getKanbanDragAdapter(): KanbanDragPort {\n  if (!kanbanDragAdapter) {\n    kanbanDragAdapter = createKanbanDragAdapter();\n  }\n  return kanbanDragAdapter;\n}\n","/**\n * useKanbanDrag - Custom hook for Kanban drag and drop logic\n */\nimport { useState, useCallback, useRef } from \"react\";\nimport type { KanbanItem, KanbanDragPort } from \"../ports\";\n\nexport interface DragState {\n  item: KanbanItem;\n  fromColId: string;\n}\n\nexport interface UseKanbanDragOptions {\n  lock: boolean;\n  onMoveItem: (itemId: string, targetColId: string) => void;\n}\n\nexport interface UseKanbanDragReturn {\n  draggedItem: DragState | null;\n  dropTarget: string | null;\n  handleDragStart: (\n    e: React.DragEvent,\n    item: KanbanItem,\n    fromColId: string,\n  ) => void;\n  handleDragEnd: (e: React.DragEvent) => void;\n  handleDragEnter: (e: React.DragEvent, colId: string) => void;\n  handleDragLeave: (e: React.DragEvent, colId: string) => void;\n  handleDragOver: (e: React.DragEvent) => void;\n  handleDrop: (e: React.DragEvent, targetColId: string) => void;\n}\n\nexport function useKanbanDrag(\n  adapter: KanbanDragPort,\n  options: UseKanbanDragOptions,\n): UseKanbanDragReturn {\n  const { lock, onMoveItem } = options;\n\n  const [draggedItem, setDraggedItem] = useState<DragState | null>(null);\n  const [dropTarget, setDropTarget] = useState<string | null>(null);\n  const dragCounter = useRef<Record<string, number>>({});\n\n  const handleDragStart = useCallback(\n    (e: React.DragEvent, item: KanbanItem, fromColId: string) => {\n      if (lock) {\n        e.preventDefault();\n        return;\n      }\n      e.stopPropagation();\n      setDraggedItem({ item, fromColId });\n      e.dataTransfer.effectAllowed = \"move\";\n      e.dataTransfer.setData(\"application/x-kanban-item\", item.id);\n      e.dataTransfer.setData(\"text/plain\", item.id);\n      if (e.currentTarget instanceof HTMLElement) {\n        e.currentTarget.style.opacity = \"0.5\";\n      }\n    },\n    [lock],\n  );\n\n  const handleDragEnd = useCallback((e: React.DragEvent) => {\n    e.stopPropagation();\n    if (e.currentTarget instanceof HTMLElement) {\n      e.currentTarget.style.opacity = \"1\";\n    }\n    setDraggedItem(null);\n    setDropTarget(null);\n    dragCounter.current = {};\n  }, []);\n\n  const handleDragEnter = useCallback(\n    (e: React.DragEvent, colId: string) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dragCounter.current[colId] = (dragCounter.current[colId] || 0) + 1;\n      if (draggedItem && adapter.isValidDrop(draggedItem.fromColId, colId)) {\n        setDropTarget(colId);\n      }\n    },\n    [adapter, draggedItem],\n  );\n\n  const handleDragLeave = useCallback(\n    (e: React.DragEvent, colId: string) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dragCounter.current[colId] = (dragCounter.current[colId] || 1) - 1;\n      if (dragCounter.current[colId] <= 0) {\n        dragCounter.current[colId] = 0;\n        if (dropTarget === colId) {\n          setDropTarget(null);\n        }\n      }\n    },\n    [dropTarget],\n  );\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    if (e.dataTransfer.types.includes(\"application/x-kanban-item\")) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.dataTransfer.dropEffect = \"move\";\n    }\n  }, []);\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent, targetColId: string) => {\n      if (!e.dataTransfer.types.includes(\"application/x-kanban-item\")) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      if (\n        draggedItem &&\n        adapter.isValidDrop(draggedItem.fromColId, targetColId)\n      ) {\n        onMoveItem(draggedItem.item.id, targetColId);\n      }\n      setDraggedItem(null);\n      setDropTarget(null);\n      dragCounter.current = {};\n    },\n    [adapter, draggedItem, onMoveItem],\n  );\n\n  return {\n    draggedItem,\n    dropTarget,\n    handleDragStart,\n    handleDragEnd,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragOver,\n    handleDrop,\n  };\n}\n","/**\n * useKanbanState - Custom hook for Kanban state management\n */\nimport { useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { KanbanPort, KanbanColumn, DisplayColumn } from \"../ports\";\n\nexport interface UseKanbanStateOptions {\n  initialColumns: KanbanColumn[];\n  lock: boolean;\n}\n\nexport interface UseKanbanStateReturn {\n  displayColumns: DisplayColumn[];\n  itemMoves: Record<string, string>;\n  subItemCompletions: Record<string, Record<string, boolean>>;\n  moveItem: (itemId: string, targetColId: string) => void;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n}\n\ninterface KanbanStateData extends Record<string, unknown> {\n  itemMoves: Record<string, string>;\n  subItemCompletions: Record<string, Record<string, boolean>>;\n}\n\nexport function useKanbanState(\n  elementKey: string,\n  adapter: KanbanPort,\n  options: UseKanbanStateOptions,\n): UseKanbanStateReturn {\n  const { initialColumns, lock } = options;\n\n  const [state, updateState] = useElementState<KanbanStateData>(elementKey, {\n    itemMoves: {},\n    subItemCompletions: {},\n  });\n\n  const { itemMoves, subItemCompletions } = state;\n\n  const displayColumns = useMemo(\n    () => adapter.buildDisplayColumns(initialColumns, itemMoves),\n    [adapter, initialColumns, itemMoves],\n  );\n\n  const moveItem = useCallback(\n    (itemId: string, targetColId: string) => {\n      if (lock) return;\n      updateState({ itemMoves: { ...itemMoves, [itemId]: targetColId } });\n    },\n    [lock, itemMoves, updateState],\n  );\n\n  const toggleSubItem = useCallback(\n    (itemId: string, subItemId: string) => {\n      if (lock) return;\n      const itemCompletions = subItemCompletions[itemId] || {};\n      const current = itemCompletions[subItemId] ?? false;\n      updateState({\n        subItemCompletions: {\n          ...subItemCompletions,\n          [itemId]: { ...itemCompletions, [subItemId]: !current },\n        },\n      });\n    },\n    [lock, subItemCompletions, updateState],\n  );\n\n  const isSubItemCompleted = useCallback(\n    (itemId: string, subItemId: string) => {\n      return subItemCompletions[itemId]?.[subItemId] ?? false;\n    },\n    [subItemCompletions],\n  );\n\n  return {\n    displayColumns,\n    itemMoves,\n    subItemCompletions,\n    moveItem,\n    toggleSubItem,\n    isSubItemCompleted,\n  };\n}\n","import { z } from \"zod\";\nimport { kanbanColumnSchema } from \"../../utils/shared-schemas\";\n\n/**\n * Kanban component schema definition\n */\nexport const KanbanPropsSchema = z.object({\n  title: z.string().nullable(),\n  columns: z\n    .array(kanbanColumnSchema)\n    .min(1)\n    .describe(\"Columns (REQUIRED, min 1)\"),\n  lock: z.boolean().nullable(),\n});\n\n/** Type inference for Kanban props */\nexport type KanbanProps = z.infer<typeof KanbanPropsSchema>;\n\n/**\n * Kanban component definition for catalog registration\n */\nexport const KanbanDefinition = {\n  name: \"Kanban\" as const,\n  props: KanbanPropsSchema,\n  description: \"Kanban board with columns and drag-and-drop tasks.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Check, Clock, Plus, Sparkles } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { StatusBadge, type StatusVariant } from \"../../utils/shared-components\";\nimport { getTodoListAdapter } from \"./adapters\";\nimport { useTodoListLogic } from \"./hooks\";\nimport type { TodoItem } from \"./ports\";\n\nconst PRIORITY_TO_VARIANT: Record<string, StatusVariant> = {\n  high: \"error\",\n  medium: \"warning\",\n  low: \"success\",\n};\n\n/** Animation variants */\nconst itemVariants = {\n  hidden: { opacity: 0, y: \"0.625rem\", scale: 0.98 },\n  visible: { opacity: 1, y: 0, scale: 1 },\n};\n\nconst checkVariants = {\n  hidden: { scale: 0, rotate: -45 },\n  visible: { scale: 1, rotate: 0 },\n  exit: { scale: 0, rotate: 45 },\n};\n\nexport const TodoList = memo(function TodoList({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, items: initialItems } = element.props as {\n    title?: string | null;\n    items?: TodoItem[] | null;\n  };\n\n  const adapter = useMemo(() => getTodoListAdapter(), []);\n  const { items, completedCount, totalCount, toggleItem } = useTodoListLogic(\n    element.key,\n    adapter,\n    { initialItems: initialItems || [] },\n  );\n\n  useDomainAutoSave(\"task\", element.key, {\n    title: title || \"Todo List\",\n    items: items.map((item) => ({\n      id: item.id,\n      title: item.text,\n      status: item.status || \"pending\",\n      priority: item.priority || \"medium\",\n      time: item.time,\n      subItems: item.subItems?.map((sub) => ({\n        id: sub.id,\n        title: sub.text,\n        status: sub.status || \"pending\",\n        priority: sub.priority,\n      })),\n    })),\n  });\n\n  const renderItems = (itemsToRender: TodoItem[], depth = 0) => (\n    <div className=\"flex flex-col gap-2 sm:gap-3\">\n      <AnimatePresence mode=\"popLayout\" initial={false}>\n        {itemsToRender.map((item, i) => {\n          return (\n            <motion.div\n              layout\n              variants={itemVariants}\n              initial=\"hidden\"\n              animate=\"visible\"\n              transition={{ duration: 0.2, delay: i * 0.05 }}\n              key={item.id}\n              className=\"flex flex-col gap-1.5 sm:gap-2\"\n            >\n              <div\n                data-selectable-item\n                data-element-key={element.key}\n                data-item-id={item.id}\n                onClick={() => toggleItem(item.id)}\n                className={cn(\n                  \"group relative flex items-center gap-3 sm:gap-4 py-3 sm:py-3.5 px-3 sm:px-5 rounded-xl sm:rounded-2xl border transition-all duration-300 cursor-pointer overflow-hidden isolate touch-manipulation\",\n                  item.status === \"done\"\n                    ? \"bg-white/[0.02] border-white/5 opacity-60\"\n                    : \"glass-panel bg-card/60 hover:bg-card/80 border-white/10 hover:border-white/20 hover:shadow-lg hover:shadow-black/10 hover:-translate-y-0.5 active:scale-[0.98]\",\n                  depth > 0 && \"ml-4 sm:ml-6 border-l-2 border-l-white/10\",\n                )}\n              >\n                {depth === 0 && (\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10\" />\n                )}\n\n                {/* Custom Checkbox - larger touch target on mobile */}\n                <div\n                  data-checkbox\n                  data-interactive\n                  className={cn(\n                    \"w-6 h-6 sm:w-6 sm:h-6 rounded-lg border flex items-center justify-center transition-all duration-300 cursor-pointer shrink-0 shadow-sm relative overflow-hidden min-w-[1.5rem]\",\n                    item.status === \"done\"\n                      ? \"bg-gradient-to-br from-indigo-500 to-purple-500 border-transparent shadow-[0_0_0.75rem_rgba(99,102,241,0.4)]\"\n                      : \"border-white/20 bg-black/20 group-hover:border-indigo-400/50\",\n                  )}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    toggleItem(item.id);\n                  }}\n                >\n                  <AnimatePresence>\n                    {item.status === \"done\" && (\n                      <motion.div\n                        variants={checkVariants}\n                        initial=\"hidden\"\n                        animate=\"visible\"\n                        exit=\"exit\"\n                        transition={{\n                          type: \"spring\",\n                          stiffness: 400,\n                          damping: 20,\n                        }}\n                      >\n                        <Check\n                          className=\"w-3 h-3 sm:w-3.5 sm:h-3.5 text-white drop-shadow-sm\"\n                          strokeWidth={3.5}\n                        />\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0 flex flex-col gap-0.5\">\n                  <span\n                    className={cn(\n                      \"text-sm sm:text-[0.9375rem] font-medium transition-all duration-300 truncate\",\n                      item.status === \"done\"\n                        ? \"text-muted-foreground line-through decoration-white/20 decoration-2\"\n                        : \"text-foreground group-hover:text-white\",\n                    )}\n                  >\n                    {item.text}\n                  </span>\n\n                  {item.time && (\n                    <div className=\"flex items-center gap-1 sm:gap-1.5 text-[0.625rem] sm:text-xs font-medium text-muted-foreground/80\">\n                      <Clock\n                        className={cn(\n                          \"w-2.5 h-2.5 sm:w-3 sm:h-3\",\n                          item.status === \"done\"\n                            ? \"opacity-50\"\n                            : \"text-indigo-400\",\n                        )}\n                      />\n                      {item.time}\n                    </div>\n                  )}\n                </div>\n\n                {/* Priority Badge */}\n                {item.priority && (\n                  <StatusBadge\n                    label={item.priority}\n                    variant={PRIORITY_TO_VARIANT[item.priority] || \"neutral\"}\n                  />\n                )}\n              </div>\n\n              {item.subItems &&\n                item.subItems.length > 0 &&\n                renderItems(item.subItems, depth + 1)}\n            </motion.div>\n          );\n        })}\n      </AnimatePresence>\n    </div>\n  );\n\n  if (!items || items.length === 0) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        className=\"relative overflow-hidden rounded-xl sm:rounded-[1.5rem] border border-white/10 bg-zinc-950 p-6 sm:p-10 flex flex-col items-center justify-center text-center group\"\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-purple-500/5 to-transparent opacity-50\" />\n        {title && (\n          <h3 className=\"relative z-10 m-0 mb-2 text-lg sm:text-xl font-bold text-foreground\">\n            {title}\n          </h3>\n        )}\n        <div className=\"relative z-10 flex flex-col items-center gap-2 sm:gap-3 text-muted-foreground mt-3 sm:mt-4\">\n          <div className=\"w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-1 group-hover:scale-110 transition-transform duration-500 shadow-xl\">\n            <Sparkles className=\"text-indigo-400 opacity-60 w-5 h-5 sm:w-6 sm:h-6\" />\n          </div>\n          <p className=\"text-xs sm:text-sm font-medium\">No tasks yet</p>\n          <button className=\"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 text-[0.625rem] sm:text-xs font-bold text-foreground transition-all min-h-[2.5rem] touch-manipulation\">\n            <Plus className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" /> Add First Task\n          </button>\n        </div>\n        {children}\n      </motion.div>\n    );\n  }\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto flex flex-col gap-4 sm:gap-6\">\n      {/* Header */}\n      {title && (\n        <div className=\"flex items-center justify-between gap-2 px-1 sm:px-2\">\n          <h3 className=\"text-xl sm:text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50 truncate\">\n            {title}\n          </h3>\n          <div className=\"flex items-center gap-2 shrink-0\">\n            <div className=\"text-[0.625rem] sm:text-xs font-bold text-muted-foreground bg-white/5 px-2 sm:px-2.5 py-1 rounded-full border border-white/5\">\n              {completedCount}/{totalCount} Done\n            </div>\n          </div>\n        </div>\n      )}\n\n      {renderItems(items)}\n      {children}\n    </div>\n  );\n});\n","/**\n * TodoList Adapter - Implementation of TodoListPort\n */\nimport type { TodoListPort, TodoItem } from \"../ports\";\n\nexport function createTodoListAdapter(): TodoListPort {\n  return {\n    toggleItemStatus(items: TodoItem[], id: string): TodoItem[] {\n      return items.map((item) => {\n        if (item.id === id) {\n          const nextStatus = item.status === \"done\" ? \"pending\" : \"done\";\n          return { ...item, status: nextStatus };\n        }\n        if (item.subItems && item.subItems.length > 0) {\n          return {\n            ...item,\n            subItems: this.toggleItemStatus(item.subItems, id),\n          };\n        }\n        return item;\n      });\n    },\n\n    countCompleted(items: TodoItem[]): number {\n      let count = 0;\n      for (const item of items) {\n        if (item.status === \"done\") count++;\n        if (item.subItems) {\n          count += this.countCompleted(item.subItems);\n        }\n      }\n      return count;\n    },\n\n    countTotal(items: TodoItem[]): number {\n      let count = items.length;\n      for (const item of items) {\n        if (item.subItems) {\n          count += this.countTotal(item.subItems);\n        }\n      }\n      return count;\n    },\n\n    flattenItems(items: TodoItem[]): TodoItem[] {\n      const result: TodoItem[] = [];\n      for (const item of items) {\n        result.push(item);\n        if (item.subItems) {\n          result.push(...this.flattenItems(item.subItems));\n        }\n      }\n      return result;\n    },\n  };\n}\n\n// Singleton instance\nlet todoListAdapter: TodoListPort | null = null;\n\nexport function getTodoListAdapter(): TodoListPort {\n  if (!todoListAdapter) {\n    todoListAdapter = createTodoListAdapter();\n  }\n  return todoListAdapter;\n}\n","/**\n * useTodoListLogic - Custom hook for TodoList state management\n */\nimport { useCallback, useMemo } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { TodoListPort, TodoItem } from \"../ports\";\n\nexport interface UseTodoListLogicOptions {\n  initialItems: TodoItem[];\n}\n\nexport interface UseTodoListLogicReturn {\n  items: TodoItem[];\n  completedCount: number;\n  totalCount: number;\n  toggleItem: (id: string) => void;\n}\n\nexport function useTodoListLogic(\n  elementKey: string,\n  adapter: TodoListPort,\n  options: UseTodoListLogicOptions,\n): UseTodoListLogicReturn {\n  const { initialItems } = options;\n  const [state, updateState] = useElementState(elementKey, { items: initialItems });\n\n  const items = state.items as TodoItem[];\n\n  const toggleItem = useCallback(\n    (id: string) => {\n      updateState({ items: adapter.toggleItemStatus(items, id) });\n    },\n    [adapter, items, updateState],\n  );\n\n  const completedCount = useMemo(\n    () => adapter.countCompleted(items),\n    [adapter, items],\n  );\n\n  const totalCount = useMemo(() => adapter.countTotal(items), [adapter, items]);\n\n  return {\n    items,\n    completedCount,\n    totalCount,\n    toggleItem,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * TodoList component schema definition\n */\nexport const TodoListPropsSchema = z.object({});\n\n/** Type inference for TodoList props */\nexport type TodoListProps = z.infer<typeof TodoListPropsSchema>;\n\n/**\n * TodoList component definition for catalog registration\n */\nexport const TodoListDefinition = {\n  name: \"TodoList\" as const,\n  props: TodoListPropsSchema,\n  description: \"TodoList component\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { Calendar, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { RoutineSchedulerProps } from \"./schema\";\nimport { DayColumn, CATEGORY_CONFIG } from \"./components\";\nimport {\n  getRoutineSchedulerAdapter,\n  getRoutineSchedulerStateAdapter,\n} from \"./adapters\";\nimport { useRoutineSchedulerLogic } from \"./hooks\";\n\n// --- Main Component ---\n\nexport const RoutineScheduler = memo(function RoutineScheduler({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    view = \"day\",\n    selectedDate: initialSelectedDate,\n    days: initialDays,\n    timeRange,\n    granularity = \"30min\",\n    lock = false,\n    showCategories,\n  } = element.props as RoutineSchedulerProps;\n\n  const adapter = getRoutineSchedulerAdapter();\n  const stateAdapter = getRoutineSchedulerStateAdapter();\n\n  const {\n    currentView,\n    selectedDate,\n    visibleDays,\n    timeSlots,\n    slotHeight,\n    dayStart,\n    todayStr,\n    setCurrentView,\n    setSelectedDate,\n    navigateDate,\n    handleToggleBlock,\n    displayDays,\n  } = useRoutineSchedulerLogic(element.key, adapter, stateAdapter, {\n    initialDate: initialSelectedDate ?? undefined,\n    initialView: view === \"timeline\" ? \"day\" : view,\n    initialDays: initialDays || [],\n    timeRange: timeRange ?? undefined,\n    granularity,\n    showCategories: showCategories ?? undefined,\n    lock: lock ?? false,\n  });\n\n  // Note: useDomainAutoSave removed - useElementState handles syncing\n\n  return (\n    <div className=\"flex flex-col gap-3 sm:gap-4 w-full\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <Calendar className=\"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500\" />\n          <h3 className=\"text-base sm:text-lg lg:text-xl font-bold tracking-tight text-white\">\n            {title || \"Routine\"}\n          </h3>\n        </div>\n\n        <div className=\"flex items-center gap-1.5 sm:gap-2\">\n          {/* View Toggle */}\n          <div className=\"flex rounded-lg border border-white/10 overflow-hidden\">\n            {([\"day\", \"week\"] as const).map((v) => (\n              <button\n                key={v}\n                onClick={() => setCurrentView(v)}\n                className={cn(\n                  \"px-2 sm:px-3 py-1 sm:py-1.5 text-[0.625rem] sm:text-xs font-bold uppercase tracking-wider transition-colors touch-manipulation\",\n                  currentView === v\n                    ? \"bg-indigo-500/20 text-indigo-400\"\n                    : \"text-white/40 hover:text-white/60\",\n                )}\n              >\n                {v}\n              </button>\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"flex items-center gap-0.5 sm:gap-1\">\n            <button\n              onClick={() => navigateDate(-1)}\n              className=\"w-7 h-7 sm:w-8 sm:h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 transition-colors touch-manipulation\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setSelectedDate(todayStr)}\n              className=\"px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg border border-white/10 text-[0.625rem] sm:text-xs font-bold text-white/60 hover:text-white hover:bg-white/5 transition-colors touch-manipulation\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateDate(1)}\n              className=\"w-7 h-7 sm:w-8 sm:h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 transition-colors touch-manipulation\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Date Display */}\n      <div className=\"text-xs sm:text-sm text-white/50 font-mono\">\n        {currentView === \"day\"\n          ? new Date(selectedDate).toLocaleDateString(undefined, {\n              weekday: \"long\",\n              month: \"long\",\n              day: \"numeric\",\n              year: \"numeric\",\n            })\n          : `Week of ${new Date(visibleDays[0]?.date ?? selectedDate).toLocaleDateString(undefined, { month: \"short\", day: \"numeric\" })}`}\n      </div>\n\n      {/* Schedule Grid */}\n      <div className=\"bg-zinc-900/50 border border-white/10 rounded-xl sm:rounded-2xl overflow-hidden\">\n        <div className=\"flex\">\n          {/* Time Labels */}\n          <div className=\"w-10 sm:w-14 flex-shrink-0 border-r border-white/5\">\n            {currentView === \"week\" && (\n              <div className=\"h-[3rem] sm:h-[3.75rem] border-b border-white/5\" />\n            )}\n            {timeSlots.map((slot, i) => (\n              <div\n                key={slot}\n                className=\"relative border-b border-white/5 text-[0.5rem] sm:text-[0.625rem] font-mono text-white/30\"\n                style={{ height: `${slotHeight}px` }}\n              >\n                <span className=\"absolute -top-2 left-1 sm:left-2\">{slot}</span>\n              </div>\n            ))}\n          </div>\n\n          {/* Day Columns */}\n          <div className=\"flex-1 flex overflow-x-auto touch-pan-x\">\n            <AnimatePresence mode=\"wait\">\n              {visibleDays.length === 0 ? (\n                <div className=\"flex-1 py-8 sm:py-12\">\n                  <EmptyState\n                    icon={<Calendar className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n                    message=\"No schedule\"\n                  />\n                </div>\n              ) : (\n                visibleDays.map((day) => (\n                  <DayColumn\n                    key={day.date}\n                    day={day}\n                    blocks={day.blocks}\n                    timeSlots={timeSlots}\n                    granularity={granularity}\n                    dayStart={dayStart}\n                    slotHeight={slotHeight}\n                    onToggle={handleToggleBlock}\n                    lock={!!lock}\n                    elementKey={element.key}\n                    isToday={day.date === todayStr}\n                    showHeader={currentView === \"week\"}\n                  />\n                ))\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n\n      {/* Category Legend */}\n      <div className=\"flex flex-wrap gap-2 sm:gap-3\">\n        {Object.entries(CATEGORY_CONFIG).map(([key, config]) => {\n          const Icon = config.icon;\n          return (\n            <div\n              key={key}\n              className=\"flex items-center gap-1 sm:gap-1.5 text-[0.625rem] sm:text-xs text-white/50\"\n            >\n              <Icon className=\"w-3 h-3\" />\n              <span className=\"capitalize\">{key}</span>\n            </div>\n          );\n        })}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { TimeBlock } from \"../schema\";\nimport { getCategoryConfig, formatTimeRange } from \"./utils\";\n\nexport const TimeBlockCard = memo(function TimeBlockCard({\n  block,\n  onToggle,\n  lock,\n  elementKey,\n  slotHeight,\n  slots,\n}: {\n  block: TimeBlock;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n  slotHeight: number;\n  slots: number;\n}) {\n  const config = getCategoryConfig(block.category);\n  const Icon = config.icon;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      style={{ height: `${slots * slotHeight}px`, minHeight: \"44px\" }}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={block.id}\n      className={cn(\n        \"absolute left-14 right-2 rounded-xl border p-2 overflow-hidden cursor-pointer transition-all group\",\n        config.bg,\n        block.completed && \"opacity-60\",\n      )}\n      onClick={() => !lock && onToggle(block.id)}\n    >\n      <div className=\"flex items-start gap-2 h-full\">\n        <div\n          className={cn(\n            \"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0\",\n            block.completed ? \"bg-emerald-500\" : \"bg-white/10\",\n          )}\n        >\n          {block.completed ? (\n            <Check size={12} className=\"text-black\" />\n          ) : (\n            <Icon size={12} className={config.color} />\n          )}\n        </div>\n        <div className=\"flex-1 min-w-0 overflow-hidden\">\n          <div\n            className={cn(\n              \"text-sm font-semibold text-white truncate\",\n              block.completed && \"line-through opacity-70\",\n            )}\n          >\n            {block.title}\n          </div>\n          <div className=\"text-[10px] text-white/50 font-mono mt-0.5\">\n            {formatTimeRange(block.startTime, block.endTime)}\n          </div>\n          {block.description && slots > 2 && (\n            <div className=\"text-xs text-white/40 mt-1 line-clamp-2\">\n              {block.description}\n            </div>\n          )}\n        </div>\n        {block.priority === \"high\" && (\n          <div className=\"w-1.5 h-1.5 rounded-full bg-rose-500 flex-shrink-0\" />\n        )}\n      </div>\n    </motion.div>\n  );\n});\n","import {\n  Calendar,\n  Clock,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Briefcase,\n  Moon,\n  Coffee,\n  User,\n  MoreHorizontal,\n} from \"lucide-react\";\n\n// --- Types ---\n\nexport type CategoryConfig = {\n  icon: typeof Calendar;\n  color: string;\n  bg: string;\n};\n\n// --- Constants ---\n\nexport const DEFAULT_CATEGORY_CONFIG: CategoryConfig = {\n  icon: MoreHorizontal,\n  color: \"text-zinc-400\",\n  bg: \"bg-zinc-500/10 border-zinc-500/20\",\n};\n\nexport const CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  workout: {\n    icon: Dumbbell,\n    color: \"text-emerald-400\",\n    bg: \"bg-emerald-500/10 border-emerald-500/20\",\n  },\n  meal: {\n    icon: Utensils,\n    color: \"text-amber-400\",\n    bg: \"bg-amber-500/10 border-amber-500/20\",\n  },\n  supplement: {\n    icon: Pill,\n    color: \"text-violet-400\",\n    bg: \"bg-violet-500/10 border-violet-500/20\",\n  },\n  work: {\n    icon: Briefcase,\n    color: \"text-blue-400\",\n    bg: \"bg-blue-500/10 border-blue-500/20\",\n  },\n  rest: {\n    icon: Coffee,\n    color: \"text-orange-400\",\n    bg: \"bg-orange-500/10 border-orange-500/20\",\n  },\n  sleep: {\n    icon: Moon,\n    color: \"text-indigo-400\",\n    bg: \"bg-indigo-500/10 border-indigo-500/20\",\n  },\n  personal: {\n    icon: User,\n    color: \"text-pink-400\",\n    bg: \"bg-pink-500/10 border-pink-500/20\",\n  },\n  other: {\n    icon: MoreHorizontal,\n    color: \"text-zinc-400\",\n    bg: \"bg-zinc-500/10 border-zinc-500/20\",\n  },\n};\n\nexport const DAYS_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n// --- Helpers ---\n\nexport function getCategoryConfig(\n  category: string | null | undefined,\n): CategoryConfig {\n  return CATEGORY_CONFIG[category ?? \"other\"] ?? DEFAULT_CATEGORY_CONFIG;\n}\n\nexport function parseTime(time: string): number {\n  const parts = time.split(\":\").map(Number);\n  const hours = parts[0] ?? 0;\n  const minutes = parts[1] ?? 0;\n  return hours * 60 + minutes;\n}\n\nexport function formatTimeRange(start: string, end: string): string {\n  return `${start} - ${end}`;\n}\n\nexport function getBlockHeight(\n  startTime: string,\n  endTime: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): number {\n  const duration = parseTime(endTime) - parseTime(startTime);\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  return Math.max(1, Math.round(duration / slotMinutes));\n}\n\nexport function getBlockTop(\n  startTime: string,\n  dayStart: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): number {\n  const diff = parseTime(startTime) - parseTime(dayStart);\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  return Math.max(0, Math.round(diff / slotMinutes));\n}\n\nexport function generateTimeSlots(\n  start: string,\n  end: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): string[] {\n  const slots: string[] = [];\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  let current = parseTime(start);\n  const endMin = parseTime(end);\n\n  while (current <= endMin) {\n    const hours = Math.floor(current / 60);\n    const mins = current % 60;\n    slots.push(\n      `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`,\n    );\n    current += slotMinutes;\n  }\n  return slots;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\nimport { DAYS_SHORT, getBlockTop, getBlockHeight } from \"./utils\";\nimport { TimeBlockCard } from \"./time-block-card\";\n\nexport const DayColumn = memo(function DayColumn({\n  day,\n  blocks,\n  timeSlots,\n  granularity,\n  dayStart,\n  slotHeight,\n  onToggle,\n  lock,\n  elementKey,\n  isToday,\n  showHeader,\n}: {\n  day: DaySchedule;\n  blocks: TimeBlock[];\n  timeSlots: string[];\n  granularity: \"15min\" | \"30min\" | \"1hr\";\n  dayStart: string;\n  slotHeight: number;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n  isToday: boolean;\n  showHeader: boolean;\n}) {\n  const date = new Date(day.date);\n  const dayNum = date.getDate();\n  const dayName = DAYS_SHORT[date.getDay()];\n\n  return (\n    <div className=\"flex-1 min-w-[140px] relative\">\n      {showHeader && (\n        <div\n          className={cn(\n            \"sticky top-0 z-10 bg-zinc-950/90 backdrop-blur-sm border-b border-white/5 p-2 text-center\",\n            isToday && \"bg-indigo-500/10 border-indigo-500/20\",\n          )}\n        >\n          <div className=\"text-[10px] font-bold text-white/40 uppercase tracking-wider\">\n            {dayName}\n          </div>\n          <div\n            className={cn(\n              \"text-lg font-bold\",\n              isToday ? \"text-indigo-400\" : \"text-white\",\n            )}\n          >\n            {dayNum}\n          </div>\n        </div>\n      )}\n\n      <div\n        className=\"relative\"\n        style={{ height: `${timeSlots.length * slotHeight}px` }}\n      >\n        {timeSlots.map((slot, i) => (\n          <div\n            key={slot}\n            className=\"absolute left-0 right-0 border-b border-white/5\"\n            style={{ top: `${i * slotHeight}px`, height: `${slotHeight}px` }}\n          />\n        ))}\n\n        {blocks.map((block) => {\n          const topSlot = getBlockTop(block.startTime, dayStart, granularity);\n          const heightSlots = getBlockHeight(\n            block.startTime,\n            block.endTime,\n            granularity,\n          );\n\n          return (\n            <div\n              key={block.id}\n              style={{ top: `${topSlot * slotHeight}px` }}\n              className=\"absolute left-0 right-0\"\n            >\n              <TimeBlockCard\n                block={block}\n                onToggle={onToggle}\n                lock={lock}\n                elementKey={elementKey}\n                slotHeight={slotHeight}\n                slots={heightSlots}\n              />\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n","/**\n * RoutineScheduler Adapter - Implementation of RoutineSchedulerPort\n * Pure functions for schedule calculations\n */\n\nimport type { RoutineSchedulerPort, RoutineSchedulerStatePort } from \"../ports\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\n\n/**\n * Create a routine scheduler adapter for time grid operations\n */\nexport function createRoutineSchedulerAdapter(): RoutineSchedulerPort {\n  return {\n    generateTimeSlots(\n      start: string,\n      end: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): string[] {\n      const slots: string[] = [];\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      let current = this.parseTime(start);\n      const endMin = this.parseTime(end);\n\n      while (current <= endMin) {\n        const hours = Math.floor(current / 60);\n        const mins = current % 60;\n        slots.push(\n          `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`,\n        );\n        current += slotMinutes;\n      }\n      return slots;\n    },\n\n    parseTime(time: string): number {\n      const parts = time.split(\":\").map(Number);\n      const hours = parts[0] ?? 0;\n      const minutes = parts[1] ?? 0;\n      return hours * 60 + minutes;\n    },\n\n    getBlockTop(\n      startTime: string,\n      dayStart: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): number {\n      const diff = this.parseTime(startTime) - this.parseTime(dayStart);\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      return Math.max(0, Math.round(diff / slotMinutes));\n    },\n\n    getBlockHeight(\n      startTime: string,\n      endTime: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): number {\n      const duration = this.parseTime(endTime) - this.parseTime(startTime);\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      return Math.max(1, Math.round(duration / slotMinutes));\n    },\n\n    getSlotHeight(granularity: \"15min\" | \"30min\" | \"1hr\"): number {\n      return granularity === \"15min\" ? 24 : granularity === \"30min\" ? 36 : 48;\n    },\n\n    formatDate(date: string, format: \"full\" | \"short\"): string {\n      const d = new Date(date);\n      if (format === \"full\") {\n        return d.toLocaleDateString(undefined, {\n          weekday: \"long\",\n          month: \"long\",\n          day: \"numeric\",\n          year: \"numeric\",\n        });\n      }\n      return d.toLocaleDateString(undefined, {\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n\n    getTodayString(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n  };\n}\n\n/**\n * Create a routine scheduler state adapter for state management\n */\nexport function createRoutineSchedulerStateAdapter(): RoutineSchedulerStatePort {\n  return {\n    mergeEdits(\n      days: DaySchedule[],\n      edits: Record<string, Partial<TimeBlock>>,\n    ): DaySchedule[] {\n      return days.map((day) => ({\n        ...day,\n        blocks: day.blocks.map((block) => {\n          const edit = edits[block.id];\n          return edit ? { ...block, ...edit } : block;\n        }),\n      }));\n    },\n\n    filterByCategories(\n      days: DaySchedule[],\n      categories: string[] | null | undefined,\n    ): DaySchedule[] {\n      if (!categories || categories.length === 0) return days;\n      return days.map((day) => ({\n        ...day,\n        blocks: day.blocks.filter((b) =>\n          categories.includes(b.category as string),\n        ),\n      }));\n    },\n\n    toggleBlockCompletion(\n      edits: Record<string, Partial<TimeBlock>>,\n      blockId: string,\n      currentCompleted: boolean,\n    ): Record<string, Partial<TimeBlock>> {\n      return {\n        ...edits,\n        [blockId]: { completed: !currentCompleted },\n      };\n    },\n\n    navigateDate(\n      currentDate: string,\n      direction: -1 | 1,\n      view: \"day\" | \"week\",\n    ): string {\n      const date = new Date(currentDate);\n      date.setDate(\n        date.getDate() + (view === \"week\" ? 7 * direction : direction),\n      );\n      return date.toISOString().split(\"T\")[0]!;\n    },\n\n    getVisibleDays(\n      days: DaySchedule[],\n      selectedDate: string,\n      view: \"day\" | \"week\",\n    ): DaySchedule[] {\n      if (view === \"day\") {\n        return days.filter((d) => d.date === selectedDate);\n      }\n      const selected = new Date(selectedDate);\n      const weekStart = new Date(selected);\n      weekStart.setDate(selected.getDate() - selected.getDay());\n\n      return Array.from({ length: 7 }, (_, i) => {\n        const date = new Date(weekStart);\n        date.setDate(weekStart.getDate() + i);\n        const dateStr = date.toISOString().split(\"T\")[0]!;\n        const existingDay = days.find((d) => d.date === dateStr);\n        return existingDay ?? { date: dateStr, blocks: [] };\n      });\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet schedulerAdapterInstance: RoutineSchedulerPort | null = null;\nlet stateAdapterInstance: RoutineSchedulerStatePort | null = null;\n\nexport function getRoutineSchedulerAdapter(): RoutineSchedulerPort {\n  if (!schedulerAdapterInstance) {\n    schedulerAdapterInstance = createRoutineSchedulerAdapter();\n  }\n  return schedulerAdapterInstance;\n}\n\nexport function getRoutineSchedulerStateAdapter(): RoutineSchedulerStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createRoutineSchedulerStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useRoutineSchedulerLogic - Custom hook for routine scheduler state management\n * Separates business logic from presentation\n */\n\nimport { useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { RoutineSchedulerPort, RoutineSchedulerStatePort } from \"../ports\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\n\ninterface RoutineSchedulerState extends Record<string, unknown> {\n  localEdits: Record<string, Partial<TimeBlock>>;\n  currentView: \"day\" | \"week\";\n  selectedDate: string;\n}\n\nexport interface UseRoutineSchedulerLogicOptions {\n  initialDate?: string;\n  initialView?: \"day\" | \"week\";\n  initialDays?: DaySchedule[];\n  timeRange?: { start: string; end: string };\n  granularity?: \"15min\" | \"30min\" | \"1hr\";\n  showCategories?: string[];\n  lock?: boolean;\n}\n\nexport interface UseRoutineSchedulerLogicReturn {\n  // State\n  currentView: \"day\" | \"week\";\n  selectedDate: string;\n  visibleDays: DaySchedule[];\n  timeSlots: string[];\n\n  // Derived\n  slotHeight: number;\n  dayStart: string;\n  dayEnd: string;\n  todayStr: string;\n\n  // Actions\n  setCurrentView: (view: \"day\" | \"week\") => void;\n  setSelectedDate: (date: string) => void;\n  navigateDate: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleBlock: (blockId: string) => void;\n\n  // For auto-save\n  displayDays: DaySchedule[];\n}\n\nexport function useRoutineSchedulerLogic(\n  elementKey: string,\n  adapter: RoutineSchedulerPort,\n  stateAdapter: RoutineSchedulerStatePort,\n  options: UseRoutineSchedulerLogicOptions,\n): UseRoutineSchedulerLogicReturn {\n  const {\n    initialDate,\n    initialView = \"day\",\n    initialDays = [],\n    timeRange,\n    granularity = \"30min\",\n    showCategories,\n    lock = false,\n  } = options;\n\n  // AI-synced state via Zustand\n  const [state, updateState] = useElementState<RoutineSchedulerState>(\n    elementKey,\n    {\n      localEdits: {},\n      currentView: initialView,\n      selectedDate: initialDate ?? adapter.getTodayString(),\n    },\n  );\n\n  const { localEdits, currentView, selectedDate } = state;\n\n  // Time range\n  const dayStart = timeRange?.start || \"06:00\";\n  const dayEnd = timeRange?.end || \"22:00\";\n\n  // Derived: today string\n  const todayStr = adapter.getTodayString();\n\n  // Derived: slot height\n  const slotHeight = adapter.getSlotHeight(granularity);\n\n  // Derived: time slots\n  const timeSlots = useMemo(\n    () => adapter.generateTimeSlots(dayStart, dayEnd, granularity),\n    [adapter, dayStart, dayEnd, granularity],\n  );\n\n  // Derived: merge edits with days\n  const displayDays = useMemo(\n    () => stateAdapter.mergeEdits(initialDays, localEdits),\n    [stateAdapter, initialDays, localEdits],\n  );\n\n  // Derived: filter by categories\n  const filteredDays = useMemo(\n    () => stateAdapter.filterByCategories(displayDays, showCategories),\n    [stateAdapter, displayDays, showCategories],\n  );\n\n  // Derived: visible days for current view\n  const visibleDays = useMemo(\n    () => stateAdapter.getVisibleDays(filteredDays, selectedDate, currentView),\n    [stateAdapter, filteredDays, selectedDate, currentView],\n  );\n\n  // Actions\n  const setCurrentView = useCallback(\n    (view: \"day\" | \"week\") => {\n      updateState({ currentView: view });\n    },\n    [updateState],\n  );\n\n  const setSelectedDate = useCallback(\n    (date: string) => {\n      updateState({ selectedDate: date });\n    },\n    [updateState],\n  );\n\n  const navigateDate = useCallback(\n    (direction: -1 | 1) => {\n      const newDate = stateAdapter.navigateDate(\n        selectedDate,\n        direction,\n        currentView,\n      );\n      updateState({ selectedDate: newDate });\n    },\n    [stateAdapter, currentView, selectedDate, updateState],\n  );\n\n  const goToToday = useCallback(() => {\n    updateState({ selectedDate: adapter.getTodayString() });\n  }, [adapter, updateState]);\n\n  const handleToggleBlock = useCallback(\n    (blockId: string) => {\n      if (lock) return;\n\n      const allBlocks = displayDays.flatMap((d) => d.blocks);\n      const block = allBlocks.find((b) => b.id === blockId);\n      if (!block) return;\n\n      const newEdits = stateAdapter.toggleBlockCompletion(\n        localEdits,\n        blockId,\n        block.completed ?? false,\n      );\n      updateState({ localEdits: newEdits });\n    },\n    [lock, displayDays, stateAdapter, localEdits, updateState],\n  );\n\n  return {\n    // State\n    currentView,\n    selectedDate,\n    visibleDays,\n    timeSlots,\n\n    // Derived\n    slotHeight,\n    dayStart,\n    dayEnd,\n    todayStr,\n\n    // Actions\n    setCurrentView,\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleBlock,\n\n    // For auto-save\n    displayDays,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * Time block schema for granular scheduling\n */\nexport const timeBlockSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  title: z.string().describe(\"Block title\"),\n  description: z.string().nullable().optional(),\n  startTime: z.string().describe(\"Start time in HH:mm format\"),\n  endTime: z.string().describe(\"End time in HH:mm format\"),\n  category: z\n    .enum([\n      \"workout\",\n      \"meal\",\n      \"supplement\",\n      \"work\",\n      \"rest\",\n      \"sleep\",\n      \"personal\",\n      \"other\",\n    ])\n    .describe(\"Activity category for color coding and integration\"),\n  priority: z.enum([\"high\", \"medium\", \"low\"]).nullable().optional(),\n  completed: z.boolean().nullable().optional(),\n  recurring: z\n    .object({\n      pattern: z.enum([\"daily\", \"weekly\", \"custom\"]),\n      daysOfWeek: z\n        .array(z.number().min(0).max(6))\n        .nullable()\n        .optional()\n        .describe(\"0=Sunday, 6=Saturday\"),\n    })\n    .nullable()\n    .optional(),\n  linkedEntityId: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"ID of linked workout, meal, or supplement\"),\n  linkedEntityType: z\n    .enum([\"workout\", \"meal\", \"supplement\", \"calendar_event\"])\n    .nullable()\n    .optional(),\n  notes: z.string().nullable().optional(),\n  color: z.string().nullable().optional().describe(\"Custom color override\"),\n});\n\nexport type TimeBlock = z.infer<typeof timeBlockSchema>;\n\n/**\n * Day schedule containing time blocks\n */\nexport const dayScheduleSchema = z.object({\n  date: z.string().describe(\"Date in YYYY-MM-DD format\"),\n  dayOfWeek: z\n    .number()\n    .min(0)\n    .max(6)\n    .optional()\n    .describe(\"0=Sunday, 6=Saturday\"),\n  blocks: z.array(timeBlockSchema).describe(\"Time blocks for this day\"),\n  notes: z.string().nullable().optional(),\n});\n\nexport type DaySchedule = z.infer<typeof dayScheduleSchema>;\n\n/**\n * RoutineScheduler component props schema\n */\nexport const RoutineSchedulerPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  view: z\n    .enum([\"day\", \"week\", \"timeline\"])\n    .default(\"day\")\n    .describe(\"Display mode: day view, week view, or timeline\"),\n  selectedDate: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Selected date in YYYY-MM-DD format\"),\n  days: z\n    .array(dayScheduleSchema)\n    .describe(\"Array of day schedules (REQUIRED)\"),\n  timeRange: z\n    .object({\n      start: z.string().default(\"06:00\").describe(\"Day start time HH:mm\"),\n      end: z.string().default(\"22:00\").describe(\"Day end time HH:mm\"),\n    })\n    .nullable()\n    .optional(),\n  granularity: z\n    .enum([\"15min\", \"30min\", \"1hr\"])\n    .default(\"30min\")\n    .describe(\"Time slot granularity\"),\n  lock: z.boolean().nullable().optional(),\n  showCategories: z\n    .array(\n      z.enum([\n        \"workout\",\n        \"meal\",\n        \"supplement\",\n        \"work\",\n        \"rest\",\n        \"sleep\",\n        \"personal\",\n        \"other\",\n      ]),\n    )\n    .nullable()\n    .optional()\n    .describe(\"Filter visible categories\"),\n});\n\nexport type RoutineSchedulerProps = z.infer<typeof RoutineSchedulerPropsSchema>;\n\n/**\n * RoutineScheduler component definition for catalog registration\n */\nexport const RoutineSchedulerDefinition = {\n  name: \"RoutineScheduler\" as const,\n  props: RoutineSchedulerPropsSchema,\n  description:\n    \"Ultra-powerful granular routine and schedule organizer with day/week views, recurring events, and integration with workouts, meals, and supplements.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Pill, Package } from \"lucide-react\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { TimingGroup, ProgressDashboard, TIMING_ORDER } from \"./components\";\nimport type { SupplementTrackerProps } from \"./schema\";\nimport {\n  getSupplementTrackerAdapter,\n  getSupplementStateAdapter,\n} from \"./adapters\";\nimport { useSupplementTrackerLogic } from \"./hooks\";\n\nexport const SupplementTracker = memo(function SupplementTracker({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    supplements: initialSupplements,\n    schedule: initialSchedule,\n    selectedDate: initialSelectedDate,\n    lock: rawLock = false,\n  } = element.props as SupplementTrackerProps;\n\n  const lock = rawLock ?? false;\n\n  // Get adapters\n  const trackerAdapter = useMemo(() => getSupplementTrackerAdapter(), []);\n  const stateAdapter = useMemo(() => getSupplementStateAdapter(), []);\n\n  // Use custom hook for all logic\n  const {\n    selectedDate,\n    supplements,\n    displayDoses,\n    groupedByTiming,\n    stats,\n    formattedDate,\n    handleToggle,\n    handleSkip,\n  } = useSupplementTrackerLogic(element.key, trackerAdapter, stateAdapter, {\n    initialSupplements,\n    initialSchedule,\n    initialSelectedDate,\n    lock,\n  });\n\n  // AutoSave\n  useDomainAutoSave(\"supplement\", element.key, {\n    type: \"supplement_schedule\",\n    supplements,\n    schedule: [{ date: selectedDate, doses: displayDoses }],\n  });\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6 w-full\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-2\">\n        <h3 className=\"text-base sm:text-lg lg:text-xl font-bold tracking-tight flex items-center gap-2 sm:gap-3\">\n          <Pill className=\"w-4 h-4 sm:w-5 sm:h-5 text-violet-500\" />\n          {title || \"Supplements\"}\n        </h3>\n        <div className=\"text-[0.625rem] sm:text-xs font-mono text-white/40\">{formattedDate}</div>\n      </div>\n\n      <ProgressDashboard stats={stats} />\n\n      {/* Supplement Groups */}\n      <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6\">\n        {supplements.length === 0 ? (\n          <EmptyState\n            icon={<Package className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n            message=\"No supplements configured\"\n          />\n        ) : (\n          <AnimatePresence mode=\"popLayout\">\n            {TIMING_ORDER.map((timing) => {\n              const items = groupedByTiming.get(timing);\n              if (!items || items.length === 0) return null;\n              return (\n                <TimingGroup\n                  key={timing}\n                  timing={timing}\n                  items={items}\n                  onToggle={handleToggle}\n                  onSkip={handleSkip}\n                  lock={lock}\n                  elementKey={element.key}\n                />\n              );\n            })}\n          </AnimatePresence>\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { Pill, Check, X, Utensils } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { CATEGORY_COLORS } from \"./utils\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\nexport interface SupplementCardProps {\n  supplement: SupplementItem;\n  dose?: ScheduledDose;\n  onToggle: (suppId: string, doseId?: string) => void;\n  onSkip: (suppId: string, doseId?: string) => void;\n  lock: boolean;\n  elementKey: string;\n}\n\nexport const SupplementCard = memo(function SupplementCard({\n  supplement,\n  dose,\n  onToggle,\n  onSkip,\n  lock,\n  elementKey,\n}: SupplementCardProps) {\n  const isTaken = dose?.taken ?? false;\n  const isSkipped = dose?.skipped ?? false;\n  const categoryStyle =\n    CATEGORY_COLORS[supplement.category] || CATEGORY_COLORS.other;\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={supplement.id}\n      className={cn(\n        \"group relative p-3 rounded-xl border transition-all duration-200\",\n        isTaken\n          ? \"bg-emerald-500/10 border-emerald-500/20\"\n          : isSkipped\n            ? \"bg-zinc-800/50 border-zinc-700/50 opacity-50\"\n            : \"bg-zinc-900/60 border-white/10 hover:border-white/20\",\n      )}\n    >\n      <div className=\"flex items-center gap-3\">\n        {/* Toggle Button */}\n        <button\n          onClick={() => !lock && onToggle(supplement.id, dose?.id)}\n          disabled={lock}\n          className={cn(\n            \"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 transition-all\",\n            isTaken\n              ? \"bg-emerald-500 text-black\"\n              : \"bg-white/5 border border-white/10 text-white/40 hover:text-white hover:border-white/20\",\n          )}\n        >\n          {isTaken ? <Check size={16} strokeWidth={3} /> : <Pill size={14} />}\n        </button>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={cn(\n                \"text-sm font-semibold\",\n                isTaken && \"line-through opacity-70\",\n                isSkipped && \"line-through\",\n              )}\n            >\n              {supplement.name}\n            </span>\n            <span\n              className={cn(\n                \"text-[10px] font-bold px-1.5 py-0.5 rounded border\",\n                categoryStyle,\n              )}\n            >\n              {supplement.category.replace(\"_\", \" \")}\n            </span>\n          </div>\n          <div className=\"flex items-center gap-2 mt-1 text-xs text-white/50\">\n            <span className=\"font-mono\">{supplement.dosage}</span>\n            {supplement.withFood && (\n              <span className=\"flex items-center gap-1\">\n                <Utensils size={10} /> with food\n              </span>\n            )}\n            {supplement.brand && <span>({supplement.brand})</span>}\n          </div>\n        </div>\n\n        {/* Skip Button */}\n        {!isTaken && !isSkipped && !lock && (\n          <button\n            onClick={() => onSkip(supplement.id, dose?.id)}\n            className=\"w-6 h-6 rounded flex items-center justify-center text-white/20 hover:text-rose-400 hover:bg-rose-500/10 transition-colors\"\n          >\n            <X size={12} />\n          </button>\n        )}\n\n        {/* Time */}\n        {dose?.scheduledTime && (\n          <div className=\"text-[10px] font-mono text-white/30\">\n            {dose.scheduledTime}\n          </div>\n        )}\n      </div>\n\n      {supplement.notes && (\n        <div className=\"mt-2 text-xs text-white/40 pl-11\">\n          {supplement.notes}\n        </div>\n      )}\n    </SelectableItem>\n  );\n});\n","import type { LucideIcon } from \"lucide-react\";\nimport { Clock, Sun, Moon, Utensils, Dumbbell } from \"lucide-react\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\n// --- Types ---\n\nexport interface TimingConfig {\n  icon: LucideIcon;\n  label: string;\n  color: string;\n}\n\n// --- Constants ---\n\nconst DEFAULT_TIMING_CONFIG: TimingConfig = {\n  icon: Clock,\n  label: \"Anytime\",\n  color: \"text-white/60\",\n};\n\nexport const TIMING_CONFIG: Record<string, TimingConfig> = {\n  morning: { icon: Sun, label: \"Morning\", color: \"text-amber-400\" },\n  pre_meal: { icon: Utensils, label: \"Before Meal\", color: \"text-orange-400\" },\n  with_meal: { icon: Utensils, label: \"With Meal\", color: \"text-green-400\" },\n  post_meal: { icon: Utensils, label: \"After Meal\", color: \"text-teal-400\" },\n  pre_workout: { icon: Dumbbell, label: \"Pre-Workout\", color: \"text-rose-400\" },\n  post_workout: {\n    icon: Dumbbell,\n    label: \"Post-Workout\",\n    color: \"text-emerald-400\",\n  },\n  evening: { icon: Moon, label: \"Evening\", color: \"text-indigo-400\" },\n  bedtime: { icon: Moon, label: \"Bedtime\", color: \"text-violet-400\" },\n};\n\nexport const CATEGORY_COLORS: Record<string, string> = {\n  vitamin: \"bg-amber-500/20 border-amber-500/30 text-amber-300\",\n  mineral: \"bg-slate-500/20 border-slate-500/30 text-slate-300\",\n  amino_acid: \"bg-blue-500/20 border-blue-500/30 text-blue-300\",\n  herb: \"bg-green-500/20 border-green-500/30 text-green-300\",\n  probiotic: \"bg-cyan-500/20 border-cyan-500/30 text-cyan-300\",\n  omega: \"bg-sky-500/20 border-sky-500/30 text-sky-300\",\n  protein: \"bg-rose-500/20 border-rose-500/30 text-rose-300\",\n  pre_workout: \"bg-red-500/20 border-red-500/30 text-red-300\",\n  post_workout: \"bg-emerald-500/20 border-emerald-500/30 text-emerald-300\",\n  medication: \"bg-purple-500/20 border-purple-500/30 text-purple-300\",\n  other: \"bg-zinc-500/20 border-zinc-500/30 text-zinc-300\",\n};\n\nexport const TIMING_ORDER = [\n  \"morning\",\n  \"pre_meal\",\n  \"with_meal\",\n  \"post_meal\",\n  \"pre_workout\",\n  \"post_workout\",\n  \"evening\",\n  \"bedtime\",\n];\n\n// --- Helpers ---\n\nexport function getTimingConfig(timing: string): TimingConfig {\n  return TIMING_CONFIG[timing] ?? DEFAULT_TIMING_CONFIG;\n}\n\nexport function groupByTiming(\n  supplements: SupplementItem[],\n  doses: ScheduledDose[],\n): Map<string, { supplement: SupplementItem; dose?: ScheduledDose }[]> {\n  const groups = new Map<\n    string,\n    { supplement: SupplementItem; dose?: ScheduledDose }[]\n  >();\n\n  for (const supp of supplements) {\n    const timing = supp.timing || \"morning\";\n    if (!groups.has(timing)) groups.set(timing, []);\n    const dose = doses.find((d) => d.supplementId === supp.id);\n    groups.get(timing)!.push({ supplement: supp, dose });\n  }\n\n  return groups;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { getTimingConfig } from \"./utils\";\nimport { SupplementCard } from \"./supplement-card\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\nexport interface TimingGroupProps {\n  timing: string;\n  items: { supplement: SupplementItem; dose?: ScheduledDose }[];\n  onToggle: (suppId: string, doseId?: string) => void;\n  onSkip: (suppId: string, doseId?: string) => void;\n  lock: boolean;\n  elementKey: string;\n}\n\nexport const TimingGroup = memo(function TimingGroup({\n  timing,\n  items,\n  onToggle,\n  onSkip,\n  lock,\n  elementKey,\n}: TimingGroupProps) {\n  const config = getTimingConfig(timing);\n  const Icon = config.icon;\n  const takenCount = items.filter((i) => i.dose?.taken).length;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-3\"\n    >\n      {/* Timing Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Icon size={14} className={config.color} />\n          <span className=\"text-sm font-bold text-white\">{config.label}</span>\n        </div>\n        <div className=\"text-xs font-mono text-white/40\">\n          {takenCount}/{items.length}\n        </div>\n      </div>\n\n      {/* Supplements */}\n      <div className=\"flex flex-col gap-2\">\n        {items.map(({ supplement, dose }) => (\n          <SupplementCard\n            key={supplement.id}\n            supplement={supplement}\n            dose={dose}\n            onToggle={onToggle}\n            onSkip={onSkip}\n            lock={lock}\n            elementKey={elementKey}\n          />\n        ))}\n      </div>\n    </motion.div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport interface ProgressDashboardProps {\n  stats: {\n    total: number;\n    taken: number;\n    skipped: number;\n    remaining: number;\n  };\n}\n\nexport const ProgressDashboard = memo(function ProgressDashboard({\n  stats,\n}: ProgressDashboardProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"p-4 rounded-2xl bg-zinc-900 border border-white/10\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <div className=\"text-[10px] font-bold text-white/40 uppercase tracking-widest\">\n            Today's Progress\n          </div>\n          <div className=\"text-2xl font-black text-white\">\n            {stats.taken}\n            <span className=\"text-sm font-medium text-white/40 ml-1\">\n              / {stats.total}\n            </span>\n          </div>\n        </div>\n        {stats.remaining > 0 && (\n          <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-amber-500/10 border border-amber-500/20\">\n            <AlertCircle size={14} className=\"text-amber-400\" />\n            <span className=\"text-xs font-bold text-amber-400\">\n              {stats.remaining} remaining\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"h-2 bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${(stats.taken / stats.total) * 100}%` }}\n          className=\"h-full bg-gradient-to-r from-violet-500 to-emerald-500 rounded-full\"\n        />\n      </div>\n    </motion.div>\n  );\n});\n","/**\n * SupplementTracker Adapter - Implementation of SupplementTrackerPort\n * Pure functions for supplement tracking operations\n */\n\nimport type { SupplementTrackerPort, SupplementStatePort } from \"../ports\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\n/**\n * Create a supplement tracker adapter with tracking operations\n */\nexport function createSupplementTrackerAdapter(): SupplementTrackerPort {\n  return {\n    getTodayDate(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n\n    formatDisplayDate(dateStr: string): string {\n      return new Date(dateStr).toLocaleDateString(undefined, {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n\n    groupByTiming(\n      supplements: SupplementItem[],\n      doses: ScheduledDose[],\n    ): Map<string, { supplement: SupplementItem; dose?: ScheduledDose }[]> {\n      const groups = new Map<\n        string,\n        { supplement: SupplementItem; dose?: ScheduledDose }[]\n      >();\n\n      for (const supp of supplements) {\n        const timing = supp.timing || \"morning\";\n        if (!groups.has(timing)) groups.set(timing, []);\n        const dose = doses.find((d) => d.supplementId === supp.id);\n        groups.get(timing)!.push({ supplement: supp, dose });\n      }\n\n      return groups;\n    },\n\n    calculateStats(supplements: SupplementItem[], doses: ScheduledDose[]) {\n      const total = supplements.length;\n      const taken = doses.filter((d) => d.taken).length;\n      const skipped = doses.filter((d) => d.skipped).length;\n      return { total, taken, skipped, remaining: total - taken - skipped };\n    },\n  };\n}\n\n/**\n * Create a supplement state adapter for state management\n */\nexport function createSupplementStateAdapter(): SupplementStatePort {\n  return {\n    mergeEdits(\n      doses: ScheduledDose[],\n      edits: Record<string, Partial<ScheduledDose>>,\n    ): ScheduledDose[] {\n      return doses.map((dose) => {\n        const edit = edits[dose.id];\n        return edit ? { ...dose, ...edit } : dose;\n      });\n    },\n\n    toggleDose(\n      edits: Record<string, Partial<ScheduledDose>>,\n      doseId: string,\n      currentTaken: boolean,\n    ): Record<string, Partial<ScheduledDose>> {\n      return {\n        ...edits,\n        [doseId]: {\n          taken: !currentTaken,\n          takenAt: !currentTaken ? new Date().toISOString() : null,\n          skipped: false,\n        },\n      };\n    },\n\n    skipDose(\n      edits: Record<string, Partial<ScheduledDose>>,\n      doseId: string,\n    ): Record<string, Partial<ScheduledDose>> {\n      return {\n        ...edits,\n        [doseId]: { skipped: true, taken: false },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet trackerAdapterInstance: SupplementTrackerPort | null = null;\nlet stateAdapterInstance: SupplementStatePort | null = null;\n\nexport function getSupplementTrackerAdapter(): SupplementTrackerPort {\n  if (!trackerAdapterInstance) {\n    trackerAdapterInstance = createSupplementTrackerAdapter();\n  }\n  return trackerAdapterInstance;\n}\n\nexport function getSupplementStateAdapter(): SupplementStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createSupplementStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useSupplementTrackerLogic - Custom hook for supplement tracker state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type {\n  SupplementTrackerPort,\n  SupplementStatePort,\n  SupplementStats,\n} from \"../ports\";\nimport type {\n  SupplementItem,\n  ScheduledDose,\n  DailySupplementSchedule,\n} from \"../schema\";\n\ninterface LocalEditsState extends Record<string, unknown> {\n  localEdits: Record<string, Partial<ScheduledDose>>;\n}\n\nexport interface UseSupplementTrackerLogicOptions {\n  initialSupplements?: SupplementItem[] | null;\n  initialSchedule?: DailySupplementSchedule[] | null;\n  initialSelectedDate?: string | null;\n  lock?: boolean | null;\n}\n\nexport interface UseSupplementTrackerLogicReturn {\n  // State\n  selectedDate: string;\n  supplements: SupplementItem[];\n  displayDoses: ScheduledDose[];\n  groupedByTiming: Map<\n    string,\n    { supplement: SupplementItem; dose?: ScheduledDose }[]\n  >;\n  stats: SupplementStats;\n\n  // Derived\n  formattedDate: string;\n\n  // Actions\n  handleToggle: (suppId: string, doseId?: string) => void;\n  handleSkip: (suppId: string, doseId?: string) => void;\n}\n\nexport function useSupplementTrackerLogic(\n  elementKey: string,\n  trackerAdapter: SupplementTrackerPort,\n  stateAdapter: SupplementStatePort,\n  options: UseSupplementTrackerLogicOptions,\n): UseSupplementTrackerLogicReturn {\n  const {\n    initialSupplements,\n    initialSchedule,\n    initialSelectedDate,\n    lock: rawLock,\n  } = options;\n\n  const lock = rawLock ?? false;\n\n  // Local edits state (syncs to AI via Zustand)\n  const [editsState, setEditsState] = useElementState<LocalEditsState>(\n    elementKey,\n    { localEdits: {} },\n  );\n  const localEdits = editsState.localEdits;\n\n  // Selected date state\n  const [selectedDate] = useState<string>(\n    initialSelectedDate ?? trackerAdapter.getTodayDate(),\n  );\n\n  // Memoized supplements\n  const supplements = useMemo(\n    () => initialSupplements || [],\n    [initialSupplements],\n  );\n\n  // Memoized schedule\n  const schedule = useMemo(() => initialSchedule || [], [initialSchedule]);\n\n  // Get today's schedule\n  const todaySchedule = useMemo(() => {\n    return schedule.find((s) => s.date === selectedDate);\n  }, [schedule, selectedDate]);\n\n  // Merge doses with local edits\n  const displayDoses = useMemo(() => {\n    const doses = todaySchedule?.doses || [];\n    return stateAdapter.mergeEdits(doses, localEdits);\n  }, [stateAdapter, todaySchedule, localEdits]);\n\n  // Group by timing\n  const groupedByTiming = useMemo(() => {\n    return trackerAdapter.groupByTiming(supplements, displayDoses);\n  }, [trackerAdapter, supplements, displayDoses]);\n\n  // Calculate stats\n  const stats = useMemo(() => {\n    return trackerAdapter.calculateStats(supplements, displayDoses);\n  }, [trackerAdapter, supplements, displayDoses]);\n\n  // Format date for display\n  const formattedDate = useMemo(() => {\n    return trackerAdapter.formatDisplayDate(selectedDate);\n  }, [trackerAdapter, selectedDate]);\n\n  // Toggle dose taken\n  const handleToggle = useCallback(\n    (suppId: string, doseId?: string) => {\n      if (lock) return;\n      const key = doseId || `temp-${suppId}`;\n      const current = displayDoses.find((d) => d.id === key);\n      const isTaken = current?.taken ?? false;\n      setEditsState({\n        localEdits: stateAdapter.toggleDose(localEdits, key, isTaken),\n      });\n    },\n    [lock, displayDoses, stateAdapter, localEdits, setEditsState],\n  );\n\n  // Skip dose\n  const handleSkip = useCallback(\n    (suppId: string, doseId?: string) => {\n      if (lock) return;\n      const key = doseId || `temp-${suppId}`;\n      setEditsState({\n        localEdits: stateAdapter.skipDose(localEdits, key),\n      });\n    },\n    [lock, stateAdapter, localEdits, setEditsState],\n  );\n\n  return {\n    // State\n    selectedDate,\n    supplements,\n    displayDoses,\n    groupedByTiming,\n    stats,\n\n    // Derived\n    formattedDate,\n\n    // Actions\n    handleToggle,\n    handleSkip,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * Individual supplement/medication item\n */\nexport const supplementItemSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  name: z.string().describe(\"Supplement or medication name\"),\n  dosage: z.string().describe(\"Dosage amount (e.g., '500mg', '2 capsules')\"),\n  unit: z\n    .enum([\n      \"mg\",\n      \"g\",\n      \"mcg\",\n      \"IU\",\n      \"ml\",\n      \"capsules\",\n      \"tablets\",\n      \"drops\",\n      \"other\",\n    ])\n    .default(\"mg\"),\n  category: z\n    .enum([\n      \"vitamin\",\n      \"mineral\",\n      \"amino_acid\",\n      \"herb\",\n      \"probiotic\",\n      \"omega\",\n      \"protein\",\n      \"pre_workout\",\n      \"post_workout\",\n      \"medication\",\n      \"other\",\n    ])\n    .describe(\"Supplement category\"),\n  timing: z\n    .enum([\n      \"morning\",\n      \"pre_meal\",\n      \"with_meal\",\n      \"post_meal\",\n      \"pre_workout\",\n      \"post_workout\",\n      \"evening\",\n      \"bedtime\",\n    ])\n    .describe(\"When to take\"),\n  frequency: z\n    .enum([\"daily\", \"twice_daily\", \"weekly\", \"as_needed\", \"custom\"])\n    .default(\"daily\"),\n  withFood: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Should be taken with food\"),\n  notes: z.string().nullable().optional(),\n  brand: z.string().nullable().optional(),\n  stack: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Stack name if part of a supplement stack\"),\n});\n\nexport type SupplementItem = z.infer<typeof supplementItemSchema>;\n\n/**\n * Scheduled dose for tracking consumption\n */\nexport const scheduledDoseSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  supplementId: z.string().describe(\"Reference to supplement item\"),\n  scheduledTime: z.string().describe(\"Scheduled time in HH:mm format\"),\n  taken: z.boolean().default(false),\n  takenAt: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Actual time taken in ISO format\"),\n  skipped: z.boolean().nullable().optional(),\n  skipReason: z.string().nullable().optional(),\n});\n\nexport type ScheduledDose = z.infer<typeof scheduledDoseSchema>;\n\n/**\n * Daily supplement schedule\n */\nexport const dailySupplementScheduleSchema = z.object({\n  date: z.string().describe(\"Date in YYYY-MM-DD format\"),\n  doses: z.array(scheduledDoseSchema),\n  notes: z.string().nullable().optional(),\n});\n\nexport type DailySupplementSchedule = z.infer<\n  typeof dailySupplementScheduleSchema\n>;\n\n/**\n * SupplementTracker component props schema\n */\nexport const SupplementTrackerPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  supplements: z\n    .array(supplementItemSchema)\n    .describe(\"List of supplements/medications (REQUIRED)\"),\n  schedule: z\n    .array(dailySupplementScheduleSchema)\n    .nullable()\n    .optional()\n    .describe(\"Daily schedules with doses\"),\n  selectedDate: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Selected date in YYYY-MM-DD format\"),\n  view: z\n    .enum([\"daily\", \"weekly\", \"inventory\"])\n    .default(\"daily\")\n    .describe(\"View mode\"),\n  showStacks: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Group by supplement stacks\"),\n  lock: z.boolean().nullable().optional(),\n});\n\nexport type SupplementTrackerProps = z.infer<\n  typeof SupplementTrackerPropsSchema\n>;\n\n/**\n * SupplementTracker component definition for catalog registration\n */\nexport const SupplementTrackerDefinition = {\n  name: \"SupplementTracker\" as const,\n  props: SupplementTrackerPropsSchema,\n  description:\n    \"Ultra-powerful supplement and medication tracker with daily/weekly scheduling, timing optimization, and integration with meals and workouts.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport {\n  Calendar as CalendarIcon,\n  ChevronLeft,\n  ChevronRight,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { CalendarProps } from \"./schema\";\nimport {\n  EventCard,\n  DayCell,\n  DAYS_SHORT,\n  MONTHS,\n  CATEGORY_CONFIG,\n} from \"./components\";\nimport { getCalendarAdapter, getCalendarStateAdapter } from \"./adapters\";\nimport { useCalendarLogic } from \"./hooks\";\n\n/** Animation variants */\nconst containerVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1, transition: { staggerChildren: 0.03 } },\n};\n\nconst eventVariants = {\n  hidden: { opacity: 0, y: \"0.625rem\" },\n  visible: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: \"-0.625rem\" },\n};\n\nexport const Calendar = memo(function Calendar({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    view: initialView = \"month\",\n    selectedDate: initialSelectedDate,\n    events: initialEvents,\n    firstDayOfWeek = 1,\n    highlightToday = true,\n    lock: rawLock = false,\n  } = element.props as CalendarProps;\n\n  const lock = rawLock ?? false;\n\n  const calendarAdapter = useMemo(() => getCalendarAdapter(), []);\n  const stateAdapter = useMemo(() => getCalendarStateAdapter(), []);\n\n  const {\n    currentView,\n    selectedDate,\n    displayEvents,\n    calendarDays,\n    eventsByDate,\n    selectedDayEvents,\n    currentMonth,\n    currentYear,\n    todayStr,\n    selectedDateStr,\n    setCurrentView,\n    setSelectedDate,\n    navigateMonth,\n    goToToday,\n    handleToggleEvent,\n  } = useCalendarLogic(element.key, calendarAdapter, stateAdapter, {\n    initialDate: initialSelectedDate ?? undefined,\n    initialView,\n    initialEvents,\n    firstDayOfWeek,\n    lock,\n  });\n\n  useDomainAutoSave(\"calendar\", element.key, {\n    type: \"calendar\",\n    events: displayEvents,\n    selectedDate: selectedDateStr,\n    view: currentView,\n  });\n\n  const orderedDays = useMemo(() => {\n    const days = [...DAYS_SHORT];\n    const shifted = days.splice(0, firstDayOfWeek);\n    return [...days, ...shifted];\n  }, [firstDayOfWeek]);\n\n  return (\n    <div className=\"flex flex-col gap-3 sm:gap-4 w-full\">\n      {/* Header - stacks on mobile */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <CalendarIcon className=\"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500\" />\n          <h3 className=\"text-lg sm:text-xl font-bold tracking-tight text-foreground\">\n            {title || \"Calendar\"}\n          </h3>\n        </div>\n\n        <div className=\"flex items-center gap-2 justify-between sm:justify-end\">\n          {/* View Toggle */}\n          <div className=\"flex rounded-lg border border-white/10 overflow-hidden\">\n            {([\"month\", \"agenda\"] as const).map((v) => (\n              <button\n                key={v}\n                onClick={() => setCurrentView(v)}\n                className={cn(\n                  \"px-2.5 sm:px-3 py-1.5 text-[0.625rem] sm:text-xs font-bold uppercase tracking-wider transition-colors min-h-[2.25rem] touch-manipulation\",\n                  currentView === v\n                    ? \"bg-indigo-500/20 text-indigo-400\"\n                    : \"text-white/40 hover:text-white/60\",\n                )}\n              >\n                {v}\n              </button>\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => navigateMonth(-1)}\n              className=\"w-8 h-8 sm:w-8 sm:h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 touch-manipulation\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={goToToday}\n              className=\"px-2 sm:px-3 py-1.5 rounded-lg border border-white/10 text-[0.625rem] sm:text-xs font-bold text-white/60 hover:text-white hover:bg-white/5 min-h-[2rem] touch-manipulation\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateMonth(1)}\n              className=\"w-8 h-8 sm:w-8 sm:h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 touch-manipulation\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Month/Year Display */}\n      <div className=\"text-base sm:text-lg font-bold text-foreground\">\n        {MONTHS[currentMonth]} {currentYear}\n      </div>\n\n      {currentView === \"month\" ? (\n        /* Month View - responsive grid */\n        <div className=\"bg-zinc-900/50 border border-white/10 rounded-xl sm:rounded-2xl overflow-hidden\">\n          {/* Day Headers - abbreviated more on mobile */}\n          <div className=\"grid grid-cols-7 border-b border-white/10\">\n            {orderedDays.map((day) => (\n              <div\n                key={day}\n                className=\"py-1.5 sm:py-2 text-center text-[0.5625rem] sm:text-xs font-bold text-white/40 uppercase tracking-wider\"\n              >\n                <span className=\"sm:hidden\">{day.charAt(0)}</span>\n                <span className=\"hidden sm:inline\">{day}</span>\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar Grid */}\n          <motion.div\n            variants={containerVariants}\n            initial=\"hidden\"\n            animate=\"visible\"\n            className=\"grid grid-cols-7\"\n          >\n            {calendarDays.map((date, i) => {\n              const dateStr = date?.toISOString().split(\"T\")[0] || \"\";\n              const dayEvents = eventsByDate.get(dateStr) || [];\n              const isToday = highlightToday && dateStr === todayStr;\n              const isSelected = dateStr === selectedDateStr;\n\n              return (\n                <DayCell\n                  key={i}\n                  date={date}\n                  events={dayEvents}\n                  isToday={isToday}\n                  isSelected={isSelected}\n                  onClick={(d) => setSelectedDate(d)}\n                  onToggleEvent={handleToggleEvent}\n                  lock={lock}\n                  elementKey={element.key}\n                />\n              );\n            })}\n          </motion.div>\n        </div>\n      ) : (\n        /* Agenda View */\n        <div className=\"flex flex-col gap-2 sm:gap-3\">\n          {selectedDayEvents.length === 0 ? (\n            <EmptyState\n              icon={<CalendarIcon className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n              message=\"No events\"\n            />\n          ) : (\n            <AnimatePresence mode=\"popLayout\">\n              {selectedDayEvents.map((event) => (\n                <motion.div\n                  key={event.id}\n                  variants={eventVariants}\n                  initial=\"hidden\"\n                  animate=\"visible\"\n                  exit=\"exit\"\n                >\n                  <EventCard\n                    event={event}\n                    onToggle={handleToggleEvent}\n                    lock={lock}\n                    elementKey={element.key}\n                  />\n                </motion.div>\n              ))}\n            </AnimatePresence>\n          )}\n        </div>\n      )}\n\n      {/* Category Legend - scrollable on mobile */}\n      <div className=\"flex flex-wrap gap-2 sm:gap-3 overflow-x-auto pb-1\">\n        {Object.entries(CATEGORY_CONFIG)\n          .slice(0, 6)\n          .map(([key, config]) => (\n            <div\n              key={key}\n              className=\"flex items-center gap-1 sm:gap-1.5 text-[0.5625rem] sm:text-xs text-white/50 whitespace-nowrap\"\n            >\n              <div className={cn(\"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full\", config.color)} />\n              <span className=\"capitalize\">{key}</span>\n            </div>\n          ))}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Clock, MapPin } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport type { CalendarEvent } from \"../schema\";\nimport { getCategoryConfig, formatTime } from \"./utils\";\n\nexport const EventDot = memo(function EventDot({\n  event,\n}: {\n  event: CalendarEvent;\n}) {\n  const config = getCategoryConfig(event.category);\n  return (\n    <div\n      className={cn(\"w-1.5 h-1.5 rounded-full flex-shrink-0\", config.color)}\n      title={event.title}\n    />\n  );\n});\n\nexport const EventCard = memo(function EventCard({\n  event,\n  compact,\n  onToggle,\n  lock,\n  elementKey,\n}: {\n  event: CalendarEvent;\n  compact?: boolean;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n}) {\n  const config = getCategoryConfig(event.category);\n  const Icon = config.icon;\n\n  if (compact) {\n    return (\n      <div\n        className={cn(\n          \"text-[10px] px-1.5 py-0.5 rounded truncate cursor-pointer transition-opacity\",\n          config.color,\n          \"text-white font-medium\",\n          event.completed && \"opacity-50 line-through\",\n        )}\n        onClick={() => !lock && onToggle(event.id)}\n        title={event.title}\n      >\n        {event.title}\n      </div>\n    );\n  }\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={event.id}\n      className={cn(\n        \"p-3 rounded-xl border transition-all cursor-pointer group\",\n        event.completed\n          ? \"bg-zinc-800/50 border-zinc-700/50 opacity-60\"\n          : \"bg-zinc-900/60 border-white/10 hover:border-white/20\",\n      )}\n    >\n      <div\n        className=\"flex items-start gap-3\"\n        onClick={() => !lock && onToggle(event.id)}\n      >\n        <div\n          className={cn(\"w-1 h-full min-h-[40px] rounded-full\", config.color)}\n        />\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <Icon size={12} className=\"text-white/40\" />\n            <span\n              className={cn(\n                \"text-sm font-semibold text-white truncate\",\n                event.completed && \"line-through\",\n              )}\n            >\n              {event.title}\n            </span>\n            {event.priority === \"high\" && (\n              <span className=\"w-1.5 h-1.5 rounded-full bg-rose-500\" />\n            )}\n          </div>\n          <div className=\"flex items-center gap-3 mt-1 text-xs text-white/40\">\n            {!event.allDay && (\n              <span className=\"flex items-center gap-1\">\n                <Clock size={10} />\n                {formatTime(event.start)}\n                {event.end && ` - ${formatTime(event.end)}`}\n              </span>\n            )}\n            {event.allDay && <span>All day</span>}\n            {event.location && (\n              <span className=\"flex items-center gap-1 truncate\">\n                <MapPin size={10} />\n                {event.location}\n              </span>\n            )}\n          </div>\n          {event.description && (\n            <div className=\"text-xs text-white/30 mt-1 line-clamp-2\">\n              {event.description}\n            </div>\n          )}\n        </div>\n      </div>\n    </SelectableItem>\n  );\n});\n","import {\n  Calendar as CalendarIcon,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Briefcase,\n  Heart,\n  Users,\n  Plane,\n  Bell,\n  MoreHorizontal,\n} from \"lucide-react\";\n\n// --- Types ---\n\nexport type CategoryConfig = { icon: typeof CalendarIcon; color: string };\n\n// --- Constants ---\n\nexport const DAYS_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\nexport const MONTHS = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nexport const CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  workout: { icon: Dumbbell, color: \"bg-emerald-500\" },\n  meal: { icon: Utensils, color: \"bg-amber-500\" },\n  supplement: { icon: Pill, color: \"bg-violet-500\" },\n  work: { icon: Briefcase, color: \"bg-blue-500\" },\n  personal: { icon: Heart, color: \"bg-pink-500\" },\n  health: { icon: Heart, color: \"bg-red-500\" },\n  social: { icon: Users, color: \"bg-cyan-500\" },\n  travel: { icon: Plane, color: \"bg-indigo-500\" },\n  reminder: { icon: Bell, color: \"bg-orange-500\" },\n  other: { icon: MoreHorizontal, color: \"bg-zinc-500\" },\n};\n\nexport const DEFAULT_CATEGORY_CONFIG: CategoryConfig = {\n  icon: MoreHorizontal,\n  color: \"bg-zinc-500\",\n};\n\n// --- Helpers ---\n\nexport function getCategoryConfig(\n  category: string | null | undefined,\n): CategoryConfig {\n  return CATEGORY_CONFIG[category ?? \"other\"] ?? DEFAULT_CATEGORY_CONFIG;\n}\n\nexport function getDaysInMonth(year: number, month: number): Date[] {\n  const days: Date[] = [];\n  const date = new Date(year, month, 1);\n  while (date.getMonth() === month) {\n    days.push(new Date(date));\n    date.setDate(date.getDate() + 1);\n  }\n  return days;\n}\n\nexport function getCalendarDays(\n  year: number,\n  month: number,\n  firstDayOfWeek: number,\n): (Date | null)[] {\n  const days = getDaysInMonth(year, month);\n  const firstDate = days[0];\n  if (!firstDate) return [];\n  const firstDay = firstDate.getDay();\n  const leadingDays = (firstDay - firstDayOfWeek + 7) % 7;\n\n  const calendar: (Date | null)[] = [];\n  for (let i = 0; i < leadingDays; i++) {\n    calendar.push(null);\n  }\n  calendar.push(...days);\n\n  while (calendar.length % 7 !== 0) {\n    calendar.push(null);\n  }\n\n  return calendar;\n}\n\nexport function isSameDay(d1: Date, d2: Date): boolean {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n}\n\nexport function formatTime(isoString: string): string {\n  const date = new Date(isoString);\n  return date.toLocaleTimeString(undefined, {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { CalendarEvent } from \"../schema\";\nimport { EventCard } from \"./event-card\";\n\nexport const DayCell = memo(function DayCell({\n  date,\n  events,\n  isToday,\n  isSelected,\n  onClick,\n  onToggleEvent,\n  lock,\n  elementKey,\n}: {\n  date: Date | null;\n  events: CalendarEvent[];\n  isToday: boolean;\n  isSelected: boolean;\n  onClick: (date: Date) => void;\n  onToggleEvent: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n}) {\n  if (!date) {\n    return <div className=\"min-h-[100px] bg-zinc-950/30\" />;\n  }\n\n  const maxVisibleEvents = 3;\n  const visibleEvents = events.slice(0, maxVisibleEvents);\n  const hiddenCount = events.length - maxVisibleEvents;\n\n  return (\n    <div\n      className={cn(\n        \"min-h-[100px] p-1.5 border-b border-r border-white/5 cursor-pointer transition-colors\",\n        isSelected && \"bg-indigo-500/10\",\n        isToday && \"bg-emerald-500/5\",\n      )}\n      onClick={() => onClick(date)}\n    >\n      <div\n        className={cn(\n          \"w-7 h-7 rounded-full flex items-center justify-center text-sm font-medium mb-1\",\n          isToday && \"bg-emerald-500 text-black font-bold\",\n          isSelected && !isToday && \"bg-indigo-500/30 text-indigo-300\",\n          !isToday && !isSelected && \"text-white/60 hover:bg-white/5\",\n        )}\n      >\n        {date.getDate()}\n      </div>\n      <div className=\"flex flex-col gap-0.5\">\n        {visibleEvents.map((event) => (\n          <EventCard\n            key={event.id}\n            event={event}\n            compact\n            onToggle={onToggleEvent}\n            lock={lock}\n            elementKey={elementKey}\n          />\n        ))}\n        {hiddenCount > 0 && (\n          <div className=\"text-[10px] text-white/30 pl-1.5\">\n            +{hiddenCount} more\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n","/**\n * Calendar Adapter - Implementation of CalendarPort\n * Pure functions for calendar calculations\n */\n\nimport type { CalendarPort, CalendarStatePort } from \"../ports\";\nimport type { CalendarEvent } from \"../schema\";\n\n/**\n * Create a calendar adapter with date operations\n */\nexport function createCalendarAdapter(): CalendarPort {\n  return {\n    getDaysInMonth(year: number, month: number): Date[] {\n      const days: Date[] = [];\n      const date = new Date(year, month, 1);\n      while (date.getMonth() === month) {\n        days.push(new Date(date));\n        date.setDate(date.getDate() + 1);\n      }\n      return days;\n    },\n\n    getCalendarDays(\n      year: number,\n      month: number,\n      firstDayOfWeek: number,\n    ): (Date | null)[] {\n      const days = this.getDaysInMonth(year, month);\n      const firstDate = days[0];\n      if (!firstDate) return [];\n\n      const firstDay = firstDate.getDay();\n      const leadingDays = (firstDay - firstDayOfWeek + 7) % 7;\n\n      const calendar: (Date | null)[] = [];\n      for (let i = 0; i < leadingDays; i++) {\n        calendar.push(null);\n      }\n      calendar.push(...days);\n\n      while (calendar.length % 7 !== 0) {\n        calendar.push(null);\n      }\n\n      return calendar;\n    },\n\n    isSameDay(d1: Date, d2: Date): boolean {\n      return (\n        d1.getFullYear() === d2.getFullYear() &&\n        d1.getMonth() === d2.getMonth() &&\n        d1.getDate() === d2.getDate()\n      );\n    },\n\n    formatTime(isoString: string): string {\n      const date = new Date(isoString);\n      return date.toLocaleTimeString(undefined, {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    },\n\n    groupEventsByDate(events: CalendarEvent[]): Map<string, CalendarEvent[]> {\n      const map = new Map<string, CalendarEvent[]>();\n      for (const event of events) {\n        const dateKey = event.start.split(\"T\")[0]!;\n        if (!map.has(dateKey)) map.set(dateKey, []);\n        map.get(dateKey)!.push(event);\n      }\n      return map;\n    },\n\n    toDateString(date: Date): string {\n      return date.toISOString().split(\"T\")[0]!;\n    },\n  };\n}\n\n/**\n * Create a calendar state adapter for state management\n */\nexport function createCalendarStateAdapter(): CalendarStatePort {\n  return {\n    navigateMonth(current: Date, direction: -1 | 1): Date {\n      const next = new Date(current);\n      next.setMonth(next.getMonth() + direction);\n      return next;\n    },\n\n    mergeEdits(\n      events: CalendarEvent[],\n      edits: Record<string, Partial<CalendarEvent>>,\n    ): CalendarEvent[] {\n      return events.map((event) => {\n        const edit = edits[event.id];\n        return edit ? { ...event, ...edit } : event;\n      });\n    },\n\n    toggleEventCompletion(\n      edits: Record<string, Partial<CalendarEvent>>,\n      eventId: string,\n      currentCompleted: boolean,\n    ): Record<string, Partial<CalendarEvent>> {\n      return {\n        ...edits,\n        [eventId]: { completed: !currentCompleted },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet calendarAdapterInstance: CalendarPort | null = null;\nlet stateAdapterInstance: CalendarStatePort | null = null;\n\nexport function getCalendarAdapter(): CalendarPort {\n  if (!calendarAdapterInstance) {\n    calendarAdapterInstance = createCalendarAdapter();\n  }\n  return calendarAdapterInstance;\n}\n\nexport function getCalendarStateAdapter(): CalendarStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createCalendarStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useCalendarLogic - Custom hook for calendar state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { CalendarPort, CalendarStatePort } from \"../ports\";\nimport type { CalendarEvent, CalendarView } from \"../schema\";\n\nexport interface UseCalendarLogicOptions {\n  initialDate?: string;\n  initialView?: CalendarView;\n  initialEvents?: CalendarEvent[];\n  firstDayOfWeek?: number;\n  lock?: boolean;\n}\n\nexport interface UseCalendarLogicReturn {\n  // State\n  currentView: CalendarView;\n  selectedDate: Date;\n  displayEvents: CalendarEvent[];\n  calendarDays: (Date | null)[];\n  eventsByDate: Map<string, CalendarEvent[]>;\n  selectedDayEvents: CalendarEvent[];\n\n  // Derived\n  currentMonth: number;\n  currentYear: number;\n  todayStr: string;\n  selectedDateStr: string;\n\n  // Actions\n  setCurrentView: (view: CalendarView) => void;\n  setSelectedDate: (date: Date) => void;\n  navigateMonth: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleEvent: (eventId: string) => void;\n}\n\nexport function useCalendarLogic(\n  elementKey: string,\n  calendarAdapter: CalendarPort,\n  stateAdapter: CalendarStatePort,\n  options: UseCalendarLogicOptions,\n): UseCalendarLogicReturn {\n  const {\n    initialDate,\n    initialView = \"month\",\n    initialEvents = [],\n    firstDayOfWeek = 1,\n    lock = false,\n  } = options;\n\n  // Local edits state (syncs to AI via Zustand)\n  const [{ localEdits }, updateEdits] = useElementState(elementKey, {\n    localEdits: {} as Record<string, Partial<CalendarEvent>>,\n  });\n\n  // View state\n  const [currentView, setCurrentView] = useState<CalendarView>(initialView);\n\n  // Selected date state\n  const [selectedDate, setSelectedDate] = useState(() => {\n    if (initialDate) return new Date(initialDate);\n    return new Date();\n  });\n\n  // Derived: merge events with local edits\n  const displayEvents = useMemo(\n    () => stateAdapter.mergeEdits(initialEvents, localEdits),\n    [stateAdapter, initialEvents, localEdits],\n  );\n\n  // Derived: current month/year\n  const currentMonth = selectedDate.getMonth();\n  const currentYear = selectedDate.getFullYear();\n\n  // Derived: calendar grid\n  const calendarDays = useMemo(\n    () =>\n      calendarAdapter.getCalendarDays(\n        currentYear,\n        currentMonth,\n        firstDayOfWeek,\n      ),\n    [calendarAdapter, currentYear, currentMonth, firstDayOfWeek],\n  );\n\n  // Derived: events grouped by date\n  const eventsByDate = useMemo(\n    () => calendarAdapter.groupEventsByDate(displayEvents),\n    [calendarAdapter, displayEvents],\n  );\n\n  // Derived: date strings\n  const todayStr = calendarAdapter.toDateString(new Date());\n  const selectedDateStr = calendarAdapter.toDateString(selectedDate);\n\n  // Derived: events for selected day\n  const selectedDayEvents = useMemo(\n    () => eventsByDate.get(selectedDateStr) || [],\n    [eventsByDate, selectedDateStr],\n  );\n\n  // Actions\n  const navigateMonth = useCallback(\n    (direction: -1 | 1) => {\n      setSelectedDate((prev) => stateAdapter.navigateMonth(prev, direction));\n    },\n    [stateAdapter],\n  );\n\n  const goToToday = useCallback(() => {\n    setSelectedDate(new Date());\n  }, []);\n\n  const handleToggleEvent = useCallback(\n    (eventId: string) => {\n      if (lock) return;\n\n      const event = displayEvents.find((e) => e.id === eventId);\n      if (!event) return;\n\n      updateEdits({\n        localEdits: stateAdapter.toggleEventCompletion(\n          localEdits,\n          eventId,\n          event.completed ?? false,\n        ),\n      });\n    },\n    [lock, displayEvents, stateAdapter, localEdits, updateEdits],\n  );\n\n  return {\n    // State\n    currentView,\n    selectedDate,\n    displayEvents,\n    calendarDays,\n    eventsByDate,\n    selectedDayEvents,\n\n    // Derived\n    currentMonth,\n    currentYear,\n    todayStr,\n    selectedDateStr,\n\n    // Actions\n    setCurrentView,\n    setSelectedDate,\n    navigateMonth,\n    goToToday,\n    handleToggleEvent,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * Calendar event schema\n */\nexport const calendarEventSchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  title: z.string().describe(\"Event title\"),\n  description: z.string().nullable().optional(),\n  start: z.string().describe(\"Start datetime in ISO 8601 format\"),\n  end: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"End datetime in ISO 8601 format\"),\n  allDay: z.boolean().nullable().optional(),\n  location: z.string().nullable().optional(),\n  color: z.string().nullable().optional().describe(\"Event color (hex)\"),\n  category: z\n    .enum([\n      \"workout\",\n      \"meal\",\n      \"supplement\",\n      \"work\",\n      \"personal\",\n      \"health\",\n      \"social\",\n      \"travel\",\n      \"reminder\",\n      \"other\",\n    ])\n    .nullable()\n    .optional(),\n  recurring: z\n    .object({\n      pattern: z.enum([\"daily\", \"weekly\", \"monthly\", \"yearly\"]),\n      interval: z.number().optional().describe(\"Repeat every N days/weeks/etc\"),\n      endDate: z.string().nullable().optional(),\n      daysOfWeek: z.array(z.number().min(0).max(6)).nullable().optional(),\n    })\n    .nullable()\n    .optional(),\n  reminders: z\n    .array(\n      z.object({\n        type: z.enum([\"notification\", \"email\"]),\n        minutes: z.number().describe(\"Minutes before event\"),\n      }),\n    )\n    .nullable()\n    .optional(),\n  linkedEntityId: z.string().nullable().optional(),\n  linkedEntityType: z\n    .enum([\"workout\", \"meal\", \"supplement\", \"routine\", \"diary\", \"task\"])\n    .nullable()\n    .optional(),\n  status: z.enum([\"confirmed\", \"tentative\", \"cancelled\"]).nullable().optional(),\n  completed: z.boolean().nullable().optional(),\n  priority: z.enum([\"high\", \"medium\", \"low\"]).nullable().optional(),\n  tags: z.array(z.string()).nullable().optional(),\n  attendees: z\n    .array(\n      z.object({\n        name: z.string(),\n        email: z.string().nullable().optional(),\n        status: z\n          .enum([\"accepted\", \"declined\", \"tentative\", \"pending\"])\n          .nullable()\n          .optional(),\n      }),\n    )\n    .nullable()\n    .optional(),\n  notes: z.string().nullable().optional(),\n});\n\nexport type CalendarEvent = z.infer<typeof calendarEventSchema>;\n\n// View type for calendar display modes\nexport type CalendarView = \"month\" | \"week\" | \"day\" | \"agenda\" | \"year\";\n\n/**\n * Calendar component props schema\n */\nexport const CalendarPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  view: z\n    .enum([\"month\", \"week\", \"day\", \"agenda\", \"year\"])\n    .default(\"month\")\n    .describe(\"Calendar view mode\"),\n  selectedDate: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Selected date in YYYY-MM-DD format\"),\n  events: z.array(calendarEventSchema).describe(\"Array of calendar events\"),\n  showWeekNumbers: z.boolean().nullable().optional(),\n  firstDayOfWeek: z\n    .number()\n    .min(0)\n    .max(6)\n    .default(1)\n    .describe(\"0=Sunday, 1=Monday\"),\n  highlightToday: z.boolean().default(true),\n  showMiniCalendar: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Show mini calendar sidebar\"),\n  showCategories: z\n    .array(\n      z.enum([\n        \"workout\",\n        \"meal\",\n        \"supplement\",\n        \"work\",\n        \"personal\",\n        \"health\",\n        \"social\",\n        \"travel\",\n        \"reminder\",\n        \"other\",\n      ]),\n    )\n    .nullable()\n    .optional()\n    .describe(\"Filter visible categories\"),\n  enableQuickAdd: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Enable quick event creation\"),\n  workingHours: z\n    .object({\n      start: z.string().default(\"09:00\"),\n      end: z.string().default(\"17:00\"),\n    })\n    .nullable()\n    .optional(),\n  lock: z.boolean().nullable().optional(),\n});\n\nexport type CalendarProps = z.infer<typeof CalendarPropsSchema>;\n\n/**\n * Calendar component definition for catalog registration\n */\nexport const CalendarDefinition = {\n  name: \"Calendar\" as const,\n  props: CalendarPropsSchema,\n  description:\n    \"Ultra-powerful calendar component with month/week/day/agenda views, event management, recurring events, and integration with workouts, meals, supplements, and diary entries.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { BookOpen, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { DiaryProps } from \"./schema\";\nimport { DiaryEntryCard } from \"./components\";\nimport { getDiaryAdapter, getDiaryStateAdapter } from \"./adapters\";\nimport { useDiaryLogic } from \"./hooks\";\n\nexport const Diary = memo(function Diary({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    entries: initialEntries,\n    selectedDate: initialSelectedDate,\n    view = \"single\",\n    showMoodTracker = true,\n    showEnergyTracker = true,\n    showGratitude = true,\n    showLinkedEntities = true,\n    lock: rawLock = false,\n  } = element.props as DiaryProps;\n\n  const lock = rawLock ?? false;\n\n  // Get adapters\n  const diaryAdapter = useMemo(() => getDiaryAdapter(), []);\n  const stateAdapter = useMemo(() => getDiaryStateAdapter(), []);\n\n  // Use custom hook for all logic\n  const {\n    selectedDate,\n    displayEntries,\n    selectedEntry,\n    sortedEntries,\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleGoal,\n  } = useDiaryLogic(element.key, diaryAdapter, stateAdapter, {\n    initialEntries,\n    initialSelectedDate,\n    view,\n    lock,\n  });\n\n  // AutoSave\n  useDomainAutoSave(\"diary\", element.key, {\n    type: \"diary\",\n    entries: displayEntries,\n    selectedDate,\n  });\n\n  return (\n    <div className=\"flex flex-col gap-4 sm:gap-5 lg:gap-6 w-full\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n        <h3 className=\"text-base sm:text-lg lg:text-xl font-bold tracking-tight flex items-center gap-2 sm:gap-3\">\n          <BookOpen className=\"w-4 h-4 sm:w-5 sm:h-5 text-indigo-500\" />\n          {title || \"Diary\"}\n        </h3>\n\n        {view === \"single\" && (\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => navigateDate(-1)}\n              className=\"w-8 h-8 sm:w-9 sm:h-9 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 touch-manipulation\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={goToToday}\n              className=\"px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg border border-white/10 text-[0.625rem] sm:text-xs font-bold text-white/60 hover:text-white hover:bg-white/5 touch-manipulation\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateDate(1)}\n              className=\"w-8 h-8 sm:w-9 sm:h-9 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 touch-manipulation\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        {view === \"single\" ? (\n          selectedEntry ? (\n            <motion.div\n              key={selectedEntry.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n            >\n              <DiaryEntryCard\n                entry={selectedEntry}\n                onToggleGoal={handleToggleGoal}\n                lock={lock}\n                elementKey={element.key}\n                showMoodTracker={showMoodTracker}\n                showEnergyTracker={showEnergyTracker}\n                showGratitude={showGratitude}\n                showLinkedEntities={showLinkedEntities}\n              />\n            </motion.div>\n          ) : (\n            <EmptyState\n              icon={<BookOpen className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n              message=\"No entry for this day\"\n            />\n          )\n        ) : (\n          <div className=\"flex flex-col gap-2 sm:gap-3\">\n            {sortedEntries.length === 0 ? (\n              <EmptyState\n                icon={<BookOpen className=\"w-8 h-8 sm:w-10 sm:h-10\" />}\n                message=\"No diary entries\"\n              />\n            ) : (\n              sortedEntries.map((entry) => (\n                <motion.div\n                  key={entry.id}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                >\n                  <DiaryEntryCard\n                    entry={entry}\n                    onToggleGoal={handleToggleGoal}\n                    lock={lock}\n                    elementKey={element.key}\n                    compact={view === \"timeline\"}\n                    showMoodTracker={showMoodTracker}\n                    showEnergyTracker={showEnergyTracker}\n                    showGratitude={showGratitude}\n                    showLinkedEntities={showLinkedEntities}\n                  />\n                </motion.div>\n              ))\n            )}\n          </div>\n        )}\n      </AnimatePresence>\n\n      {children}\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { Heart, Star, Target, Link, Tag } from \"lucide-react\";\nimport type { DiaryEntry } from \"../schema\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport {\n  MoodBadge,\n  EnergyBar,\n  SleepInfo,\n  GoalItem,\n  LinkedEntityBadge,\n} from \"./sub-components\";\nimport { formatDate, formatShortDate } from \"./utils\";\n\nexport const DiaryEntryCard = memo(function DiaryEntryCard({\n  entry,\n  onToggleGoal,\n  lock,\n  elementKey,\n  compact,\n  showMoodTracker,\n  showEnergyTracker,\n  showGratitude,\n  showLinkedEntities,\n}: {\n  entry: DiaryEntry;\n  onToggleGoal: (entryId: string, goalId: string) => void;\n  lock: boolean;\n  elementKey: string;\n  compact?: boolean;\n  showMoodTracker: boolean;\n  showEnergyTracker: boolean;\n  showGratitude: boolean;\n  showLinkedEntities: boolean;\n}) {\n  if (compact) {\n    return (\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={entry.id}\n        className=\"p-3 rounded-xl border border-white/10 bg-zinc-900/60 hover:border-white/20 transition-all cursor-pointer\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"text-sm font-mono text-white/40\">\n              {formatShortDate(entry.date)}\n            </div>\n            {entry.mood && <MoodBadge mood={entry.mood} />}\n          </div>\n          {entry.title && (\n            <div className=\"text-sm font-medium text-white truncate\">\n              {entry.title}\n            </div>\n          )}\n        </div>\n      </SelectableItem>\n    );\n  }\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={entry.id}\n      className=\"p-5 rounded-2xl border border-white/10 bg-zinc-900/60\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <div className=\"text-xs font-mono text-white/40 mb-1\">\n            {formatDate(entry.date)}\n          </div>\n          {entry.title && (\n            <h4 className=\"text-lg font-bold text-white\">{entry.title}</h4>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {entry.mood && showMoodTracker && <MoodBadge mood={entry.mood} />}\n          {entry.sleep && <SleepInfo sleep={entry.sleep} />}\n        </div>\n      </div>\n\n      {/* Energy */}\n      {entry.energy && showEnergyTracker && (\n        <div className=\"mb-4\">\n          <EnergyBar level={entry.energy} />\n        </div>\n      )}\n\n      {/* Content */}\n      {entry.content && (\n        <div className=\"prose prose-invert prose-sm max-w-none mb-4 text-white/80\">\n          {entry.content}\n        </div>\n      )}\n\n      <PerforatedDivider className=\"my-4\" />\n\n      {/* Gratitude */}\n      {showGratitude && entry.gratitude && entry.gratitude.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Heart size={14} className=\"text-rose-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Gratitude\n            </span>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {entry.gratitude.map((item, i) => (\n              <div\n                key={i}\n                className=\"px-2 py-1 rounded-lg bg-rose-500/10 border border-rose-500/20 text-xs text-rose-300\"\n              >\n                {item}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Highlights */}\n      {entry.highlights && entry.highlights.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Star size={14} className=\"text-amber-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Highlights\n            </span>\n          </div>\n          <ul className=\"space-y-1\">\n            {entry.highlights.map((item, i) => (\n              <li\n                key={i}\n                className=\"text-sm text-white/70 flex items-start gap-2\"\n              >\n                <span className=\"text-amber-400\">*</span>\n                {item}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Goals */}\n      {entry.goals && entry.goals.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Target size={14} className=\"text-emerald-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Daily Goals\n            </span>\n          </div>\n          <div className=\"space-y-1\">\n            {entry.goals.map((goal) => (\n              <GoalItem\n                key={goal.id}\n                goal={goal}\n                onToggle={(goalId) => onToggleGoal(entry.id, goalId)}\n                lock={lock}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Linked Entities */}\n      {showLinkedEntities &&\n        entry.linkedEntities &&\n        entry.linkedEntities.length > 0 && (\n          <div className=\"mb-4\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <Link size={14} className=\"text-indigo-400\" />\n              <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n                Related\n              </span>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {entry.linkedEntities.map((entity, i) => (\n                <LinkedEntityBadge key={i} entity={entity} />\n              ))}\n            </div>\n          </div>\n        )}\n\n      {/* Tags */}\n      {entry.tags && entry.tags.length > 0 && (\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <Tag size={12} className=\"text-white/30\" />\n          {entry.tags.map((tag, i) => (\n            <span key={i} className=\"text-xs text-white/40\">\n              #{tag}\n            </span>\n          ))}\n        </div>\n      )}\n    </SelectableItem>\n  );\n});\n","import { memo } from \"react\";\nimport { Zap, Moon, Check, Link } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { getMoodConfig, ENTITY_ICONS } from \"./utils\";\n\nexport const MoodBadge = memo(function MoodBadge({ mood }: { mood: string }) {\n  const config = getMoodConfig(mood);\n  const Icon = config.icon;\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-lg\",\n        config.color,\n      )}\n    >\n      <Icon size={14} />\n      <span className=\"text-xs font-bold\">{config.label}</span>\n    </div>\n  );\n});\n\nexport const EnergyBar = memo(function EnergyBar({ level }: { level: number }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Zap size={14} className=\"text-amber-400\" />\n      <div className=\"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden\">\n        <div\n          className=\"h-full bg-gradient-to-r from-amber-500 to-emerald-500 rounded-full transition-all\"\n          style={{ width: `${level * 10}%` }}\n        />\n      </div>\n      <span className=\"text-xs font-mono text-white/40\">{level}/10</span>\n    </div>\n  );\n});\n\nexport const SleepInfo = memo(function SleepInfo({\n  sleep,\n}: {\n  sleep: { hours?: number | null; quality?: string | null };\n}) {\n  return (\n    <div className=\"flex items-center gap-2 text-xs text-white/50\">\n      <Moon size={12} className=\"text-indigo-400\" />\n      {sleep.hours && <span>{sleep.hours}h</span>}\n      {sleep.quality && (\n        <span\n          className={cn(\n            \"px-1.5 py-0.5 rounded text-[10px] font-bold\",\n            sleep.quality === \"great\" && \"bg-emerald-500/20 text-emerald-400\",\n            sleep.quality === \"good\" && \"bg-green-500/20 text-green-400\",\n            sleep.quality === \"fair\" && \"bg-amber-500/20 text-amber-400\",\n            sleep.quality === \"poor\" && \"bg-rose-500/20 text-rose-400\",\n          )}\n        >\n          {sleep.quality}\n        </span>\n      )}\n    </div>\n  );\n});\n\nexport const GoalItem = memo(function GoalItem({\n  goal,\n  onToggle,\n  lock,\n}: {\n  goal: { id: string; text: string; completed?: boolean | null };\n  onToggle: (id: string) => void;\n  lock: boolean;\n}) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-2 p-2 rounded-lg transition-colors cursor-pointer\",\n        goal.completed ? \"bg-emerald-500/10\" : \"bg-white/5 hover:bg-white/10\",\n      )}\n      onClick={() => !lock && onToggle(goal.id)}\n    >\n      <div\n        className={cn(\n          \"w-4 h-4 rounded border flex items-center justify-center flex-shrink-0\",\n          goal.completed\n            ? \"bg-emerald-500 border-emerald-500\"\n            : \"border-white/20\",\n        )}\n      >\n        {goal.completed && <Check size={10} className=\"text-black\" />}\n      </div>\n      <span\n        className={cn(\n          \"text-sm\",\n          goal.completed && \"line-through text-white/40\",\n        )}\n      >\n        {goal.text}\n      </span>\n    </div>\n  );\n});\n\nexport const LinkedEntityBadge = memo(function LinkedEntityBadge({\n  entity,\n}: {\n  entity: { type: string; id: string; label?: string | null };\n}) {\n  const Icon = ENTITY_ICONS[entity.type] || Link;\n  return (\n    <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-white/5 border border-white/10\">\n      <Icon size={12} className=\"text-white/40\" />\n      <span className=\"text-xs text-white/60\">\n        {entity.label || entity.type}\n      </span>\n    </div>\n  );\n});\n","import {\n  Smile,\n  Meh,\n  Frown,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Calendar,\n  Link,\n} from \"lucide-react\";\n\nexport type MoodConfig = { icon: typeof Smile; color: string; label: string };\n\nexport const DEFAULT_MOOD_CONFIG: MoodConfig = {\n  icon: Meh,\n  color: \"text-zinc-400 bg-zinc-500/20\",\n  label: \"Unknown\",\n};\n\nexport const MOOD_CONFIG: Record<string, MoodConfig> = {\n  great: {\n    icon: Smile,\n    color: \"text-emerald-400 bg-emerald-500/20\",\n    label: \"Great\",\n  },\n  good: { icon: Smile, color: \"text-green-400 bg-green-500/20\", label: \"Good\" },\n  neutral: {\n    icon: Meh,\n    color: \"text-amber-400 bg-amber-500/20\",\n    label: \"Neutral\",\n  },\n  bad: { icon: Frown, color: \"text-orange-400 bg-orange-500/20\", label: \"Bad\" },\n  terrible: {\n    icon: Frown,\n    color: \"text-rose-400 bg-rose-500/20\",\n    label: \"Terrible\",\n  },\n};\n\nexport function getMoodConfig(mood: string | null | undefined): MoodConfig {\n  return MOOD_CONFIG[mood ?? \"neutral\"] ?? DEFAULT_MOOD_CONFIG;\n}\n\nexport const ENTITY_ICONS: Record<string, typeof Dumbbell> = {\n  workout: Dumbbell,\n  meal: Utensils,\n  supplement: Pill,\n  calendar_event: Calendar,\n  routine: Calendar,\n};\n\nexport function formatDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n}\n\nexport function formatShortDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, {\n    month: \"short\",\n    day: \"numeric\",\n  });\n}\n","/**\n * Diary Adapter - Implementation of DiaryPort\n * Pure functions for diary operations\n */\n\nimport type { DiaryPort, DiaryStatePort } from \"../ports\";\nimport type { DiaryEntry } from \"../schema\";\n\n/**\n * Create a diary adapter with date operations\n */\nexport function createDiaryAdapter(): DiaryPort {\n  return {\n    getTodayString(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n\n    parseDate(dateStr: string): Date {\n      return new Date(dateStr);\n    },\n\n    navigateDate(current: string, direction: -1 | 1): string {\n      const date = new Date(current);\n      date.setDate(date.getDate() + direction);\n      return date.toISOString().split(\"T\")[0]!;\n    },\n\n    sortEntriesByDate(entries: DiaryEntry[]): DiaryEntry[] {\n      return [...entries].sort(\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),\n      );\n    },\n\n    findEntryByDate(\n      entries: DiaryEntry[],\n      date: string,\n    ): DiaryEntry | undefined {\n      return entries.find((e) => e.date === date);\n    },\n\n    formatDisplayDate(dateStr: string): string {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(undefined, {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      });\n    },\n  };\n}\n\n/**\n * Create a diary state adapter for state management\n */\nexport function createDiaryStateAdapter(): DiaryStatePort {\n  return {\n    mergeEdits(\n      entries: DiaryEntry[],\n      edits: Record<string, Partial<DiaryEntry>>,\n    ): DiaryEntry[] {\n      return entries.map((entry) => {\n        const edit = edits[entry.id];\n        return edit ? { ...entry, ...edit } : entry;\n      });\n    },\n\n    toggleGoal(\n      edits: Record<string, Partial<DiaryEntry>>,\n      entry: DiaryEntry,\n      goalId: string,\n    ): Record<string, Partial<DiaryEntry>> {\n      if (!entry.goals) return edits;\n\n      const updatedGoals = entry.goals.map((g) =>\n        g.id === goalId ? { ...g, completed: !g.completed } : g,\n      );\n\n      return {\n        ...edits,\n        [entry.id]: { goals: updatedGoals },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet diaryAdapterInstance: DiaryPort | null = null;\nlet stateAdapterInstance: DiaryStatePort | null = null;\n\nexport function getDiaryAdapter(): DiaryPort {\n  if (!diaryAdapterInstance) {\n    diaryAdapterInstance = createDiaryAdapter();\n  }\n  return diaryAdapterInstance;\n}\n\nexport function getDiaryStateAdapter(): DiaryStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createDiaryStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useDiaryLogic - Custom hook for diary state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useElementState } from \"@onegenui/react\";\nimport type { DiaryPort, DiaryStatePort } from \"../ports\";\nimport type { DiaryEntry, DiaryProps } from \"../schema\";\n\ninterface LocalEditsState extends Record<string, unknown> {\n  localEdits: Record<string, Partial<DiaryEntry>>;\n}\n\nexport interface UseDiaryLogicOptions {\n  initialEntries?: DiaryEntry[];\n  initialSelectedDate?: string | null;\n  view?: DiaryProps[\"view\"];\n  lock?: boolean;\n}\n\nexport interface UseDiaryLogicReturn {\n  // State\n  selectedDate: string;\n  displayEntries: DiaryEntry[];\n  selectedEntry: DiaryEntry | undefined;\n  sortedEntries: DiaryEntry[];\n\n  // Actions\n  setSelectedDate: (date: string) => void;\n  navigateDate: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleGoal: (entryId: string, goalId: string) => void;\n}\n\nexport function useDiaryLogic(\n  elementKey: string,\n  diaryAdapter: DiaryPort,\n  stateAdapter: DiaryStatePort,\n  options: UseDiaryLogicOptions,\n): UseDiaryLogicReturn {\n  const { initialEntries = [], initialSelectedDate, lock = false } = options;\n\n  // Local edits state (syncs to AI via Zustand)\n  const [editsState, setEditsState] = useElementState<LocalEditsState>(\n    elementKey,\n    { localEdits: {} },\n  );\n  const localEdits = editsState.localEdits;\n\n  // Selected date state\n  const [selectedDate, setSelectedDate] = useState<string>(\n    initialSelectedDate ?? diaryAdapter.getTodayString(),\n  );\n\n  // Derived: merge entries with local edits\n  const displayEntries = useMemo(\n    () => stateAdapter.mergeEdits(initialEntries, localEdits),\n    [stateAdapter, initialEntries, localEdits],\n  );\n\n  // Derived: find selected entry\n  const selectedEntry = useMemo(\n    () => diaryAdapter.findEntryByDate(displayEntries, selectedDate),\n    [diaryAdapter, displayEntries, selectedDate],\n  );\n\n  // Derived: sorted entries for timeline view\n  const sortedEntries = useMemo(\n    () => diaryAdapter.sortEntriesByDate(displayEntries),\n    [diaryAdapter, displayEntries],\n  );\n\n  // Actions\n  const navigateDate = useCallback(\n    (direction: -1 | 1) => {\n      setSelectedDate((prev) => diaryAdapter.navigateDate(prev, direction));\n    },\n    [diaryAdapter],\n  );\n\n  const goToToday = useCallback(() => {\n    setSelectedDate(diaryAdapter.getTodayString());\n  }, [diaryAdapter]);\n\n  const handleToggleGoal = useCallback(\n    (entryId: string, goalId: string) => {\n      if (lock) return;\n\n      const entry = displayEntries.find((e) => e.id === entryId);\n      if (!entry || !entry.goals) return;\n\n      const newEdits = stateAdapter.toggleGoal(localEdits, entry, goalId);\n      setEditsState({ localEdits: newEdits });\n    },\n    [lock, displayEntries, stateAdapter, localEdits, setEditsState],\n  );\n\n  return {\n    // State\n    selectedDate,\n    displayEntries,\n    selectedEntry,\n    sortedEntries,\n\n    // Actions\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleGoal,\n  };\n}\n","import { z } from \"zod\";\n\n/**\n * Diary entry schema\n */\nexport const diaryEntrySchema = z.object({\n  id: z.string().describe(\"Unique identifier (REQUIRED)\"),\n  date: z.string().describe(\"Entry date in YYYY-MM-DD format\"),\n  title: z.string().nullable().optional().describe(\"Optional entry title\"),\n  content: z.string().describe(\"Main diary content (markdown supported)\"),\n  mood: z\n    .enum([\"great\", \"good\", \"neutral\", \"bad\", \"terrible\"])\n    .nullable()\n    .optional()\n    .describe(\"Overall mood for the day\"),\n  energy: z\n    .number()\n    .min(1)\n    .max(10)\n    .nullable()\n    .optional()\n    .describe(\"Energy level 1-10\"),\n  sleep: z\n    .object({\n      hours: z.number().nullable().optional(),\n      quality: z.enum([\"great\", \"good\", \"fair\", \"poor\"]).nullable().optional(),\n    })\n    .nullable()\n    .optional(),\n  gratitude: z\n    .array(z.string())\n    .nullable()\n    .optional()\n    .describe(\"Things to be grateful for\"),\n  highlights: z\n    .array(z.string())\n    .nullable()\n    .optional()\n    .describe(\"Day highlights\"),\n  challenges: z\n    .array(z.string())\n    .nullable()\n    .optional()\n    .describe(\"Challenges faced\"),\n  goals: z\n    .array(\n      z.object({\n        id: z.string(),\n        text: z.string(),\n        completed: z.boolean().nullable().optional(),\n      }),\n    )\n    .nullable()\n    .optional()\n    .describe(\"Daily goals\"),\n  tags: z.array(z.string()).nullable().optional(),\n  linkedEntities: z\n    .array(\n      z.object({\n        type: z.enum([\n          \"workout\",\n          \"meal\",\n          \"supplement\",\n          \"calendar_event\",\n          \"routine\",\n        ]),\n        id: z.string(),\n        label: z.string().nullable().optional(),\n      }),\n    )\n    .nullable()\n    .optional()\n    .describe(\"Related items from other domains\"),\n  weather: z\n    .object({\n      condition: z.string().nullable().optional(),\n      temperature: z.number().nullable().optional(),\n    })\n    .nullable()\n    .optional(),\n  location: z.string().nullable().optional(),\n  photos: z.array(z.string()).nullable().optional().describe(\"Photo URLs\"),\n  private: z.boolean().nullable().optional().describe(\"Mark as private entry\"),\n  createdAt: z.string().nullable().optional(),\n  updatedAt: z.string().nullable().optional(),\n});\n\nexport type DiaryEntry = z.infer<typeof diaryEntrySchema>;\n\n/**\n * Diary component props schema\n */\nexport const DiaryPropsSchema = z.object({\n  title: z.string().nullable().optional(),\n  entries: z.array(diaryEntrySchema).describe(\"Array of diary entries\"),\n  selectedDate: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Selected date in YYYY-MM-DD format\"),\n  view: z\n    .enum([\"single\", \"timeline\", \"calendar\"])\n    .default(\"single\")\n    .describe(\"View mode: single entry, timeline, or calendar overview\"),\n  showMoodTracker: z.boolean().default(true),\n  showEnergyTracker: z.boolean().default(true),\n  showGratitude: z.boolean().default(true),\n  showLinkedEntities: z\n    .boolean()\n    .default(true)\n    .describe(\"Show linked workouts, meals, etc.\"),\n  enableSearch: z.boolean().nullable().optional(),\n  lock: z.boolean().nullable().optional(),\n});\n\nexport type DiaryProps = z.infer<typeof DiaryPropsSchema>;\n\n/**\n * Diary component definition for catalog registration\n */\nexport const DiaryDefinition = {\n  name: \"Diary\" as const,\n  props: DiaryPropsSchema,\n  description:\n    \"Personal diary and journal component with mood tracking, energy levels, gratitude, goals, and integration with workouts, meals, and calendar events.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { FileText } from \"lucide-react\";\nimport {\n  type Source,\n  type ReportSection,\n  type ResearchReportProps,\n  renderContentWithCitations,\n  SourceCard,\n  ReportSectionComponent,\n} from \"./components\";\n\n// Re-export types for convenience\nexport type { Source, ReportSection, ResearchReportProps };\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const ResearchReport = memo(function ResearchReport({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const props = element.props as ResearchReportProps;\n  const {\n    title,\n    summary,\n    sections = [],\n    sources = [],\n    relatedQueries = [],\n    searchQuery,\n    totalResults,\n  } = props;\n\n  if (!title && !summary && sections.length === 0) {\n    return (\n      <div className=\"p-4 sm:p-8 text-center text-zinc-500\">\n        <FileText className=\"w-8 h-8 sm:w-12 sm:h-12 mx-auto mb-3 sm:mb-4 opacity-50\" />\n        <p className=\"text-sm\">No report content</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4 sm:space-y-6\">\n      {/* Report Card */}\n      <div className=\"rounded-xl sm:rounded-2xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-4 sm:p-6 border-b border-white/5\">\n          <h2 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-white mb-3 sm:mb-4\">{title}</h2>\n\n          {/* Summary with citations */}\n          <div className=\"text-zinc-300 leading-relaxed text-xs sm:text-sm lg:text-[15px]\">\n            {renderContentWithCitations(summary, sources, render)}\n          </div>\n        </div>\n\n        {/* Sections */}\n        <div className=\"p-4 sm:p-6 space-y-6 sm:space-y-8\">\n          {sections.map((section, i) => (\n            <ReportSectionComponent\n              key={i}\n              section={section}\n              sources={sources}\n              renderText={render}\n            />\n          ))}\n        </div>\n\n        {/* Related Queries */}\n        {relatedQueries.length > 0 && (\n          <div className=\"px-4 sm:px-6 pb-4 sm:pb-6\">\n            <div className=\"flex flex-wrap gap-1.5 sm:gap-2\">\n              {relatedQueries.map((query, i) => (\n                <button\n                  key={i}\n                  className=\"px-2.5 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm text-zinc-400 bg-zinc-800/50 rounded-full border border-white/5 hover:border-sky-500/30 hover:text-sky-300 transition-all touch-manipulation min-h-[2rem] sm:min-h-0\"\n                >\n                  {query}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Sources Panel */}\n      {sources.length > 0 && (\n        <div className=\"rounded-xl sm:rounded-2xl bg-zinc-900/40 border border-white/5 p-3 sm:p-4\">\n          <div className=\"flex items-center justify-between mb-3 sm:mb-4\">\n            <h4 className=\"text-xs sm:text-sm font-semibold text-zinc-400 uppercase tracking-wider\">\n              {sources.length} Sources\n            </h4>\n            {totalResults && totalResults > sources.length && (\n              <span className=\"text-[0.625rem] sm:text-xs text-zinc-500\">\n                da {totalResults} risultati totali\n              </span>\n            )}\n          </div>\n          <div className=\"grid gap-2 grid-cols-1 sm:grid-cols-2\">\n            {sources.map((source) => (\n              <SourceCard key={source.id} source={source} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {children}\n    </div>\n  );\n});\n\nexport default ResearchReport;\n","/**\n * Research Report Types\n */\n\nexport type Source = {\n  id: string;\n  title: string;\n  url: string;\n  domain?: string;\n  favicon?: string;\n  date?: string;\n};\n\nexport type ReportSection = {\n  title: string;\n  content: string; // Markdown content with [1], [2] citations\n  image?: {\n    url: string;\n    alt?: string;\n    caption?: string;\n  };\n  video?: {\n    url: string;\n    thumbnail?: string;\n    title?: string;\n  };\n};\n\nexport type ResearchReportProps = {\n  title: string;\n  summary: string; // Opening summary with inline citations [1], [2]\n  sections: ReportSection[];\n  sources: Source[];\n  relatedQueries?: string[];\n  searchQuery?: string;\n  totalResults?: number;\n};\n\n/**\n * Detect video embed URL from various video platforms.\n */\nexport function detectVideoEmbed(\n  url: string,\n): { embedUrl: string; provider: string } | null {\n  if (!url) return null;\n\n  // YouTube patterns\n  const youtubeMatch = url.match(\n    /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/|youtube\\.com\\/shorts\\/)([a-zA-Z0-9_-]{11})/,\n  );\n  if (youtubeMatch?.[1]) {\n    return {\n      provider: \"youtube\",\n      embedUrl: `https://www.youtube.com/embed/${youtubeMatch[1]}?rel=0&modestbranding=1`,\n    };\n  }\n\n  // Vimeo patterns\n  const vimeoMatch = url.match(/vimeo\\.com\\/(?:video\\/)?(\\d+)/);\n  if (vimeoMatch?.[1]) {\n    return {\n      provider: \"vimeo\",\n      embedUrl: `https://player.vimeo.com/video/${vimeoMatch[1]}?byline=0&portrait=0`,\n    };\n  }\n\n  // Dailymotion patterns\n  const dailymotionMatch = url.match(\n    /(?:dailymotion\\.com\\/video\\/|dai\\.ly\\/)([a-zA-Z0-9]+)/,\n  );\n  if (dailymotionMatch?.[1]) {\n    return {\n      provider: \"dailymotion\",\n      embedUrl: `https://www.dailymotion.com/embed/video/${dailymotionMatch[1]}`,\n    };\n  }\n\n  return null;\n}\n","\"use client\";\n\nimport { memo, useState } from \"react\";\nimport { PlayCircle, Play } from \"lucide-react\";\nimport { detectVideoEmbed } from \"./types\";\n\ninterface VideoPlayerProps {\n  video: { url: string; thumbnail?: string; title?: string };\n  title: string;\n}\n\nexport const VideoPlayer = memo(function VideoPlayer({\n  video,\n  title,\n}: VideoPlayerProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const embedInfo = detectVideoEmbed(video.url);\n\n  if (isPlaying) {\n    return (\n      <div className=\"mt-4 rounded-xl overflow-hidden border border-white/10 aspect-video bg-black\">\n        {embedInfo ? (\n          <iframe\n            src={embedInfo.embedUrl}\n            title={video.title || title}\n            className=\"w-full h-full border-0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen\"\n            allowFullScreen\n          />\n        ) : (\n          <video\n            src={video.url}\n            controls\n            autoPlay\n            className=\"w-full h-full object-contain\"\n          >\n            <source src={video.url} />\n          </video>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={() => setIsPlaying(true)}\n      className=\"mt-4 block w-full relative rounded-xl overflow-hidden border border-white/10 group text-left\"\n    >\n      {video.thumbnail ? (\n        <img\n          src={video.thumbnail}\n          alt={video.title || \"Video\"}\n          className=\"w-full h-48 sm:h-56 md:h-64 object-cover\"\n          loading=\"lazy\"\n        />\n      ) : (\n        <div className=\"w-full h-48 sm:h-56 md:h-64 bg-zinc-800 flex items-center justify-center\">\n          <PlayCircle className=\"w-12 h-12 text-zinc-600\" />\n        </div>\n      )}\n      <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center group-hover:bg-black/30 transition-colors\">\n        <div className=\"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-black/60 border-2 border-white/40 flex items-center justify-center group-hover:scale-110 group-hover:bg-primary/80 transition-all\">\n          <Play className=\"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1\" />\n        </div>\n      </div>\n      {video.title && (\n        <div className=\"absolute bottom-0 left-0 right-0 p-3 sm:p-4 bg-gradient-to-t from-black/80 to-transparent\">\n          <div className=\"text-sm sm:text-base font-medium text-white\">\n            {video.title}\n          </div>\n        </div>\n      )}\n    </button>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { sanitizeUrl } from \"@onegenui/utils\";\nimport type { Source } from \"./types\";\n\ninterface CitationBadgeProps {\n  id: string;\n  source?: Source;\n}\n\nexport const CitationBadge = memo(function CitationBadge({\n  id,\n  source,\n}: CitationBadgeProps) {\n  if (!source) return <sup className=\"text-sky-400\">[{id}]</sup>;\n\n  return (\n    <a\n      href={sanitizeUrl(source.url)}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"inline-flex items-center gap-0.5 px-1 py-0.5 mx-0.5 text-[10px] font-medium bg-sky-500/20 text-sky-400 rounded hover:bg-sky-500/30 transition-colors cursor-pointer\"\n    >\n      {source.favicon && (\n        <img src={source.favicon} alt=\"\" className=\"w-3 h-3 rounded-sm\" />\n      )}\n      <span>{source.domain || id}</span>\n    </a>\n  );\n});\n\n/**\n * Render content with citation badges replacing [1], [2], etc.\n */\nexport function renderContentWithCitations(\n  content: string,\n  sources: Source[],\n  renderText?: (\n    text: string,\n    options?: { inline?: boolean },\n  ) => React.ReactNode,\n): React.ReactNode[] {\n  const parts = content.split(/(\\[\\d+\\])/g);\n\n  return parts.map((part, i) => {\n    const match = part.match(/^\\[(\\d+)\\]$/);\n    if (match) {\n      const sourceId = match[1];\n      const source = sources.find((s) => s.id === sourceId);\n      return <CitationBadge key={i} id={sourceId!} source={source} />;\n    }\n    if (renderText) {\n      return <span key={i}>{renderText(part, { inline: true })}</span>;\n    }\n    return <span key={i}>{part}</span>;\n  });\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ExternalLink, Globe } from \"lucide-react\";\nimport { sanitizeUrl } from \"@onegenui/utils\";\nimport type { Source } from \"./types\";\n\ninterface SourceCardProps {\n  source: Source;\n}\n\nexport const SourceCard = memo(function SourceCard({\n  source,\n}: SourceCardProps) {\n  return (\n    <a\n      href={sanitizeUrl(source.url)}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"group flex items-center gap-3 p-3 rounded-xl bg-zinc-800/50 border border-white/5 hover:border-sky-500/30 hover:bg-zinc-800 transition-all\"\n    >\n      <div className=\"w-8 h-8 rounded-lg bg-zinc-700/50 flex items-center justify-center flex-shrink-0\">\n        {source.favicon ? (\n          <img src={source.favicon} alt=\"\" className=\"w-5 h-5 rounded\" />\n        ) : (\n          <Globe className=\"w-4 h-4 text-zinc-400\" />\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"text-sm font-medium text-white truncate group-hover:text-sky-300 transition-colors\">\n          {source.title}\n        </div>\n        <div className=\"text-xs text-zinc-500 truncate\">{source.domain}</div>\n      </div>\n      <ExternalLink className=\"w-4 h-4 text-zinc-500 group-hover:text-sky-400 transition-colors flex-shrink-0\" />\n    </a>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { ReportSection, Source } from \"./types\";\nimport { VideoPlayer } from \"./video-player\";\nimport { renderContentWithCitations } from \"./citation-badge\";\n\ninterface ReportSectionComponentProps {\n  section: ReportSection;\n  sources: Source[];\n  renderText?: (\n    text: string,\n    options?: { inline?: boolean },\n  ) => React.ReactNode;\n}\n\nexport const ReportSectionComponent = memo(function ReportSectionComponent({\n  section,\n  sources,\n  renderText,\n}: ReportSectionComponentProps) {\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\n        <div className=\"w-1 h-5 bg-sky-500 rounded-full\" />\n        {section.title}\n      </h3>\n\n      <div className=\"text-zinc-300 leading-relaxed text-[15px]\">\n        {renderContentWithCitations(section.content, sources, renderText)}\n      </div>\n\n      {section.image && (\n        <figure className=\"mt-4 rounded-xl overflow-hidden border border-white/10\">\n          <img\n            src={section.image.url}\n            alt={section.image.alt || section.title}\n            className=\"w-full h-auto min-h-[200px] max-h-[400px] sm:max-h-[500px] object-cover\"\n            loading=\"lazy\"\n          />\n          {section.image.caption && (\n            <figcaption className=\"px-4 py-2.5 text-xs sm:text-sm text-zinc-500 bg-zinc-900/50\">\n              {section.image.caption}\n            </figcaption>\n          )}\n        </figure>\n      )}\n\n      {section.video && (\n        <VideoPlayer video={section.video} title={section.title} />\n      )}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useCallback } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport {\n  FileText,\n  ChevronRight,\n  ChevronDown,\n  BookOpen,\n  Hash,\n  ExternalLink,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { DocumentIndexProps, DocumentIndexNode } from \"./schema\";\n\ninterface TreeNodeProps {\n  node: DocumentIndexNode;\n  depth: number;\n  accentColor?: string;\n  onNodeClick?: (node: DocumentIndexNode) => void;\n}\n\nconst TreeNodeItem = memo(function TreeNodeItem({\n  node,\n  depth,\n  accentColor,\n  onNodeClick,\n}: TreeNodeProps) {\n  // First level nodes start collapsed, deeper ones follow parent state\n  const [expanded, setExpanded] = useState(depth > 0);\n  const [showFullSummary, setShowFullSummary] = useState(false);\n  const hasChildren = node.children && node.children.length > 0;\n\n  const toggle = useCallback(() => {\n    if (hasChildren) {\n      setExpanded((prev) => !prev);\n    }\n  }, [hasChildren]);\n\n  const handleNodeClick = useCallback(\n    (e: React.MouseEvent) => {\n      e.stopPropagation();\n      // Toggle full summary display and trigger action\n      setShowFullSummary((prev) => !prev);\n      if (!expanded) setExpanded(true);\n      onNodeClick?.(node);\n    },\n    [onNodeClick, node, expanded],\n  );\n\n  const pageRange =\n    node.startPage === node.endPage\n      ? `p. ${node.startPage}`\n      : `pp. ${node.startPage}-${node.endPage}`;\n\n  return (\n    <div className=\"select-none\">\n      <div\n        onClick={toggle}\n        className={cn(\n          \"flex items-start gap-1.5 sm:gap-2 py-1.5 px-1.5 sm:px-2 rounded-md transition-colors group touch-manipulation\",\n          hasChildren && \"cursor-pointer hover:bg-white/5\",\n          depth === 0 && \"font-semibold\",\n        )}\n        style={{ paddingLeft: `${depth * 12 + 8}px` }}\n      >\n        {hasChildren ? (\n          <span className=\"mt-0.5 shrink-0 text-muted-foreground\">\n            {expanded ? (\n              <ChevronDown className=\"h-4 w-4\" />\n            ) : (\n              <ChevronRight className=\"h-4 w-4\" />\n            )}\n          </span>\n        ) : (\n          <span className=\"mt-0.5 shrink-0 w-4\" />\n        )}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2\">\n            <span\n              className={cn(\n                \"text-xs sm:text-sm truncate\",\n                depth === 0 ? \"text-foreground\" : \"text-foreground/80\",\n              )}\n            >\n              {node.title}\n            </span>\n            <span\n              className=\"text-[0.5rem] sm:text-[0.625rem] px-1 sm:px-1.5 py-0.5 rounded bg-white/10 text-muted-foreground shrink-0\"\n              style={accentColor ? { backgroundColor: `${accentColor}20` } : {}}\n            >\n              {pageRange}\n            </span>\n            {onNodeClick && (\n              <button\n                onClick={handleNodeClick}\n                className={cn(\n                  \"transition-opacity p-0.5 rounded hover:bg-white/10\",\n                  showFullSummary\n                    ? \"opacity-100\"\n                    : \"opacity-0 group-hover:opacity-100\",\n                )}\n                title={\n                  showFullSummary ? \"Hide details\" : \"View section details\"\n                }\n              >\n                {showFullSummary ? (\n                  <ChevronDown\n                    className=\"h-3 w-3\"\n                    style={{ color: accentColor }}\n                  />\n                ) : (\n                  <ExternalLink\n                    className=\"h-3 w-3\"\n                    style={{ color: accentColor }}\n                  />\n                )}\n              </button>\n            )}\n          </div>\n          {node.summary && expanded && (\n            <p\n              className={cn(\n                \"text-xs text-muted-foreground mt-1\",\n                !showFullSummary && \"line-clamp-2\",\n              )}\n            >\n              {node.summary}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <AnimatePresence>\n        {expanded && hasChildren && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            {node.children!.map((child, index) => (\n              <TreeNodeItem\n                key={child.nodeId || index}\n                node={child}\n                depth={depth + 1}\n                accentColor={accentColor}\n                onNodeClick={onNodeClick}\n              />\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n\nexport const DocumentIndex = memo(function DocumentIndex({\n  element,\n  onAction,\n}: ComponentRenderProps) {\n  const {\n    title,\n    description,\n    pageCount,\n    nodes,\n    accentColor = \"#3b82f6\",\n    collapsed: initialCollapsed = false,\n  } = element.props as DocumentIndexProps;\n\n  const [collapsed, setCollapsed] = useState(initialCollapsed);\n\n  const handleNodeClick = useCallback(\n    (node: DocumentIndexNode) => {\n      // Use standard onAction callback to emit selection event\n      onAction?.({\n        name: \"view_section\",\n        params: {\n          elementKey: element.key,\n          nodeId: node.nodeId,\n          title: node.title,\n          startPage: node.startPage,\n          endPage: node.endPage,\n          summary: node.summary,\n        },\n      });\n    },\n    [onAction, element.key],\n  );\n\n  return (\n    <div className=\"rounded-lg sm:rounded-xl border border-white/10 bg-card/50 backdrop-blur-sm overflow-hidden\">\n      {/* Header */}\n      <div\n        className=\"flex flex-col sm:flex-row sm:items-center justify-between px-3 sm:px-4 py-2.5 sm:py-3 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors gap-2 sm:gap-3 touch-manipulation\"\n        onClick={() => setCollapsed((prev) => !prev)}\n      >\n        <div className=\"flex items-center gap-2 sm:gap-3\">\n          <div\n            className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center shrink-0\"\n            style={{ backgroundColor: `${accentColor}20` }}\n          >\n            <FileText className=\"h-4 w-4 sm:h-5 sm:w-5\" style={{ color: accentColor }} />\n          </div>\n          <div className=\"min-w-0\">\n            <h3 className=\"text-xs sm:text-sm font-semibold text-foreground truncate\">{title}</h3>\n            {description && (\n              <p className=\"text-[0.625rem] sm:text-xs text-muted-foreground line-clamp-1 max-w-md\">\n                {description}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2 sm:gap-3 pl-10 sm:pl-0\">\n          <div className=\"flex items-center gap-1 sm:gap-1.5 text-[0.625rem] sm:text-xs text-muted-foreground\">\n            <BookOpen className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\n            <span>{pageCount} pages</span>\n          </div>\n          <div className=\"flex items-center gap-1 sm:gap-1.5 text-[0.625rem] sm:text-xs text-muted-foreground\">\n            <Hash className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\n            <span>{nodes?.length || 0} sections</span>\n          </div>\n          {collapsed ? (\n            <ChevronRight className=\"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground shrink-0\" />\n          ) : (\n            <ChevronDown className=\"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground shrink-0\" />\n          )}\n        </div>\n      </div>\n\n      {/* Tree Content */}\n      <AnimatePresence>\n        {!collapsed && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"p-2 sm:p-3\">\n              {nodes && nodes.length > 0 ? (\n                nodes.map((node, index) => (\n                  <TreeNodeItem\n                    key={node.nodeId || index}\n                    node={node}\n                    depth={0}\n                    accentColor={accentColor}\n                    onNodeClick={handleNodeClick}\n                  />\n                ))\n              ) : (\n                <p className=\"text-xs sm:text-sm text-muted-foreground text-center py-3 sm:py-4\">\n                  No sections found\n                </p>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n","import { z } from \"zod\";\nimport type { ComponentDefinition } from \"@onegenui/core\";\n\nexport const DocumentIndexNodeSchema: z.ZodType<DocumentIndexNode> = z.lazy(\n  () =>\n    z.object({\n      title: z.string().describe(\"Section title\"),\n      nodeId: z.string().describe(\"Unique node identifier\"),\n      startPage: z.number().int().min(1).describe(\"Starting page number\"),\n      endPage: z.number().int().min(1).describe(\"Ending page number\"),\n      summary: z.string().optional().describe(\"Section summary\"),\n      children: z\n        .array(DocumentIndexNodeSchema)\n        .optional()\n        .describe(\"Nested sections\"),\n    }),\n);\n\nexport interface DocumentIndexNode {\n  title: string;\n  nodeId: string;\n  startPage: number;\n  endPage: number;\n  summary?: string;\n  children?: DocumentIndexNode[];\n}\n\nexport const DocumentIndexPropsSchema = z.object({\n  title: z.string().describe(\"Document title\"),\n  description: z.string().optional().describe(\"Document description\"),\n  pageCount: z.number().int().min(1).describe(\"Total number of pages\"),\n  nodes: z.array(DocumentIndexNodeSchema).describe(\"Top-level sections\"),\n  accentColor: z.string().optional().describe(\"Accent color for styling\"),\n  collapsed: z.boolean().optional().default(false).describe(\"Start collapsed\"),\n});\n\nexport type DocumentIndexProps = z.infer<typeof DocumentIndexPropsSchema>;\n\nexport const DocumentIndexDefinition: ComponentDefinition = {\n  props: DocumentIndexPropsSchema,\n  description:\n    \"Document index with hierarchical navigation. Shows document structure with expandable sections, page numbers, and summaries. Use for PDF or document analysis results.\",\n};\n","export { DocumentIndex } from \"./component\";\nexport {\n  DocumentIndexPropsSchema,\n  DocumentIndexNodeSchema,\n  type DocumentIndexProps,\n  type DocumentIndexNode,\n} from \"./schema\";\n\nimport { DocumentIndex } from \"./component\";\nimport { DocumentIndexPropsSchema } from \"./schema\";\n\nexport const DocumentIndexDefinition = {\n  type: \"DocumentIndex\",\n  component: DocumentIndex,\n  schema: DocumentIndexPropsSchema,\n};\n","\"use client\";\n\nimport { memo, useState } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { FileText, ChevronDown, BookOpen } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { SourceCitationProps, Citation } from \"./schema\";\n\n/**\n * Compact SourceCitation component - similar style to web sources\n * Shows citations as small, discrete items that expand on demand\n */\nexport const SourceCitation = memo(function SourceCitation({\n  element,\n}: ComponentRenderProps) {\n  const {\n    title,\n    citations = [],\n    collapsed: initialCollapsed = true,\n    accentColor = \"#3b82f6\",\n  } = element.props as SourceCitationProps;\n\n  const [expanded, setExpanded] = useState(!initialCollapsed);\n  const visibleCitations = expanded ? citations : citations.slice(0, 4);\n\n  if (citations.length === 0) return null;\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      {/* Compact header */}\n      <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n        <div className=\"flex -space-x-1\">\n          {citations.slice(0, 3).map((c, i) => (\n            <div\n              key={i}\n              className=\"w-5 h-5 rounded-full border-2 border-zinc-900 flex items-center justify-center\"\n              style={{ backgroundColor: `${accentColor}20` }}\n            >\n              <FileText size={10} style={{ color: accentColor }} />\n            </div>\n          ))}\n        </div>\n        <span className=\"font-medium\">{citations.length} sources</span>\n        <span className=\"text-muted-foreground/60\">·</span>\n        <span className=\"text-muted-foreground/60 truncate max-w-32\">\n          {title}\n        </span>\n      </div>\n\n      {/* Compact citation list */}\n      <div className=\"flex flex-col gap-1\">\n        {visibleCitations.map((citation, idx) => (\n          <CompactCitation\n            key={citation.id || idx}\n            citation={citation}\n            index={idx}\n            accentColor={accentColor}\n          />\n        ))}\n      </div>\n\n      {/* Show all button */}\n      {citations.length > 4 && (\n        <button\n          onClick={() => setExpanded(!expanded)}\n          className=\"flex items-center justify-center gap-1 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors rounded-lg hover:bg-white/5\"\n        >\n          {expanded ? \"Mostra meno\" : `Mostra tutte (${citations.length})`}\n          <ChevronDown\n            size={14}\n            className={cn(\"transition-transform\", expanded && \"rotate-180\")}\n          />\n        </button>\n      )}\n    </div>\n  );\n});\n\nconst CompactCitation = memo(function CompactCitation({\n  citation,\n  index,\n  accentColor,\n}: {\n  citation: Citation;\n  index: number;\n  accentColor: string;\n}) {\n  const [showExcerpt, setShowExcerpt] = useState(false);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 10 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: index * 0.03 }}\n      className=\"group\"\n    >\n      <button\n        onClick={() => setShowExcerpt(!showExcerpt)}\n        className=\"w-full flex items-start gap-2 p-2 rounded-lg bg-white/[0.03] hover:bg-white/[0.08] border border-transparent hover:border-white/10 transition-all text-left\"\n      >\n        {/* Citation number badge */}\n        <span\n          className=\"shrink-0 w-5 h-5 rounded-md flex items-center justify-center text-[10px] font-medium\"\n          style={{ backgroundColor: `${accentColor}20`, color: accentColor }}\n        >\n          {citation.id}\n        </span>\n\n        <div className=\"flex-1 min-w-0\">\n          {/* Section title */}\n          <div className=\"text-xs font-medium text-foreground/80 line-clamp-1 leading-tight\">\n            {citation.sectionTitle || citation.text?.slice(0, 50) || \"Source\"}\n          </div>\n          {/* Page number */}\n          <div className=\"flex items-center gap-1 mt-0.5\">\n            <BookOpen size={10} className=\"text-muted-foreground/50\" />\n            <span className=\"text-[10px] text-muted-foreground/60\">\n              p. {citation.pageNumber}\n            </span>\n          </div>\n        </div>\n\n        <ChevronDown\n          size={12}\n          className={cn(\n            \"shrink-0 text-muted-foreground/40 transition-transform\",\n            showExcerpt && \"rotate-180\",\n          )}\n        />\n      </button>\n\n      {/* Expandable excerpt */}\n      {showExcerpt && citation.text && (\n        <motion.div\n          initial={{ height: 0, opacity: 0 }}\n          animate={{ height: \"auto\", opacity: 1 }}\n          exit={{ height: 0, opacity: 0 }}\n          className=\"ml-7 mt-1 mb-2 p-2 rounded-lg bg-white/[0.02] border-l-2\"\n          style={{ borderColor: accentColor }}\n        >\n          <p className=\"text-xs text-foreground/70 italic leading-relaxed\">\n            \"{citation.text}\"\n          </p>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n});\n","import { z } from \"zod\";\nimport type { ComponentDefinition } from \"@onegenui/core\";\n\nexport const CitationSchema = z.object({\n  id: z.string().describe(\"Unique citation identifier\"),\n  nodeId: z.string().describe(\"Reference to the source node\"),\n  text: z.string().describe(\"The cited text\"),\n  pageNumber: z.number().int().min(1).describe(\"Page number of the citation\"),\n  sectionTitle: z.string().describe(\"Section title containing the citation\"),\n  confidence: z\n    .enum([\"high\", \"medium\", \"low\"])\n    .optional()\n    .describe(\"Confidence level\"),\n});\n\nexport type Citation = z.infer<typeof CitationSchema>;\n\nexport const SourceCitationPropsSchema = z.object({\n  title: z.string().describe(\"Document title\"),\n  description: z.string().optional().describe(\"Brief description\"),\n  citations: z.array(CitationSchema).describe(\"List of citations\"),\n  showPageNumbers: z.boolean().optional().default(true),\n  collapsed: z.boolean().optional().default(false),\n  accentColor: z.string().optional().describe(\"Accent color for styling\"),\n  // Note: onCitationClick is a runtime callback, not part of schema validation\n});\n\nexport type SourceCitationProps = z.infer<typeof SourceCitationPropsSchema> & {\n  onCitationClick?: (citation: Citation) => void;\n};\n\nexport const SourceCitationDefinition: ComponentDefinition = {\n  props: SourceCitationPropsSchema,\n  description:\n    \"Source citations with page references. Shows cited text with links to source pages. Use after document analysis to show where information comes from.\",\n};\n","export { SourceCitation } from \"./component\";\nexport {\n  SourceCitationPropsSchema,\n  CitationSchema,\n  type SourceCitationProps,\n  type Citation,\n} from \"./schema\";\n\nimport { SourceCitation } from \"./component\";\nimport { SourceCitationPropsSchema } from \"./schema\";\n\nexport const SourceCitationDefinition = {\n  type: \"SourceCitation\",\n  component: SourceCitation,\n  schema: SourceCitationPropsSchema,\n};\n","\"use client\";\n\nimport { memo, useMemo, useState } from \"react\";\nimport {\n  type ComponentRenderProps,\n  useData,\n  useItemSelection,\n} from \"@onegenui/react\";\nimport { resolveArrayProp } from \"../../utils/data-utils\";\nimport { cn } from \"../../utils/cn\";\n\ntype SeriesData = {\n  name: string;\n  data: number[];\n  color?: string | null;\n};\n\ntype ChartDatum = {\n  label: string;\n  value: number;\n  color?: string | null;\n};\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Constants\n// ─────────────────────────────────────────────────────────────────────────────\n\nconst DEFAULT_HEIGHT = 200;\nconst MIN_HEIGHT = 120;\nconst Y_AXIS_WIDTH = 40;\nconst BAR_GAP = 6;\nconst DEFAULT_COLORS = [\n  \"#3b82f6\", // blue\n  \"#22c55e\", // green\n  \"#f97316\", // orange\n  \"#a855f7\", // purple\n  \"#ec4899\", // pink\n  \"#14b8a6\", // teal\n  \"#eab308\", // yellow\n  \"#ef4444\", // red\n];\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Utility Functions\n// ─────────────────────────────────────────────────────────────────────────────\n\nfunction formatValue(value: number | undefined | null): string {\n  if (value == null || typeof value !== \"number\" || isNaN(value)) {\n    return \"-\";\n  }\n  if (value >= 1_000_000) {\n    return `${(value / 1_000_000).toFixed(1)}M`;\n  }\n  if (value >= 1_000) {\n    return `${(value / 1_000).toFixed(1)}K`;\n  }\n  return value.toFixed(0);\n}\n\nfunction calculateNiceTickValues(\n  min: number,\n  max: number,\n  targetTicks = 5,\n): number[] {\n  if (max <= min) return [0];\n\n  const range = max - min;\n  const roughStep = range / (targetTicks - 1);\n\n  const magnitude = Math.pow(10, Math.floor(Math.log10(roughStep)));\n  const normalizedStep = roughStep / magnitude;\n\n  let niceStep: number;\n  if (normalizedStep <= 1.5) niceStep = 1;\n  else if (normalizedStep <= 3) niceStep = 2;\n  else if (normalizedStep <= 7) niceStep = 5;\n  else niceStep = 10;\n\n  niceStep *= magnitude;\n\n  const niceMin = Math.floor(min / niceStep) * niceStep;\n  const niceMax = Math.ceil(max / niceStep) * niceStep;\n\n  const ticks: number[] = [];\n  for (let tick = niceMin; tick <= niceMax; tick += niceStep) {\n    ticks.push(tick);\n  }\n\n  return ticks;\n}\n\nfunction hexToRgba(hex: string, alpha: number): string {\n  if (!hex || !hex.startsWith(\"#\")) return hex;\n  const r = parseInt(hex.slice(1, 3), 16);\n  const g = parseInt(hex.slice(3, 5), 16);\n  const b = parseInt(hex.slice(5, 7), 16);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n\n// ─────────────────────────────────────────────────────────────────────────────\n// Chart Component\n// ─────────────────────────────────────────────────────────────────────────────\n\nexport const Chart = memo(function Chart({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, data, dataPath, height, series, categories } =\n    element.props as {\n      title?: string | null;\n      dataPath?: string;\n      data?: ChartDatum[];\n      height?: number;\n      series?: SeriesData[];\n      categories?: string[];\n    };\n\n  const { data: globalData } = useData();\n\n  // Convert series format to chartData format if series is provided\n  const chartData = useMemo(() => {\n    if (series && series.length > 0 && categories && categories.length > 0) {\n      // For multi-series, flatten to simple bar chart using first series\n      const firstSeries = series[0]!;\n      return categories.map((label, i) => ({\n        label,\n        value: firstSeries.data[i] ?? 0,\n        color: firstSeries.color,\n      }));\n    }\n    return resolveArrayProp<ChartDatum>(globalData, data, dataPath);\n  }, [series, categories, globalData, data, dataPath]);\n\n  const chartHeight = Math.max(height || DEFAULT_HEIGHT, MIN_HEIGHT);\n\n  const { selectedItems, isItemSelected } = useItemSelection(element.key);\n  const [hoveredIndex, setHoveredIndex] = useState<number | null>(null);\n\n  // Memoize calculations\n  const { ticks, normalizedData } = useMemo(() => {\n    if (!chartData || chartData.length === 0) {\n      return { maxValue: 0, minValue: 0, ticks: [], normalizedData: [] };\n    }\n\n    const values = chartData.map((d) => d.value);\n    const max = Math.max(...values, 0);\n    const min = Math.min(...values, 0);\n\n    // Ensure we have some range\n    const effectiveMax = max === min ? max + 10 : max;\n\n    const computedTicks = calculateNiceTickValues(\n      Math.min(min, 0),\n      effectiveMax,\n      5,\n    );\n    const tickMax = computedTicks[computedTicks.length - 1] ?? effectiveMax;\n    const tickMin = computedTicks[0] ?? 0;\n    const range = tickMax - tickMin;\n\n    return {\n      maxValue: tickMax,\n      minValue: tickMin,\n      ticks: computedTicks,\n      normalizedData: chartData.map((d, i) => ({\n        ...d,\n        color: d.color || DEFAULT_COLORS[i % DEFAULT_COLORS.length],\n        percentage: range === 0 ? 0 : ((d.value - tickMin) / range) * 100,\n      })),\n    };\n  }, [chartData]);\n\n  if (!chartData || chartData.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center p-4 sm:p-8 bg-card border border-border rounded-lg sm:rounded-xl text-muted-foreground text-sm\">\n        No data available\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col w-full h-full glass-panel bg-card/80 backdrop-blur-md border border-border/50 rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-lg\">\n      {/* Title */}\n      {title && (\n        <h3 className=\"text-xs sm:text-sm font-semibold mb-3 sm:mb-4 text-foreground\">{title}</h3>\n      )}\n\n      {/* Chart Area */}\n      <div\n        className=\"relative w-full\"\n        style={{ height: `${chartHeight}px` }}\n      >\n        {/* Y-Axis Grid Lines & Labels */}\n        <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none\">\n          {ticks\n            .slice()\n            .reverse()\n            .map((tick) => (\n              <div key={tick} className=\"flex items-center w-full h-0 relative\">\n                <div\n                  className=\"border-t border-border border-dashed\"\n                  style={{\n                    marginLeft: `${Y_AXIS_WIDTH + 4}px`,\n                    width: `calc(100% - ${Y_AXIS_WIDTH + 4}px)`,\n                  }}\n                />\n                <span className=\"absolute left-0 text-[0.5rem] sm:text-[0.625rem] text-muted-foreground text-right -translate-y-1/2 pr-1\" style={{ width: `${Y_AXIS_WIDTH}px` }}>\n                  {formatValue(tick)}\n                </span>\n              </div>\n            ))}\n        </div>\n\n        {/* Bars Container */}\n        <div\n          className=\"absolute inset-0 flex items-end justify-between pt-2 sm:pt-3 pb-5 sm:pb-6\"\n          style={{\n            left: `${Y_AXIS_WIDTH + 4}px`,\n            right: 0,\n          }}\n        >\n          {normalizedData.map((d, i) => {\n            const itemId = i.toString();\n            const isSelected = isItemSelected(itemId);\n            const isHovered = hoveredIndex === i;\n            const barHeight = `${d.percentage}%`;\n\n            return (\n              <div\n                key={i}\n                data-selectable-item\n                data-element-key={element.key}\n                data-item-id={itemId}\n                className=\"relative flex-1 h-full flex flex-col justify-end items-center group/bar cursor-pointer touch-manipulation\"\n                style={{ padding: `0 ${BAR_GAP / 2}px` }}\n                onMouseEnter={() => setHoveredIndex(i)}\n                onMouseLeave={() => setHoveredIndex(null)}\n                onTouchStart={() => setHoveredIndex(i)}\n                onTouchEnd={() => setHoveredIndex(null)}\n              >\n                {/* Tooltip (visible on hover) */}\n                {(isHovered || isSelected) && (\n                  <div\n                    className={cn(\n                      \"absolute bottom-full mb-1 z-20 px-1.5 sm:px-2 py-0.5 sm:py-1\",\n                      \"bg-popover text-popover-foreground text-[0.625rem] sm:text-xs font-medium rounded shadow-md pointer-events-none whitespace-nowrap\",\n                      \"animate-in fade-in zoom-in-95 duration-200\",\n                    )}\n                  >\n                    <span className=\"opacity-70 mr-0.5 sm:mr-1\">{d.label}:</span>\n                    {formatValue(d.value)}\n                  </div>\n                )}\n\n                {/* The Bar */}\n                <div\n                  className={cn(\n                    \"w-full rounded-t transition-all duration-200 relative\",\n                    isSelected\n                      ? \"opacity-100 ring-2 ring-primary ring-offset-1\"\n                      : \"opacity-85 hover:opacity-100\",\n                  )}\n                  style={{\n                    height: barHeight,\n                    backgroundColor: d.color,\n                    boxShadow: isHovered\n                      ? `0 0 10px ${hexToRgba(d.color || \"#000\", 0.4)}`\n                      : \"none\",\n                  }}\n                />\n\n                {/* X-Axis Label */}\n                <div className=\"absolute top-full mt-1 sm:mt-2 text-[0.5rem] sm:text-[0.625rem] text-muted-foreground truncate w-full text-center max-w-full\">\n                  {d.label}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n});\n","// Re-export from shared utils package\nexport {\n  resolveArrayProp,\n  resolveValueProp,\n  resolveString,\n} from \"@onegenui/utils\";\n","// Re-export from shared utils package\nexport { cn } from \"@onegenui/utils\";\n","import { z } from \"zod\";\nimport { chartDatumSchema } from \"../../utils/shared-schemas\";\n\nconst seriesSchema = z.object({\n  name: z.string(),\n  data: z.array(z.number()),\n  color: z.string().nullable(),\n});\n\n/**\n * Chart component schema definition\n */\nexport const ChartPropsSchema = z.object({\n  title: z.string().nullable(),\n  data: z.array(chartDatumSchema).nullable(),\n  dataPath: z.string().nullable(),\n  height: z.number().nullable(),\n  // Multi-series support\n  series: z.array(seriesSchema).nullable(),\n  categories: z.array(z.string()).nullable(),\n});\n\n/** Type inference for Chart props */\nexport type ChartProps = z.infer<typeof ChartPropsSchema>;\n\n/**\n * Chart component definition for catalog registration\n */\nexport const ChartDefinition = {\n  name: \"Chart\" as const,\n  props: ChartPropsSchema,\n  description: \"Display a chart from array data\",\n  hasChildren: true,\n};\n","/**\n * Re-export from shared schemas package\n */\nexport {\n  chartDatumSchema,\n  listItemSchema,\n  timelineItemSchema,\n  toDoItemSchema,\n  tableRowSchema,\n  mindMapNodeSchema,\n  graphNodeSchema,\n  graphEdgeSchema,\n  kanbanItemSchema,\n  kanbanColumnSchema,\n  ganttTaskSchema,\n  emailItemSchema,\n  workoutSetSchema,\n  exerciseSchema,\n  mealItemSchema,\n  mealSchema,\n  messageItemSchema,\n  participantSchema,\n  type WorkoutSet,\n  type ExerciseItem,\n} from \"@onegenui/schemas\";\n","\"use client\";\n\nimport { memo, useEffect, useRef, useState } from \"react\";\nimport type { ComponentRenderProps } from \"@onegenui/react\";\nimport type {\n  StockChartProps,\n  OHLCData,\n  Timeframe,\n  StockSeries,\n} from \"./schema\";\nimport { cn } from \"../../utils/cn\";\n\n// Lazy import holder for lightweight-charts\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet chartsModule: any = null;\n\n// --- Helper Functions ---\n\nconst getTimeframeDays = (tf: Timeframe): number => {\n  switch (tf) {\n    case \"1D\":\n      return 1;\n    case \"1W\":\n      return 7;\n    case \"1M\":\n      return 30;\n    case \"3M\":\n      return 90;\n    case \"1Y\":\n      return 365;\n    case \"5Y\":\n      return 365 * 5;\n    case \"10Y\":\n      return 365 * 10;\n    default:\n      return 0; // ALL\n  }\n};\n\nconst filterDataByTimeframe = (\n  data: OHLCData[],\n  timeframe: Timeframe,\n): OHLCData[] => {\n  if (!timeframe || timeframe === \"ALL\" || !data.length) return data;\n\n  const days = getTimeframeDays(timeframe);\n  const cutoff = new Date();\n  cutoff.setDate(cutoff.getDate() - days);\n  const cutoffStr = cutoff.toISOString().split(\"T\")[0];\n  if (!cutoffStr) return data;\n\n  return data.filter((d) => d.time >= cutoffStr);\n};\n\n// --- Component ---\n\nexport const StockChart = memo(function StockChart({\n  element,\n}: ComponentRenderProps) {\n  const props = element.props as StockChartProps;\n\n  // Extract data from the first series if available\n  const primarySeries: StockSeries | undefined = props.series?.[0];\n  const symbol = primarySeries?.symbol || \"Unknown\";\n  const initialData = primarySeries?.data || [];\n  const height = props.height ?? 400;\n\n  // Colors can be customized here or derived from theme/props if extended\n  const upColor = \"#22c55e\";\n  const downColor = \"#ef4444\";\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const chartRef = useRef<any>(null);\n  const seriesRef = useRef<any>(null);\n\n  const [timeframe, setTimeframe] = useState<Timeframe>(\n    props.timeframe || \"3M\",\n  );\n  const filteredData = filterDataByTimeframe(initialData, timeframe);\n\n  // Load lightweight-charts dynamically\n  useEffect(() => {\n    if (!chartsModule) {\n      import(\"lightweight-charts\").then((mod) => {\n        chartsModule = mod;\n        initChart();\n      });\n    } else {\n      initChart();\n    }\n\n    return () => {\n      if (chartRef.current) {\n        chartRef.current.remove();\n        chartRef.current = null;\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Update data when timeframe/data changes\n  useEffect(() => {\n    if (seriesRef.current && filteredData.length > 0) {\n      seriesRef.current.setData(filteredData);\n      if (chartRef.current) {\n        chartRef.current.timeScale().fitContent();\n      }\n    }\n  }, [filteredData]);\n\n  // Handle Resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (chartRef.current && containerRef.current) {\n        chartRef.current.applyOptions({\n          width: containerRef.current.clientWidth,\n          height: containerRef.current.clientHeight,\n        });\n      }\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  const initChart = () => {\n    if (!containerRef.current || !chartsModule) return;\n\n    if (chartRef.current) {\n      chartRef.current.remove();\n    }\n\n    const { createChart, CandlestickSeries } = chartsModule;\n\n    const chart = createChart(containerRef.current, {\n      width: containerRef.current.clientWidth,\n      height: containerRef.current.clientHeight,\n      layout: {\n        background: { type: \"solid\", color: \"transparent\" },\n        textColor: \"#a1a1aa\", // muted-foreground\n      },\n      grid: {\n        vertLines: { color: \"#27272a\" }, // border\n        horzLines: { color: \"#27272a\" }, // border\n      },\n      timeScale: {\n        borderColor: \"#27272a\",\n        timeVisible: true,\n      },\n      rightPriceScale: {\n        borderColor: \"#27272a\",\n      },\n      crosshair: {\n        vertLine: {\n          color: \"#71717a\",\n          labelBackgroundColor: \"#71717a\",\n        },\n        horzLine: {\n          color: \"#71717a\",\n          labelBackgroundColor: \"#71717a\",\n        },\n      },\n    });\n\n    // v5 API: use addSeries(CandlestickSeries, options)\n    const series = chart.addSeries(CandlestickSeries, {\n      upColor: upColor,\n      downColor: downColor,\n      borderVisible: false,\n      wickUpColor: upColor,\n      wickDownColor: downColor,\n    });\n\n    series.setData(filteredData);\n    chart.timeScale().fitContent();\n\n    chartRef.current = chart;\n    seriesRef.current = series;\n  };\n\n  const timeframes: Timeframe[] = [\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"ALL\"];\n\n  return (\n    <div className=\"flex flex-col gap-2 sm:gap-3 p-3 sm:p-4 glass-panel bg-card/80 backdrop-blur-md border border-border/50 rounded-lg sm:rounded-xl shadow-lg\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2\">\n        <h3 className=\"m-0 text-xs sm:text-sm font-semibold text-foreground\">\n          {symbol} Stock Price\n        </h3>\n\n        {/* Timeframe Selector */}\n        <div className=\"flex gap-0.5 sm:gap-1 bg-muted/20 p-0.5 sm:p-1 rounded-md overflow-x-auto touch-pan-x w-full sm:w-auto\">\n          {timeframes.map((tf) => (\n            <button\n              key={tf}\n              onClick={() => setTimeframe(tf)}\n              className={cn(\n                \"px-2 sm:px-2.5 py-1 sm:py-1.5 text-[0.625rem] sm:text-xs font-medium rounded transition-all touch-manipulation min-h-[1.75rem] sm:min-h-0 flex-shrink-0\",\n                timeframe === tf\n                  ? \"bg-primary text-primary-foreground shadow-sm\"\n                  : \"text-muted-foreground hover:bg-muted/50 hover:text-foreground\",\n              )}\n            >\n              {tf}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Chart Container */}\n      <div\n        className=\"relative w-full overflow-hidden rounded bg-black/5\"\n        style={{ height: `${Math.max(height * 0.7, 200)}px` }}\n      >\n        <div ref={containerRef} className=\"w-full h-full\" />\n        {!filteredData.length && (\n          <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground text-xs sm:text-sm\">\n            No data available for this timeframe\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n","import { z } from \"zod\";\n\n/**\n * OHLC (Open, High, Low, Close) data point schema\n */\nexport const ohlcSchema = z.object({\n  time: z.string().describe(\"Date in YYYY-MM-DD format\"),\n  open: z.number().describe(\"Opening price\"),\n  high: z.number().describe(\"Highest price\"),\n  low: z.number().describe(\"Lowest price\"),\n  close: z.number().describe(\"Closing price\"),\n  volume: z.number().nullable().optional().describe(\"Trading volume\"),\n});\n\n/**\n * Stock series schema - represents a single stock/instrument\n */\nexport const stockSeriesSchema = z.object({\n  symbol: z.string().describe(\"Stock ticker symbol (e.g., AAPL, GOOGL)\"),\n  name: z.string().describe(\"Full company/instrument name\"),\n  color: z.string().describe(\"Hex color for the series line (e.g., #3b82f6)\"),\n  data: z.array(ohlcSchema).describe(\"Array of OHLC data points\"),\n});\n\n/**\n * Technical level schema - support/resistance lines\n */\nexport const technicalLevelSchema = z.object({\n  price: z.number().describe(\"Price level\"),\n  type: z.enum([\"support\", \"resistance\"]).describe(\"Type of technical level\"),\n  strength: z\n    .number()\n    .nullable()\n    .optional()\n    .describe(\"Strength indicator (0-1)\"),\n  label: z\n    .string()\n    .nullable()\n    .optional()\n    .describe(\"Custom label for the level\"),\n});\n\n/**\n * Timeframe options for filtering data\n */\nexport const timeframeSchema = z\n  .enum([\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"10Y\", \"ALL\"])\n  .describe(\"Time period to display\");\n\n/**\n * StockChart component schema definition\n */\nexport const StockChartPropsSchema = z.object({\n  title: z.string().nullable().optional().describe(\"Chart title\"),\n  series: z\n    .array(stockSeriesSchema)\n    .nullable()\n    .optional()\n    .describe(\"Array of stock series to display\"),\n  levels: z\n    .array(technicalLevelSchema)\n    .nullable()\n    .optional()\n    .describe(\"Technical support/resistance levels\"),\n  chartType: z\n    .enum([\"Line\", \"Candlestick\"])\n    .nullable()\n    .optional()\n    .describe(\"Chart visualization type\"),\n  timeframe: timeframeSchema\n    .nullable()\n    .optional()\n    .describe(\"Initial timeframe selection\"),\n  height: z\n    .number()\n    .nullable()\n    .optional()\n    .describe(\"Chart height in pixels (default: 400)\"),\n  showLevels: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Show support/resistance levels (default: true)\"),\n  showVolume: z\n    .boolean()\n    .nullable()\n    .optional()\n    .describe(\"Show volume bars (default: false)\"),\n});\n\n/** Type inference for StockChart props */\nexport type StockChartProps = z.infer<typeof StockChartPropsSchema>;\n\n/** Type inference for OHLC data */\nexport type OHLCData = z.infer<typeof ohlcSchema>;\n\n/** Type inference for stock series */\nexport type StockSeries = z.infer<typeof stockSeriesSchema>;\n\n/** Type inference for technical level */\nexport type TechnicalLevel = z.infer<typeof technicalLevelSchema>;\n\n/** Type inference for timeframe */\nexport type Timeframe = z.infer<typeof timeframeSchema>;\n\n/**\n * StockChart component definition for catalog registration\n */\nexport const StockChartDefinition = {\n  name: \"StockChart\" as const,\n  props: StockChartPropsSchema,\n  description:\n    \"Interactive financial chart with candlestick/line views, multiple series comparison, and technical levels\",\n  hasChildren: false,\n};\n","\"use client\";\n\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { type ComponentRenderProps, useSelection } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  type Vec2,\n  type GraphProps,\n  type NodeState,\n  MAG,\n  SUB,\n  ADD,\n  MUL,\n  NORM,\n  DEFAULT_H,\n  REPULSION,\n  SPRING_LEN,\n  SPRING_K,\n  DAMPING,\n  CENTER_PULL,\n  DT,\n  MAX_ITERATIONS,\n  EdgesRenderer,\n  NodesRenderer,\n} from \"./components\";\n\nexport const Graph = memo(function Graph({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    nodes: propsNodes,\n    edges: propsEdges,\n    height,\n  } = element.props as GraphProps;\n\n  const nodes = useMemo(\n    () => (propsNodes || []).filter((n) => !!n?.id),\n    [propsNodes],\n  );\n  const edges = useMemo(\n    () => (propsEdges || []).filter((e) => !!e.source && !!e.target),\n    [propsEdges],\n  );\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [dimensions, setDimensions] = useState({ w: 800, h: DEFAULT_H });\n\n  const nodeStates = useRef<Map<string, NodeState>>(new Map());\n  const rafRef = useRef<number | undefined>(undefined);\n  const [bump, setBump] = useState(0);\n  const iterationCount = useRef(0);\n\n  const { isSelected, toggleSelection } = useSelection();\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const isDragging = useRef(false);\n  const dragNodeId = useRef<string | null>(null);\n  const lastMousePos = useRef<Vec2>({ x: 0, y: 0 });\n\n  // Initialize Physics\n  useEffect(() => {\n    const w = containerRef.current?.clientWidth || 800;\n    const h = Math.max(240, height ?? DEFAULT_H);\n    setDimensions({ w, h });\n\n    const map = new Map<string, NodeState>();\n    const count = nodes.length;\n\n    nodes.forEach((n, i) => {\n      const angle = (i / count) * Math.PI * 2;\n      const radius = count * 10;\n      const baseSize = 20;\n      const labelFactor = (n.label?.length || 0) * 2;\n      const size = Math.max(\n        28,\n        Math.min(60, baseSize + (n.value || 0) + labelFactor * 0.3),\n      );\n\n      map.set(n.id, {\n        pos: {\n          x: w / 2 + Math.cos(angle) * radius,\n          y: h / 2 + Math.sin(angle) * radius,\n        },\n        vel: { x: 0, y: 0 },\n        acc: { x: 0, y: 0 },\n        mass: 1,\n        size: size,\n      });\n    });\n\n    nodeStates.current = map;\n    iterationCount.current = 0;\n    setBump((b) => b + 1);\n  }, [nodes, height]);\n\n  // Physics Loop\n  useEffect(() => {\n    const center = { x: dimensions.w / 2, y: dimensions.h / 2 };\n\n    const step = () => {\n      if (iterationCount.current > MAX_ITERATIONS && !isDragging.current) {\n        return;\n      }\n\n      const st = nodeStates.current;\n      const nodeIds = Array.from(st.keys());\n\n      for (let i = 0; i < nodeIds.length; i++) {\n        const nodeIdI = nodeIds[i];\n        if (!nodeIdI) continue;\n        const u = st.get(nodeIdI)!;\n        u.acc = { x: 0, y: 0 };\n\n        const toCenter = SUB(center, u.pos);\n        u.acc = ADD(u.acc, MUL(toCenter, CENTER_PULL));\n\n        for (let j = i + 1; j < nodeIds.length; j++) {\n          const nodeIdJ = nodeIds[j];\n          if (!nodeIdJ) continue;\n          const v = st.get(nodeIdJ)!;\n          const delta = SUB(u.pos, v.pos);\n          const dist = MAG(delta) || 0.1;\n\n          if (dist < 500) {\n            const force = (REPULSION * 5) / (dist * dist);\n            const dir = NORM(delta);\n            u.acc = ADD(u.acc, MUL(dir, force));\n            v.acc = ADD(v.acc, MUL(dir, -force));\n          }\n\n          const minDist = u.size + v.size + 10;\n          if (dist < minDist) {\n            const overlap = minDist - dist;\n            const dir = NORM(delta);\n            const separate = MUL(dir, overlap * 0.5);\n            u.pos = ADD(u.pos, separate);\n            v.pos = SUB(v.pos, separate);\n          }\n        }\n      }\n\n      edges.forEach((e) => {\n        const u = st.get(e.source);\n        const v = st.get(e.target);\n        if (u && v) {\n          const delta = SUB(v.pos, u.pos);\n          const dist = MAG(delta) || 1;\n          const force = (dist - SPRING_LEN) * SPRING_K;\n          const dir = NORM(delta);\n          u.acc = ADD(u.acc, MUL(dir, force));\n          v.acc = ADD(v.acc, MUL(dir, -force));\n        }\n      });\n\n      st.forEach((n, id) => {\n        if (id !== dragNodeId.current) {\n          n.vel = ADD(n.vel, MUL(n.acc, DT));\n          n.vel = MUL(n.vel, DAMPING);\n          n.pos = ADD(n.pos, MUL(n.vel, DT));\n        }\n      });\n\n      iterationCount.current++;\n      setBump((b) => b + 1);\n      rafRef.current = requestAnimationFrame(step);\n    };\n\n    rafRef.current = requestAnimationFrame(step);\n    return () => {\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\n    };\n  }, [edges, dimensions, nodes]);\n\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.stopPropagation();\n    const d = e.deltaY > 0 ? 0.9 : 1.1;\n    setZoom((z) => Math.max(0.1, Math.min(5, z * d)));\n  }, []);\n\n  const handlePointerDown = useCallback((e: React.PointerEvent) => {\n    e.stopPropagation();\n    e.currentTarget.setPointerCapture(e.pointerId);\n    isDragging.current = true;\n    lastMousePos.current = { x: e.clientX, y: e.clientY };\n  }, []);\n\n  const handlePointerMove = useCallback(\n    (e: React.PointerEvent) => {\n      if (!isDragging.current) return;\n      e.stopPropagation();\n\n      const dx = e.clientX - lastMousePos.current.x;\n      const dy = e.clientY - lastMousePos.current.y;\n      lastMousePos.current = { x: e.clientX, y: e.clientY };\n\n      if (dragNodeId.current) {\n        const st = nodeStates.current.get(dragNodeId.current);\n        if (st) {\n          st.pos.x += dx / zoom;\n          st.pos.y += dy / zoom;\n          st.vel = { x: 0, y: 0 };\n          iterationCount.current = 0;\n        }\n      } else {\n        setPan((p) => ({ x: p.x + dx, y: p.y + dy }));\n      }\n    },\n    [zoom],\n  );\n\n  const handlePointerUp = useCallback((e: React.PointerEvent) => {\n    e.stopPropagation();\n    e.currentTarget.releasePointerCapture(e.pointerId);\n    isDragging.current = false;\n    dragNodeId.current = null;\n  }, []);\n\n  const handleNodeDragStart = useCallback(\n    (nodeId: string, e: React.PointerEvent) => {\n      isDragging.current = true;\n      dragNodeId.current = nodeId;\n      lastMousePos.current = { x: e.clientX, y: e.clientY };\n    },\n    [],\n  );\n\n  const renderedEdges = useMemo(\n    () => <EdgesRenderer edges={edges} nodeStates={nodeStates.current} />,\n    [edges, bump],\n  );\n\n  const renderedNodes = useMemo(\n    () => (\n      <NodesRenderer\n        nodes={nodes}\n        nodeStates={nodeStates.current}\n        elementKey={element.key}\n        isSelected={isSelected}\n        toggleSelection={toggleSelection}\n        onNodeDragStart={handleNodeDragStart}\n      />\n    ),\n    [\n      nodes,\n      bump,\n      isSelected,\n      element.key,\n      toggleSelection,\n      handleNodeDragStart,\n    ],\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        height: `${Math.max(200, (height ?? DEFAULT_H) * 0.8)}px`,\n      }}\n      className={cn(\n        \"relative w-full overflow-hidden rounded-lg sm:rounded-xl border border-border/50 glass-panel bg-card/80 backdrop-blur-md touch-none select-none shadow-lg\",\n      )}\n      onWheel={handleWheel}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      onPointerLeave={handlePointerUp}\n    >\n      {title && (\n        <div className=\"absolute top-2 sm:top-4 left-2 sm:left-4 z-10 bg-background px-1.5 sm:px-2 py-0.5 sm:py-1 rounded border border-border font-semibold text-xs sm:text-sm shadow-sm\">\n          {title}\n        </div>\n      )}\n\n      <div className=\"absolute bottom-1.5 sm:bottom-2.5 right-1.5 sm:right-2.5 text-[0.5rem] sm:text-[0.625rem] text-muted-foreground z-10\">\n        Zoom: {Math.round(zoom * 100)}%\n      </div>\n\n      <svg\n        width=\"100%\"\n        height=\"100%\"\n        viewBox={`0 0 ${dimensions.w} ${dimensions.h}`}\n        className=\"block\"\n      >\n        <defs>\n          <marker\n            id=\"arrow\"\n            viewBox=\"0 0 10 10\"\n            refX=\"9\"\n            refY=\"5\"\n            markerWidth=\"6\"\n            markerHeight=\"6\"\n            orient=\"auto\"\n          >\n            <path d=\"M 0 0 L 10 5 L 0 10 z\" fill=\"var(--muted-foreground)\" />\n          </marker>\n        </defs>\n\n        <g transform={`translate(${pan.x}, ${pan.y}) scale(${zoom})`}>\n          {renderedEdges}\n          {renderedNodes}\n        </g>\n      </svg>\n      {children}\n    </div>\n  );\n});\n","export type Vec2 = { x: number; y: number };\n\nexport interface GraphNode {\n  id: string;\n  label?: string;\n  group?: string;\n  value?: number;\n  color?: string;\n}\n\nexport interface GraphEdge {\n  source: string;\n  target: string;\n  value?: number;\n}\n\nexport interface GraphProps {\n  title?: string;\n  nodes?: GraphNode[];\n  edges?: GraphEdge[];\n  height?: number;\n  layout?: \"force\" | \"grid\" | \"circle\";\n}\n\nexport interface NodeState {\n  pos: Vec2;\n  vel: Vec2;\n  acc: Vec2;\n  mass: number;\n  size: number;\n}\n\n// Math Helpers\nexport const MAG = (v: Vec2) => Math.sqrt(v.x * v.x + v.y * v.y);\nexport const SUB = (a: Vec2, b: Vec2) => ({ x: a.x - b.x, y: a.y - b.y });\nexport const ADD = (a: Vec2, b: Vec2) => ({ x: a.x + b.x, y: a.y + b.y });\nexport const MUL = (v: Vec2, s: number) => ({ x: v.x * s, y: v.y * s });\nexport const NORM = (v: Vec2) => {\n  const m = MAG(v);\n  return m === 0 ? { x: 0, y: 0 } : { x: v.x / m, y: v.y / m };\n};\n\n// Intersection for arrow rendering\nexport function getIntersection(p1: Vec2, p2: Vec2, r2: number): Vec2 {\n  const dx = p2.x - p1.x;\n  const dy = p2.y - p1.y;\n  const len = Math.sqrt(dx * dx + dy * dy) || 1;\n  return {\n    x: p2.x - (dx / len) * r2,\n    y: p2.y - (dy / len) * r2,\n  };\n}\n\n// Generate deterministic colors\nfunction hashString(str: string): number {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  return hash;\n}\n\nconst PALETTE = [\n  \"#3b82f6\",\n  \"#ef4444\",\n  \"#10b981\",\n  \"#f59e0b\",\n  \"#8b5cf6\",\n  \"#ec4899\",\n  \"#06b6d4\",\n];\n\nexport function colorForGroup(group?: string): string {\n  if (!group) return \"var(--primary)\";\n  const idx = Math.abs(hashString(group)) % PALETTE.length;\n  return PALETTE[idx] ?? \"var(--primary)\";\n}\n\n// Simulation Constants\nexport const DEFAULT_H = 400;\nexport const REPULSION = 800;\nexport const SPRING_LEN = 120;\nexport const SPRING_K = 0.05;\nexport const DAMPING = 0.85;\nexport const CENTER_PULL = 0.02;\nexport const DT = 0.1;\nexport const MAX_ITERATIONS = 300;\n","import { memo } from \"react\";\nimport type { GraphEdge, NodeState } from \"./types\";\nimport { getIntersection } from \"./types\";\n\ninterface EdgesRendererProps {\n  edges: GraphEdge[];\n  nodeStates: Map<string, NodeState>;\n}\n\nexport const EdgesRenderer = memo(function EdgesRenderer({\n  edges,\n  nodeStates,\n}: EdgesRendererProps) {\n  return (\n    <>\n      {edges.map((e, i) => {\n        const u = nodeStates.get(e.source);\n        const v = nodeStates.get(e.target);\n        if (!u || !v) return null;\n\n        const targetRadius = v.size + 4;\n        const end = getIntersection(u.pos, v.pos, targetRadius);\n\n        return (\n          <g key={`${e.source}-${e.target}-${i}`}>\n            <line\n              x1={u.pos.x}\n              y1={u.pos.y}\n              x2={end.x}\n              y2={end.y}\n              stroke=\"var(--border)\"\n              strokeWidth={2}\n              opacity={0.6}\n              markerEnd=\"url(#arrow)\"\n            />\n          </g>\n        );\n      })}\n    </>\n  );\n});\n","import { memo } from \"react\";\nimport type { GraphNode, NodeState, Vec2 } from \"./types\";\nimport { colorForGroup } from \"./types\";\n\ninterface NodesRendererProps {\n  nodes: GraphNode[];\n  nodeStates: Map<string, NodeState>;\n  elementKey: string;\n  isSelected: (elementKey: string, itemId: string) => boolean;\n  toggleSelection: (elementKey: string, itemId: string) => void;\n  onNodeDragStart: (nodeId: string, e: React.PointerEvent) => void;\n}\n\nexport const NodesRenderer = memo(function NodesRenderer({\n  nodes,\n  nodeStates,\n  elementKey,\n  isSelected,\n  toggleSelection,\n  onNodeDragStart,\n}: NodesRendererProps) {\n  return (\n    <>\n      {nodes.map((n) => {\n        const s = nodeStates.get(n.id);\n        if (!s) return null;\n\n        const selected = isSelected(elementKey, n.id);\n        const color = n.color || colorForGroup(n.group);\n\n        return (\n          <g\n            key={n.id}\n            transform={`translate(${s.pos.x}, ${s.pos.y})`}\n            onPointerDown={(e) => {\n              e.stopPropagation();\n              onNodeDragStart(n.id, e);\n            }}\n            onClick={(e) => {\n              e.stopPropagation();\n              toggleSelection(elementKey, n.id);\n            }}\n            className=\"cursor-grab active:cursor-grabbing\"\n          >\n            <circle\n              r={s.size}\n              fill=\"var(--background)\"\n              stroke={selected ? \"var(--primary)\" : color}\n              strokeWidth={selected ? 3 : 2}\n              className=\"transition-[stroke-width] duration-200\"\n            />\n            <circle r={s.size} fill={color} opacity={selected ? 0.2 : 0.1} />\n\n            <foreignObject\n              x={-s.size * 1.5}\n              y={-10}\n              width={s.size * 3}\n              height={30}\n              className=\"pointer-events-none overflow-visible\"\n            >\n              <div className=\"flex justify-center items-center h-full\">\n                <span className=\"px-1.5 py-0.5 rounded-md text-xs font-medium text-black border border-black/10 whitespace-nowrap shadow-sm bg-white/85\">\n                  {n.label}\n                </span>\n              </div>\n            </foreignObject>\n          </g>\n        );\n      })}\n    </>\n  );\n});\n","import { z } from \"zod\";\nimport { graphNodeSchema, graphEdgeSchema } from \"../../utils/shared-schemas\";\n\n/**\n * Graph component schema definition\n */\nexport const GraphPropsSchema = z.object({\n  title: z.string().nullable(),\n  nodes: z.array(graphNodeSchema).nullable(),\n  edges: z.array(graphEdgeSchema).nullable(),\n  layout: z.enum([\"force\", \"radial\", \"grid\"]).nullable(),\n  showLabels: z.boolean().nullable(),\n  showEdgeLabels: z.boolean().nullable(),\n  allowPanZoom: z.boolean().nullable(),\n  width: z.number().nullable(),\n  height: z.number().nullable(),\n  lock: z.boolean().nullable(),\n});\n\n/** Type inference for Graph props */\nexport type GraphProps = z.infer<typeof GraphPropsSchema>;\n\n/**\n * Graph component definition for catalog registration\n */\nexport const GraphDefinition = {\n  name: \"Graph\" as const,\n  props: GraphPropsSchema,\n  description:\n    \"Interactive graph (nodes + edges). IMPORTANT: Provide content via \",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  type MindMapProps,\n  buildTreeFromFlat,\n  NodeRenderer,\n} from \"./components\";\n\nexport const MindMap = memo(function MindMap({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, nodes, layout, expandedByDefault } =\n    element.props as MindMapProps;\n\n  const isHorizontal = layout !== \"vertical\";\n  const defaultExpanded = expandedByDefault !== false;\n\n  const rootNodes = useMemo(() => {\n    if (!nodes || !Array.isArray(nodes)) return [];\n    return buildTreeFromFlat(nodes);\n  }, [nodes]);\n\n  if (!rootNodes.length) {\n    return (\n      <div className=\"p-4 sm:p-8 text-center text-muted-foreground bg-muted/20 rounded-lg sm:rounded-xl border border-dashed border-border text-sm\">\n        No mind map data\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full overflow-hidden\">\n      {title && (\n        <h3 className=\"mb-2 sm:mb-4 text-base sm:text-lg font-semibold text-foreground flex items-center gap-2\">\n          {title}\n        </h3>\n      )}\n\n      <div\n        className={cn(\n          \"flex p-4 sm:p-6 lg:p-8 gap-6 sm:gap-8 lg:gap-12 overflow-auto glass-subtle rounded-lg sm:rounded-2xl min-h-[250px] sm:min-h-[350px] lg:min-h-[400px] touch-pan-x touch-pan-y\",\n          isHorizontal ? \"flex-col\" : \"flex-row\",\n        )}\n      >\n        {rootNodes.map((node) => (\n          <NodeRenderer\n            key={node.id}\n            node={node}\n            depth={0}\n            isHorizontal={isHorizontal}\n            expandedByDefault={defaultExpanded}\n            elementKey={element.key}\n          />\n        ))}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","/**\n * MindMap types and utilities\n */\n\nexport interface MindMapNode {\n  id: string;\n  label: string;\n  description?: string | null;\n  color?: string | null;\n  icon?: string | null;\n  children?: MindMapNode[] | null;\n  parentId?: string | null;\n}\n\nexport interface MindMapProps {\n  title?: string | null;\n  nodes?: MindMapNode[] | null;\n  layout?: \"horizontal\" | \"vertical\" | null;\n  expandedByDefault?: boolean | null;\n}\n\nexport interface NodeColors {\n  bg: string;\n  border: string;\n  text: string;\n}\n\nexport const DEPTH_COLORS: NodeColors[] = [\n  { bg: \"rgba(59, 130, 246, 0.1)\", border: \"#3b82f6\", text: \"#60a5fa\" },\n  { bg: \"rgba(168, 85, 247, 0.1)\", border: \"#a855f7\", text: \"#c084fc\" },\n  { bg: \"rgba(34, 197, 94, 0.1)\", border: \"#22c55e\", text: \"#4ade80\" },\n  { bg: \"rgba(249, 115, 22, 0.1)\", border: \"#f97316\", text: \"#fb923c\" },\n  { bg: \"rgba(236, 72, 153, 0.1)\", border: \"#ec4899\", text: \"#f472b6\" },\n  { bg: \"rgba(20, 184, 166, 0.1)\", border: \"#14b8a6\", text: \"#2dd4bf\" },\n];\n\nexport function getColorForDepth(depth: number): NodeColors {\n  return DEPTH_COLORS[depth % DEPTH_COLORS.length] as NodeColors;\n}\n\nexport function buildTreeFromFlat(nodes: MindMapNode[]): MindMapNode[] {\n  if (!Array.isArray(nodes)) return [];\n\n  const nodeMap = new Map<string, MindMapNode>();\n  const roots: MindMapNode[] = [];\n\n  nodes.forEach((n) => {\n    nodeMap.set(n.id, { ...n, children: n.children ? [...n.children] : [] });\n  });\n\n  nodes.forEach((n) => {\n    const node = nodeMap.get(n.id)!;\n    const parentId = n.parentId || (n as any).parent;\n\n    if (parentId && nodeMap.has(parentId)) {\n      const parent = nodeMap.get(parentId)!;\n      parent.children!.push(node);\n    } else {\n      roots.push(node);\n    }\n  });\n\n  return roots.length > 0 ? roots : nodes;\n}\n","\"use client\";\n\nimport { memo, useState, useCallback, useRef, useLayoutEffect } from \"react\";\nimport { cn } from \"../../../utils/cn\";\nimport { type MindMapNode, getColorForDepth } from \"./types\";\n\ninterface NodeRendererProps {\n  node: MindMapNode;\n  depth: number;\n  isHorizontal: boolean;\n  expandedByDefault: boolean;\n  elementKey: string;\n}\n\nexport const NodeRenderer = memo(function NodeRenderer({\n  node,\n  depth,\n  isHorizontal,\n  expandedByDefault,\n  elementKey,\n}: NodeRendererProps) {\n  const [expanded, setExpanded] = useState(expandedByDefault);\n  const hasChildren = node.children && node.children.length > 0;\n\n  const defaultColors = getColorForDepth(depth);\n  const colors = node.color\n    ? { bg: `${node.color}15`, border: node.color, text: node.color }\n    : defaultColors;\n\n  const nodeRef = useRef<HTMLDivElement>(null);\n  const childrenRef = useRef<HTMLDivElement>(null);\n  const [paths, setPaths] = useState<string[]>([]);\n\n  const updatePaths = useCallback(() => {\n    if (!expanded || !hasChildren || !nodeRef.current || !childrenRef.current) {\n      setPaths([]);\n      return;\n    }\n\n    const parentRect = nodeRef.current.getBoundingClientRect();\n    const containerRect = childrenRef.current.getBoundingClientRect();\n    const childrenNodes = Array.from(\n      childrenRef.current.children,\n    ) as HTMLElement[];\n\n    const newPaths: string[] = [];\n    childrenNodes.forEach((child) => {\n      const anchor = child.querySelector(\"[data-node-anchor]\");\n      if (!anchor) return;\n\n      const anchorRect = anchor.getBoundingClientRect();\n      const startY = parentRect.top + parentRect.height / 2 - containerRect.top;\n      const endY = anchorRect.top + anchorRect.height / 2 - containerRect.top;\n      const width = 64;\n\n      const p1 = { x: 0, y: startY };\n      const p2 = { x: width, y: endY };\n      const c1 = { x: width * 0.4, y: startY };\n      const c2 = { x: width * 0.6, y: endY };\n\n      newPaths.push(\n        `M ${p1.x} ${p1.y} C ${c1.x} ${c1.y}, ${c2.x} ${c2.y}, ${p2.x} ${p2.y}`,\n      );\n    });\n\n    setPaths(newPaths);\n  }, [expanded, hasChildren]);\n\n  useLayoutEffect(() => {\n    updatePaths();\n    window.addEventListener(\"resize\", updatePaths);\n    return () => window.removeEventListener(\"resize\", updatePaths);\n  }, [updatePaths]);\n\n  const toggleExpand = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setExpanded(!expanded);\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex relative\",\n        isHorizontal ? \"flex-row items-center\" : \"flex-col items-center\",\n      )}\n    >\n      <div ref={nodeRef} className=\"relative group z-10 flex items-center\">\n        <div\n          data-node-anchor\n          data-selectable-item\n          data-element-key={elementKey}\n          data-item-id={node.id}\n          className={cn(\n            \"relative border rounded-xl transition-all duration-300 shadow-sm\",\n            \"backdrop-blur-md bg-card/90 border-border hover:border-primary/50 hover:shadow-lg hover:-translate-y-0.5\",\n            \"flex items-center gap-3 p-3 min-w-[140px] max-w-[240px]\",\n            depth === 0\n              ? \"border-primary/30 bg-primary/5 ring-1 ring-primary/20\"\n              : \"\",\n          )}\n          style={{\n            borderColor: colors.border,\n            backgroundColor: depth === 0 ? undefined : colors.bg,\n          }}\n        >\n          {node.icon && (\n            <span className=\"text-xl flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-lg bg-background/50 border border-white/10\">\n              {node.icon}\n            </span>\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <div\n              className={cn(\n                \"font-semibold leading-tight truncate\",\n                depth === 0 ? \"text-[15px]\" : \"text-[13px]\",\n              )}\n              style={{ color: depth === 0 ? undefined : colors.text }}\n            >\n              {node.label}\n            </div>\n            {node.description && (\n              <div className=\"text-[11px] text-muted-foreground mt-1 leading-snug line-clamp-2\">\n                {node.description}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {hasChildren && (\n          <button\n            onClick={toggleExpand}\n            className={cn(\n              \"ml-[-10px] z-20 w-6 h-6 rounded-full flex items-center justify-center\",\n              \"bg-background border border-border shadow-sm hover:scale-110 transition-transform\",\n              \"text-xs font-bold text-muted-foreground hover:text-foreground cursor-pointer\",\n            )}\n            style={{\n              marginLeft: -12,\n              marginRight: -12,\n              position: \"relative\",\n              left: 12,\n            }}\n          >\n            {expanded ? \"−\" : \"+\"}\n          </button>\n        )}\n      </div>\n\n      {hasChildren && expanded && (\n        <div className=\"flex flex-row items-stretch\">\n          {isHorizontal && (\n            <div className=\"w-16 relative shrink-0\">\n              <svg className=\"absolute top-0 left-0 w-full h-full overflow-visible pointer-events-none\">\n                {paths.map((d, i) => (\n                  <path\n                    key={i}\n                    d={d}\n                    fill=\"none\"\n                    stroke=\"hsl(var(--border))\"\n                    strokeWidth=\"1.5\"\n                    opacity=\"0.5\"\n                    className=\"transition-all duration-500\"\n                  />\n                ))}\n              </svg>\n            </div>\n          )}\n          <div\n            ref={childrenRef}\n            className={cn(\n              \"flex\",\n              isHorizontal ? \"flex-col gap-4 py-2\" : \"flex-row gap-4\",\n            )}\n          >\n            {node.children!.map((child) => (\n              <NodeRenderer\n                key={child.id}\n                node={child}\n                depth={depth + 1}\n                isHorizontal={isHorizontal}\n                expandedByDefault={expandedByDefault}\n                elementKey={elementKey}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n","import { z } from \"zod\";\nimport { mindMapNodeSchema } from \"../../utils/shared-schemas\";\n\n/**\n * MindMap component schema definition\n */\nexport const MindMapPropsSchema = z.object({\n  title: z.string().nullable(),\n  nodes: z.array(mindMapNodeSchema),\n  layout: z.enum([\"horizontal\", \"vertical\"]).nullable(),\n  expandedByDefault: z.boolean().nullable(),\n});\n\n/** Type inference for MindMap props */\nexport type MindMapProps = z.infer<typeof MindMapPropsSchema>;\n\n/**\n * MindMap component definition for catalog registration\n */\nexport const MindMapDefinition = {\n  name: \"MindMap\" as const,\n  props: MindMapPropsSchema,\n  description: \"A hierarchical mind map. MUST use \",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport type { GanttProps } from \"./schema\";\n\ntype GanttTask = {\n  id: string;\n  name: string;\n  start: string;\n  end: string;\n  progress: number;\n  dependencies?: string[];\n  owner?: string;\n  color?: string;\n  type?: \"task\" | \"milestone\";\n};\n\nexport const Gantt = memo(function Gantt({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, tasks: initialTasks } = element.props as {\n    title?: string | null;\n    tasks?: GanttTask[] | null;\n    lock?: boolean;\n  };\n\n  const tasks = initialTasks || [];\n\n  if (tasks.length === 0) return null;\n\n  const dates = tasks\n    .flatMap((t) => [new Date(t.start), new Date(t.end)])\n    .sort((a, b) => a.getTime() - b.getTime());\n  const minDate = dates[0];\n  const maxDate = dates[dates.length - 1];\n\n  if (!minDate || !maxDate) return null;\n\n  const totalDuration = maxDate.getTime() - minDate.getTime();\n\n  const getLeft = (dateStr: string) => {\n    if (!minDate) return 0;\n    const d = new Date(dateStr);\n    return ((d.getTime() - minDate.getTime()) / totalDuration) * 100;\n  };\n\n  const getWidth = (startStr: string, endStr: string) => {\n    const s = new Date(startStr);\n    const e = new Date(endStr);\n    return ((e.getTime() - s.getTime()) / totalDuration) * 100;\n  };\n\n  const formatDate = (d: string) =>\n    new Date(d).toLocaleDateString(undefined, {\n      month: \"short\",\n      day: \"numeric\",\n    });\n\n  return (\n    <div className=\"glass-panel bg-card/80 backdrop-blur-md border border-border/50 rounded-lg sm:rounded-xl p-3 sm:p-4 overflow-hidden shadow-lg\">\n      {title && (\n        <h3 className=\"mb-3 sm:mb-5 text-base sm:text-lg font-bold text-foreground\">{title}</h3>\n      )}\n\n      <div\n        className=\"relative\"\n        style={{\n          minHeight: `${tasks.length * 36 + 40}px`,\n        }}\n      >\n        <div className=\"overflow-x-auto pb-2 sm:pb-3 touch-pan-x\">\n          <div className=\"min-w-[400px] sm:min-w-[600px]\">\n            <div className=\"flex justify-between mb-2 sm:mb-3 border-b border-border pb-1.5 sm:pb-2 text-[0.625rem] sm:text-xs text-muted-foreground\">\n              <span>{tasks[0] ? formatDate(tasks[0].start) : \"\"}</span>\n              <span>\n                {(() => {\n                  const lastTask = tasks[tasks.length - 1];\n                  return lastTask ? formatDate(lastTask.end) : \"\";\n                })()}\n              </span>\n            </div>\n\n            <div className=\"flex flex-col gap-2 sm:gap-3\">\n              {tasks.map((task, index) => {\n                const paddingLeft = getLeft(task.start);\n                const width = getWidth(task.start, task.end);\n                const isMilestone = task.type === \"milestone\" || width === 0;\n                const itemId = task.id || `task-${index}`;\n\n                return (\n                  <div\n                    key={itemId}\n                    data-selectable-item\n                    data-element-key={element.key}\n                    data-item-id={itemId}\n                    className=\"flex items-center h-6 sm:h-7 rounded px-0.5 sm:px-1 cursor-pointer hover:bg-muted/50 transition-colors touch-manipulation\"\n                  >\n                    <div className=\"w-1/4 sm:w-1/5 pr-1.5 sm:pr-3 text-[0.625rem] sm:text-[0.8125rem] font-medium overflow-hidden text-ellipsis whitespace-nowrap text-foreground\">\n                      {task.name}\n                    </div>\n\n                    <div\n                      className={cn(\n                        \"flex-1 relative h-full rounded\",\n                        isMilestone ? \"bg-transparent\" : \"bg-muted/30\",\n                      )}\n                    >\n                      {isMilestone ? (\n                        <div\n                          className=\"absolute w-3 h-3 sm:w-4 sm:h-4 z-10 border-2 border-white shadow-sm rotate-45 -translate-x-1/2 origin-left\"\n                          style={{\n                            left: `${paddingLeft}%`,\n                            backgroundColor: task.color || \"#eab308\",\n                          }}\n                          title={`Milestone: ${task.name}`}\n                        />\n                      ) : (\n                        <div\n                          className=\"absolute h-full rounded opacity-90 flex items-center pl-1.5 sm:pl-2 text-white text-[0.5rem] sm:text-[0.625rem] overflow-hidden\"\n                          style={{\n                            left: `${paddingLeft}%`,\n                            width: `${width}%`,\n                            backgroundColor: task.color || \"var(--primary)\",\n                          }}\n                          title={`${task.name}: ${task.progress}%`}\n                        >\n                          {width > 10 && (\n                            <span className=\"z-[2]\">{task.progress}%</span>\n                          )}\n\n                          <div\n                            className=\"absolute left-0 top-0 bottom-0 bg-white opacity-20\"\n                            style={{\n                              width: `${task.progress}%`,\n                            }}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {children && <div className=\"mt-4 sm:mt-6 space-y-3 sm:space-y-4\">{children}</div>}\n    </div>\n  );\n});\n","import { z } from \"zod\";\nimport { ganttTaskSchema } from \"../../utils/shared-schemas\";\n\n/**\n * Gantt component schema definition\n */\nexport const GanttPropsSchema = z.object({\n  title: z.string().nullable(),\n  tasks: z.array(ganttTaskSchema).min(1).describe(\"Tasks (REQUIRED, min 1)\"),\n  lock: z.boolean().nullable(),\n});\n\n/** Type inference for Gantt props */\nexport type GanttProps = z.infer<typeof GanttPropsSchema>;\n\n/**\n * Gantt component definition for catalog registration\n */\nexport const GanttDefinition = {\n  name: \"Gantt\" as const,\n  props: GanttPropsSchema,\n  description: \"Gantt chart for project timelines and dependencies.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useState, useEffect } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { Send, User } from \"lucide-react\";\n\ntype AgentParticipant = {\n  id: string;\n  name: string;\n  role: string;\n  avatar?: string;\n  color?: string;\n};\n\ntype MessageItem = {\n  id: string;\n  sender: string; // ID or Name\n  avatar?: string;\n  content: string;\n  timestamp: string;\n  status?: \"read\" | \"unread\";\n  isOwn?: boolean;\n  participantId?: string; // Link to specific agent\n};\n\nexport const Message = memo(function Message({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    messages: initialMessages,\n    participants = [],\n    activeAgents = [],\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    messages?: MessageItem[] | null;\n    participants?: AgentParticipant[];\n    activeAgents?: string[]; // IDs of agents currently \"typing\"\n    lock?: boolean;\n  };\n\n  const [messages, setMessages] = useState<MessageItem[]>(\n    initialMessages || [],\n  );\n\n  useEffect(() => {\n    if (initialMessages) {\n      setMessages(initialMessages);\n    }\n  }, [initialMessages]);\n  const [replyText, setReplyText] = useState(\"\");\n\n  const handleSendReply = () => {\n    if (lock || !replyText.trim()) return;\n\n    const newMessage: MessageItem = {\n      id: crypto.randomUUID(),\n      sender: \"Me\",\n      content: replyText,\n      timestamp: \"Just now\",\n      isOwn: true,\n      status: \"read\",\n    };\n\n    setMessages([...messages, newMessage]);\n    setReplyText(\"\");\n  };\n\n  const getParticipant = (id?: string) => participants.find((p) => p.id === id);\n\n  return (\n    <div className=\"flex flex-col h-full max-h-[500px] sm:max-h-[600px] overflow-hidden rounded-xl sm:rounded-2xl border border-border/50 glass-panel bg-card/80 backdrop-blur-md shadow-lg\">\n      {title && (\n        <div className=\"flex items-center justify-between border-b border-border px-3 sm:px-4 py-2.5 sm:py-3 bg-muted/20 gap-2\">\n          <div className=\"font-semibold text-sm sm:text-base truncate\">{title}</div>\n\n          {/* Participants Avatars */}\n          {participants.length > 0 && (\n            <div className=\"flex -space-x-1.5 sm:-space-x-2 shrink-0\">\n              {participants.slice(0, 5).map((p) => (\n                <div\n                  key={p.id}\n                  className=\"relative flex h-6 w-6 sm:h-7 sm:w-7 items-center justify-center rounded-full border-2 border-background text-[0.5rem] sm:text-[0.625rem] font-medium text-white shadow-sm ring-1 ring-black/5 bg-[var(--avatar-bg,var(--primary))]\"\n                  style={\n                    {\n                      \"--avatar-bg\": p.color,\n                    } as React.CSSProperties\n                  }\n                  title={`${p.name} (${p.role})`}\n                >\n                  {p.avatar ? (\n                    <img\n                      src={p.avatar}\n                      alt={p.name}\n                      className=\"h-full w-full rounded-full object-cover\"\n                    />\n                  ) : (\n                    <span>{p.name[0]}</span>\n                  )}\n                </div>\n              ))}\n              {participants.length > 5 && (\n                <div className=\"relative flex h-6 w-6 sm:h-7 sm:w-7 items-center justify-center rounded-full border-2 border-background text-[0.5rem] sm:text-[0.625rem] font-medium text-white shadow-sm bg-zinc-600\">\n                  +{participants.length - 5}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex flex-1 flex-col gap-3 sm:gap-4 overflow-y-auto p-3 sm:p-4 bg-muted/5 min-h-0 touch-pan-y\">\n        {messages.map((msg) => {\n          const participant = getParticipant(msg.participantId);\n          const senderName = participant ? participant.name : msg.sender;\n          const role = participant?.role;\n\n          return (\n            <div\n              key={msg.id}\n              data-selectable-item\n              data-element-key={element.key}\n              data-item-id={msg.id}\n              className={cn(\n                \"flex flex-col max-w-[90%] sm:max-w-[85%] cursor-pointer group transition-all\",\n                msg.isOwn ? \"self-end items-end\" : \"self-start items-start\",\n              )}\n            >\n              <div\n                className={cn(\n                  \"flex items-center gap-1.5 sm:gap-2 mb-0.5 sm:mb-1 text-[0.625rem] sm:text-xs text-muted-foreground\",\n                  msg.isOwn ? \"flex-row-reverse\" : \"flex-row\",\n                )}\n              >\n                <span className=\"font-semibold text-foreground truncate max-w-[8rem] sm:max-w-none\">\n                  {senderName}\n                </span>\n                {role && (\n                  <span className=\"px-1 sm:px-1.5 py-0.5 rounded text-[0.5rem] sm:text-[0.625rem] bg-secondary text-secondary-foreground border border-border/50 hidden sm:inline\">\n                    {role}\n                  </span>\n                )}\n                <span className=\"opacity-70 text-[0.5rem] sm:text-[0.625rem]\">{msg.timestamp}</span>\n              </div>\n\n              <div\n                className={cn(\n                  \"relative px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm shadow-sm transition-all duration-200 border\",\n                  msg.isOwn\n                    ? \"rounded-2xl rounded-tr-md bg-primary text-primary-foreground border-primary/20 bg-gradient-to-br from-blue-600 to-indigo-600\"\n                    : \"rounded-2xl rounded-tl-md bg-card text-card-foreground border-border break-words\",\n                  !msg.isOwn &&\n                    participant?.color &&\n                    \"border-l-[3px] border-l-[var(--msg-border)]\",\n                )}\n                style={\n                  {\n                    \"--msg-border\": participant?.color,\n                  } as React.CSSProperties\n                }\n              >\n                {msg.content}\n              </div>\n            </div>\n          );\n        })}\n\n        {/* Active Agents \"Thinking\" Indicator */}\n        {activeAgents.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 sm:gap-3 mt-1 sm:mt-2 px-1 sm:px-2\">\n            {activeAgents.map((agentId) => {\n              const p = getParticipant(agentId);\n              if (!p) return null;\n              return (\n                <div\n                  key={agentId}\n                  className=\"flex items-center gap-1.5 sm:gap-2 text-[0.625rem] sm:text-xs text-muted-foreground animate-pulse\"\n                >\n                  <div\n                    className=\"h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-[var(--agent-color,currentColor)]\"\n                    style={\n                      {\n                        \"--agent-color\": p.color,\n                      } as React.CSSProperties\n                    }\n                  />\n                  <span>{p.name} is typing...</span>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {messages.length === 0 && activeAgents.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground opacity-50 space-y-1.5 sm:space-y-2\">\n            <div className=\"p-3 sm:p-4 rounded-full bg-muted/50\">\n              <User className=\"h-6 w-6 sm:h-8 sm:w-8 opacity-50\" />\n            </div>\n            <p className=\"text-xs sm:text-sm\">No messages yet</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"p-2.5 sm:p-4 border-t border-border bg-background flex gap-2 items-end safe-area-bottom\">\n        <textarea\n          data-interactive\n          value={replyText}\n          onChange={(e) => setReplyText(e.target.value)}\n          placeholder={lock ? \"Conversation locked\" : \"Type a message...\"}\n          disabled={lock}\n          className={cn(\n            \"flex-1 min-h-[2.75rem] max-h-[6rem] sm:max-h-[7.5rem] rounded-lg border border-input bg-transparent px-3 py-2 sm:py-2.5 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 resize-none\",\n            lock && \"bg-muted text-muted-foreground\",\n          )}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              handleSendReply();\n            }\n          }}\n        />\n        <button\n          data-interactive\n          onClick={handleSendReply}\n          disabled={lock || !replyText.trim()}\n          className={cn(\n            \"inline-flex items-center justify-center shrink-0 rounded-lg h-[2.75rem] w-[2.75rem] text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 touch-manipulation\",\n            !replyText.trim()\n              ? \"bg-muted text-muted-foreground\"\n              : \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm\",\n          )}\n        >\n          <Send className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n        </button>\n      </div>\n      {children}\n    </div>\n  );\n});\n","import { z } from \"zod\";\nimport {\n  messageItemSchema,\n  participantSchema,\n} from \"../../utils/shared-schemas\";\n\n/**\n * Message component schema definition\n */\nexport const MessagePropsSchema = z.object({\n  title: z.string().nullable(),\n  messages: z.array(messageItemSchema),\n  participants: z.array(participantSchema).nullable(),\n  activeAgents: z\n    .array(z.string())\n    .nullable()\n    .describe(\"IDs of agents currently typing\"),\n  lock: z.boolean().nullable(),\n});\n\n/** Type inference for Message props */\nexport type MessageProps = z.infer<typeof MessagePropsSchema>;\n\n/**\n * Message component definition for catalog registration\n */\nexport const MessageDefinition = {\n  name: \"Message\" as const,\n  props: MessagePropsSchema,\n  description: \"Chat interface for multi-agent conversations.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useState, useEffect, useRef, useCallback } from \"react\";\nimport { createLogger } from \"@onegenui/utils\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { PenSquare, Mail } from \"lucide-react\";\nimport {\n  ComposeModal,\n  EmailList,\n  EmailDetail,\n  type EmailItem,\n  type DraftEmail,\n  type ComposeMode,\n} from \"./components\";\n\n// =============================================================================\n// Logger\n// =============================================================================\n\nconst log = createLogger({ prefix: \"email\" });\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const Email = memo(function Email({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    description,\n    emails: initialEmails,\n    lock = false,\n    onSendEmail,\n  } = element.props as {\n    title?: string | null;\n    description?: string | null;\n    emails?: EmailItem[] | null;\n    lock?: boolean;\n    onSendEmail?: (draft: DraftEmail) => Promise<void>;\n  };\n\n  const isInitialMount = useRef(true);\n  const [localEmails, setLocalEmails] = useState<EmailItem[]>([]);\n  const [selectedEmailId, setSelectedEmailId] = useState<string | null>(null);\n  const [composeMode, setComposeMode] = useState<ComposeMode>(\"none\");\n  const [hoveredId, setHoveredId] = useState<string | null>(null);\n\n  // Sync from props\n  const emailsKey = JSON.stringify(initialEmails);\n\n  useEffect(() => {\n    const newEmails = initialEmails || [];\n    setLocalEmails(newEmails);\n\n    if (newEmails.length === 1 && isInitialMount.current) {\n      setSelectedEmailId(newEmails[0]?.id ?? null);\n    }\n\n    isInitialMount.current = false;\n  }, [emailsKey]);\n\n  const emails = localEmails;\n  const selectedEmail = emails.find((e) => e.id === selectedEmailId);\n\n  // Handlers\n  const handleDelete = useCallback(\n    (id: string, e?: React.MouseEvent) => {\n      e?.stopPropagation();\n      if (lock) return;\n      setLocalEmails((prev) => prev.filter((email) => email.id !== id));\n      if (selectedEmailId === id) setSelectedEmailId(null);\n    },\n    [lock, selectedEmailId],\n  );\n\n  const handleArchive = useCallback(\n    (id: string, e?: React.MouseEvent) => {\n      e?.stopPropagation();\n      if (lock) return;\n      setLocalEmails((prev) => prev.filter((email) => email.id !== id));\n      if (selectedEmailId === id) setSelectedEmailId(null);\n    },\n    [lock, selectedEmailId],\n  );\n\n  const handleMarkAsRead = useCallback((id: string) => {\n    setLocalEmails((prev) =>\n      prev.map((email) => (email.id === id ? { ...email, read: true } : email)),\n    );\n  }, []);\n\n  const handleToggleStar = useCallback((id: string, e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    setLocalEmails((prev) =>\n      prev.map((email) =>\n        email.id === id ? { ...email, starred: !email.starred } : email,\n      ),\n    );\n  }, []);\n\n  const handleSelectEmail = useCallback(\n    (id: string) => {\n      setSelectedEmailId(id);\n      handleMarkAsRead(id);\n    },\n    [handleMarkAsRead],\n  );\n\n  const handleSendEmail = useCallback(\n    async (draft: DraftEmail) => {\n      log.debug(\"[Email] Sending email:\", draft);\n      if (onSendEmail) {\n        await onSendEmail(draft);\n      } else {\n        log.debug(\"[Email] Email sent (simulated):\", draft);\n      }\n    },\n    [onSendEmail],\n  );\n\n  // ==========================================================================\n  // Main Render\n  // ==========================================================================\n\n  return (\n    <div className=\"glass-panel w-full min-h-[300px] sm:min-h-[400px] h-full flex flex-col rounded-xl sm:rounded-2xl border border-white/10 overflow-hidden relative shadow-2xl\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center px-3 sm:px-4 lg:px-5 py-3 sm:py-4 border-b border-border/40 bg-black/20 gap-2\">\n        <div className=\"flex items-center gap-2 sm:gap-3 min-w-0\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg shadow-red-500/20 text-white shrink-0\">\n            <Mail className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n          </div>\n          <div className=\"min-w-0\">\n            <h3 className=\"m-0 text-sm sm:text-base font-bold leading-tight truncate\">\n              {title || \"Gmail\"}\n            </h3>\n            {description && (\n              <div className=\"text-[0.625rem] sm:text-xs text-muted-foreground mt-0.5 truncate\">\n                {description}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2 sm:gap-3 shrink-0\">\n          <div className=\"hidden sm:block px-2 sm:px-3 py-0.5 sm:py-1 rounded-full bg-muted/30 text-[0.625rem] sm:text-xs font-medium text-muted-foreground border border-white/5\">\n            {emails.filter((e) => !e.read).length} non lett\n            {emails.filter((e) => !e.read).length === 1 ? \"a\" : \"e\"}\n          </div>\n\n          <button\n            onClick={() => setComposeMode(\"new\")}\n            className=\"flex items-center gap-1.5 sm:gap-2 pl-2 sm:pl-3 pr-3 sm:pr-4 py-1.5 sm:py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs sm:text-sm font-medium transition-all shadow-lg shadow-blue-500/20 touch-manipulation min-h-[2.5rem]\"\n          >\n            <PenSquare className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            <span className=\"hidden sm:inline\">Scrivi</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {selectedEmail ? (\n          <EmailDetail\n            email={selectedEmail}\n            lock={lock}\n            onBack={() => setSelectedEmailId(null)}\n            onCompose={setComposeMode}\n            onArchive={handleArchive}\n            onDelete={handleDelete}\n            onToggleStar={handleToggleStar}\n          />\n        ) : (\n          <EmailList\n            emails={emails}\n            elementKey={element.key}\n            hoveredId={hoveredId}\n            onSelectEmail={handleSelectEmail}\n            onToggleStar={handleToggleStar}\n            onHoverEmail={setHoveredId}\n          />\n        )}\n      </div>\n\n      {/* Compose Modal */}\n      {composeMode !== \"none\" && (\n        <ComposeModal\n          mode={composeMode}\n          originalEmail={selectedEmail}\n          onClose={() => setComposeMode(\"none\")}\n          onSend={handleSendEmail}\n        />\n      )}\n      {children}\n    </div>\n  );\n});\n","export function UnreadDot() {\n  return (\n    <div className=\"w-2.5 h-2.5 rounded-full shrink-0 shadow-[0_0_8px_rgba(234,67,53,0.5)] bg-gradient-to-br from-red-500 to-red-700\" />\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Send, X, Paperclip } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { EmailItem, DraftEmail, ComposeMode } from \"./types\";\nimport { extractEmailAddress } from \"./types\";\n\ninterface ComposeModalProps {\n  mode: ComposeMode;\n  originalEmail?: EmailItem | null;\n  onClose: () => void;\n  onSend: (draft: DraftEmail) => void;\n}\n\nexport function ComposeModal({\n  mode,\n  originalEmail,\n  onClose,\n  onSend,\n}: ComposeModalProps) {\n  const [to, setTo] = useState(\"\");\n  const [cc, setCc] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [sending, setSending] = useState(false);\n\n  useEffect(() => {\n    if (mode === \"reply\" && originalEmail) {\n      setTo(extractEmailAddress(originalEmail.from));\n      setSubject(`Re: ${originalEmail.subject.replace(/^Re:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Original Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    } else if (mode === \"replyAll\" && originalEmail) {\n      setTo(extractEmailAddress(originalEmail.from));\n      setCc(originalEmail.cc || \"\");\n      setSubject(`Re: ${originalEmail.subject.replace(/^Re:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Original Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    } else if (mode === \"forward\" && originalEmail) {\n      setTo(\"\");\n      setSubject(`Fwd: ${originalEmail.subject.replace(/^Fwd:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Forwarded Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    }\n  }, [mode, originalEmail]);\n\n  const handleSend = async () => {\n    if (!to.trim()) return;\n    setSending(true);\n\n    const draft: DraftEmail = {\n      to: to.trim(),\n      cc: cc.trim() || undefined,\n      subject: subject.trim(),\n      body: body.trim(),\n      inReplyTo: originalEmail?.id,\n      threadId: originalEmail?.threadId || undefined,\n    };\n\n    try {\n      await onSend(draft);\n      onClose();\n    } catch (error) {\n      console.error(\"Failed to send email:\", error);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const modeTitle = {\n    new: \"Nuovo messaggio\",\n    reply: \"Rispondi\",\n    replyAll: \"Rispondi a tutti\",\n    forward: \"Inoltra\",\n    none: \"\",\n  }[mode];\n\n  return (\n    <div className=\"absolute inset-0 z-50 flex items-end sm:items-center justify-center bg-black/80 backdrop-blur-sm p-0 sm:p-4\">\n      <div\n        className=\"flex flex-col w-full sm:max-w-[600px] max-h-[95vh] sm:max-h-[90vh] bg-card border-t sm:border border-border rounded-t-2xl sm:rounded-xl shadow-2xl overflow-hidden\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex justify-between items-center px-4 sm:px-5 py-3 sm:py-4 border-b border-border bg-muted/20\">\n          <span className=\"font-semibold text-sm sm:text-base\">{modeTitle}</span>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <div className=\"flex flex-col gap-2 sm:gap-3 p-3 sm:p-5 flex-1 overflow-y-auto touch-pan-y\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3\">\n            <label className=\"text-xs sm:text-sm text-muted-foreground sm:w-10\">A:</label>\n            <input\n              type=\"email\"\n              value={to}\n              onChange={(e) => setTo(e.target.value)}\n              placeholder=\"destinatario@email.com\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-3 sm:px-4 py-2.5 sm:py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all min-h-[2.75rem]\"\n              autoFocus\n            />\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3\">\n            <label className=\"text-xs sm:text-sm text-muted-foreground sm:w-10\">Cc:</label>\n            <input\n              type=\"email\"\n              value={cc}\n              onChange={(e) => setCc(e.target.value)}\n              placeholder=\"cc@email.com\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-3 sm:px-4 py-2.5 sm:py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all min-h-[2.75rem]\"\n            />\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3\">\n            <label className=\"text-xs sm:text-sm text-muted-foreground sm:w-10\">Ogg:</label>\n            <input\n              type=\"text\"\n              value={subject}\n              onChange={(e) => setSubject(e.target.value)}\n              placeholder=\"Oggetto\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-3 sm:px-4 py-2.5 sm:py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all min-h-[2.75rem]\"\n            />\n          </div>\n\n          <textarea\n            value={body}\n            onChange={(e) => setBody(e.target.value)}\n            placeholder=\"Scrivi il tuo messaggio...\"\n            className=\"flex-1 min-h-[150px] sm:min-h-[200px] resize-y bg-muted/20 border border-border rounded-lg px-3 sm:px-4 py-2.5 sm:py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all leading-relaxed font-sans\"\n          />\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-between items-center px-3 sm:px-5 py-3 sm:py-4 border-t border-border bg-muted/20 safe-area-bottom\">\n          <button\n            className=\"p-2.5 rounded-lg text-muted-foreground hover:bg-muted hover:text-foreground transition-colors opacity-50 cursor-pointer touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\"\n            title=\"Allega file\"\n          >\n            <Paperclip className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n\n          <button\n            onClick={handleSend}\n            disabled={!to.trim() || sending}\n            className={cn(\n              \"flex items-center gap-1.5 sm:gap-2 px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg font-medium text-xs sm:text-sm transition-all shadow-lg shadow-blue-500/20 touch-manipulation min-h-[2.5rem]\",\n              !to.trim() || sending\n                ? \"bg-slate-700 text-slate-400 cursor-not-allowed opacity-50\"\n                : \"bg-blue-600 hover:bg-blue-500 text-white cursor-pointer hover:shadow-blue-500/30\",\n            )}\n          >\n            <Send className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n            {sending ? \"Invio...\" : \"Invia\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Email types and utilities\n */\n\nexport interface EmailItem {\n  id: string;\n  from: string;\n  subject: string;\n  body: string;\n  date: string;\n  read?: boolean | null;\n  to?: string | null;\n  cc?: string | null;\n  avatar?: string | null;\n  attachments?: Array<{ name: string; size?: string; url?: string }> | null;\n  threadId?: string | null;\n  starred?: boolean | null;\n  labels?: string[] | null;\n}\n\nexport interface DraftEmail {\n  to: string;\n  cc?: string;\n  bcc?: string;\n  subject: string;\n  body: string;\n  attachments?: Array<{ name: string; size?: string }>;\n  inReplyTo?: string;\n  threadId?: string;\n}\n\nexport type ComposeMode = \"none\" | \"new\" | \"reply\" | \"replyAll\" | \"forward\";\n\nexport function getPreview(body: string, maxLength = 120): string {\n  const cleaned = body\n    .replace(/<[^>]*>/g, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim();\n  if (cleaned.length <= maxLength) return cleaned;\n  return cleaned.substring(0, maxLength) + \"...\";\n}\n\nexport function getInitials(name: string | undefined | null): string {\n  if (!name) return \"?\";\n  // Handle email format \"Name <email@example.com>\"\n  const match = name.match(/^([^<]+)/);\n  const displayName = match?.[1]?.trim() ?? name;\n  return (\n    displayName\n      .split(\" \")\n      .slice(0, 2)\n      .map((n) => n[0] || \"\")\n      .join(\"\")\n      .toUpperCase() || \"?\"\n  );\n}\n\nexport function extractEmailAddress(from: string): string {\n  const match = from.match(/<([^>]+)>/);\n  return match?.[1] ?? from;\n}\n\nexport function formatDate(dateStr: string): string {\n  try {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) {\n      return date.toLocaleTimeString(\"it-IT\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    } else if (diffDays === 1) {\n      return \"Ieri\";\n    } else if (diffDays < 7) {\n      return date.toLocaleDateString(\"it-IT\", { weekday: \"short\" });\n    } else {\n      return date.toLocaleDateString(\"it-IT\", {\n        day: \"numeric\",\n        month: \"short\",\n      });\n    }\n  } catch {\n    return dateStr;\n  }\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Star, Paperclip } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { UnreadDot } from \"./unread-dot\";\nimport { type EmailItem, getPreview, getInitials, formatDate } from \"./types\";\n\ninterface EmailListProps {\n  emails: EmailItem[];\n  elementKey: string;\n  hoveredId: string | null;\n  onSelectEmail: (id: string) => void;\n  onToggleStar: (id: string, e?: React.MouseEvent) => void;\n  onHoverEmail: (id: string | null) => void;\n}\n\nexport const EmailList = memo(function EmailList({\n  emails,\n  elementKey,\n  hoveredId,\n  onSelectEmail,\n  onToggleStar,\n  onHoverEmail,\n}: EmailListProps) {\n  if (emails.length === 0) {\n    return (\n      <div className=\"flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-3 bg-background/50 touch-pan-y\">\n        <div className=\"flex flex-col items-center justify-center py-12 sm:py-16 text-foreground/60 text-center\">\n          <div className=\"text-4xl sm:text-5xl mb-3 sm:mb-4 opacity-50\">📭</div>\n          <div className=\"text-base sm:text-lg font-semibold mb-1 text-foreground\">\n            Nessuna email\n          </div>\n          <div className=\"text-xs sm:text-sm text-foreground/50\">La tua inbox è vuota</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-3 bg-background/50 touch-pan-y\">\n      {emails.map((email) => (\n        <div\n          key={email.id}\n          data-selectable-item\n          data-element-key={elementKey}\n          data-item-id={email.id}\n          onClick={() => onSelectEmail(email.id)}\n          onMouseEnter={() => onHoverEmail(email.id)}\n          onMouseLeave={() => onHoverEmail(null)}\n          className={cn(\n            \"group relative border border-border/50 p-3 sm:p-4 cursor-pointer transition-all duration-200 rounded-lg sm:rounded-xl mb-2 bg-card/80 shadow-sm touch-manipulation\",\n            hoveredId === email.id\n              ? \"bg-card border-primary/30 shadow-md\"\n              : !email.read\n                ? \"bg-card border-red-500/30\"\n                : \"bg-card/60\",\n          )}\n        >\n          <div className=\"flex items-start gap-2.5 sm:gap-3.5\">\n            {/* Unread indicator */}\n            <div className=\"w-2 sm:w-2.5 mt-2 flex justify-center shrink-0\">\n              {!email.read && <UnreadDot />}\n            </div>\n\n            {/* Avatar */}\n            <div className=\"w-9 h-9 sm:w-[42px] sm:h-[42px] rounded-full flex items-center justify-center shrink-0 text-xs sm:text-sm font-semibold text-red-500 bg-red-500/10 border border-red-500/20 shadow-sm\">\n              {getInitials(email.from)}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex justify-between items-center mb-0.5 sm:mb-1 gap-2\">\n                <span\n                  className={cn(\n                    \"text-xs sm:text-sm truncate\",\n                    email.read\n                      ? \"font-medium text-foreground/90\"\n                      : \"font-bold text-foreground\",\n                  )}\n                >\n                  {email.from?.split(\"<\")[0]?.trim() || \"Mittente sconosciuto\"}\n                </span>\n\n                <div className=\"flex items-center gap-1.5 sm:gap-2 shrink-0\">\n                  <button\n                    onClick={(e) => onToggleStar(email.id, e)}\n                    className={cn(\n                      \"p-1.5 sm:p-1 rounded-full transition-colors sm:opacity-0 sm:group-hover:opacity-100 focus:opacity-100 touch-manipulation min-h-[2rem] min-w-[2rem] sm:min-h-0 sm:min-w-0 flex items-center justify-center\",\n                      email.starred\n                        ? \"text-yellow-400 opacity-100\"\n                        : \"text-muted-foreground hover:bg-muted\",\n                    )}\n                  >\n                    <Star\n                      className=\"w-3.5 h-3.5 sm:w-3.5 sm:h-3.5\"\n                      fill={email.starred ? \"currentColor\" : \"none\"}\n                    />\n                  </button>\n                  <span className=\"text-[0.625rem] sm:text-xs text-muted-foreground whitespace-nowrap\">\n                    {formatDate(email.date)}\n                  </span>\n                </div>\n              </div>\n\n              <div\n                className={cn(\n                  \"text-xs sm:text-sm mb-1 sm:mb-1.5 truncate\",\n                  email.read\n                    ? \"font-normal text-foreground/80\"\n                    : \"font-semibold text-foreground\",\n                )}\n              >\n                {email.subject || \"(Nessun oggetto)\"}\n              </div>\n\n              <div className=\"text-[0.625rem] sm:text-xs text-foreground/50 truncate leading-relaxed\">\n                {getPreview(email.body)}\n              </div>\n\n              {email.attachments && email.attachments.length > 0 && (\n                <div className=\"flex items-center gap-1.5 mt-1.5 sm:mt-2\">\n                  <div className=\"bg-muted/50 px-1.5 sm:px-2 py-0.5 rounded text-[0.5rem] sm:text-[0.625rem] text-muted-foreground flex items-center gap-1 border border-border/50\">\n                    <Paperclip className=\"w-2.5 h-2.5 sm:w-2.5 sm:h-2.5\" />\n                    <span>\n                      {email.attachments.length} allegat\n                      {email.attachments.length === 1 ? \"o\" : \"i\"}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport {\n  ArrowLeft,\n  Archive,\n  Trash2,\n  Reply,\n  ReplyAll,\n  Forward,\n  Star,\n  Paperclip,\n} from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport {\n  type EmailItem,\n  type ComposeMode,\n  getInitials,\n  extractEmailAddress,\n} from \"./types\";\n\ninterface EmailDetailProps {\n  email: EmailItem;\n  lock: boolean;\n  onBack: () => void;\n  onCompose: (mode: ComposeMode) => void;\n  onArchive: (id: string, e?: React.MouseEvent) => void;\n  onDelete: (id: string, e?: React.MouseEvent) => void;\n  onToggleStar: (id: string, e?: React.MouseEvent) => void;\n}\n\nexport const EmailDetail = memo(function EmailDetail({\n  email,\n  lock,\n  onBack,\n  onCompose,\n  onArchive,\n  onDelete,\n  onToggleStar,\n}: EmailDetailProps) {\n  return (\n    <div className=\"flex flex-col flex-1 bg-background/30 overflow-hidden\">\n      {/* Header with actions */}\n      <div className=\"flex items-center gap-1.5 sm:gap-2 p-2.5 sm:p-3 border-b border-border bg-muted/10\">\n        <button\n          onClick={onBack}\n          className=\"p-2 sm:p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\"\n          title=\"Torna alla lista\"\n        >\n          <ArrowLeft className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n        </button>\n\n        <div className=\"flex-1\" />\n\n        {/* Action buttons */}\n        <div className=\"flex items-center gap-0.5 sm:gap-1\">\n          <button\n            onClick={() => onCompose(\"reply\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\"\n            title=\"Rispondi\"\n          >\n            <Reply className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n          <button\n            onClick={() => onCompose(\"replyAll\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] hidden sm:flex items-center justify-center\"\n            title=\"Rispondi a tutti\"\n          >\n            <ReplyAll className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n          <button\n            onClick={() => onCompose(\"forward\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\"\n            title=\"Inoltra\"\n          >\n            <Forward className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n        </div>\n\n        <div className=\"w-px h-4 sm:h-5 bg-border mx-0.5 sm:mx-1\" />\n\n        <div className=\"flex items-center gap-0.5 sm:gap-1\">\n          <button\n            onClick={(e) => onArchive(email.id, e)}\n            disabled={lock}\n            className={cn(\n              \"p-2 rounded-lg transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\",\n              lock\n                ? \"text-muted-foreground/30 cursor-not-allowed\"\n                : \"text-muted-foreground hover:bg-muted hover:text-foreground cursor-pointer\",\n            )}\n            title=\"Archivia\"\n          >\n            <Archive className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n          <button\n            onClick={(e) => onDelete(email.id, e)}\n            disabled={lock}\n            className={cn(\n              \"p-2 rounded-lg transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center\",\n              lock\n                ? \"text-muted-foreground/30 cursor-not-allowed\"\n                : \"text-muted-foreground hover:bg-red-500/10 hover:text-red-500 cursor-pointer\",\n            )}\n            title=\"Elimina\"\n          >\n            <Trash2 className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Email content */}\n      <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 md:p-8 touch-pan-y\">\n        {/* Subject */}\n        <h1 className=\"text-lg sm:text-xl md:text-2xl font-bold mb-4 sm:mb-6 text-foreground leading-tight\">\n          {email.subject || \"(Nessun oggetto)\"}\n        </h1>\n\n        {/* Sender info */}\n        <div className=\"flex items-start gap-3 sm:gap-4 mb-6 sm:mb-8 pb-4 sm:pb-6 border-b border-border/60\">\n          <div className=\"w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center text-sm sm:text-base font-bold text-red-500 bg-red-500/10 border border-red-500/20 shadow-sm shrink-0\">\n            {getInitials(email.from)}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center gap-0.5 sm:gap-2 mb-1\">\n              <span className=\"font-semibold text-sm sm:text-base text-foreground truncate\">\n                {email.from?.split(\"<\")[0]?.trim() || \"Mittente sconosciuto\"}\n              </span>\n              <span className=\"text-xs sm:text-sm text-muted-foreground truncate\">\n                {extractEmailAddress(email.from)}\n              </span>\n            </div>\n\n            <div className=\"text-[0.625rem] sm:text-xs text-muted-foreground flex flex-wrap gap-x-2 gap-y-1 items-center\">\n              <span>{email.date}</span>\n              {email.to && (\n                <>\n                  <span className=\"w-1 h-1 rounded-full bg-border\" />\n                  <span className=\"truncate\">A: {email.to}</span>\n                </>\n              )}\n            </div>\n          </div>\n\n          <button\n            onClick={(e) => onToggleStar(email.id, e)}\n            className={cn(\n              \"p-2 rounded-full hover:bg-muted transition-colors touch-manipulation min-h-[2.5rem] min-w-[2.5rem] flex items-center justify-center shrink-0\",\n              email.starred ? \"text-yellow-400\" : \"text-muted-foreground\",\n            )}\n          >\n            <Star className=\"w-4 h-4 sm:w-[1.125rem] sm:h-[1.125rem]\" fill={email.starred ? \"currentColor\" : \"none\"} />\n          </button>\n        </div>\n\n        {/* Body */}\n        <div className=\"text-sm sm:text-[15px] leading-relaxed text-foreground/90 whitespace-pre-wrap font-sans\">\n          {email.body || \"(Nessun contenuto)\"}\n        </div>\n\n        {/* Attachments */}\n        {email.attachments && email.attachments.length > 0 && (\n          <div className=\"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-border/60\">\n            <div className=\"text-[0.625rem] sm:text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-2 sm:mb-3\">\n              {email.attachments.length} Allegat\n              {email.attachments.length === 1 ? \"o\" : \"i\"}\n            </div>\n\n            <div className=\"flex flex-wrap gap-2\">\n              {email.attachments.map((att, i) => (\n                <div\n                  key={i}\n                  className=\"group flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-muted/30 border border-border hover:border-primary/30 rounded-lg cursor-pointer transition-all hover:bg-muted/60 touch-manipulation\"\n                >\n                  <div className=\"w-7 h-7 sm:w-8 sm:h-8 rounded bg-background flex items-center justify-center text-muted-foreground shrink-0\">\n                    <Paperclip className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\n                  </div>\n                  <div className=\"flex flex-col min-w-0\">\n                    <span className=\"text-[0.625rem] sm:text-xs font-medium text-foreground group-hover:text-primary transition-colors truncate\">\n                      {att.name}\n                    </span>\n                    {att.size && (\n                      <span className=\"text-[0.5rem] sm:text-[0.625rem] text-muted-foreground\">\n                        {att.size}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Quick reply bar */}\n      <div className=\"p-3 sm:p-4 border-t border-border bg-muted/10\">\n        <button\n          onClick={() => onCompose(\"reply\")}\n          className=\"w-full flex items-center justify-center gap-2 p-2.5 sm:p-3 rounded-lg sm:rounded-xl border border-border bg-background hover:bg-muted/50 transition-all text-xs sm:text-sm font-medium text-muted-foreground hover:text-foreground hover:border-primary/30 group touch-manipulation min-h-[2.75rem]\"\n        >\n          <Reply\n            className=\"w-3.5 h-3.5 sm:w-4 sm:h-4 group-hover:text-primary transition-colors\"\n          />\n          Rispondi\n        </button>\n      </div>\n    </div>\n  );\n});\n","import { z } from \"zod\";\nimport { emailItemSchema } from \"../../utils/shared-schemas\";\n\n/**\n * Email component schema definition\n */\nexport const EmailPropsSchema = z.object({\n  title: z.string().nullable().describe(\"Inbox title\"),\n  description: z.string().nullable().describe(\"Inbox description\"),\n  emails: z.array(emailItemSchema).describe(\"List of emails\"),\n  lock: z.boolean().nullable().describe(\"Lock delete/archive actions\"),\n});\n\n/** Type inference for Email props */\nexport type EmailProps = z.infer<typeof EmailPropsSchema>;\n\n/**\n * Email component definition for catalog registration\n */\nexport const EmailDefinition = {\n  name: \"Email\" as const,\n  props: EmailPropsSchema,\n  description: \"Email inbox viewer with list and detail views.\",\n  hasChildren: true,\n};\n","\"use client\";\n\nimport { memo, useState, useCallback } from \"react\";\nimport type { KnowledgeNode } from \"@onegenui/vectorless\";\n\nexport interface DocumentExplorerProps {\n  tree: KnowledgeNode;\n  onNodeSelect?: (node: KnowledgeNode) => void;\n  selectedNodeId?: string;\n  expandedByDefault?: boolean;\n}\n\ninterface TreeNodeProps {\n  node: KnowledgeNode;\n  depth: number;\n  onSelect: (node: KnowledgeNode) => void;\n  selectedId?: string;\n  expanded: Set<string>;\n  onToggle: (id: string) => void;\n}\n\nconst TreeNodeItem = memo(function TreeNodeItem({\n  node,\n  depth,\n  onSelect,\n  selectedId,\n  expanded,\n  onToggle,\n}: TreeNodeProps) {\n  const isExpanded = expanded.has(node.id);\n  const isSelected = selectedId === node.id;\n  const hasChildren = node.children && node.children.length > 0;\n\n  return (\n    <div style={{ marginLeft: `${depth * 0.75}rem` }}>\n      <div\n        onClick={() => onSelect(node)}\n        className={`flex items-center gap-1.5 sm:gap-2 p-2 sm:p-2.5 cursor-pointer rounded-md sm:rounded-lg touch-manipulation ${\n          isSelected \n            ? \"bg-sky-500/10 border-l-2 sm:border-l-3 border-sky-500\" \n            : \"border-l-2 sm:border-l-3 border-transparent hover:bg-white/5\"\n        }`}\n      >\n        {hasChildren && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggle(node.id);\n            }}\n            className=\"border-0 bg-transparent cursor-pointer p-1 text-[0.625rem] sm:text-xs text-zinc-400 hover:text-white touch-manipulation min-h-[1.75rem] min-w-[1.75rem] flex items-center justify-center\"\n          >\n            {isExpanded ? \"v\" : \">\"}\n          </button>\n        )}\n        {!hasChildren && <span className=\"w-3 sm:w-4\" />}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"font-medium text-xs sm:text-sm text-white truncate\">{node.title}</div>\n          <div className=\"text-[0.625rem] sm:text-xs text-zinc-500\">\n            p{node.pageStart}-{node.pageEnd}\n          </div>\n        </div>\n      </div>\n      {hasChildren && isExpanded && (\n        <div>\n          {node.children.map((child) => (\n            <TreeNodeItem\n              key={child.id}\n              node={child}\n              depth={depth + 1}\n              onSelect={onSelect}\n              selectedId={selectedId}\n              expanded={expanded}\n              onToggle={onToggle}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport const DocumentExplorer = memo(function DocumentExplorer({\n  tree,\n  onNodeSelect,\n  selectedNodeId,\n  expandedByDefault = true,\n}: DocumentExplorerProps) {\n  const [expanded, setExpanded] = useState<Set<string>>(() => {\n    if (!expandedByDefault) return new Set();\n    const ids = new Set<string>();\n    const collect = (node: KnowledgeNode) => {\n      ids.add(node.id);\n      node.children?.forEach(collect);\n    };\n    collect(tree);\n    return ids;\n  });\n\n  const handleToggle = useCallback((id: string) => {\n    setExpanded((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      return next;\n    });\n  }, []);\n\n  const handleSelect = useCallback(\n    (node: KnowledgeNode) => {\n      onNodeSelect?.(node);\n    },\n    [onNodeSelect],\n  );\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      <div className=\"px-3 sm:px-4 py-2.5 sm:py-3 bg-zinc-800/50 border-b border-white/10 font-semibold text-sm sm:text-base text-white\">\n        Document Structure\n      </div>\n      <div className=\"p-1.5 sm:p-2 max-h-[350px] sm:max-h-[500px] overflow-y-auto touch-pan-y\">\n        <TreeNodeItem\n          node={tree}\n          depth={0}\n          onSelect={handleSelect}\n          selectedId={selectedNodeId}\n          expanded={expanded}\n          onToggle={handleToggle}\n        />\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport type { Entity, Relation } from \"@onegenui/vectorless\";\n\nexport interface KnowledgeGraphProps {\n  entities: Entity[];\n  relations: Relation[];\n  width?: number;\n  height?: number;\n  onEntityClick?: (entity: Entity) => void;\n}\n\ninterface GraphNode {\n  id: string;\n  label: string;\n  type: string;\n  x: number;\n  y: number;\n}\n\ninterface GraphEdge {\n  source: string;\n  target: string;\n  type: string;\n}\n\nexport const KnowledgeGraph = memo(function KnowledgeGraph({\n  entities,\n  relations,\n  width = 600,\n  height = 400,\n  onEntityClick,\n}: KnowledgeGraphProps) {\n  const { nodes, edges } = useMemo(() => {\n    // Create nodes from entities (top 30)\n    const topEntities = entities.slice(0, 30);\n    const graphNodes: GraphNode[] = topEntities.map((entity, i) => {\n      const angle = (i / topEntities.length) * 2 * Math.PI;\n      const radius = Math.min(width, height) * 0.35;\n      return {\n        id: entity.id,\n        label: entity.value.slice(0, 20),\n        type: entity.type,\n        x: width / 2 + radius * Math.cos(angle),\n        y: height / 2 + radius * Math.sin(angle),\n      };\n    });\n\n    // Create edges from relations\n    const graphEdges: GraphEdge[] = relations\n      .filter(\n        (r) =>\n          graphNodes.some((n) => n.id === r.sourceNodeId) &&\n          graphNodes.some((n) => n.id === r.targetNodeId),\n      )\n      .map((r) => ({\n        source: r.sourceNodeId,\n        target: r.targetNodeId,\n        type: r.type,\n      }));\n\n    return { nodes: graphNodes, edges: graphEdges };\n  }, [entities, relations, width, height]);\n\n  const typeColors: Record<string, string> = {\n    person: \"#10b981\",\n    organization: \"#0ea5e9\",\n    place: \"#f59e0b\",\n    date: \"#a855f7\",\n    concept: \"#f43f5e\",\n    event: \"#06b6d4\",\n    number: \"#78716c\",\n    term: \"#64748b\",\n  };\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      <div className=\"px-3 sm:px-4 py-2.5 sm:py-3 bg-zinc-800/50 border-b border-white/10 font-semibold text-sm sm:text-base text-white\">\n        Knowledge Graph\n      </div>\n      \n      {/* Simplified mobile view: list of connections */}\n      <div className=\"block sm:hidden p-3 max-h-[300px] overflow-y-auto touch-pan-y\">\n        <div className=\"space-y-2\">\n          {nodes.slice(0, 15).map((node) => {\n            const nodeEdges = edges.filter(e => e.source === node.id || e.target === node.id);\n            return (\n              <div\n                key={node.id}\n                className=\"flex items-center gap-2 p-2 rounded-lg bg-zinc-800/30 cursor-pointer touch-manipulation\"\n                onClick={() => {\n                  const entity = entities.find((e) => e.id === node.id);\n                  if (entity) onEntityClick?.(entity);\n                }}\n              >\n                <div\n                  className=\"w-3 h-3 rounded-full shrink-0\"\n                  style={{ backgroundColor: typeColors[node.type] || \"#999\" }}\n                />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-xs text-white truncate\">{node.label}</div>\n                  <div className=\"text-[0.5rem] text-zinc-500\">{node.type} • {nodeEdges.length} connections</div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Desktop: SVG graph */}\n      <div className=\"hidden sm:block overflow-x-auto touch-pan-x\">\n        <svg width={width} height={height} className=\"block min-w-full\">\n          {/* Edges */}\n          {edges.map((edge, i) => {\n            const sourceNode = nodes.find((n) => n.id === edge.source);\n            const targetNode = nodes.find((n) => n.id === edge.target);\n            if (!sourceNode || !targetNode) return null;\n            return (\n              <line\n                key={i}\n                x1={sourceNode.x}\n                y1={sourceNode.y}\n                x2={targetNode.x}\n                y2={targetNode.y}\n                stroke=\"#444\"\n                strokeWidth={1}\n              />\n            );\n          })}\n          {/* Nodes */}\n          {nodes.map((node) => (\n            <g\n              key={node.id}\n              transform={`translate(${node.x}, ${node.y})`}\n              className=\"cursor-pointer\"\n              onClick={() => {\n                const entity = entities.find((e) => e.id === node.id);\n                if (entity) onEntityClick?.(entity);\n              }}\n            >\n              <circle\n                r={20}\n                fill={typeColors[node.type] || \"#999\"}\n                stroke=\"#18181b\"\n                strokeWidth={2}\n              />\n              <text y={30} textAnchor=\"middle\" fontSize={10} fill=\"#a1a1aa\">\n                {node.label}\n              </text>\n            </g>\n          ))}\n        </svg>\n      </div>\n      \n      {/* Legend */}\n      <div className=\"px-2.5 sm:px-4 py-2 sm:py-2.5 border-t border-white/10 flex gap-2 sm:gap-4 flex-wrap text-[0.5rem] sm:text-xs\">\n        {Object.entries(typeColors).map(([type, color]) => (\n          <div key={type} className=\"flex items-center gap-1 sm:gap-1.5\">\n            <div\n              className=\"w-2 h-2 sm:w-3 sm:h-3 rounded-full\"\n              style={{ backgroundColor: color }}\n            />\n            <span className=\"text-zinc-400\">{type}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { Entity } from \"@onegenui/vectorless\";\n\nexport interface DocumentTimelineProps {\n  entities: Entity[];\n  onEntityClick?: (entity: Entity) => void;\n}\n\ninterface TimelineEvent {\n  entity: Entity;\n  year: number;\n  month?: number;\n  day?: number;\n}\n\nfunction parseDate(value: string | undefined): number | null {\n  if (!value) return null;\n  // Try to extract year from various date formats\n  const yearMatch = value.match(/\\b(1[0-9]{3}|2[0-9]{3})\\b/);\n  if (yearMatch?.[1]) return parseInt(yearMatch[1], 10);\n  return null;\n}\n\nexport const DocumentTimeline = memo(function DocumentTimeline({\n  entities,\n  onEntityClick,\n}: DocumentTimelineProps) {\n  // Extract date entities and parse them\n  const dateEntities = entities.filter(\n    (e) => e.type === \"date\" || e.type === \"event\",\n  );\n\n  const events: TimelineEvent[] = dateEntities\n    .map((entity) => {\n      const year = parseDate(entity.value);\n      if (!year) return null;\n      return { entity, year };\n    })\n    .filter((e): e is TimelineEvent => e !== null)\n    .sort((a, b) => a.year - b.year);\n\n  if (events.length === 0) {\n    return (\n      <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl p-3 sm:p-4 text-center text-zinc-400 bg-zinc-900/60 backdrop-blur-sm\">\n        No date entities found for timeline\n      </div>\n    );\n  }\n\n  const firstEvent = events[0];\n  const lastEvent = events[events.length - 1];\n  const minYear = firstEvent?.year ?? 0;\n  const maxYear = lastEvent?.year ?? 0;\n  const yearRange = Math.max(1, maxYear - minYear);\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      <div className=\"px-3 sm:px-4 py-2.5 sm:py-3 bg-zinc-800/50 border-b border-white/10 font-semibold text-sm sm:text-base text-white\">\n        Document Timeline\n      </div>\n      \n      {/* Mobile: Vertical timeline */}\n      <div className=\"block sm:hidden p-3 max-h-[300px] overflow-y-auto touch-pan-y\">\n        <div className=\"relative pl-6 border-l-2 border-sky-500/30\">\n          {events.slice(0, 10).map((event) => (\n            <div\n              key={event.entity.id}\n              className=\"relative mb-4 last:mb-0 cursor-pointer touch-manipulation\"\n              onClick={() => onEntityClick?.(event.entity)}\n            >\n              <div className=\"absolute -left-[1.625rem] top-0.5 w-3 h-3 rounded-full bg-sky-500 border-2 border-zinc-900 shadow\" />\n              <div className=\"text-xs font-semibold text-white\">{event.year}</div>\n              <div className=\"text-[0.625rem] text-zinc-400 truncate max-w-[12rem]\">\n                {event.entity.value.slice(0, 30)}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Desktop: Horizontal timeline */}\n      <div className=\"hidden sm:block p-4 relative min-h-[6.25rem]\">\n        {/* Timeline line */}\n        <div className=\"absolute top-[3.125rem] left-5 right-5 h-1 bg-zinc-700 rounded\" />\n        {/* Events */}\n        <div className=\"flex justify-between pt-[3.75rem]\">\n          {events.slice(0, 10).map((event) => {\n            const position =\n              yearRange > 0 ? ((event.year - minYear) / yearRange) * 100 : 50;\n            return (\n              <div\n                key={event.entity.id}\n                style={{\n                  position: \"absolute\",\n                  left: `calc(${position}% + 0.625rem)`,\n                  top: \"2.5rem\",\n                  transform: \"translateX(-50%)\",\n                }}\n                className=\"text-center cursor-pointer touch-manipulation\"\n                onClick={() => onEntityClick?.(event.entity)}\n              >\n                <div className=\"w-4 h-4 rounded-full bg-sky-500 mx-auto mb-2 border-2 sm:border-3 border-zinc-900 shadow-md\" />\n                <div className=\"text-[0.625rem] sm:text-xs font-semibold text-white\">\n                  {event.year}\n                </div>\n                <div className=\"text-[0.5rem] sm:text-[0.625rem] text-zinc-500 max-w-[3.5rem] sm:max-w-[5rem] overflow-hidden text-ellipsis whitespace-nowrap\">\n                  {event.entity.value.slice(0, 15)}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      \n      <div className=\"px-3 sm:px-4 py-1.5 sm:py-2 border-t border-white/10 text-[0.625rem] sm:text-xs text-zinc-500\">\n        {events.length} date/event entities found\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { KnowledgeNode, Quote } from \"@onegenui/vectorless\";\n\nexport interface DeepAnalysisPanelProps {\n  node: KnowledgeNode;\n  quotes?: Quote[];\n  onQuoteClick?: (quote: Quote) => void;\n}\n\nexport const DeepAnalysisPanel = memo(function DeepAnalysisPanel({\n  node,\n  quotes = [],\n  onQuoteClick,\n}: DeepAnalysisPanelProps) {\n  const nodeQuotes = quotes.filter((q) => q.nodeId === node.id);\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      {/* Header */}\n      <div className=\"p-3 sm:p-4 bg-zinc-800/50 border-b border-white/10\">\n        <h3 className=\"m-0 text-base sm:text-lg font-semibold text-white\">{node.title}</h3>\n        <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 mt-1\">\n          Pages {node.pageStart}-{node.pageEnd}\n        </div>\n      </div>\n\n      {/* Summary */}\n      <div className=\"p-3 sm:p-4 border-b border-white/10\">\n        <h4 className=\"m-0 mb-1.5 sm:mb-2 text-xs sm:text-sm font-medium text-sky-400\">\n          Summary\n        </h4>\n        <p className=\"m-0 text-xs sm:text-sm leading-relaxed text-zinc-300\">\n          {node.summary || \"No summary available\"}\n        </p>\n        {node.detailedSummary && (\n          <p className=\"mt-2 sm:mt-3 m-0 text-xs sm:text-sm leading-relaxed text-zinc-400\">\n            {node.detailedSummary}\n          </p>\n        )}\n      </div>\n\n      {/* Key Points */}\n      {node.keyPoints.length > 0 && (\n        <div className=\"p-3 sm:p-4 border-b border-white/10\">\n          <h4 className=\"m-0 mb-1.5 sm:mb-2 text-xs sm:text-sm font-medium text-sky-400\">\n            Key Points\n          </h4>\n          <ul className=\"m-0 pl-4 sm:pl-5 space-y-1\">\n            {node.keyPoints.map((point, i) => (\n              <li key={i} className=\"text-xs sm:text-sm text-zinc-300\">\n                {point}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Keywords */}\n      {node.keywords.length > 0 && (\n        <div className=\"p-3 sm:p-4 border-b border-white/10\">\n          <h4 className=\"m-0 mb-1.5 sm:mb-2 text-xs sm:text-sm font-medium text-sky-400\">\n            Keywords\n          </h4>\n          <div className=\"flex gap-1.5 sm:gap-2 flex-wrap\">\n            {node.keywords.map((keyword, i) => (\n              <span\n                key={i}\n                className=\"px-2 py-0.5 sm:py-1 bg-sky-500/10 rounded text-[0.625rem] sm:text-xs text-sky-300 border border-sky-500/20\"\n              >\n                {keyword}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Quotes */}\n      {nodeQuotes.length > 0 && (\n        <div className=\"p-3 sm:p-4 border-b border-white/10\">\n          <h4 className=\"m-0 mb-1.5 sm:mb-2 text-xs sm:text-sm font-medium text-sky-400\">\n            Notable Quotes\n          </h4>\n          <div className=\"space-y-2\">\n            {nodeQuotes.map((quote) => (\n              <div\n                key={quote.id}\n                onClick={() => onQuoteClick?.(quote)}\n                className={`p-2.5 sm:p-3 bg-zinc-800/30 border-l-2 sm:border-l-3 border-sky-500 rounded-r ${onQuoteClick ? \"cursor-pointer hover:bg-zinc-800/50 touch-manipulation\" : \"\"}`}\n              >\n                <p className=\"m-0 text-xs sm:text-sm italic text-zinc-300\">\n                  \"{quote.text}\"\n                </p>\n                <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 mt-1.5\">\n                  Page {quote.pageNumber} - {quote.significance}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Metrics */}\n      {node.metrics && (\n        <div className=\"p-3 sm:p-4\">\n          <h4 className=\"m-0 mb-2 text-xs sm:text-sm font-medium text-sky-400\">\n            Metrics\n          </h4>\n          <div className=\"grid grid-cols-3 gap-2 sm:gap-3\">\n            <div className=\"text-center p-2 sm:p-3 bg-zinc-800/30 rounded-lg\">\n              <div className=\"text-base sm:text-xl font-semibold text-white\">\n                {node.metrics.wordCount}\n              </div>\n              <div className=\"text-[0.5rem] sm:text-[0.625rem] text-zinc-500 uppercase\">Words</div>\n            </div>\n            <div className=\"text-center p-2 sm:p-3 bg-zinc-800/30 rounded-lg\">\n              <div className=\"text-base sm:text-xl font-semibold text-white\">\n                {node.metrics.readingTimeMinutes}m\n              </div>\n              <div className=\"text-[0.5rem] sm:text-[0.625rem] text-zinc-500 uppercase\">Reading Time</div>\n            </div>\n            <div className=\"text-center p-2 sm:p-3 bg-zinc-800/30 rounded-lg\">\n              <div className=\"text-base sm:text-xl font-semibold capitalize text-white\">\n                {node.metrics.complexity}\n              </div>\n              <div className=\"text-[0.5rem] sm:text-[0.625rem] text-zinc-500 uppercase\">Complexity</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { Citation } from \"@onegenui/vectorless\";\n\nexport interface CitationViewerProps {\n  citations: Citation[];\n  onCitationClick?: (citation: Citation) => void;\n}\n\nconst typeIcons: Record<string, string> = {\n  book: \"B\",\n  article: \"A\",\n  web: \"W\",\n  report: \"R\",\n  thesis: \"T\",\n  other: \"O\",\n};\n\nexport const CitationViewer = memo(function CitationViewer({\n  citations,\n  onCitationClick,\n}: CitationViewerProps) {\n  // Group citations by type\n  const byType = citations.reduce(\n    (acc, c) => {\n      const type = c.type ?? \"other\";\n      if (!acc[type]) acc[type] = [];\n      acc[type].push(c);\n      return acc;\n    },\n    {} as Record<string, Citation[]>,\n  );\n\n  if (citations.length === 0) {\n    return (\n      <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl p-3 sm:p-4 text-center text-zinc-400 bg-zinc-900/60 backdrop-blur-sm\">\n        No citations found in document\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      <div className=\"px-3 sm:px-4 py-2.5 sm:py-3 bg-zinc-800/50 border-b border-white/10 font-semibold flex justify-between items-center text-sm sm:text-base\">\n        <span className=\"text-white\">Citations</span>\n        <span className=\"text-zinc-400 font-normal text-xs sm:text-sm\">\n          {citations.length} total\n        </span>\n      </div>\n\n      <div className=\"max-h-[300px] sm:max-h-[400px] overflow-y-auto touch-pan-y\">\n        {Object.entries(byType).map(([type, typeCitations]) => (\n          <div key={type}>\n            <div className=\"px-3 sm:px-4 py-1.5 sm:py-2 bg-zinc-800/30 font-medium text-[0.625rem] sm:text-xs uppercase text-zinc-500 border-b border-white/5\">\n              {type} ({typeCitations.length})\n            </div>\n            {typeCitations.map((citation) => (\n              <div\n                key={citation.id}\n                onClick={() => onCitationClick?.(citation)}\n                className={`p-3 sm:p-4 border-b border-white/5 flex gap-2.5 sm:gap-3 ${onCitationClick ? \"cursor-pointer hover:bg-white/5 touch-manipulation\" : \"\"}`}\n              >\n                <div className=\"w-8 h-8 sm:w-9 sm:h-9 rounded bg-sky-500/10 flex items-center justify-center font-semibold text-sky-400 shrink-0 text-xs sm:text-sm\">\n                  {typeIcons[citation.type] || \"?\"}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  {citation.title && (\n                    <div className=\"font-medium text-xs sm:text-sm text-white\">\n                      {citation.title}\n                    </div>\n                  )}\n                  {citation.authors && citation.authors.length > 0 && (\n                    <div className=\"text-[0.625rem] sm:text-xs text-zinc-400 mt-0.5\">\n                      {citation.authors.join(\", \")}\n                    </div>\n                  )}\n                  {citation.year && (\n                    <span className=\"text-[0.625rem] sm:text-xs text-zinc-500 ml-1\">\n                      ({citation.year})\n                    </span>\n                  )}\n                  <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 mt-1 overflow-hidden text-ellipsis whitespace-nowrap\">\n                    {citation.text}\n                  </div>\n                  <div className=\"text-[0.5rem] sm:text-[0.625rem] text-zinc-600 mt-1\">\n                    Page {citation.pageNumber}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useMemo } from \"react\";\nimport type { Entity } from \"@onegenui/vectorless\";\n\nexport interface EntityExplorerProps {\n  entities: Entity[];\n  onEntityClick?: (entity: Entity) => void;\n  filterTypes?: string[];\n}\n\nconst typeColors: Record<string, string> = {\n  person: \"emerald\",\n  organization: \"sky\",\n  place: \"amber\",\n  date: \"purple\",\n  concept: \"rose\",\n  event: \"cyan\",\n  number: \"stone\",\n  term: \"slate\",\n};\n\nconst typeColorClasses: Record<string, { bg: string; text: string; dot: string }> = {\n  person: { bg: \"bg-emerald-500\", text: \"text-emerald-400\", dot: \"bg-emerald-500\" },\n  organization: { bg: \"bg-sky-500\", text: \"text-sky-400\", dot: \"bg-sky-500\" },\n  place: { bg: \"bg-amber-500\", text: \"text-amber-400\", dot: \"bg-amber-500\" },\n  date: { bg: \"bg-purple-500\", text: \"text-purple-400\", dot: \"bg-purple-500\" },\n  concept: { bg: \"bg-rose-500\", text: \"text-rose-400\", dot: \"bg-rose-500\" },\n  event: { bg: \"bg-cyan-500\", text: \"text-cyan-400\", dot: \"bg-cyan-500\" },\n  number: { bg: \"bg-stone-500\", text: \"text-stone-400\", dot: \"bg-stone-500\" },\n  term: { bg: \"bg-slate-500\", text: \"text-slate-400\", dot: \"bg-slate-500\" },\n};\n\nexport const EntityExplorer = memo(function EntityExplorer({\n  entities,\n  onEntityClick,\n  filterTypes,\n}: EntityExplorerProps) {\n  const [selectedType, setSelectedType] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Get all unique types\n  const types = useMemo(() => {\n    const typeSet = new Set(entities.map((e) => e.type));\n    return Array.from(typeSet).sort();\n  }, [entities]);\n\n  // Filter entities\n  const filteredEntities = useMemo(() => {\n    let result = entities;\n\n    if (filterTypes && filterTypes.length > 0) {\n      result = result.filter((e) => filterTypes.includes(e.type));\n    }\n\n    if (selectedType) {\n      result = result.filter((e) => e.type === selectedType);\n    }\n\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(\n        (e) =>\n          e.value.toLowerCase().includes(query) ||\n          e.normalized?.toLowerCase().includes(query),\n      );\n    }\n\n    return result;\n  }, [entities, filterTypes, selectedType, searchQuery]);\n\n  // Group by type\n  const groupedEntities = useMemo(() => {\n    const groups: Record<string, Entity[]> = {};\n    for (const entity of filteredEntities) {\n      const type = entity.type;\n      if (!groups[type]) groups[type] = [];\n      groups[type].push(entity);\n    }\n    return groups;\n  }, [filteredEntities]);\n\n  return (\n    <div className=\"font-sans border border-white/10 rounded-lg sm:rounded-xl overflow-hidden bg-zinc-900/60 backdrop-blur-sm\">\n      <div className=\"px-3 sm:px-4 py-2.5 sm:py-3 bg-zinc-800/50 border-b border-white/10 font-semibold text-sm sm:text-base text-white\">\n        Entities ({filteredEntities.length})\n      </div>\n\n      {/* Search & Filter */}\n      <div className=\"p-2.5 sm:p-4 border-b border-white/10 flex flex-col sm:flex-row gap-2 sm:gap-3\">\n        <input\n          type=\"text\"\n          placeholder=\"Search entities...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"flex-1 min-w-0 px-3 py-2 sm:py-1.5 border border-white/10 rounded-lg bg-zinc-800/50 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-sky-500/50 min-h-[2.75rem] sm:min-h-0\"\n        />\n        <select\n          value={selectedType || \"\"}\n          onChange={(e) => setSelectedType(e.target.value || null)}\n          className=\"px-3 py-2 sm:py-1.5 border border-white/10 rounded-lg bg-zinc-800/50 text-sm text-white focus:outline-none focus:ring-1 focus:ring-sky-500/50 min-h-[2.75rem] sm:min-h-0\"\n        >\n          <option value=\"\">All types</option>\n          {types.map((type) => (\n            <option key={type} value={type}>\n              {type}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Type badges */}\n      <div className=\"px-2.5 sm:px-4 py-2 sm:py-2.5 border-b border-white/10 flex gap-1.5 sm:gap-2 flex-wrap\">\n        {types.map((type) => {\n          const count = entities.filter((e) => e.type === type).length;\n          const colors = typeColorClasses[type] || { bg: \"bg-zinc-500\", text: \"text-zinc-400\", dot: \"bg-zinc-500\" };\n          return (\n            <button\n              key={type}\n              onClick={() =>\n                setSelectedType((prev) => (prev === type ? null : type))\n              }\n              className={`px-2 sm:px-2.5 py-1 sm:py-1.5 rounded-full border-none text-[0.625rem] sm:text-xs cursor-pointer flex items-center gap-1 sm:gap-1.5 transition-colors touch-manipulation min-h-[1.75rem] ${\n                selectedType === type\n                  ? `${colors.bg} text-white`\n                  : \"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-700\"\n              }`}\n            >\n              <span className={`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${colors.dot}`} />\n              {type} ({count})\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Entity list */}\n      <div className=\"max-h-[280px] sm:max-h-[400px] overflow-y-auto touch-pan-y\">\n        {Object.entries(groupedEntities).map(([type, typeEntities]) => {\n          const colors = typeColorClasses[type] || { bg: \"bg-zinc-500\", text: \"text-zinc-400\", dot: \"bg-zinc-500\" };\n          return (\n            <div key={type}>\n              <div className={`px-3 sm:px-4 py-1.5 sm:py-2 bg-zinc-800/30 text-[0.625rem] sm:text-xs font-medium uppercase sticky top-0 ${colors.text}`}>\n                {type}\n              </div>\n              {typeEntities.map((entity) => (\n                <div\n                  key={entity.id}\n                  onClick={() => onEntityClick?.(entity)}\n                  className={`px-3 sm:px-4 py-2.5 sm:py-3 border-b border-white/5 flex justify-between items-center gap-2 ${\n                    onEntityClick ? \"cursor-pointer hover:bg-white/5 touch-manipulation\" : \"\"\n                  }`}\n                >\n                  <div className=\"min-w-0 flex-1\">\n                    <div className=\"font-medium text-xs sm:text-sm text-white truncate\">\n                      {entity.value}\n                    </div>\n                    {entity.normalized && entity.normalized !== entity.value && (\n                      <div className=\"text-[0.625rem] sm:text-xs text-zinc-500 truncate\">\n                        {entity.normalized}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"text-[0.625rem] sm:text-xs text-zinc-600 shrink-0\">\n                    {entity.occurrences.length} occ\n                  </div>\n                </div>\n              ))}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport type {\n  DocumentKnowledgeBase,\n  KnowledgeNode,\n  Entity,\n  Relation,\n  Quote,\n} from \"@onegenui/vectorless\";\n\nexport interface UseKnowledgeBaseOptions {\n  initialKnowledgeBase?: DocumentKnowledgeBase | null;\n}\n\nexport interface UseKnowledgeBaseReturn {\n  knowledgeBase: DocumentKnowledgeBase | null;\n  setKnowledgeBase: (kb: DocumentKnowledgeBase | null) => void;\n  entities: Entity[];\n  relations: Relation[];\n  quotes: Quote[];\n  getEntityById: (id: string) => Entity | undefined;\n  getRelationsByNode: (nodeId: string) => Relation[];\n  getQuotesByNode: (nodeId: string) => Quote[];\n  searchEntities: (query: string) => Entity[];\n  filterEntitiesByType: (type: string) => Entity[];\n}\n\nexport function useKnowledgeBase(\n  options: UseKnowledgeBaseOptions = {},\n): UseKnowledgeBaseReturn {\n  const [knowledgeBase, setKnowledgeBase] =\n    useState<DocumentKnowledgeBase | null>(\n      options.initialKnowledgeBase ?? null,\n    );\n\n  const entities = useMemo(\n    () => knowledgeBase?.entities ?? [],\n    [knowledgeBase],\n  );\n  const relations = useMemo(\n    () => knowledgeBase?.relations ?? [],\n    [knowledgeBase],\n  );\n  const quotes = useMemo(() => knowledgeBase?.quotes ?? [], [knowledgeBase]);\n\n  const getEntityById = useCallback(\n    (id: string) => entities.find((e) => e.id === id),\n    [entities],\n  );\n\n  const getRelationsByNode = useCallback(\n    (nodeId: string) =>\n      relations.filter(\n        (r) => r.sourceNodeId === nodeId || r.targetNodeId === nodeId,\n      ),\n    [relations],\n  );\n\n  const getQuotesByNode = useCallback(\n    (nodeId: string) => quotes.filter((q) => q.nodeId === nodeId),\n    [quotes],\n  );\n\n  const searchEntities = useCallback(\n    (query: string) => {\n      const q = query.toLowerCase();\n      return entities.filter(\n        (e) =>\n          e.value.toLowerCase().includes(q) ||\n          e.normalized?.toLowerCase().includes(q),\n      );\n    },\n    [entities],\n  );\n\n  const filterEntitiesByType = useCallback(\n    (type: string) => entities.filter((e) => e.type === type),\n    [entities],\n  );\n\n  return {\n    knowledgeBase,\n    setKnowledgeBase,\n    entities,\n    relations,\n    quotes,\n    getEntityById,\n    getRelationsByNode,\n    getQuotesByNode,\n    searchEntities,\n    filterEntitiesByType,\n  };\n}\n","\"use client\";\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport type { KnowledgeNode } from \"@onegenui/vectorless\";\n\nexport interface UseDocumentExplorerOptions {\n  initialTree?: KnowledgeNode | null;\n  onNodeSelect?: (node: KnowledgeNode) => void;\n}\n\nexport interface UseDocumentExplorerReturn {\n  tree: KnowledgeNode | null;\n  setTree: (tree: KnowledgeNode | null) => void;\n  selectedNode: KnowledgeNode | null;\n  expandedNodes: Set<string>;\n  selectNode: (node: KnowledgeNode) => void;\n  toggleNode: (nodeId: string) => void;\n  expandAll: () => void;\n  collapseAll: () => void;\n  searchNodes: (query: string) => KnowledgeNode[];\n  getNodePath: (nodeId: string) => KnowledgeNode[];\n}\n\nfunction collectAllNodeIds(node: KnowledgeNode, ids: Set<string>): void {\n  ids.add(node.id);\n  if (node.children) {\n    for (const child of node.children) {\n      collectAllNodeIds(child, ids);\n    }\n  }\n}\n\nfunction findNode(node: KnowledgeNode, id: string): KnowledgeNode | undefined {\n  if (node.id === id) return node;\n  if (node.children) {\n    for (const child of node.children) {\n      const found = findNode(child, id);\n      if (found) return found;\n    }\n  }\n  return undefined;\n}\n\nfunction findPath(\n  node: KnowledgeNode,\n  targetId: string,\n  path: KnowledgeNode[] = [],\n): KnowledgeNode[] | null {\n  const newPath = [...path, node];\n  if (node.id === targetId) return newPath;\n  if (node.children) {\n    for (const child of node.children) {\n      const result = findPath(child, targetId, newPath);\n      if (result) return result;\n    }\n  }\n  return null;\n}\n\nfunction searchTree(\n  node: KnowledgeNode,\n  query: string,\n  results: KnowledgeNode[] = [],\n): KnowledgeNode[] {\n  const q = query.toLowerCase();\n  if (\n    node.title.toLowerCase().includes(q) ||\n    node.summary?.toLowerCase().includes(q) ||\n    node.rawText?.toLowerCase().includes(q)\n  ) {\n    results.push(node);\n  }\n  if (node.children) {\n    for (const child of node.children) {\n      searchTree(child, query, results);\n    }\n  }\n  return results;\n}\n\nexport function useDocumentExplorer(\n  options: UseDocumentExplorerOptions = {},\n): UseDocumentExplorerReturn {\n  const [tree, setTree] = useState<KnowledgeNode | null>(\n    options.initialTree ?? null,\n  );\n  const [selectedNode, setSelectedNode] = useState<KnowledgeNode | null>(null);\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n\n  const selectNode = useCallback(\n    (node: KnowledgeNode) => {\n      setSelectedNode(node);\n      options.onNodeSelect?.(node);\n    },\n    [options],\n  );\n\n  const toggleNode = useCallback((nodeId: string) => {\n    setExpandedNodes((prev) => {\n      const next = new Set(prev);\n      if (next.has(nodeId)) {\n        next.delete(nodeId);\n      } else {\n        next.add(nodeId);\n      }\n      return next;\n    });\n  }, []);\n\n  const expandAll = useCallback(() => {\n    if (!tree) return;\n    const ids = new Set<string>();\n    collectAllNodeIds(tree, ids);\n    setExpandedNodes(ids);\n  }, [tree]);\n\n  const collapseAll = useCallback(() => {\n    setExpandedNodes(new Set());\n  }, []);\n\n  const searchNodes = useCallback(\n    (query: string) => {\n      if (!tree || !query) return [];\n      return searchTree(tree, query);\n    },\n    [tree],\n  );\n\n  const getNodePath = useCallback(\n    (nodeId: string) => {\n      if (!tree) return [];\n      return findPath(tree, nodeId) ?? [];\n    },\n    [tree],\n  );\n\n  return {\n    tree,\n    setTree,\n    selectedNode,\n    expandedNodes,\n    selectNode,\n    toggleNode,\n    expandAll,\n    collapseAll,\n    searchNodes,\n    getNodePath,\n  };\n}\n","\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport type { Answer } from \"@onegenui/vectorless\";\n\nexport interface UseQuestionAnswerOptions {\n  onAnswer?: (answer: Answer) => void;\n  onError?: (error: Error) => void;\n}\n\nexport interface UseQuestionAnswerReturn {\n  question: string;\n  setQuestion: (question: string) => void;\n  answer: Answer | null;\n  isLoading: boolean;\n  error: Error | null;\n  askQuestion: (\n    knowledgeBaseId: string,\n    question: string,\n  ) => Promise<Answer | null>;\n  clearAnswer: () => void;\n  history: Array<{ question: string; answer: Answer }>;\n  clearHistory: () => void;\n}\n\nexport function useQuestionAnswer(\n  options: UseQuestionAnswerOptions = {},\n): UseQuestionAnswerReturn {\n  const [question, setQuestion] = useState(\"\");\n  const [answer, setAnswer] = useState<Answer | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [history, setHistory] = useState<\n    Array<{ question: string; answer: Answer }>\n  >([]);\n\n  const askQuestion = useCallback(\n    async (knowledgeBaseId: string, q: string): Promise<Answer | null> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        // For now, use a mock implementation that will be replaced\n        // when the full MCP integration is available\n        const result: Answer = {\n          id: crypto.randomUUID(),\n          question: q,\n          answer: \"This requires the full MCP integration to be active.\",\n          confidence: 0.5,\n          sources: [],\n          generatedAt: new Date().toISOString(),\n        };\n\n        setAnswer(result);\n        setHistory((prev) => [...prev, { question: q, answer: result }]);\n        options.onAnswer?.(result);\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        options.onError?.(error);\n        return null;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [options],\n  );\n\n  const clearAnswer = useCallback(() => {\n    setAnswer(null);\n    setError(null);\n    setQuestion(\"\");\n  }, []);\n\n  const clearHistory = useCallback(() => {\n    setHistory([]);\n  }, []);\n\n  return {\n    question,\n    setQuestion,\n    answer,\n    isLoading,\n    error,\n    askQuestion,\n    clearAnswer,\n    history,\n    clearHistory,\n  };\n}\n"],"mappings":"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","names":["Calendar","import_utils","StatusBadge","ProgressBar","EmptyState","SectionHeader","CardContainer","AccentBar","PerforatedDivider","InfoPill","ErrorState","Skeleton","SkeletonText","SkeletonCard","LoadingState","LoadingIndicator","import_react","import_jsx_runtime","import_react","import_react","import_lucide_react","import_framer_motion","import_react","import_framer_motion","import_jsx_runtime","EventCard","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","EventDetailView","CalendarIcon","import_jsx_runtime","CalendarAgenda","CalendarIcon","import_react","import_lucide_react","import_react","import_react","import_lucide_react","import_jsx_runtime","SessionTimer","formatTime","import_react","import_lucide_react","import_framer_motion","import_react","import_react","import_lucide_react","import_lucide_react","import_jsx_runtime","import_react","import_lucide_react","import_jsx_runtime","ProgressRing","CardioDetails","import_jsx_runtime","import_jsx_runtime","ExerciseItemCard","SupersetGroup","uuidv4","import_react","import_jsx_runtime","Workout","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_framer_motion","import_jsx_runtime","MacroMetric","import_react","import_framer_motion","import_lucide_react","import_jsx_runtime","MealTicket","import_jsx_runtime","Nutrition","import_zod","mealItemSchema","mealSchema","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","FlightStatus","FlightSegment","import_react","import_lucide_react","import_utils","import_framer_motion","import_jsx_runtime","RoundTripCard","SingleFlightCard","stateAdapterInstance","import_react","import_jsx_runtime","Flight","import_zod","import_react","import_lucide_react","import_utils","import_framer_motion","STATUS_VARIANT_MAP","import_jsx_runtime","containerVariants","Hotel","HotelIcon","import_zod","import_react","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","Trip","import_zod","import_react","import_lucide_react","import_framer_motion","stateAdapterInstance","import_react","import_jsx_runtime","BookingForms","import_zod","import_react","import_lucide_react","import_jsx_runtime","ProfileCard","LinkIcon","import_react","import_lucide_react","import_jsx_runtime","ActivityFeed","import_react","import_lucide_react","import_jsx_runtime","Pricing","import_react","import_lucide_react","import_jsx_runtime","ArticleCard","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","SubItemsList","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","KanbanCard","import_react","import_react","import_jsx_runtime","containerVariants","Kanban","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_jsx_runtime","PRIORITY_TO_VARIANT","TodoList","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_framer_motion","import_lucide_react","import_jsx_runtime","TimeBlockCard","import_react","import_jsx_runtime","DayColumn","stateAdapterInstance","import_react","import_jsx_runtime","RoutineScheduler","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_lucide_react","import_jsx_runtime","SupplementCard","import_react","import_framer_motion","import_jsx_runtime","TimingGroup","import_react","import_framer_motion","import_lucide_react","import_jsx_runtime","ProgressDashboard","stateAdapterInstance","import_react","import_jsx_runtime","SupplementTracker","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_react","import_lucide_react","DAYS_SHORT","CATEGORY_CONFIG","DEFAULT_CATEGORY_CONFIG","getCategoryConfig","import_jsx_runtime","EventDot","getCategoryConfig","EventCard","import_react","import_jsx_runtime","DayCell","EventCard","stateAdapterInstance","import_react","import_jsx_runtime","containerVariants","Calendar","DAYS_SHORT","CalendarIcon","EventCard","CATEGORY_CONFIG","import_zod","import_react","import_lucide_react","import_framer_motion","import_react","import_lucide_react","import_react","import_lucide_react","import_lucide_react","import_jsx_runtime","MoodBadge","EnergyBar","SleepInfo","GoalItem","LinkedEntityBadge","import_jsx_runtime","DiaryEntryCard","stateAdapterInstance","import_react","import_jsx_runtime","Diary","import_zod","import_react","import_lucide_react","import_react","import_lucide_react","import_jsx_runtime","VideoPlayer","import_react","import_utils","import_jsx_runtime","CitationBadge","import_react","import_lucide_react","import_utils","import_jsx_runtime","SourceCard","import_react","import_jsx_runtime","ReportSectionComponent","import_jsx_runtime","ResearchReport","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","TreeNodeItem","DocumentIndex","import_zod","import_react","import_lucide_react","import_framer_motion","import_jsx_runtime","SourceCitation","CompactCitation","import_zod","import_react","import_utils","import_utils","import_jsx_runtime","Chart","import_zod","import_schemas","import_react","import_jsx_runtime","StockChart","import_zod","import_react","import_react","import_jsx_runtime","EdgesRenderer","import_react","import_jsx_runtime","NodesRenderer","import_jsx_runtime","Graph","z","import_zod","import_react","import_react","import_jsx_runtime","NodeRenderer","import_jsx_runtime","MindMap","import_zod","import_react","import_jsx_runtime","Gantt","formatDate","import_zod","import_react","import_lucide_react","import_jsx_runtime","Message","import_zod","import_react","import_utils","import_lucide_react","import_jsx_runtime","import_react","import_lucide_react","formatDate","import_jsx_runtime","import_react","import_lucide_react","import_jsx_runtime","EmailList","formatDate","import_react","import_lucide_react","import_jsx_runtime","EmailDetail","import_jsx_runtime","Email","import_zod","import_react","import_jsx_runtime","TreeNodeItem","DocumentExplorer","import_react","import_jsx_runtime","KnowledgeGraph","import_react","import_jsx_runtime","DocumentTimeline","import_react","import_jsx_runtime","DeepAnalysisPanel","import_react","import_jsx_runtime","CitationViewer","import_react","import_jsx_runtime","EntityExplorer","import_react","import_react","import_react","error","Calendar"]}