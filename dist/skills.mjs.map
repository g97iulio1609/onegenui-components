{"version":3,"sources":["../src/skills.ts"],"sourcesContent":["/**\n * Skills Module\n *\n * Provides utilities for loading skills and generating patch path references.\n */\n\n// Re-export registry for use by consumers\nexport const skillsRegistry: Record<string, string> = {};\n\n/**\n * Register a skill manually\n */\nexport function registerSkill(componentName: string, content: string): void {\n  skillsRegistry[componentName] = content;\n}\n\n/**\n * Get all registered skills\n */\nexport function getAllSkills(): Record<string, string> {\n  return { ...skillsRegistry };\n}\n\n/**\n * Map of component names to append paths for array-like props.\n */\nconst COMPONENT_ARRAY_PROPS: Record<string, string> = {\n  // Data Display\n  List: \"items\",\n  TodoList: \"items\",\n  Timeline: \"events\",\n  Table: \"rows\",\n\n  // Communication\n  Message: \"messages\",\n  Email: \"emails\",\n\n  // Domain\n  Workout: \"items\",\n  Nutrition: \"meals\",\n  Flight: \"flights\",\n  Hotel: \"hotels\",\n  Trip: \"trips\",\n  Kanban: \"columns\",\n\n  // Canvas/Editor - content is Tiptap document with content array\n  Canvas: \"content.content\",\n  CanvasBlock: \"content.content\",\n};\n\n/**\n * Special nested append paths for components with complex structures.\n */\nconst NESTED_PATHS: Record<string, string[]> = {\n  Kanban: [\n    \"- Kanban column append: /elements/KEY/props/columns/-\",\n    \"- Kanban card append: /elements/KEY/props/columns/COL_INDEX/cards/-\",\n  ],\n  // Canvas uses Tiptap node appends on the document content array\n  Canvas: [\n    \"- Canvas node append: /elements/KEY/props/content/content/-\",\n    \"- Canvas table row append: /elements/KEY/props/content/content/TABLE_INDEX/content/-\",\n  ],\n};\n\n/**\n * Generate patch path guidance for component item updates.\n *\n * Historical function name kept for compatibility with existing imports.\n */\nexport function generateJSONLPaths(): string {\n  const lines: string[] = [\n    \"STRUCTURED UI PATCH PATHS (emit_ui_patch):\",\n    \"- Use emit_ui_patch tool; do not output raw JSONL patch lines.\",\n    \"- For /elements/<key> patches, patch.value must be a JSON object (never a stringified JSON string).\",\n    \"- Preserve existing UI: append child keys using /elements/<container>/children/- and avoid resetting children arrays.\",\n    \"- Use per-response unique element keys (e.g. suffix with timestamp/UUID) unless intentionally updating an existing element.\",\n    \"\",\n    \"ARRAY APPEND PATHS:\",\n  ];\n  const processedComponents = new Set<string>();\n\n  for (const [componentName, propName] of Object.entries(\n    COMPONENT_ARRAY_PROPS,\n  )) {\n    // Skip if this component has nested paths (handled separately)\n    if (NESTED_PATHS[componentName]) continue;\n\n    lines.push(`- ${componentName} item append: /elements/KEY/props/${propName}/-`);\n    processedComponents.add(componentName);\n  }\n\n  lines.push(\"\", \"NESTED APPEND PATHS:\");\n  for (const [componentName, paths] of Object.entries(NESTED_PATHS)) {\n    lines.push(`- ${componentName}:`);\n    lines.push(...paths.map((path) => `  ${path}`));\n    processedComponents.add(componentName);\n  }\n\n  return lines.join(\"\\n\");\n}\n"],"mappings":";AAOO,IAAM,iBAAyC,CAAC;AAKhD,SAAS,cAAc,eAAuB,SAAuB;AAC1E,iBAAe,aAAa,IAAI;AAClC;AAKO,SAAS,eAAuC;AACrD,SAAO,EAAE,GAAG,eAAe;AAC7B;AAKA,IAAM,wBAAgD;AAAA;AAAA,EAEpD,MAAM;AAAA,EACN,UAAU;AAAA,EACV,UAAU;AAAA,EACV,OAAO;AAAA;AAAA,EAGP,SAAS;AAAA,EACT,OAAO;AAAA;AAAA,EAGP,SAAS;AAAA,EACT,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,MAAM;AAAA,EACN,QAAQ;AAAA;AAAA,EAGR,QAAQ;AAAA,EACR,aAAa;AACf;AAKA,IAAM,eAAyC;AAAA,EAC7C,QAAQ;AAAA,IACN;AAAA,IACA;AAAA,EACF;AAAA;AAAA,EAEA,QAAQ;AAAA,IACN;AAAA,IACA;AAAA,EACF;AACF;AAOO,SAAS,qBAA6B;AAC3C,QAAM,QAAkB;AAAA,IACtB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACA,QAAM,sBAAsB,oBAAI,IAAY;AAE5C,aAAW,CAAC,eAAe,QAAQ,KAAK,OAAO;AAAA,IAC7C;AAAA,EACF,GAAG;AAED,QAAI,aAAa,aAAa,EAAG;AAEjC,UAAM,KAAK,KAAK,aAAa,qCAAqC,QAAQ,IAAI;AAC9E,wBAAoB,IAAI,aAAa;AAAA,EACvC;AAEA,QAAM,KAAK,IAAI,sBAAsB;AACrC,aAAW,CAAC,eAAe,KAAK,KAAK,OAAO,QAAQ,YAAY,GAAG;AACjE,UAAM,KAAK,KAAK,aAAa,GAAG;AAChC,UAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE,CAAC;AAC9C,wBAAoB,IAAI,aAAa;AAAA,EACvC;AAEA,SAAO,MAAM,KAAK,IAAI;AACxB;","names":[]}