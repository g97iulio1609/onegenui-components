{"version":3,"sources":["../src/index.ts","../src/domain/CalendarAgenda/component.tsx","../src/utils/shared-components.tsx","../src/utils/cn.ts","../src/domain/CalendarAgenda/components/utils.ts","../src/domain/CalendarAgenda/components/event-card.tsx","../src/domain/CalendarAgenda/components/event-detail.tsx","../src/domain/Workout/component.tsx","../src/domain/Workout/components/session-timer.tsx","../src/domain/Workout/components/exercise-item-card.tsx","../src/domain/Workout/components/WorkoutExerciseCard.tsx","../src/domain/Workout/components/WorkoutSetRow.tsx","../src/domain/Workout/components/exercise-parts.tsx","../src/domain/Workout/adapters/workout.adapter.ts","../src/domain/Workout/hooks/useWorkoutLogic.ts","../src/domain/Nutrition/component.tsx","../src/utils/format-utils.ts","../src/domain/Nutrition/components/types.ts","../src/domain/Nutrition/components/macro-metric.tsx","../src/domain/Nutrition/components/meal-ticket.tsx","../src/domain/Flight/component.tsx","../src/domain/Flight/components/flight-segment.tsx","../src/domain/Flight/components/types.ts","../src/domain/Flight/components/flight-cards.tsx","../src/domain/Flight/adapters/flight.adapter.ts","../src/domain/Flight/hooks/useFlightLogic.ts","../src/domain/Hotel/component.tsx","../src/domain/Hotel/adapters/hotel.adapter.ts","../src/domain/Hotel/hooks/useHotelLogic.ts","../src/domain/Trip/component.tsx","../src/domain/BookingForms/component.tsx","../src/domain/BookingForms/adapters/booking-forms.adapter.ts","../src/domain/BookingForms/hooks/useBookingFormsLogic.ts","../src/domain/social/profile-card.tsx","../src/domain/feed/activity-feed.tsx","../src/domain/commerce/pricing.tsx","../src/domain/content/article-card.tsx","../src/domain/Kanban/component.tsx","../src/domain/Kanban/components/types.ts","../src/domain/Kanban/components/sub-items-list.tsx","../src/domain/Kanban/components/kanban-card.tsx","../src/domain/Kanban/adapters/kanban.adapter.ts","../src/domain/Kanban/hooks/useKanbanDrag.ts","../src/domain/Kanban/hooks/useKanbanState.ts","../src/domain/TodoList/component.tsx","../src/domain/TodoList/adapters/todolist.adapter.ts","../src/domain/TodoList/hooks/useTodoListLogic.ts","../src/domain/RoutineScheduler/component.tsx","../src/domain/RoutineScheduler/components/time-block-card.tsx","../src/domain/RoutineScheduler/components/utils.ts","../src/domain/RoutineScheduler/components/day-column.tsx","../src/domain/RoutineScheduler/adapters/routine-scheduler.adapter.ts","../src/domain/RoutineScheduler/hooks/useRoutineSchedulerLogic.ts","../src/domain/SupplementTracker/component.tsx","../src/domain/SupplementTracker/components/supplement-card.tsx","../src/domain/SupplementTracker/components/utils.ts","../src/domain/SupplementTracker/components/timing-group.tsx","../src/domain/SupplementTracker/components/progress-dashboard.tsx","../src/domain/SupplementTracker/adapters/supplement-tracker.adapter.ts","../src/domain/SupplementTracker/hooks/useSupplementTrackerLogic.ts","../src/domain/Calendar/component.tsx","../src/domain/Calendar/components/event-card.tsx","../src/domain/Calendar/components/utils.ts","../src/domain/Calendar/components/day-cell.tsx","../src/domain/Calendar/adapters/calendar.adapter.ts","../src/domain/Calendar/hooks/useCalendarLogic.ts","../src/domain/Diary/component.tsx","../src/domain/Diary/components/diary-entry-card.tsx","../src/domain/Diary/components/sub-components.tsx","../src/domain/Diary/components/utils.ts","../src/domain/Diary/adapters/diary.adapter.ts","../src/domain/Diary/hooks/useDiaryLogic.ts","../src/domain/research/ResearchReport.tsx","../src/domain/research/components/types.ts","../src/domain/research/components/video-player.tsx","../src/domain/research/components/citation-badge.tsx","../src/domain/research/components/source-card.tsx","../src/domain/research/components/report-section.tsx","../src/domain/DocumentIndex/component.tsx","../src/domain/DocumentIndex/index.ts","../src/domain/SourceCitation/component.tsx","../src/domain/SourceCitation/index.ts","../src/communication/Message/component.tsx","../src/communication/Email/component.tsx","../src/communication/Email/components/unread-dot.tsx","../src/communication/Email/components/compose-modal.tsx","../src/communication/Email/components/types.ts","../src/communication/Email/components/email-list.tsx","../src/communication/Email/components/email-detail.tsx","../src/document/DocumentExplorer.tsx","../src/document/KnowledgeGraph.tsx","../src/document/DocumentTimeline.tsx","../src/document/DeepAnalysisPanel.tsx","../src/document/CitationViewer.tsx","../src/document/EntityExplorer.tsx","../src/document/hooks/useKnowledgeBase.ts","../src/document/hooks/useDocumentExplorer.ts","../src/document/hooks/useQuestionAnswer.ts"],"sourcesContent":["/**\n * @onegenui/components\n *\n * Standard UI component library for json-render framework.\n * Auto-generated exports with domain organization.\n */\n\nimport type { ComponentType } from \"react\";\n\n// ============================================================================\n// Primitives Re-exports (from @onegenui/ui)\n// ============================================================================\nexport * from \"@onegenui/ui\";\n\n// ============================================================================\n// Domain Components Exports\n// ============================================================================\n\nexport {\n  CalendarAgenda,\n  CalendarAgendaSchema,\n  CalendarAgendaDefinition,\n  type CalendarAgendaProps,\n} from \"./domain/CalendarAgenda\";\n\nexport {\n  Workout,\n  WorkoutPropsSchema,\n  WorkoutDefinition,\n  type WorkoutProps,\n} from \"./domain/Workout\";\nexport {\n  Nutrition,\n  NutritionPropsSchema,\n  NutritionDefinition,\n  type NutritionProps,\n} from \"./domain/Nutrition\";\nexport {\n  Flight,\n  FlightPropsSchema,\n  FlightDefinition,\n  type FlightProps,\n} from \"./domain/Flight\";\nexport {\n  Hotel,\n  HotelPropsSchema,\n  HotelDefinition,\n  type HotelProps,\n} from \"./domain/Hotel\";\nexport {\n  Trip,\n  TripPropsSchema,\n  TripDefinition,\n  type TripProps,\n} from \"./domain/Trip\";\nexport {\n  BookingForms,\n  BookingFormsPropsSchema,\n  BookingFormsDefinition,\n  type BookingFormsProps,\n} from \"./domain/BookingForms\";\nexport {\n  ProfileCard,\n  type ProfileCardProps,\n} from \"./domain/social/profile-card\";\nexport {\n  ActivityFeed,\n  type ActivityFeedProps,\n} from \"./domain/feed/activity-feed\";\nexport { Pricing, type PricingProps } from \"./domain/commerce/pricing\";\nexport {\n  ArticleCard,\n  type ArticleCardProps,\n} from \"./domain/content/article-card\";\nexport {\n  Kanban,\n  KanbanPropsSchema,\n  KanbanDefinition,\n  type KanbanProps,\n} from \"./domain/Kanban\";\nexport {\n  TodoList,\n  TodoListPropsSchema,\n  TodoListDefinition,\n  type TodoListProps,\n} from \"./domain/TodoList\";\n\nexport {\n  RoutineScheduler,\n  RoutineSchedulerPropsSchema,\n  RoutineSchedulerDefinition,\n  type RoutineSchedulerProps,\n} from \"./domain/RoutineScheduler\";\n\nexport {\n  SupplementTracker,\n  SupplementTrackerPropsSchema,\n  SupplementTrackerDefinition,\n  type SupplementTrackerProps,\n} from \"./domain/SupplementTracker\";\n\nexport {\n  Calendar,\n  CalendarPropsSchema,\n  CalendarDefinition,\n  type CalendarProps,\n} from \"./domain/Calendar\";\n\nexport {\n  Diary,\n  DiaryPropsSchema,\n  DiaryDefinition,\n  type DiaryProps,\n} from \"./domain/Diary\";\n\nexport {\n  ResearchReport,\n  type ResearchReportProps,\n  type Source as ResearchSource,\n  type ReportSection,\n} from \"./domain/research\";\n\n// Document Analysis Components (Vectorless Integration)\nexport {\n  DocumentIndex,\n  DocumentIndexPropsSchema,\n  DocumentIndexDefinition,\n  type DocumentIndexProps,\n} from \"./domain/DocumentIndex\";\n\nexport {\n  SourceCitation,\n  SourceCitationPropsSchema,\n  SourceCitationDefinition,\n  type SourceCitationProps,\n} from \"./domain/SourceCitation\";\n\n// ============================================================================\n// Component Registry\n// ============================================================================\n\nimport {\n  Card,\n  Grid,\n  Stack,\n  Divider,\n  Heading,\n  Text,\n  CodeBlock,\n  Document,\n  Badge,\n  Alert,\n  Empty,\n  BrowserAction,\n  Button,\n  TextField,\n  Select,\n  DatePicker,\n  Metric,\n  Table,\n  List,\n  Timeline,\n  SearchResults,\n  DriveFile,\n  DriveFileList,\n  Weather,\n  Audio,\n  Video,\n  Image,\n  Gallery,\n  // Definitions\n  CardDefinition,\n  GridDefinition,\n  StackDefinition,\n  DividerDefinition,\n  HeadingDefinition,\n  TextDefinition,\n  CodeBlockDefinition,\n  DocumentDefinition,\n  BadgeDefinition,\n  AlertDefinition,\n  EmptyDefinition,\n  BrowserActionDefinition,\n  ButtonDefinition,\n  TextFieldDefinition,\n  SelectDefinition,\n  DatePickerDefinition,\n  MetricDefinition,\n  TableDefinition,\n  ListDefinition,\n  TimelineDefinition,\n  SearchResultsDefinition,\n  DriveFileDefinition,\n  DriveFileListDefinition,\n  WeatherDefinition,\n  AudioDefinition,\n  VideoDefinition,\n  ImageDefinition,\n  GalleryDefinition,\n} from \"@onegenui/ui\";\n\nimport { Message } from \"./communication/Message\";\nimport { Email } from \"./communication/Email\";\nimport { MessageDefinition } from \"./communication/Message\";\nimport { EmailDefinition } from \"./communication/Email\";\n\n// Communication exports (these remained in components? check list_dir step 27)\n// Step 27 showed \"communication\" folder. So they are still here.\nexport {\n  Message,\n  MessagePropsSchema,\n  MessageDefinition,\n  type MessageProps,\n} from \"./communication/Message\";\nexport {\n  Email,\n  EmailPropsSchema,\n  EmailDefinition,\n  type EmailProps,\n} from \"./communication/Email\";\n\nimport {\n  CalendarAgenda,\n  CalendarAgendaDefinition,\n} from \"./domain/CalendarAgenda\";\nimport { Workout, WorkoutDefinition } from \"./domain/Workout\";\nimport { Nutrition, NutritionDefinition } from \"./domain/Nutrition\";\nimport { Flight, FlightDefinition } from \"./domain/Flight\";\nimport { Hotel, HotelDefinition } from \"./domain/Hotel\";\nimport { Trip, TripDefinition } from \"./domain/Trip\";\nimport { BookingForms, BookingFormsDefinition } from \"./domain/BookingForms\";\nimport { Kanban, KanbanDefinition } from \"./domain/Kanban\";\nimport { TodoList, TodoListDefinition } from \"./domain/TodoList\";\nimport {\n  RoutineScheduler,\n  RoutineSchedulerDefinition,\n} from \"./domain/RoutineScheduler\";\nimport {\n  SupplementTracker,\n  SupplementTrackerDefinition,\n} from \"./domain/SupplementTracker\";\nimport { Calendar, CalendarDefinition } from \"./domain/Calendar\";\nimport { Diary, DiaryDefinition } from \"./domain/Diary\";\nimport { ResearchReport } from \"./domain/research\";\nimport { ProfileCard } from \"./domain/social/profile-card\";\nimport { ActivityFeed } from \"./domain/feed/activity-feed\";\nimport { Pricing } from \"./domain/commerce/pricing\";\nimport { ArticleCard } from \"./domain/content/article-card\";\nimport { DocumentIndex, DocumentIndexDefinition } from \"./domain/DocumentIndex\";\nimport {\n  SourceCitation,\n  SourceCitationDefinition,\n} from \"./domain/SourceCitation\";\n\n/** Registry type for component lookup by name */\nexport type ComponentRegistry = Record<string, ComponentType<any>>;\n\n/**\n * Component registry - auto-generated from all domains.\n * Use with Renderer to render UI trees.\n */\nexport const componentRegistry: ComponentRegistry = {\n  Card,\n  Grid,\n  Stack,\n  Divider,\n  Heading,\n  Text,\n  CodeBlock,\n  Document,\n  Badge,\n  Alert,\n  Empty,\n  BrowserAction,\n  Button,\n  TextField,\n  Select,\n  DatePicker,\n  Metric,\n  Table,\n  List,\n  Timeline,\n\n  SearchResults,\n  DriveFile,\n  Weather,\n  Audio,\n  Video,\n  Image,\n  Gallery,\n\n  Message,\n  Email,\n  CalendarAgenda,\n  DriveFileList,\n  Workout,\n  Nutrition,\n  Flight,\n  Hotel,\n  Trip,\n  BookingForms,\n  Kanban,\n  ProfileCard,\n  ActivityFeed,\n  Pricing,\n  ArticleCard,\n  TodoList,\n  RoutineScheduler,\n  SupplementTracker,\n  Calendar,\n  Diary,\n  ResearchReport,\n  DocumentIndex,\n  SourceCitation,\n};\n\n/**\n * Component definitions - auto-generated from all domains.\n * Use with createCatalog() to build a catalog.\n */\nexport const componentDefinitions = {\n  Card: CardDefinition,\n  Grid: GridDefinition,\n  Stack: StackDefinition,\n  Divider: DividerDefinition,\n  Heading: HeadingDefinition,\n  Text: TextDefinition,\n  CodeBlock: CodeBlockDefinition,\n  Document: DocumentDefinition,\n  Badge: BadgeDefinition,\n  Alert: AlertDefinition,\n  Empty: EmptyDefinition,\n  BrowserAction: BrowserActionDefinition,\n  Button: ButtonDefinition,\n  TextField: TextFieldDefinition,\n  Select: SelectDefinition,\n  DatePicker: DatePickerDefinition,\n  Metric: MetricDefinition,\n  Table: TableDefinition,\n  List: ListDefinition,\n  Timeline: TimelineDefinition,\n\n  SearchResults: SearchResultsDefinition,\n  DriveFile: DriveFileDefinition,\n  Weather: WeatherDefinition,\n  Audio: AudioDefinition,\n  Video: VideoDefinition,\n  Image: ImageDefinition,\n  Gallery: GalleryDefinition,\n\n  Message: MessageDefinition,\n  Email: EmailDefinition,\n\n  CalendarAgenda: CalendarAgendaDefinition,\n  DriveFileList: DriveFileListDefinition,\n  Workout: WorkoutDefinition,\n  Nutrition: NutritionDefinition,\n  Flight: FlightDefinition,\n  Hotel: HotelDefinition,\n  Trip: TripDefinition,\n  BookingForms: BookingFormsDefinition,\n  Kanban: KanbanDefinition,\n  TodoList: TodoListDefinition,\n  RoutineScheduler: RoutineSchedulerDefinition,\n  SupplementTracker: SupplementTrackerDefinition,\n  Calendar: CalendarDefinition,\n  Diary: DiaryDefinition,\n  DocumentIndex: DocumentIndexDefinition,\n  SourceCitation: SourceCitationDefinition,\n};\n\n// ============================================================================\n// Helpers\n// ============================================================================\n\n/** Get list of all registered component names */\nexport const componentNames = Object.keys(componentRegistry);\n\n/** Check if a component is registered */\nexport function hasComponent(name: string): boolean {\n  return name in componentRegistry;\n}\n\n// ============================================================================\n// Document Components (Vectorless Integration)\n// ============================================================================\n\nexport * from \"./document/index.js\";\n\n// ============================================================================\n// Version\n// ============================================================================\n\nexport const VERSION = \"0.1.0\";\n","\"use client\";\n\nimport { memo, useState, useMemo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { Calendar as CalendarIcon } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport {\n  type CalendarEventItem,\n  formatDateHeader,\n  groupEventsByDate,\n  EventCard,\n  EventDetailView,\n} from \"./components\";\n\nexport const CalendarAgenda = memo(function CalendarAgenda({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    events: initialEvents,\n    selectedDate,\n  } = element.props as {\n    title?: string | null;\n    events?: CalendarEventItem[] | null;\n    selectedDate?: string;\n  };\n\n  const [selectedEvent, setSelectedEvent] = useState<CalendarEventItem | null>(\n    null,\n  );\n  const events = initialEvents || [];\n  const groupedEvents = useMemo(() => groupEventsByDate(events), [events]);\n  const currentDate = selectedDate ? new Date(selectedDate) : new Date();\n\n  return (\n    <div className=\"flex flex-col h-[600px] w-full bg-zinc-950 border border-white/10 rounded-3xl shadow-2xl relative overflow-hidden isolate\">\n      <div className=\"absolute top-0 right-0 w-[400px] h-[400px] bg-indigo-600/5 rounded-full blur-[100px] pointer-events-none -z-10\" />\n      <div className=\"absolute bottom-0 left-0 w-[300px] h-[300px] bg-purple-600/5 rounded-full blur-[90px] pointer-events-none -z-10\" />\n\n      <AnimatePresence mode=\"wait\">\n        {selectedEvent ? (\n          <EventDetailView\n            key=\"detail\"\n            event={selectedEvent}\n            onBack={() => setSelectedEvent(null)}\n          />\n        ) : (\n          <motion.div\n            key=\"list\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"flex flex-col h-full\"\n          >\n            <div className=\"p-6 pb-2\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50\">\n                  {title || \"Agenda\"}\n                </h2>\n                <div className=\"w-10 h-10 rounded-full bg-white/5 border border-white/5 flex items-center justify-center\">\n                  <CalendarIcon className=\"text-white/60\" size={20} />\n                </div>\n              </div>\n\n              <div className=\"text-sm font-bold text-indigo-400 uppercase tracking-widest pl-1 mb-2\">\n                {currentDate.toLocaleDateString(undefined, {\n                  month: \"long\",\n                  year: \"numeric\",\n                })}\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto px-4 pb-6 custom-scrollbar\">\n              {events.length === 0 ? (\n                <EmptyState\n                  icon={<CalendarIcon className=\"w-10 h-10\" />}\n                  message=\"No upcoming events\"\n                />\n              ) : (\n                <div className=\"space-y-8\">\n                  {Array.from(groupedEvents.entries()).map(\n                    ([dateStr, dayEvents]) => {\n                      const { label, sub } = formatDateHeader(\n                        new Date(dateStr),\n                      );\n                      return (\n                        <div key={dateStr} className=\"relative pl-4\">\n                          <div className=\"flex items-baseline gap-3 mb-4 sticky top-0 bg-zinc-950/80 backdrop-blur-xl py-2 z-10 -ml-4 pl-4 border-b border-white/5 w-[calc(100%+32px)]\">\n                            <span className=\"text-xl font-bold text-white\">\n                              {label}\n                            </span>\n                            <span className=\"text-sm font-medium text-white/40\">\n                              {sub}\n                            </span>\n                          </div>\n\n                          <div className=\"absolute left-0 top-10 bottom-0 w-px bg-white/10\" />\n\n                          <div className=\"space-y-3\">\n                            {dayEvents.map((event) => (\n                              <EventCard\n                                key={event.id}\n                                event={event}\n                                onSelect={setSelectedEvent}\n                                elementKey={element.key}\n                              />\n                            ))}\n                          </div>\n                        </div>\n                      );\n                    },\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      {children}\n    </div>\n  );\n});\n","/**\n * Shared UI primitives for domain components\n * Following DRY principle - reusable sub-components\n */\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"./cn\";\n\n// --- Status Badge ---\n\nexport type StatusVariant =\n  | \"success\"\n  | \"warning\"\n  | \"error\"\n  | \"info\"\n  | \"neutral\";\n\nconst STATUS_STYLES: Record<\n  StatusVariant,\n  { bg: string; text: string; border: string }\n> = {\n  success: {\n    bg: \"bg-emerald-500/10\",\n    text: \"text-emerald-400\",\n    border: \"border-emerald-500/20\",\n  },\n  warning: {\n    bg: \"bg-amber-500/10\",\n    text: \"text-amber-400\",\n    border: \"border-amber-500/20\",\n  },\n  error: {\n    bg: \"bg-rose-500/10\",\n    text: \"text-rose-400\",\n    border: \"border-rose-500/20\",\n  },\n  info: {\n    bg: \"bg-blue-500/10\",\n    text: \"text-blue-400\",\n    border: \"border-blue-500/20\",\n  },\n  neutral: {\n    bg: \"bg-zinc-500/10\",\n    text: \"text-zinc-400\",\n    border: \"border-zinc-500/20\",\n  },\n};\n\ninterface StatusBadgeProps {\n  label: string;\n  variant?: StatusVariant;\n  pulse?: boolean;\n  className?: string;\n}\n\nexport const StatusBadge = memo(function StatusBadge({\n  label,\n  variant = \"neutral\",\n  pulse = false,\n  className,\n}: StatusBadgeProps) {\n  const styles = STATUS_STYLES[variant];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider border\",\n        styles.bg,\n        styles.text,\n        styles.border,\n        pulse && \"animate-pulse\",\n        className,\n      )}\n    >\n      <div className=\"w-1.5 h-1.5 rounded-full bg-current\" />\n      {label}\n    </motion.div>\n  );\n});\n\n// --- Progress Bar ---\n\ninterface ProgressBarProps {\n  value: number;\n  max: number;\n  color?: string;\n  showLabel?: boolean;\n  label?: string;\n  className?: string;\n}\n\nexport const ProgressBar = memo(function ProgressBar({\n  value,\n  max,\n  color = \"bg-blue-500\",\n  showLabel = false,\n  label,\n  className,\n}: ProgressBarProps) {\n  const percentage = Math.min(100, Math.max(0, (value / max) * 100));\n\n  return (\n    <div className={cn(\"flex flex-col gap-1.5\", className)}>\n      {(showLabel || label) && (\n        <div className=\"text-[10px] uppercase font-bold text-muted-foreground tracking-wider flex justify-between\">\n          <span>{label}</span>\n          <span className=\"font-mono text-white/50\">{Math.round(value)}</span>\n        </div>\n      )}\n      <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\n          className={cn(\"h-full rounded-full\", color)}\n        />\n      </div>\n    </div>\n  );\n});\n\n// --- Empty State ---\n\ninterface EmptyStateProps {\n  icon: React.ReactNode;\n  message: string;\n  className?: string;\n}\n\nexport const EmptyState = memo(function EmptyState({\n  icon,\n  message,\n  className,\n}: EmptyStateProps) {\n  return (\n    <div\n      className={cn(\n        \"py-20 flex flex-col items-center justify-center border border-dashed border-white/10 rounded-2xl bg-zinc-900/20 text-muted-foreground\",\n        className,\n      )}\n    >\n      <div className=\"opacity-20 mb-4\">{icon}</div>\n      <p className=\"font-mono text-xs uppercase tracking-widest opacity-50\">\n        {message}\n      </p>\n    </div>\n  );\n});\n\n// --- Section Header ---\n\ninterface SectionHeaderProps {\n  title: string;\n  icon?: React.ReactNode;\n  action?: React.ReactNode;\n  className?: string;\n}\n\nexport const SectionHeader = memo(function SectionHeader({\n  title,\n  icon,\n  action,\n  className,\n}: SectionHeaderProps) {\n  return (\n    <div className={cn(\"flex items-center justify-between\", className)}>\n      <h3 className=\"m-0 text-xl font-bold tracking-tight flex items-center gap-2\">\n        {icon}\n        {title}\n      </h3>\n      {action}\n    </div>\n  );\n});\n\n// --- Card Container ---\n\ninterface CardContainerProps {\n  children: React.ReactNode;\n  highlighted?: boolean;\n  className?: string;\n}\n\nexport const CardContainer = memo(function CardContainer({\n  children,\n  highlighted = false,\n  className,\n}: CardContainerProps) {\n  return (\n    <div\n      className={cn(\n        \"relative rounded-2xl border backdrop-blur-xl overflow-hidden transition-all duration-300 isolate\",\n        highlighted\n          ? \"bg-zinc-900/80 border-white/20 shadow-2xl\"\n          : \"bg-zinc-900/40 border-white/10 hover:bg-zinc-900/60 hover:border-white/15\",\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n});\n\n// --- Accent Bar ---\n\ninterface AccentBarProps {\n  active?: boolean;\n  gradient?: string;\n  className?: string;\n}\n\nexport const AccentBar = memo(function AccentBar({\n  active = false,\n  gradient = \"from-blue-500 to-purple-500\",\n  className,\n}: AccentBarProps) {\n  return (\n    <div\n      className={cn(\n        \"w-full h-1 absolute top-0 left-0 right-0 z-10 transition-colors\",\n        active ? `bg-gradient-to-r ${gradient}` : \"bg-white/5\",\n        className,\n      )}\n    />\n  );\n});\n\n// --- Perforated Divider (ticket style) ---\n\nexport const PerforatedDivider = memo(function PerforatedDivider({\n  className,\n}: {\n  className?: string;\n}) {\n  return (\n    <div className={cn(\"relative h-px w-full\", className)}>\n      <div className=\"absolute inset-0 border-t border-dashed border-white/10\" />\n      <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-r border-white/10\" />\n      <div className=\"absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-l border-white/10\" />\n    </div>\n  );\n});\n\n// --- Info Pill ---\n\ninterface InfoPillProps {\n  icon?: React.ReactNode;\n  children: React.ReactNode;\n  variant?: \"default\" | \"primary\" | \"secondary\";\n  className?: string;\n}\n\nexport const InfoPill = memo(function InfoPill({\n  icon,\n  children,\n  variant = \"default\",\n  className,\n}: InfoPillProps) {\n  const variantStyles = {\n    default: \"bg-white/5 text-white/60\",\n    primary: \"bg-sky-500/10 text-sky-400\",\n    secondary: \"bg-purple-500/10 text-purple-400\",\n  };\n\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-medium\",\n        variantStyles[variant],\n        className,\n      )}\n    >\n      {icon}\n      {children}\n    </div>\n  );\n});\n\n// --- Error State ---\n\ninterface ErrorStateProps {\n  title?: string;\n  message: string;\n  onRetry?: () => void;\n  className?: string;\n}\n\nexport const ErrorState = memo(function ErrorState({\n  title = \"Something went wrong\",\n  message,\n  onRetry,\n  className,\n}: ErrorStateProps) {\n  return (\n    <div\n      className={cn(\n        \"py-12 flex flex-col items-center justify-center border border-rose-500/20 rounded-2xl bg-rose-950/20 text-center\",\n        className,\n      )}\n    >\n      <div className=\"text-rose-500 mb-3\">\n        <svg\n          className=\"w-10 h-10\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={1.5}\n            d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n          />\n        </svg>\n      </div>\n      <h4 className=\"text-sm font-semibold text-rose-400 mb-1\">{title}</h4>\n      <p className=\"text-xs text-rose-400/60 max-w-xs\">{message}</p>\n      {onRetry && (\n        <button\n          onClick={onRetry}\n          className=\"mt-4 px-4 py-1.5 text-xs font-medium bg-rose-500/20 hover:bg-rose-500/30 text-rose-400 rounded-lg transition-colors\"\n        >\n          Retry\n        </button>\n      )}\n    </div>\n  );\n});\n\n// --- Skeleton Components ---\n\ninterface SkeletonProps {\n  className?: string;\n}\n\nexport const Skeleton = memo(function Skeleton({ className }: SkeletonProps) {\n  return <div className={cn(\"animate-pulse bg-white/5 rounded\", className)} />;\n});\n\nexport const SkeletonText = memo(function SkeletonText({\n  lines = 1,\n  className,\n}: {\n  lines?: number;\n  className?: string;\n}) {\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      {Array.from({ length: lines }).map((_, i) => (\n        <Skeleton\n          key={i}\n          className={cn(\n            \"h-3 rounded\",\n            i === lines - 1 && lines > 1 ? \"w-3/4\" : \"w-full\",\n          )}\n        />\n      ))}\n    </div>\n  );\n});\n\nexport const SkeletonCard = memo(function SkeletonCard({\n  className,\n}: SkeletonProps) {\n  return (\n    <div\n      className={cn(\n        \"p-4 rounded-xl border border-white/5 bg-zinc-900/40 space-y-3\",\n        className,\n      )}\n    >\n      <Skeleton className=\"h-4 w-1/3\" />\n      <SkeletonText lines={2} />\n      <div className=\"flex gap-2 pt-2\">\n        <Skeleton className=\"h-6 w-16 rounded-full\" />\n        <Skeleton className=\"h-6 w-20 rounded-full\" />\n      </div>\n    </div>\n  );\n});\n\n// --- Loading State ---\n\ninterface LoadingStateProps {\n  message?: string;\n  className?: string;\n}\n\nexport const LoadingState = memo(function LoadingState({\n  message = \"Loading...\",\n  className,\n}: LoadingStateProps) {\n  return (\n    <div\n      className={cn(\n        \"py-16 flex flex-col items-center justify-center text-muted-foreground\",\n        className,\n      )}\n    >\n      <div className=\"w-8 h-8 border-2 border-white/10 border-t-white/40 rounded-full animate-spin mb-4\" />\n      <p className=\"font-mono text-xs uppercase tracking-widest opacity-50\">\n        {message}\n      </p>\n    </div>\n  );\n});\n","// Re-export from shared utils package\nexport { cn } from \"@onegenui/utils\";\n","import type { StatusVariant } from \"../../../utils/shared-components\";\n\nexport const RESPONSE_TO_VARIANT: Record<string, StatusVariant> = {\n  accepted: \"success\",\n  declined: \"error\",\n  tentative: \"warning\",\n  needsAction: \"neutral\",\n};\n\nexport interface CalendarEventItem {\n  id: string;\n  title: string;\n  description?: string | null;\n  location?: string | null;\n  start: string;\n  end?: string | null;\n  allDay?: boolean;\n  attendees?: Array<{\n    email: string;\n    name?: string;\n    responseStatus?: string;\n  }> | null;\n  meetingLink?: string | null;\n  color?: string | null;\n}\n\nexport function formatEventTime(\n  start: string,\n  end?: string | null,\n  allDay?: boolean,\n): string {\n  if (allDay) return \"All day\";\n  try {\n    const startDate = new Date(start);\n    const startTime = startDate.toLocaleTimeString(undefined, {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n    if (end) {\n      const endDate = new Date(end);\n      const endTime = endDate.toLocaleTimeString(undefined, {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n      return `${startTime} - ${endTime}`;\n    }\n    return startTime;\n  } catch {\n    return start;\n  }\n}\n\nexport function formatDateHeader(date: Date): { label: string; sub: string } {\n  const today = new Date();\n  const tomorrow = new Date(today);\n  tomorrow.setDate(tomorrow.getDate() + 1);\n\n  const isToday = date.toDateString() === today.toDateString();\n  const isTomorrow = date.toDateString() === tomorrow.toDateString();\n\n  return {\n    label: isToday\n      ? \"Today\"\n      : isTomorrow\n        ? \"Tomorrow\"\n        : date.toLocaleDateString(undefined, { weekday: \"long\" }),\n    sub: date.toLocaleDateString(undefined, { day: \"numeric\", month: \"short\" }),\n  };\n}\n\nexport function groupEventsByDate(\n  events: CalendarEventItem[],\n): Map<string, CalendarEventItem[]> {\n  const grouped = new Map<string, CalendarEventItem[]>();\n  const sorted = [...events].sort(\n    (a, b) => new Date(a.start).getTime() - new Date(b.start).getTime(),\n  );\n\n  for (const event of sorted) {\n    const date = new Date(event.start).toDateString();\n    const existing = grouped.get(date) || [];\n    existing.push(event);\n    grouped.set(date, existing);\n  }\n  return grouped;\n}\n","import { memo } from \"react\";\nimport { MapPin, Video, ChevronRight } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport type { CalendarEventItem } from \"./utils\";\n\ninterface EventCardProps {\n  event: CalendarEventItem;\n  onSelect: (e: CalendarEventItem) => void;\n  elementKey: string;\n}\n\nexport const EventCard = memo(function EventCard({\n  event,\n  onSelect,\n  elementKey,\n}: EventCardProps) {\n  const eventColor = event.color || \"var(--primary)\";\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -10 }}\n      animate={{ opacity: 1, x: 0 }}\n      whileHover={{ scale: 1.01, x: 4 }}\n      onClick={() => onSelect(event)}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={event.id}\n      className=\"group relative pl-4 pr-4 py-4 rounded-2xl bg-zinc-900/40 hover:bg-zinc-900/60 border border-white/5 hover:border-white/10 cursor-pointer transition-all mb-3 overflow-hidden\"\n      style={{ \"--accent\": eventColor } as React.CSSProperties}\n    >\n      <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-[var(--accent)]\" />\n      <div className=\"absolute inset-0 bg-gradient-to-r from-[var(--accent)] to-transparent opacity-0 group-hover:opacity-10 transition-opacity duration-300 pointer-events-none\" />\n\n      <div className=\"flex items-start justify-between gap-4 relative z-10\">\n        <div className=\"flex flex-col gap-1 min-w-[70px]\">\n          <span className=\"text-xs font-bold text-white/50 font-mono\">\n            {new Date(event.start).toLocaleTimeString(undefined, {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              hour12: false,\n            })}\n          </span>\n          {event.end && (\n            <span className=\"text-[10px] font-medium text-white/30 font-mono\">\n              {new Date(event.end).toLocaleTimeString(undefined, {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: false,\n              })}\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"text-base font-bold text-foreground leading-tight mb-1 group-hover:text-white transition-colors\">\n            {event.title}\n          </h4>\n          {event.location && (\n            <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1\">\n              <MapPin size={10} className=\"text-white/40\" />\n              <span className=\"truncate\">{event.location}</span>\n            </div>\n          )}\n          {event.meetingLink && (\n            <div className=\"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-[var(--accent)]/10 text-[var(--accent)] text-[10px] font-bold border border-[var(--accent)]/20 mt-1\">\n              <Video size={10} /> Video Call\n            </div>\n          )}\n        </div>\n\n        <ChevronRight\n          size={16}\n          className=\"text-white/20 group-hover:text-white/60 self-center\"\n        />\n      </div>\n    </motion.div>\n  );\n});\n","import { memo } from \"react\";\nimport {\n  Calendar as CalendarIcon,\n  Clock,\n  MapPin,\n  Video,\n  ArrowLeft,\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport type { CalendarEventItem } from \"./utils\";\nimport { formatEventTime, RESPONSE_TO_VARIANT } from \"./utils\";\n\ninterface EventDetailViewProps {\n  event: CalendarEventItem;\n  onBack: () => void;\n}\n\nexport const EventDetailView = memo(function EventDetailView({\n  event,\n  onBack,\n}: EventDetailViewProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 20 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 20 }}\n      className=\"flex-1 overflow-auto flex flex-col h-full bg-zinc-950/50\"\n    >\n      <div className=\"p-4 border-b border-white/10 flex items-center gap-2\">\n        <button\n          onClick={onBack}\n          className=\"p-2 rounded-full hover:bg-white/10 text-white/70 hover:text-white transition-colors\"\n        >\n          <ArrowLeft size={20} />\n        </button>\n        <span className=\"text-sm font-bold text-white/40 uppercase tracking-widest\">\n          Event Details\n        </span>\n      </div>\n\n      <div className=\"p-6 md:p-8\">\n        <div className=\"flex gap-5 mb-8\">\n          <div\n            className=\"w-1.5 rounded-full shadow-[0_0_15px_var(--accent)]\"\n            style={\n              {\n                backgroundColor: event.color || \"var(--primary)\",\n                \"--accent\": event.color || \"var(--primary)\",\n              } as React.CSSProperties\n            }\n          />\n          <div>\n            <h1 className=\"text-3xl font-black text-white leading-tight mb-2\">\n              {event.title}\n            </h1>\n            <div className=\"flex items-center gap-2 text-lg text-white/60\">\n              <CalendarIcon size={18} />\n              {new Date(event.start).toLocaleDateString(undefined, {\n                weekday: \"long\",\n                month: \"long\",\n                day: \"numeric\",\n              })}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <div className=\"bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center\">\n                <Clock size={20} />\n              </div>\n              <div>\n                <div className=\"text-xs font-bold text-white/40 uppercase\">\n                  Time\n                </div>\n                <div className=\"font-semibold text-white\">\n                  {formatEventTime(event.start, event.end, event.allDay)}\n                </div>\n              </div>\n            </div>\n\n            {event.location && (\n              <div className=\"bg-white/5 border border-white/5 rounded-2xl p-4 flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center\">\n                  <MapPin size={20} />\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-white/40 uppercase\">\n                    Location\n                  </div>\n                  <div className=\"font-semibold text-white\">\n                    {event.location}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {event.meetingLink && (\n            <a\n              href={event.meetingLink}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"flex items-center justify-center gap-2 w-full p-4 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold transition-all hover:scale-[1.02] shadow-lg shadow-indigo-600/20\"\n            >\n              <Video size={18} /> Join Meeting\n            </a>\n          )}\n\n          {event.description && (\n            <div>\n              <div className=\"text-sm font-bold text-white/50 mb-3 uppercase tracking-wider\">\n                About\n              </div>\n              <div className=\"bg-white/5 border border-white/5 rounded-2xl p-5 text-white/80 leading-relaxed whitespace-pre-wrap\">\n                {event.description}\n              </div>\n            </div>\n          )}\n\n          {event.attendees && event.attendees.length > 0 && (\n            <div>\n              <div className=\"text-sm font-bold text-white/50 mb-3 uppercase tracking-wider\">\n                Attendees\n              </div>\n              <div className=\"flex flex-col gap-2\">\n                {event.attendees.map((attendee, i) => (\n                  <div\n                    key={i}\n                    className=\"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-zinc-700 to-zinc-800 flex items-center justify-center text-xs font-bold text-white border border-white/10\">\n                      {(attendee.name || attendee.email)\n                        .charAt(0)\n                        .toUpperCase()}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"text-sm font-bold text-white\">\n                        {attendee.name || attendee.email}\n                      </div>\n                      {attendee.name && (\n                        <div className=\"text-xs text-white/40\">\n                          {attendee.email}\n                        </div>\n                      )}\n                    </div>\n                    {attendee.responseStatus && (\n                      <StatusBadge\n                        label={attendee.responseStatus}\n                        variant={\n                          RESPONSE_TO_VARIANT[attendee.responseStatus] ||\n                          \"neutral\"\n                        }\n                      />\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { Lock, Unlock, Activity, BicepsFlexed } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { WorkoutProps } from \"./schema\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { SessionTimer } from \"./components/session-timer\";\nimport {\n  ExerciseItemCard,\n  SupersetGroup,\n} from \"./components/exercise-item-card\";\nimport { getWorkoutAdapter, getWorkoutStateAdapter } from \"./adapters\";\nimport { useWorkoutLogic } from \"./hooks\";\n\nexport const Workout = memo(function Workout({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    items,\n    exercises,\n    lock: initialLock = false,\n  } = element.props as WorkoutProps;\n\n  const resolvedItems = useMemo(() => {\n    const raw = items || exercises || [];\n    return Array.isArray(raw) ? raw : [];\n  }, [items, exercises]);\n\n  const workoutAdapter = getWorkoutAdapter();\n  const stateAdapter = getWorkoutStateAdapter();\n\n  const {\n    displayItems,\n    expandedIds,\n    isLocked,\n    toggleExpand,\n    toggleLock,\n    updateExercise,\n    updateSeries,\n    addSet,\n    removeSet,\n  } = useWorkoutLogic(workoutAdapter, stateAdapter, {\n    initialItems: resolvedItems,\n    lock: initialLock,\n  });\n\n  useDomainAutoSave(\"workout\", element.key, {\n    title,\n    date: new Date().toISOString(),\n    items: displayItems,\n    status: \"active\",\n  });\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      <div className=\"flex items-center justify-between\">\n        {title && (\n          <h3 className=\"m-0 text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60 tracking-tight flex items-center gap-3\">\n            <Activity className=\"w-5 h-5 text-emerald-500\" />\n            {title}\n          </h3>\n        )}\n        <div className=\"flex items-center gap-3\">\n          <SessionTimer />\n          <button\n            onClick={toggleLock}\n            className={cn(\n              \"h-8 w-8 flex items-center justify-center rounded-lg border transition-colors\",\n              isLocked\n                ? \"bg-red-500/10 border-red-500/20 text-red-500\"\n                : \"bg-zinc-900 border-zinc-700 text-zinc-400 hover:text-white\",\n            )}\n          >\n            {isLocked ? <Lock size={12} /> : <Unlock size={12} />}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-4\">\n        {displayItems.length === 0 ? (\n          <EmptyState\n            icon={<BicepsFlexed className=\"w-12 h-12\" />}\n            message=\"No exercises programmed\"\n          />\n        ) : (\n          displayItems.map((item) =>\n            item.items && item.items.length > 0 ? (\n              <SupersetGroup\n                key={item.id}\n                item={item}\n                elementKey={element.key}\n                expandedIds={expandedIds}\n                isLocked={isLocked}\n                onToggleExpand={toggleExpand}\n                onUpdateExercise={updateExercise}\n                onUpdateSeries={updateSeries}\n                onAddSet={addSet}\n                onRemoveSet={removeSet}\n              />\n            ) : (\n              <ExerciseItemCard\n                key={item.id}\n                item={item}\n                elementKey={element.key}\n                isExpanded={expandedIds.has(item.id)}\n                isLocked={isLocked}\n                onToggleExpand={toggleExpand}\n                onUpdateExercise={updateExercise}\n                onUpdateSeries={updateSeries}\n                onAddSet={addSet}\n                onRemoveSet={removeSet}\n              />\n            ),\n          )\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useEffect } from \"react\";\nimport { Timer, Play, RotateCcw } from \"lucide-react\";\n\nexport const SessionTimer = memo(function SessionTimer() {\n  const [time, setTime] = useState(0);\n  const [isActive, setIsActive] = useState(false);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isActive) {\n      interval = setInterval(() => {\n        setTime((t) => t + 1);\n      }, 1000);\n    }\n    return () => clearInterval(interval);\n  }, [isActive]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n  };\n\n  return (\n    <div className=\"flex items-center gap-3 px-3 py-1.5 rounded-lg border border-white/10 bg-black/40 backdrop-blur-md\">\n      <Timer\n        className={\n          isActive ? \"text-emerald-400 animate-pulse\" : \"text-zinc-500\"\n        }\n        size={14}\n      />\n      <div className=\"font-mono text-sm font-medium text-white tracking-widest tabular-nums\">\n        {formatTime(time)}\n      </div>\n      {isActive ? (\n        <button\n          onClick={() => setIsActive(false)}\n          className=\"text-zinc-400 hover:text-white transition-colors\"\n        >\n          <span className=\"w-2 h-2 rounded-sm bg-current block\" />\n        </button>\n      ) : (\n        <button\n          onClick={() => setIsActive(true)}\n          className=\"text-zinc-400 hover:text-white transition-colors\"\n        >\n          <Play size={10} fill=\"currentColor\" />\n        </button>\n      )}\n      <button\n        onClick={() => {\n          setIsActive(false);\n          setTime(0);\n        }}\n        className=\"text-zinc-600 hover:text-white transition-colors\"\n      >\n        <RotateCcw size={10} />\n      </button>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ChevronDown } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport { WorkoutExerciseCard } from \"./WorkoutExerciseCard\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\n\ninterface ExerciseItemCardProps {\n  item: ExerciseItem;\n  elementKey: string;\n  isExpanded: boolean;\n  isLocked: boolean;\n  onToggleExpand: (id: string) => void;\n  onUpdateExercise: (id: string, field: keyof ExerciseItem, value: any) => void;\n  onUpdateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: any,\n  ) => void;\n  onAddSet: (exerciseId: string) => void;\n  onRemoveSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport const ExerciseItemCard = memo(function ExerciseItemCard({\n  item,\n  elementKey,\n  isExpanded,\n  isLocked,\n  onToggleExpand,\n  onUpdateExercise,\n  onUpdateSeries,\n  onAddSet,\n  onRemoveSet,\n}: ExerciseItemCardProps) {\n  const series = item.series || [];\n  const completedSets = series.filter((s) => s.completed).length;\n  const totalSets = series.length;\n\n  return (\n    <motion.div\n      layout\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      key={item.id}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={item.id}\n        className={cn(\n          \"group relative overflow-hidden rounded-2xl border transition-all duration-300 isolate\",\n          isExpanded\n            ? \"bg-zinc-900/80 border-white/20 shadow-2xl\"\n            : \"bg-zinc-900/40 border-white/5 hover:bg-zinc-900/60 hover:border-white/10\",\n        )}\n      >\n        <div\n          className={cn(\n            \"w-full h-1 absolute top-0 left-0 right-0 z-10 transition-colors\",\n            isExpanded\n              ? \"bg-gradient-to-r from-emerald-500 to-teal-500\"\n              : \"bg-white/5\",\n          )}\n        />\n\n        <div\n          onClick={() => onToggleExpand(item.id)}\n          className=\"p-4 flex items-center gap-4 cursor-pointer relative z-20\"\n        >\n          <div\n            className={cn(\n              \"w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg border transition-all duration-300\",\n              isExpanded\n                ? \"bg-emerald-500/10 border-emerald-500/30 text-emerald-400\"\n                : \"bg-white/5 border-white/5 text-zinc-500 group-hover:text-zinc-300\",\n            )}\n          >\n            {item.name[0]}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <h4 className=\"text-base font-bold text-white tracking-tight leading-tight group-hover:text-emerald-50 transition-colors\">\n              {item.name}\n            </h4>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className=\"text-xs font-mono text-muted-foreground\">\n                {completedSets}/{totalSets} DONE\n              </span>\n              <div className=\"w-1 h-1 rounded-full bg-zinc-700\" />\n              <span className=\"text-xs font-mono text-muted-foreground\">\n                LAST: {series[series.length - 1]?.weight || \"-\"} KG\n              </span>\n            </div>\n          </div>\n\n          <div\n            className={cn(\n              \"w-8 h-8 flex items-center justify-center rounded-lg transition-transform duration-300\",\n              isExpanded\n                ? \"bg-white/10 rotate-180 text-white\"\n                : \"text-zinc-500\",\n            )}\n          >\n            <ChevronDown size={14} />\n          </div>\n        </div>\n\n        <AnimatePresence>\n          {isExpanded && (\n            <motion.div\n              initial={{ height: 0, opacity: 0 }}\n              animate={{ height: \"auto\", opacity: 1 }}\n              exit={{ height: 0, opacity: 0 }}\n              className=\"relative z-0\"\n            >\n              <PerforatedDivider />\n\n              <div className=\"p-4 pt-6 bg-black/20\">\n                <WorkoutExerciseCard\n                  exercise={item}\n                  lock={isLocked}\n                  onUpdateExercise={(field, val) =>\n                    onUpdateExercise(item.id, field, val)\n                  }\n                  onUpdateSeries={(sId, field, val) =>\n                    onUpdateSeries(item.id, sId, field, val)\n                  }\n                  onAddSet={() => onAddSet(item.id)}\n                  onRemoveSet={(sId) => onRemoveSet(item.id, sId)}\n                  isExpanded={true}\n                  onToggleExpand={() => {}}\n                />\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n\ninterface SupersetGroupProps {\n  item: ExerciseItem;\n  elementKey: string;\n  expandedIds: Set<string>;\n  isLocked: boolean;\n  onToggleExpand: (id: string) => void;\n  onUpdateExercise: (id: string, field: keyof ExerciseItem, value: any) => void;\n  onUpdateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: any,\n  ) => void;\n  onAddSet: (exerciseId: string) => void;\n  onRemoveSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport const SupersetGroup = memo(function SupersetGroup({\n  item,\n  elementKey,\n  expandedIds,\n  isLocked,\n  onToggleExpand,\n  onUpdateExercise,\n  onUpdateSeries,\n  onAddSet,\n  onRemoveSet,\n}: SupersetGroupProps) {\n  return (\n    <div className=\"mb-6 relative pl-4 border-l border-dashed border-white/10\">\n      <div className=\"absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full bg-zinc-800 border border-zinc-600\" />\n      <div className=\"flex items-center gap-2 mb-3\">\n        <span className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest bg-zinc-900 border border-white/10 px-2 py-0.5 rounded\">\n          Superset\n        </span>\n      </div>\n      <div className=\"flex flex-col gap-4\">\n        {item.items?.map((sub) => (\n          <ExerciseItemCard\n            key={sub.id}\n            item={sub}\n            elementKey={elementKey}\n            isExpanded={expandedIds.has(sub.id)}\n            isLocked={isLocked}\n            onToggleExpand={onToggleExpand}\n            onUpdateExercise={onUpdateExercise}\n            onUpdateSeries={onUpdateSeries}\n            onAddSet={onAddSet}\n            onRemoveSet={onRemoveSet}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport {\n  Dumbbell,\n  Plus,\n  ChevronDown,\n  Activity,\n  Flame,\n  Target,\n  Clock,\n  TrendingUp,\n} from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { ExerciseItem, WorkoutSet } from \"../types\";\nimport { WorkoutSetRow } from \"./WorkoutSetRow\";\nimport {\n  ProgressRing,\n  CardioDetails,\n  getExerciseGradient,\n} from \"./exercise-parts\";\n\ninterface WorkoutExerciseCardProps {\n  exercise: ExerciseItem;\n  lock: boolean;\n  onUpdateExercise: (field: keyof ExerciseItem, value: any) => void;\n  onUpdateSeries: (\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: any,\n  ) => void;\n  onAddSet: () => void;\n  onRemoveSet: (seriesId: string) => void;\n  isExpanded: boolean;\n  onToggleExpand: () => void;\n}\n\n// Get icon based on exercise type\nconst getExerciseIcon = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return <Activity size={18} />;\n    case \"warmup\":\n      return <Flame size={18} />;\n    default:\n      return <Dumbbell size={18} />;\n  }\n};\n\nexport const WorkoutExerciseCard = memo(\n  ({\n    exercise,\n    lock,\n    onUpdateExercise,\n    onUpdateSeries,\n    onAddSet,\n    onRemoveSet,\n    isExpanded,\n    onToggleExpand,\n  }: WorkoutExerciseCardProps) => {\n    // Series are now generated in the adapter via mergeEdits\n    const series = exercise.series || [];\n\n    const completedSets = series.filter((s) => s.completed).length;\n    const totalSets = series.length;\n    const progress = totalSets > 0 ? (completedSets / totalSets) * 100 : 0;\n    const hasProgress = totalSets > 0;\n    const isCardio = exercise.type === \"cardio\";\n\n    return (\n      <div\n        className={cn(\n          \"group/card relative rounded-2xl overflow-hidden mb-3 transition-all duration-300\",\n          \"bg-gradient-to-br from-white/[0.08] to-white/[0.02]\",\n          \"border border-white/[0.08]\",\n          \"shadow-[0_8px_32px_-8px_rgba(0,0,0,0.4),0_2px_8px_-2px_rgba(0,0,0,0.2)]\",\n          \"hover:border-white/15 hover:shadow-[0_12px_40px_-8px_rgba(0,0,0,0.5),0_4px_12px_-2px_rgba(0,0,0,0.3)]\",\n          \"backdrop-blur-xl\",\n          isExpanded && \"ring-1 ring-white/5\",\n        )}\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-br from-blue-500/[0.02] via-transparent to-purple-500/[0.02] pointer-events-none\" />\n\n        {/* Header */}\n        <div\n          className=\"relative p-4 flex items-center gap-4 cursor-pointer select-none\"\n          onClick={onToggleExpand}\n        >\n          <div className=\"relative\">\n            {!isCardio && hasProgress && (\n              <div className=\"absolute inset-0 flex items-center justify-center\">\n                <ProgressRing progress={progress} size={48} />\n              </div>\n            )}\n            <div\n              className={cn(\n                \"relative z-10 p-2.5 rounded-xl shadow-lg ring-1 transition-transform duration-300 group-hover/card:scale-105 bg-gradient-to-br\",\n                getExerciseGradient(exercise.type),\n              )}\n            >\n              {getExerciseIcon(exercise.type)}\n            </div>\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-[15px] font-bold text-white truncate pr-2 group-hover/card:text-blue-100 transition-colors\">\n              {exercise.name}\n            </h3>\n            <div className=\"text-xs text-white/40 flex items-center gap-2 mt-1 flex-wrap\">\n              {isCardio ? (\n                <>\n                  {exercise.duration && (\n                    <span className=\"flex items-center gap-1 bg-violet-500/15 text-violet-300 px-2 py-0.5 rounded-full font-medium\">\n                      <Clock size={10} />\n                      {exercise.duration}\n                    </span>\n                  )}\n                  {exercise.intensity && (\n                    <span className=\"flex items-center gap-1 bg-rose-500/15 text-rose-300 px-2 py-0.5 rounded-full font-medium capitalize\">\n                      <Flame size={10} />\n                      {exercise.intensity}\n                    </span>\n                  )}\n                </>\n              ) : (\n                <>\n                  <span className=\"font-semibold text-white/60\">\n                    {completedSets}/{totalSets} done\n                  </span>\n                  {hasProgress && (\n                    <span className=\"text-[10px] font-mono text-emerald-400/80 bg-emerald-500/10 px-2 py-0.5 rounded-full border border-emerald-500/20\">\n                      {Math.round(progress)}%\n                    </span>\n                  )}\n                  {exercise.reps && (\n                    <span className=\"bg-white/5 px-2 py-0.5 rounded-full text-[10px] font-bold text-white/50\">\n                      {exercise.reps} reps\n                    </span>\n                  )}\n                  {exercise.rpe && (\n                    <span className=\"flex items-center gap-1 bg-amber-500/15 text-amber-300 px-2 py-0.5 rounded-full text-[10px] font-bold\">\n                      <Target size={9} />\n                      RPE {exercise.rpe}\n                    </span>\n                  )}\n                </>\n              )}\n              {exercise.notes && !isExpanded && (\n                <span className=\"text-white/30 text-[10px] italic truncate max-w-[120px]\">\n                  {exercise.notes}\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div\n            className={cn(\n              \"p-2 rounded-lg transition-all duration-300\",\n              \"text-white/20 group-hover/card:text-white/50\",\n              isExpanded && \"bg-white/5 text-white/40\",\n            )}\n          >\n            <ChevronDown\n              size={18}\n              className={cn(\n                \"transition-transform duration-300\",\n                !isExpanded && \"-rotate-90\",\n              )}\n            />\n          </div>\n        </div>\n\n        {/* Expanded Content */}\n        <div\n          className={cn(\n            \"overflow-hidden transition-all duration-300 ease-out\",\n            isExpanded ? \"max-h-[800px] opacity-100\" : \"max-h-0 opacity-0\",\n          )}\n        >\n          <div className=\"px-4 pb-4 pt-0 border-t border-white/5\">\n            {(exercise.rationale || exercise.notes) && (\n              <div className=\"mt-4 mb-4 p-3 bg-gradient-to-r from-blue-500/10 to-indigo-500/5 border-l-2 border-blue-500 rounded-r-lg\">\n                <div className=\"flex items-center gap-1.5 text-[10px] uppercase tracking-widest font-bold text-blue-300/60 mb-1\">\n                  <TrendingUp size={10} />\n                  {exercise.rationale ? \"Coach Notes\" : \"Notes\"}\n                </div>\n                <p className=\"text-sm text-blue-200/80\">\n                  {exercise.rationale || exercise.notes}\n                </p>\n              </div>\n            )}\n\n            {isCardio ? (\n              <div className=\"mt-4\">\n                <CardioDetails\n                  duration={exercise.duration}\n                  intensity={exercise.intensity}\n                  notes={!exercise.rationale ? exercise.notes : undefined}\n                />\n              </div>\n            ) : (\n              <>\n                {series.length > 0 && (\n                  <div className=\"grid grid-cols-[36px_1fr_1fr_1fr_36px_36px] gap-2 mt-4 mb-2 px-2 text-[9px] uppercase font-bold text-white/25 tracking-[0.15em] text-center\">\n                    <span>Set</span>\n                    <span>Weight</span>\n                    <span>Reps</span>\n                    <span>RPE</span>\n                    <span>Done</span>\n                    <span></span>\n                  </div>\n                )}\n                <div className=\"space-y-1.5\">\n                  {series.map((set, idx) => (\n                    <WorkoutSetRow\n                      key={set.id || idx}\n                      set={set}\n                      index={idx}\n                      lock={lock}\n                      onUpdate={(field, val) =>\n                        onUpdateSeries(set.id, field, val)\n                      }\n                      onRemove={() => onRemoveSet(set.id)}\n                    />\n                  ))}\n                </div>\n                {!lock && (\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onAddSet();\n                    }}\n                    className={cn(\n                      \"mt-4 w-full py-3 flex items-center justify-center gap-2 rounded-xl\",\n                      \"border-2 border-dashed border-white/10\",\n                      \"text-sm font-semibold text-white/30\",\n                      \"transition-all duration-300\",\n                      \"hover:text-white hover:border-blue-500/40 hover:bg-blue-500/10\",\n                      \"active:scale-[0.98]\",\n                      \"group/add\",\n                    )}\n                  >\n                    <Plus\n                      size={16}\n                      className=\"transition-transform duration-300 group-hover/add:rotate-90\"\n                    />\n                    Add Set\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\n","import { Check, Trash2 } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { WorkoutSet } from \"../types\";\n\ninterface WorkoutSetRowProps {\n  set: WorkoutSet;\n  index: number;\n  lock: boolean;\n  onUpdate: (field: keyof WorkoutSet, value: any) => void;\n  onRemove: () => void;\n}\n\nexport const WorkoutSetRow = ({\n  set,\n  index,\n  lock,\n  onUpdate,\n  onRemove,\n}: WorkoutSetRowProps) => {\n  const isCompleted = set.completed;\n\n  return (\n    <div\n      className={cn(\n        \"group relative grid grid-cols-[36px_1fr_1fr_1fr_36px_36px] gap-2 items-center p-2.5 rounded-xl transition-all duration-300 border text-sm\",\n        isCompleted\n          ? \"bg-gradient-to-r from-emerald-500/15 via-emerald-500/10 to-green-500/5 border-emerald-500/25 shadow-[0_0_20px_-5px_rgba(16,185,129,0.25),inset_0_1px_0_rgba(255,255,255,0.05)]\"\n          : \"bg-white/[0.03] border-white/[0.06] hover:bg-white/[0.06] hover:border-white/10\",\n      )}\n    >\n      {/* Completion glow effect */}\n      {isCompleted && (\n        <div className=\"absolute inset-0 rounded-xl bg-gradient-to-r from-emerald-500/5 to-transparent pointer-events-none\" />\n      )}\n\n      {/* Set Number */}\n      <div className=\"flex justify-center items-center relative z-10\">\n        <span\n          className={cn(\n            \"w-6 h-6 flex items-center justify-center rounded-lg text-[11px] font-bold transition-all duration-300\",\n            isCompleted\n              ? \"bg-gradient-to-br from-emerald-500 to-green-600 text-white shadow-lg shadow-emerald-500/30 scale-105\"\n              : \"bg-white/5 text-white/50 border border-white/10\",\n          )}\n        >\n          {set.setNumber || index + 1}\n        </span>\n      </div>\n\n      {/* Weight Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold tracking-wider py-1.5\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n          >\n            {set.weight ?? <span className=\"text-white/15\"></span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.weight ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"weight\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n            placeholder=\"\"\n          />\n        )}\n      </div>\n\n      {/* Reps Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold tracking-wider py-1.5\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n          >\n            {set.reps ?? <span className=\"text-white/15\"></span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.reps ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"reps\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-100\" : \"text-white\",\n            )}\n            placeholder=\"\"\n          />\n        )}\n      </div>\n\n      {/* RPE Input */}\n      <div className=\"relative z-10\">\n        {lock ? (\n          <div\n            className={cn(\n              \"text-center font-mono font-bold py-1.5\",\n              isCompleted ? \"text-emerald-200/70\" : \"text-white/60\",\n            )}\n          >\n            {set.rpe ?? <span className=\"text-white/15\"></span>}\n          </div>\n        ) : (\n          <input\n            type=\"number\"\n            value={set.rpe ?? \"\"}\n            onChange={(e) =>\n              onUpdate(\n                \"rpe\",\n                e.target.value === \"\" ? null : parseFloat(e.target.value),\n              )\n            }\n            onClick={(e) => e.stopPropagation()}\n            onPointerDown={(e) => e.stopPropagation()}\n            className={cn(\n              \"w-full text-center font-mono font-bold outline-none rounded-lg py-1.5 px-2 transition-all duration-200\",\n              \"bg-black/20 border border-transparent\",\n              \"placeholder:text-white/10\",\n              \"focus:border-blue-500/50 focus:bg-black/30 focus:ring-2 focus:ring-blue-500/20\",\n              \"hover:bg-black/25\",\n              isCompleted ? \"text-emerald-200/80\" : \"text-white/80\",\n            )}\n            placeholder=\"\"\n          />\n        )}\n      </div>\n\n      {/* Complete Toggle */}\n      <div className=\"flex justify-center relative z-10\">\n        <button\n          onClick={() => !lock && onUpdate(\"completed\", !isCompleted)}\n          disabled={lock}\n          className={cn(\n            \"w-7 h-7 rounded-lg flex items-center justify-center transition-all duration-300 border\",\n            isCompleted\n              ? \"bg-gradient-to-br from-emerald-500 to-green-600 border-emerald-400/50 text-white shadow-lg shadow-emerald-500/40 scale-105\"\n              : \"bg-white/5 border-white/10 text-white/20 hover:text-white hover:bg-white/10 hover:border-white/20 hover:scale-105\",\n            lock && \"cursor-not-allowed opacity-50\",\n          )}\n        >\n          {isCompleted ? (\n            <Check size={14} strokeWidth={3} className=\"drop-shadow-sm\" />\n          ) : (\n            <div className=\"w-2 h-2 rounded-full bg-white/10\" />\n          )}\n        </button>\n      </div>\n\n      {/* Delete Button - Only visible on hover if not locked */}\n      <div className=\"relative z-10\">\n        {!lock && (\n          <div className=\"flex justify-center opacity-0 group-hover:opacity-100 transition-all duration-200\">\n            <button\n              onClick={onRemove}\n              className=\"w-7 h-7 rounded-lg flex items-center justify-center text-red-400/40 hover:text-red-400 hover:bg-red-500/15 transition-all duration-200 border border-transparent hover:border-red-500/20\"\n            >\n              <Trash2 size={13} />\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","/**\n * WorkoutExerciseCard sub-components\n */\n\nimport { memo } from \"react\";\nimport { Clock, Flame } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\n\n// Progress ring component for visual completion indicator\nexport const ProgressRing = memo(function ProgressRing({\n  progress,\n  size = 44,\n}: {\n  progress: number;\n  size?: number;\n}) {\n  const strokeWidth = 3;\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (progress / 100) * circumference;\n\n  return (\n    <svg width={size} height={size} className=\"transform -rotate-90\">\n      <circle\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth={strokeWidth}\n        className=\"text-white/5\"\n      />\n      <circle\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        fill=\"none\"\n        stroke=\"url(#progressGradient)\"\n        strokeWidth={strokeWidth}\n        strokeDasharray={circumference}\n        strokeDashoffset={offset}\n        strokeLinecap=\"round\"\n        className=\"transition-all duration-500 ease-out\"\n      />\n      <defs>\n        <linearGradient id=\"progressGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stopColor=\"#22c55e\" />\n          <stop offset=\"100%\" stopColor=\"#86efac\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  );\n});\n\n// Cardio details component\nexport const CardioDetails = memo(function CardioDetails({\n  duration,\n  intensity,\n  notes,\n}: {\n  duration?: string | null;\n  intensity?: string | null;\n  notes?: string | null;\n}) {\n  const intensityColors: Record<string, string> = {\n    low: \"from-emerald-500/20 to-emerald-600/10 text-emerald-400 border-emerald-500/30\",\n    moderate:\n      \"from-amber-500/20 to-amber-600/10 text-amber-400 border-amber-500/30\",\n    high: \"from-rose-500/20 to-rose-600/10 text-rose-400 border-rose-500/30\",\n  };\n\n  const getIntensityColor = (int?: string | null) => {\n    if (!int) return intensityColors.moderate;\n    const lower = int.toLowerCase();\n    if (lower.includes(\"low\") || lower.includes(\"easy\"))\n      return intensityColors.low;\n    if (\n      lower.includes(\"high\") ||\n      lower.includes(\"hard\") ||\n      lower.includes(\"intense\")\n    )\n      return intensityColors.high;\n    return intensityColors.moderate;\n  };\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Duration & Intensity Row */}\n      <div className=\"flex gap-3\">\n        {duration && (\n          <div className=\"flex-1 bg-gradient-to-br from-violet-500/15 to-violet-600/5 rounded-xl p-4 border border-violet-500/20\">\n            <div className=\"flex items-center gap-2 text-violet-300/60 text-[10px] uppercase tracking-widest font-bold mb-1\">\n              <Clock size={12} />\n              Duration\n            </div>\n            <div className=\"text-2xl font-black text-white tracking-tight\">\n              {duration}\n            </div>\n          </div>\n        )}\n        {intensity && (\n          <div\n            className={cn(\n              \"flex-1 bg-gradient-to-br rounded-xl p-4 border\",\n              getIntensityColor(intensity),\n            )}\n          >\n            <div className=\"flex items-center gap-2 text-current/60 text-[10px] uppercase tracking-widest font-bold mb-1\">\n              <Flame size={12} />\n              Intensity\n            </div>\n            <div className=\"text-lg font-bold text-current capitalize\">\n              {intensity}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Notes */}\n      {notes && (\n        <div className=\"bg-white/5 rounded-xl p-3 border border-white/5\">\n          <div className=\"text-[10px] uppercase tracking-widest font-bold text-white/40 mb-1\">\n            Notes\n          </div>\n          <div className=\"text-sm text-white/70\">{notes}</div>\n        </div>\n      )}\n    </div>\n  );\n});\n\n// Exercise type utilities\nexport const getExerciseIcon = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return \"activity\";\n    case \"warmup\":\n      return \"flame\";\n    default:\n      return \"dumbbell\";\n  }\n};\n\nexport const getExerciseGradient = (type?: string) => {\n  switch (type) {\n    case \"cardio\":\n      return \"from-rose-500/25 to-pink-600/15 text-rose-400 ring-rose-500/20\";\n    case \"warmup\":\n      return \"from-amber-500/25 to-orange-600/15 text-amber-400 ring-amber-500/20\";\n    default:\n      return \"from-blue-500/25 to-indigo-600/15 text-blue-400 ring-blue-500/20\";\n  }\n};\n","/**\n * Workout Adapter - Implementation of WorkoutPort\n * Pure functions for workout operations\n */\n\nimport type { WorkoutPort, WorkoutStatePort } from \"../ports\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\nimport { v4 as uuidv4 } from \"uuid\";\n\n/**\n * Generate series from sets/reps if not already present\n */\nfunction ensureSeriesGenerated(exercise: ExerciseItem): ExerciseItem {\n  if (exercise.series?.length) return exercise;\n  if (typeof exercise.sets === \"number\" && exercise.sets > 0) {\n    const generatedSeries: WorkoutSet[] = Array.from(\n      { length: exercise.sets },\n      (_, i) => ({\n        id: `gen-${exercise.id}-${i}`,\n        setNumber: i + 1,\n        reps: exercise.reps ?? null,\n        weight: exercise.weight ?? null,\n        rpe: exercise.rpe ?? null,\n        completed: false,\n        type: \"normal\" as const,\n      }),\n    );\n    return { ...exercise, series: generatedSeries };\n  }\n  return exercise;\n}\n\n/**\n * Create a workout adapter with exercise operations\n */\nexport function createWorkoutAdapter(): WorkoutPort {\n  return {\n    findExerciseById(\n      items: ExerciseItem[],\n      id: string,\n    ): ExerciseItem | undefined {\n      for (const item of items) {\n        if (item.id === id) return item;\n        if (item.items) {\n          const found = this.findExerciseById(item.items, id);\n          if (found) return found;\n        }\n      }\n      return undefined;\n    },\n\n    mergeEdits(\n      items: ExerciseItem[],\n      edits: Record<string, ExerciseItem>,\n    ): ExerciseItem[] {\n      return items.map((item) => {\n        const edit = edits[item.id];\n        const base = edit ? { ...item, ...edit } : item;\n        // Ensure series is generated for exercises without explicit series\n        const withSeries = ensureSeriesGenerated(base);\n        if (withSeries.items) {\n          return {\n            ...withSeries,\n            items: this.mergeEdits(withSeries.items, edits),\n          };\n        }\n        return withSeries;\n      });\n    },\n\n    createNewSet(currentSeries: WorkoutSet[]): WorkoutSet {\n      const lastSet = currentSeries[currentSeries.length - 1];\n      return {\n        id: uuidv4(),\n        setNumber: currentSeries.length + 1,\n        weight: lastSet?.weight ?? null,\n        reps: lastSet?.reps ?? null,\n        rpe: null,\n        completed: false,\n        type: \"normal\",\n      };\n    },\n\n    removeSetAndRenumber(series: WorkoutSet[], seriesId: string): WorkoutSet[] {\n      return series\n        .filter((s) => s.id !== seriesId)\n        .map((s, idx) => ({ ...s, setNumber: idx + 1 }));\n    },\n  };\n}\n\n/**\n * Create a workout state adapter for state management\n */\nexport function createWorkoutStateAdapter(): WorkoutStatePort {\n  return {\n    updateExerciseField(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      field: keyof ExerciseItem,\n      value: unknown,\n    ): Record<string, ExerciseItem> {\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, [field]: value },\n      };\n    },\n\n    updateSetField(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      seriesId: string,\n      field: keyof WorkoutSet,\n      value: unknown,\n    ): Record<string, ExerciseItem> {\n      const nextSeries = (exercise.series || []).map((s) =>\n        s.id === seriesId ? { ...s, [field]: value } : s,\n      );\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: nextSeries },\n      };\n    },\n\n    addSetToExercise(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      newSet: WorkoutSet,\n    ): Record<string, ExerciseItem> {\n      const currentSeries = exercise.series || [];\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: [...currentSeries, newSet] },\n      };\n    },\n\n    removeSetFromExercise(\n      edits: Record<string, ExerciseItem>,\n      exercise: ExerciseItem,\n      updatedSeries: WorkoutSet[],\n    ): Record<string, ExerciseItem> {\n      return {\n        ...edits,\n        [exercise.id]: { ...exercise, series: updatedSeries },\n      };\n    },\n  };\n}\n\n// Singleton instances\nlet workoutAdapterInstance: WorkoutPort | null = null;\nlet stateAdapterInstance: WorkoutStatePort | null = null;\n\nexport function getWorkoutAdapter(): WorkoutPort {\n  if (!workoutAdapterInstance) {\n    workoutAdapterInstance = createWorkoutAdapter();\n  }\n  return workoutAdapterInstance;\n}\n\nexport function getWorkoutStateAdapter(): WorkoutStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createWorkoutStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useWorkoutLogic - Custom hook for workout state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback, useEffect } from \"react\";\nimport type { WorkoutPort, WorkoutStatePort } from \"../ports\";\nimport type { ExerciseItem, WorkoutSet } from \"../types\";\n\nexport interface UseWorkoutLogicOptions {\n  initialItems: ExerciseItem[];\n  lock?: boolean | null;\n}\n\nexport interface UseWorkoutLogicReturn {\n  // State\n  displayItems: ExerciseItem[];\n  expandedIds: Set<string>;\n  isLocked: boolean;\n\n  // Actions\n  toggleExpand: (id: string) => void;\n  toggleLock: () => void;\n  updateExercise: (\n    id: string,\n    field: keyof ExerciseItem,\n    value: unknown,\n  ) => void;\n  updateSeries: (\n    exerciseId: string,\n    seriesId: string,\n    field: keyof WorkoutSet,\n    value: unknown,\n  ) => void;\n  addSet: (exerciseId: string) => void;\n  removeSet: (exerciseId: string, seriesId: string) => void;\n}\n\nexport function useWorkoutLogic(\n  workoutAdapter: WorkoutPort,\n  stateAdapter: WorkoutStatePort,\n  options: UseWorkoutLogicOptions,\n): UseWorkoutLogicReturn {\n  const { initialItems, lock: initialLock = false } = options;\n\n  const [edits, setEdits] = useState<Record<string, ExerciseItem>>({});\n  const [expandedIds, setExpandedIds] = useState<Set<string>>(new Set());\n  const [isLocked, setIsLocked] = useState(!!initialLock);\n\n  // Auto-expand first exercise on mount\n  useEffect(() => {\n    if (initialItems.length > 0 && initialItems[0]?.id) {\n      setExpandedIds(new Set([initialItems[0].id]));\n    }\n  }, [initialItems]);\n\n  // Merge edits with base items\n  const displayItems = useMemo(\n    () => workoutAdapter.mergeEdits(initialItems, edits),\n    [workoutAdapter, initialItems, edits],\n  );\n\n  const toggleExpand = useCallback((id: string) => {\n    setExpandedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id);\n      else next.add(id);\n      return next;\n    });\n  }, []);\n\n  const toggleLock = useCallback(() => {\n    setIsLocked((prev) => !prev);\n  }, []);\n\n  const updateExercise = useCallback(\n    (id: string, field: keyof ExerciseItem, value: unknown) => {\n      if (isLocked) return;\n\n      setEdits((prev) => {\n        const exercise = workoutAdapter.findExerciseById(displayItems, id);\n        if (!exercise) return prev;\n        return stateAdapter.updateExerciseField(prev, exercise, field, value);\n      });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems],\n  );\n\n  const updateSeries = useCallback(\n    (\n      exerciseId: string,\n      seriesId: string,\n      field: keyof WorkoutSet,\n      value: unknown,\n    ) => {\n      if (isLocked) return;\n\n      setEdits((prev) => {\n        const exercise = workoutAdapter.findExerciseById(\n          displayItems,\n          exerciseId,\n        );\n        if (!exercise) return prev;\n        return stateAdapter.updateSetField(\n          prev,\n          exercise,\n          seriesId,\n          field,\n          value,\n        );\n      });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems],\n  );\n\n  const addSet = useCallback(\n    (exerciseId: string) => {\n      if (isLocked) return;\n\n      setEdits((prev) => {\n        const exercise = workoutAdapter.findExerciseById(\n          displayItems,\n          exerciseId,\n        );\n        if (!exercise) return prev;\n        const newSet = workoutAdapter.createNewSet(exercise.series || []);\n        return stateAdapter.addSetToExercise(prev, exercise, newSet);\n      });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems],\n  );\n\n  const removeSet = useCallback(\n    (exerciseId: string, seriesId: string) => {\n      if (isLocked) return;\n\n      setEdits((prev) => {\n        const exercise = workoutAdapter.findExerciseById(\n          displayItems,\n          exerciseId,\n        );\n        if (!exercise) return prev;\n        const updatedSeries = workoutAdapter.removeSetAndRenumber(\n          exercise.series || [],\n          seriesId,\n        );\n        return stateAdapter.removeSetFromExercise(\n          prev,\n          exercise,\n          updatedSeries,\n        );\n      });\n    },\n    [isLocked, workoutAdapter, stateAdapter, displayItems],\n  );\n\n  return {\n    displayItems,\n    expandedIds,\n    isLocked,\n    toggleExpand,\n    toggleLock,\n    updateExercise,\n    updateSeries,\n    addSet,\n    removeSet,\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo, useState, useCallback } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Utensils, Flame, Target } from \"lucide-react\";\nimport { calculateCalories } from \"../../utils/format-utils\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { motion } from \"framer-motion\";\nimport {\n  type Meal,\n  MACRO_TARGETS,\n  MacroMetric,\n  MealTicket,\n} from \"./components\";\n\n// --- Main Component ---\n\nexport const Nutrition = memo(function Nutrition({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    meals: initialMeals,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    meals?: Meal[] | null;\n    lock?: boolean;\n  };\n\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Record<string, { consumed?: boolean }>>\n  >({});\n\n  const displayMeals = useMemo(() => {\n    return (initialMeals || []).map((meal) => {\n      const mealEdits = localEdits[meal.id] || {};\n      return {\n        ...meal,\n        items: meal.items.map((item) => {\n          const itemEdit = mealEdits[item.id];\n          if (itemEdit) return { ...item, ...itemEdit };\n          return item;\n        }),\n      };\n    });\n  }, [initialMeals, localEdits]);\n\n  useDomainAutoSave(\"meal\", element.key, {\n    type: \"meal_plan\",\n    foods: displayMeals.flatMap((m) => m.items),\n    meals: displayMeals,\n    date: new Date().toISOString(),\n  });\n\n  const toggleConsumed = useCallback(\n    (mealId: string, itemId: string) => {\n      if (lock) return;\n      setLocalEdits((prev) => {\n        const m = prev[mealId] || {};\n        const itemVal = !displayMeals\n          .find((x) => x.id === mealId)\n          ?.items.find((y) => y.id === itemId)?.consumed;\n        return { ...prev, [mealId]: { ...m, [itemId]: { consumed: itemVal } } };\n      });\n    },\n    [lock, displayMeals],\n  );\n\n  const stats = useMemo(() => {\n    let p = 0,\n      c = 0,\n      f = 0,\n      cal = 0;\n    displayMeals.forEach((m) =>\n      m.items.forEach((i) => {\n        const iCal =\n          i.calories ?? calculateCalories(i.protein, i.carbs, i.fats);\n        p += i.protein;\n        c += i.carbs;\n        f += i.fats;\n        cal += iCal;\n      }),\n    );\n    return { p, c, f, cal };\n  }, [displayMeals]);\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      {/* Header */}\n      {title && (\n        <h3 className=\"m-0 text-xl font-bold font-sans tracking-tight flex items-center gap-3\">\n          <Flame className=\"w-5 h-5 text-orange-500\" />\n          {title}\n        </h3>\n      )}\n\n      {/* Dashboard */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"p-5 rounded-2xl bg-zinc-900 border border-white/10 shadow-lg relative overflow-hidden\"\n      >\n        <div className=\"absolute top-0 right-0 p-3 opacity-10\">\n          <Target size={80} strokeWidth={1} />\n        </div>\n\n        <div className=\"flex justify-between items-end mb-6 relative z-10\">\n          <div>\n            <div className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1\">\n              Daily Target\n            </div>\n            <div className=\"text-3xl font-black text-white leading-none\">\n              {Math.round(stats.cal)}\n              <span className=\"text-sm font-medium text-white/40 ml-1\">\n                / {MACRO_TARGETS.cal} kcal\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-3 gap-4 relative z-10\">\n          <MacroMetric\n            label=\"Protein\"\n            value={stats.p}\n            max={MACRO_TARGETS.p}\n            color=\"bg-indigo-500\"\n          />\n          <MacroMetric\n            label=\"Carbs\"\n            value={stats.c}\n            max={MACRO_TARGETS.c}\n            color=\"bg-amber-500\"\n          />\n          <MacroMetric\n            label=\"Fats\"\n            value={stats.f}\n            max={MACRO_TARGETS.f}\n            color=\"bg-rose-500\"\n          />\n        </div>\n      </motion.div>\n\n      {/* Meals List */}\n      <div className=\"flex flex-col gap-4\">\n        {displayMeals.length === 0 ? (\n          <EmptyState\n            icon={<Utensils className=\"w-10 h-10\" />}\n            message=\"Empty Plan\"\n          />\n        ) : (\n          displayMeals.map((meal, i) => (\n            <MealTicket\n              key={meal.id}\n              meal={meal}\n              index={i}\n              onToggleItem={toggleConsumed}\n              lock={!!lock}\n              elementKey={element.key}\n            />\n          ))\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","/**\n * Shared formatting utilities for domain components\n * Following DRY principle - centralize common formatting logic\n */\n\n// Currency symbols map\nconst CURRENCY_SYMBOLS: Record<string, string> = {\n  EUR: \"\",\n  USD: \"$\",\n  GBP: \"\",\n  JPY: \"\",\n  CHF: \"CHF\",\n  CAD: \"C$\",\n  AUD: \"A$\",\n};\n\n/**\n * Format a monetary amount with currency symbol\n */\nexport function formatCurrency(amount: number, currency: string): string {\n  const symbol = CURRENCY_SYMBOLS[currency] || currency;\n  return `${symbol}${amount.toLocaleString()}`;\n}\n\n/**\n * Format duration from seconds to human-readable string\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n\n  if (hours > 0) {\n    return minutes > 0 ? `${hours}h ${minutes}m` : `${hours}h`;\n  }\n  return `${minutes}m`;\n}\n\n/**\n * Format duration from minutes to human-readable string\n */\nexport function formatDurationMinutes(minutes: number): string {\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n\n  if (hours > 0) {\n    return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n  }\n  return `${mins}m`;\n}\n\n/**\n * Format time in MM:SS format\n */\nexport function formatTimeMMSS(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = seconds % 60;\n  return `${mins.toString().padStart(2, \"0\")}:${secs.toString().padStart(2, \"0\")}`;\n}\n\n/**\n * Format a date to localized short format\n */\nexport function formatDateShort(\n  date: string | Date,\n  options?: Intl.DateTimeFormatOptions,\n): string {\n  const d = typeof date === \"string\" ? new Date(date) : date;\n  return d.toLocaleDateString(undefined, {\n    month: \"short\",\n    day: \"numeric\",\n    ...options,\n  });\n}\n\n/**\n * Format a date range\n */\nexport function formatDateRange(\n  start: string | Date,\n  end: string | Date,\n): string {\n  return `${formatDateShort(start)} - ${formatDateShort(end)}`;\n}\n\n/**\n * Calculate calories from macros\n */\nexport function calculateCalories(\n  protein: number,\n  carbs: number,\n  fats: number,\n): number {\n  return Math.round(protein * 4 + carbs * 4 + fats * 9);\n}\n\n/**\n * Format a number with K/M suffix for large numbers\n */\nexport function formatCompactNumber(num: number): string {\n  if (num >= 1_000_000) {\n    return `${(num / 1_000_000).toFixed(1)}M`;\n  }\n  if (num >= 1_000) {\n    return `${(num / 1_000).toFixed(1)}K`;\n  }\n  return num.toString();\n}\n\n/**\n * Truncate text with ellipsis\n */\nexport function truncate(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return `${text.slice(0, maxLength - 3)}...`;\n}\n","/**\n * Nutrition types and utilities\n */\n\nexport type MealItem = {\n  id: string;\n  name: string;\n  protein: number;\n  carbs: number;\n  fats: number;\n  calories?: number;\n  grams?: number;\n  consumed?: boolean;\n  alternatives?: Array<{\n    id: string;\n    name: string;\n    protein: number;\n    carbs: number;\n    fats: number;\n    calories?: number;\n    grams?: number;\n    reason?: string;\n  }>;\n};\n\nexport type Meal = {\n  id: string;\n  name: string;\n  items: MealItem[];\n  source?: string;\n  conflict?: string;\n  alternatives?: Array<{\n    id: string;\n    name: string;\n    items: MealItem[];\n    reason?: string;\n  }>;\n};\n\nexport const MACRO_TARGETS = { p: 180, c: 250, f: 70, cal: 2400 };\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { cn } from \"../../../utils/cn\";\n\ninterface MacroMetricProps {\n  label: string;\n  value: number;\n  max: number;\n  color: string;\n}\n\nexport const MacroMetric = memo(function MacroMetric({\n  label,\n  value,\n  max,\n  color,\n}: MacroMetricProps) {\n  const percentage = Math.min(100, (value / max) * 100);\n\n  return (\n    <div className=\"flex flex-col gap-1.5\">\n      <div className=\"text-[10px] uppercase font-bold text-muted-foreground tracking-wider flex justify-between\">\n        <span>{label}</span>\n        <span className=\"font-mono text-white/50\">{Math.round(value)}g</span>\n      </div>\n      <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\n          className={cn(\"h-full rounded-full\", color)}\n        />\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { calculateCalories } from \"../../../utils/format-utils\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport type { Meal } from \"./types\";\n\ninterface MealTicketProps {\n  meal: Meal;\n  onToggleItem: (mealId: string, itemId: string) => void;\n  lock: boolean;\n  index: number;\n  elementKey: string;\n}\n\nexport const MealTicket = memo(function MealTicket({\n  meal,\n  onToggleItem,\n  lock,\n  index,\n  elementKey,\n}: MealTicketProps) {\n  const totalCal = meal.items.reduce(\n    (acc, i) =>\n      acc + (i.calories || calculateCalories(i.protein, i.carbs, i.fats)),\n    0,\n  );\n  const consumedCount = meal.items.filter((i) => i.consumed).length;\n  const isFullyConsumed =\n    consumedCount === meal.items.length && meal.items.length > 0;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.98 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.4, delay: index * 0.1 }}\n      className=\"group relative\"\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={meal.id}\n    >\n      <div\n        className={cn(\n          \"rounded-2xl border bg-zinc-900/60 backdrop-blur-xl overflow-hidden transition-all duration-300 isolate\",\n          isFullyConsumed\n            ? \"border-emerald-500/20 bg-emerald-500/5 shadow-[0_0_20px_-10px_rgba(16,185,129,0.2)]\"\n            : \"border-white/10 hover:border-white/20 hover:bg-zinc-900/80 hover:shadow-xl\",\n        )}\n      >\n        {/* Side Accent */}\n        <div\n          className={cn(\n            \"absolute top-0 left-0 bottom-0 w-1 transition-colors\",\n            isFullyConsumed\n              ? \"bg-emerald-500\"\n              : \"bg-white/10 group-hover:bg-amber-500\",\n          )}\n        />\n\n        <div className=\"p-5 pl-7\">\n          {/* Header */}\n          <div className=\"flex justify-between items-start mb-6\">\n            <div>\n              <div className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-1 font-mono\">\n                Meal 0{index + 1}\n              </div>\n              <h4\n                className={cn(\n                  \"text-lg font-bold tracking-tight\",\n                  isFullyConsumed ? \"text-emerald-100\" : \"text-foreground\",\n                )}\n              >\n                {meal.name}\n              </h4>\n            </div>\n            <div className=\"text-right\">\n              <div className=\"text-xl font-black text-white tabular-nums leading-none\">\n                {Math.round(totalCal)}\n              </div>\n              <div className=\"text-[10px] font-bold text-muted-foreground uppercase mt-0.5\">\n                kcal\n              </div>\n            </div>\n          </div>\n\n          <PerforatedDivider className=\"my-4\" />\n\n          {/* Items List */}\n          <div className=\"flex flex-col gap-2 relative z-10\">\n            {meal.items.map((item) => {\n              const itemCal =\n                item.calories ||\n                calculateCalories(item.protein, item.carbs, item.fats);\n\n              return (\n                <div\n                  key={item.id}\n                  onClick={() => !lock && onToggleItem(meal.id, item.id)}\n                  className={cn(\n                    \"flex items-center justify-between p-2 -mx-2 rounded-lg transition-colors cursor-pointer group/item\",\n                    item.consumed ? \"opacity-50\" : \"hover:bg-white/5\",\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <div\n                      className={cn(\n                        \"w-4 h-4 rounded border flex items-center justify-center transition-colors\",\n                        item.consumed\n                          ? \"bg-emerald-500 border-emerald-500\"\n                          : \"border-white/20 group-hover/item:border-white/40\",\n                      )}\n                    >\n                      {item.consumed && (\n                        <Check size={10} className=\"text-black stroke-[4]\" />\n                      )}\n                    </div>\n                    <div>\n                      <div\n                        className={cn(\n                          \"text-sm font-medium leading-none\",\n                          item.consumed && \"line-through\",\n                        )}\n                      >\n                        {item.name}\n                      </div>\n                      <div className=\"text-[10px] text-muted-foreground font-mono mt-0.5\">\n                        {item.grams ? `${item.grams}g  ` : \"\"}\n                        {Math.round(item.protein)}P {Math.round(item.carbs)}C{\" \"}\n                        {Math.round(item.fats)}F\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"font-mono text-xs text-white/60\">\n                    {itemCal}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plane } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  RoundTripCard,\n  SingleFlightCard,\n  type FlightData,\n  type FlightTrip,\n} from \"./components\";\nimport { getFlightAdapter, getFlightStateAdapter } from \"./adapters\";\nimport { useFlightLogic } from \"./hooks\";\n\nexport const Flight = memo(function Flight({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    flights,\n    trips,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    flights?: FlightData[] | null;\n    trips?: FlightTrip[] | null;\n    lock?: boolean;\n  };\n\n  const flightAdapter = getFlightAdapter();\n  const stateAdapter = getFlightStateAdapter();\n\n  const { displayTrips, getTripKey, isRoundTrip } = useFlightLogic(\n    flightAdapter,\n    stateAdapter,\n    { trips, flights, lock },\n  );\n\n  // Calculate total price from all trips\n  const totalPrice = useMemo(() => {\n    return displayTrips.reduce((sum, trip) => {\n      const outPrice = trip.outbound?.price?.amount || 0;\n      const retPrice = trip.return?.price?.amount || 0;\n      return sum + outPrice + retPrice;\n    }, 0);\n  }, [displayTrips]);\n\n  const currency = displayTrips[0]?.outbound?.price?.currency || \"EUR\";\n\n  useDomainAutoSave(\"flight\", element.key, {\n    title,\n    trips: displayTrips,\n    status: \"search\",\n    totalPrice: totalPrice > 0 ? totalPrice : null,\n    currency,\n  });\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      {title && (\n        <motion.h3\n          initial={{ opacity: 0, y: -10 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"m-0 text-xl font-bold text-foreground tracking-tight flex items-center gap-2\"\n        >\n          <Plane className=\"w-5 h-5 text-sky-500\" />\n          {title}\n        </motion.h3>\n      )}\n\n      <AnimatePresence mode=\"popLayout\">\n        {displayTrips.map((trip, i) => {\n          const itemKey = getTripKey(trip, i);\n\n          if (isRoundTrip(trip)) {\n            return (\n              <RoundTripCard\n                key={itemKey}\n                trip={trip}\n                index={i}\n                elementKey={element.key}\n                lock={lock}\n              />\n            );\n          }\n\n          return (\n            <SingleFlightCard\n              key={itemKey}\n              flight={trip.outbound}\n              index={i}\n              elementKey={element.key}\n              lock={lock}\n            />\n          );\n        })}\n      </AnimatePresence>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Plane, Clock, ArrowRight, Calendar } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport { motion } from \"framer-motion\";\nimport type { FlightData } from \"./types\";\nimport { STATUS_VARIANT_MAP } from \"./types\";\n\nexport const FlightStatus = memo(function FlightStatus({\n  status,\n}: {\n  status?: string;\n}) {\n  const config = status ? STATUS_VARIANT_MAP[status] : null;\n  return (\n    <StatusBadge\n      label={status || \"Scheduled\"}\n      variant={config?.variant || \"neutral\"}\n      pulse={config?.pulse}\n    />\n  );\n});\n\nexport const FlightSegment = memo(function FlightSegment({\n  flight,\n  label,\n  isReturn = false,\n  index = 0,\n}: {\n  flight: FlightData;\n  label?: string;\n  isReturn?: boolean;\n  index?: number;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: isReturn ? 20 : -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ duration: 0.4, delay: index * 0.15 }}\n      className=\"relative\"\n    >\n      {label && (\n        <div className=\"flex items-center gap-2 mb-4\">\n          <div\n            className={cn(\n              \"info-pill\",\n              isReturn ? \"bg-purple-500/10\" : \"bg-sky-500/10\",\n            )}\n          >\n            {isReturn ? (\n              <ArrowRight className=\"w-2.5 h-2.5 rotate-180\" />\n            ) : (\n              <ArrowRight className=\"w-2.5 h-2.5\" />\n            )}\n            <span className={isReturn ? \"text-purple-400\" : \"text-sky-400\"}>\n              {label}\n            </span>\n          </div>\n          {flight.departure.date && (\n            <div className=\"info-pill\">\n              <Calendar className=\"w-2.5 h-2.5\" />\n              {flight.departure.date}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex justify-between items-start mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <motion.div\n            whileHover={{ scale: 1.05 }}\n            className=\"w-10 h-10 rounded-xl glass-surface flex items-center justify-center text-white/80 font-bold text-lg\"\n          >\n            {flight.airline[0]}\n          </motion.div>\n          <div>\n            <div className=\"font-bold text-foreground text-sm tracking-tight\">\n              {flight.airline}\n            </div>\n            <div className=\"text-mono-tech mt-0.5\">{flight.flightNumber}</div>\n          </div>\n        </div>\n        <FlightStatus status={flight.status} />\n      </div>\n\n      <div className=\"flex items-center justify-between relative\">\n        <div className=\"text-left z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-display text-2xl sm:text-3xl\"\n          >\n            {flight.departure.code}\n          </motion.div>\n          <div className=\"text-xs sm:text-sm font-medium text-muted-foreground mt-1 max-w-24 sm:max-w-none truncate\">\n            {flight.departure.city}\n          </div>\n          <div className=\"value-badge mt-1\">{flight.departure.time}</div>\n        </div>\n\n        <div className=\"flex-1 px-4 sm:px-8 flex flex-col items-center justify-center relative\">\n          {flight.duration && (\n            <div className=\"info-pill mb-2 z-10\">\n              <Clock className=\"w-2.5 h-2.5\" />\n              {flight.duration}\n            </div>\n          )}\n          <div className=\"w-full h-0.5 bg-white/10 relative overflow-hidden\">\n            <motion.div\n              className={cn(\n                \"absolute inset-y-0 left-0 w-1/2\",\n                isReturn\n                  ? \"bg-gradient-to-r from-transparent via-purple-500 to-transparent\"\n                  : \"bg-gradient-to-r from-transparent via-sky-500 to-transparent\",\n              )}\n              animate={{ x: [\"-100%\", \"200%\"] }}\n              transition={{\n                duration: 2,\n                repeat: Infinity,\n                ease: \"linear\",\n              }}\n            />\n          </div>\n          <Plane\n            className={cn(\n              \"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 stroke-1.5\",\n              isReturn\n                ? \"text-purple-400/50 -rotate-90\"\n                : \"text-sky-400/50 rotate-90\",\n            )}\n          />\n        </div>\n\n        <div className=\"text-right z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"text-display text-2xl sm:text-3xl\"\n          >\n            {flight.arrival.code}\n          </motion.div>\n          <div className=\"text-xs sm:text-sm font-medium text-muted-foreground mt-1 max-w-24 sm:max-w-none truncate ml-auto\">\n            {flight.arrival.city}\n          </div>\n          <div className=\"value-badge mt-1\">{flight.arrival.time}</div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-4 sm:gap-6 mt-6 pt-4 border-t border-dashed border-white/5\">\n        {flight.departure.terminal && (\n          <div>\n            <div className=\"text-label mb-0.5\">Terminal</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.departure.terminal}\n            </div>\n          </div>\n        )}\n        {flight.gate && (\n          <div>\n            <div className=\"text-label mb-0.5\">Gate</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.gate}\n            </div>\n          </div>\n        )}\n        {flight.seat && (\n          <div className=\"hidden sm:block\">\n            <div className=\"text-label mb-0.5\">Seat</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.seat}\n            </div>\n          </div>\n        )}\n        {flight.class && (\n          <div className=\"hidden sm:block\">\n            <div className=\"text-label mb-0.5\">Class</div>\n            <div className=\"text-sm font-semibold text-foreground\">\n              {flight.class}\n            </div>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n});\n","import {\n  StatusBadge,\n  type StatusVariant,\n} from \"../../../utils/shared-components\";\n\n// --- Types ---\n\nexport type FlightData = {\n  id: string;\n  airline: string;\n  flightNumber: string;\n  departure: {\n    code: string;\n    city: string;\n    time: string;\n    date?: string;\n    terminal?: string;\n  };\n  arrival: {\n    code: string;\n    city: string;\n    time: string;\n    date?: string;\n    terminal?: string;\n  };\n  gate?: string;\n  seat?: string;\n  class?: string;\n  status?: \"On Time\" | \"Delayed\" | \"Boarding\" | \"Departed\" | \"Cancelled\";\n  duration?: string;\n  price?: {\n    amount: number;\n    currency: string;\n  };\n  bookingUrl?: string;\n  stops?: number;\n};\n\nexport type FlightTrip = {\n  outbound: FlightData;\n  return?: FlightData;\n  totalPrice?: {\n    amount: number;\n    currency: string;\n  };\n  bookingUrl?: string;\n};\n\n// --- Constants ---\n\nexport const STATUS_VARIANT_MAP: Record<\n  string,\n  { variant: StatusVariant; pulse?: boolean }\n> = {\n  \"On Time\": { variant: \"success\" },\n  Boarding: { variant: \"info\", pulse: true },\n  Delayed: { variant: \"warning\" },\n  Departed: { variant: \"neutral\" },\n  Cancelled: { variant: \"error\" },\n};\n\n// --- Helpers ---\n\nexport function pairFlightsIntoTrips(flights: FlightData[]): FlightTrip[] {\n  const trips: FlightTrip[] = [];\n  const used = new Set<string>();\n\n  for (const flight of flights) {\n    if (used.has(flight.id)) continue;\n\n    const returnFlight = flights.find((f) => {\n      if (used.has(f.id) || f.id === flight.id) return false;\n      return (\n        f.departure.code === flight.arrival.code &&\n        f.arrival.code === flight.departure.code\n      );\n    });\n\n    if (returnFlight) {\n      used.add(flight.id);\n      used.add(returnFlight.id);\n\n      const totalPrice = flight.price\n        ? { amount: flight.price.amount, currency: flight.price.currency }\n        : undefined;\n\n      trips.push({\n        outbound: flight,\n        return: returnFlight,\n        totalPrice,\n        bookingUrl: flight.bookingUrl,\n      });\n    } else {\n      used.add(flight.id);\n      trips.push({ outbound: flight });\n    }\n  }\n\n  return trips;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ArrowRight, ArrowLeftRight } from \"lucide-react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { formatCurrency } from \"../../../utils/format-utils\";\nimport { motion } from \"framer-motion\";\nimport type { FlightData, FlightTrip } from \"./types\";\nimport { FlightSegment } from \"./flight-segment\";\n\nexport const RoundTripCard = memo(function RoundTripCard({\n  trip,\n  index,\n  elementKey,\n  lock,\n}: {\n  trip: FlightTrip;\n  index: number;\n  elementKey: string;\n  lock: boolean;\n}) {\n  const price = trip.totalPrice || trip.outbound.price;\n  const bookingUrl = trip.bookingUrl || trip.outbound.bookingUrl;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={trip.outbound.id}\n        className=\"card-glass group\"\n      >\n        <div className=\"gradient-bar\" />\n\n        <div className=\"p-5 sm:p-6\">\n          {trip.return && (\n            <motion.div\n              initial={{ opacity: 0, x: -10 }}\n              animate={{ opacity: 1, x: 0 }}\n              className=\"flex items-center gap-2 mb-6\"\n            >\n              <div className=\"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider bg-gradient-to-r from-sky-500/10 to-purple-500/10 text-white/80 px-3 py-1.5 rounded-full border border-white/10\">\n                <ArrowLeftRight className=\"w-3.5 h-3.5\" />\n                Round Trip\n              </div>\n            </motion.div>\n          )}\n\n          <FlightSegment\n            flight={trip.outbound}\n            label={trip.return ? \"Outbound\" : undefined}\n            index={0}\n          />\n\n          {trip.return && (\n            <>\n              <div className=\"divider-perforated my-6\" />\n              <FlightSegment\n                flight={trip.return}\n                label=\"Return\"\n                isReturn\n                index={1}\n              />\n            </>\n          )}\n\n          {(price || bookingUrl) && (\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.4 }}\n              className=\"flex items-center justify-between mt-6 pt-5 border-t border-white/5\"\n            >\n              {price && (\n                <div>\n                  <div className=\"text-label mb-0.5\">\n                    {trip.return ? \"Total Price\" : \"Price\"}\n                  </div>\n                  <div className=\"text-xl sm:text-2xl font-black text-white leading-none\">\n                    {formatCurrency(price.amount, price.currency)}\n                  </div>\n                </div>\n              )}\n\n              {bookingUrl && !lock && (\n                <motion.a\n                  href={bookingUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"btn-primary no-underline\"\n                >\n                  Book <ArrowRight className=\"w-3 h-3\" strokeWidth={3} />\n                </motion.a>\n              )}\n            </motion.div>\n          )}\n        </div>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n\nexport const SingleFlightCard = memo(function SingleFlightCard({\n  flight,\n  index,\n  elementKey,\n  lock,\n}: {\n  flight: FlightData;\n  index: number;\n  elementKey: string;\n  lock: boolean;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95, y: 20 }}\n      animate={{ opacity: 1, scale: 1, y: 0 }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n    >\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={flight.id}\n        className=\"card-glass group\"\n      >\n        <div className=\"gradient-bar\" />\n\n        <div className=\"p-5 sm:p-6\">\n          <FlightSegment flight={flight} index={0} />\n\n          {(flight.price || flight.bookingUrl) && (\n            <motion.div\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"flex items-center justify-between mt-6 pt-5 border-t border-white/5\"\n            >\n              {flight.price && (\n                <div>\n                  <div className=\"text-label mb-0.5\">Price</div>\n                  <div className=\"text-xl sm:text-2xl font-black text-white leading-none\">\n                    {formatCurrency(flight.price.amount, flight.price.currency)}\n                  </div>\n                </div>\n              )}\n\n              {flight.bookingUrl && !lock && (\n                <motion.a\n                  href={flight.bookingUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"btn-primary no-underline\"\n                >\n                  Book <ArrowRight className=\"w-3 h-3\" strokeWidth={3} />\n                </motion.a>\n              )}\n            </motion.div>\n          )}\n        </div>\n      </SelectableItem>\n    </motion.div>\n  );\n});\n","/**\n * Flight Adapter - Implementation of FlightPort\n * Pure functions for flight operations\n */\n\nimport type { FlightPort, FlightStatePort } from \"../ports\";\nimport type { FlightData, FlightTrip } from \"../components/types\";\n\n/**\n * Create a flight adapter with flight operations\n */\nexport function createFlightAdapter(): FlightPort {\n  return {\n    pairFlightsIntoTrips(flights: FlightData[]): FlightTrip[] {\n      const trips: FlightTrip[] = [];\n      const used = new Set<string>();\n\n      for (const flight of flights) {\n        if (used.has(flight.id)) continue;\n\n        const returnFlight = flights.find((f) => {\n          if (used.has(f.id) || f.id === flight.id) return false;\n          return (\n            f.departure.code === flight.arrival.code &&\n            f.arrival.code === flight.departure.code\n          );\n        });\n\n        if (returnFlight) {\n          used.add(flight.id);\n          used.add(returnFlight.id);\n\n          const totalPrice = flight.price\n            ? { amount: flight.price.amount, currency: flight.price.currency }\n            : undefined;\n\n          trips.push({\n            outbound: flight,\n            return: returnFlight,\n            totalPrice,\n            bookingUrl: flight.bookingUrl,\n          });\n        } else {\n          used.add(flight.id);\n          trips.push({ outbound: flight });\n        }\n      }\n\n      return trips;\n    },\n\n    formatPrice(amount: number, currency: string): string {\n      return new Intl.NumberFormat(undefined, {\n        style: \"currency\",\n        currency,\n      }).format(amount);\n    },\n\n    getTripKey(trip: FlightTrip, index: number): string {\n      return trip.outbound.id || `trip-${index}`;\n    },\n\n    isRoundTrip(trip: FlightTrip): boolean {\n      return !!trip.return;\n    },\n  };\n}\n\n/**\n * Create a flight state adapter for state management\n */\nexport function createFlightStateAdapter(): FlightStatePort {\n  return {\n    computeDisplayTrips(\n      trips: FlightTrip[] | null | undefined,\n      flights: FlightData[] | null | undefined,\n      pairFn: (flights: FlightData[]) => FlightTrip[],\n    ): FlightTrip[] {\n      const hasTrips = trips && trips.length > 0;\n      const hasFlights = flights && flights.length > 0;\n\n      if (hasTrips) return trips;\n      if (hasFlights) return pairFn(flights);\n      return [];\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet flightAdapterInstance: FlightPort | null = null;\nlet stateAdapterInstance: FlightStatePort | null = null;\n\nexport function getFlightAdapter(): FlightPort {\n  if (!flightAdapterInstance) {\n    flightAdapterInstance = createFlightAdapter();\n  }\n  return flightAdapterInstance;\n}\n\nexport function getFlightStateAdapter(): FlightStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createFlightStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useFlightLogic - Custom hook for flight state management\n * Separates business logic from presentation\n */\n\nimport { useMemo } from \"react\";\nimport type { FlightPort, FlightStatePort } from \"../ports\";\nimport type { FlightData, FlightTrip } from \"../components/types\";\n\nexport interface UseFlightLogicOptions {\n  trips?: FlightTrip[] | null;\n  flights?: FlightData[] | null;\n  lock?: boolean;\n}\n\nexport interface UseFlightLogicReturn {\n  displayTrips: FlightTrip[];\n  hasContent: boolean;\n  getTripKey: (trip: FlightTrip, index: number) => string;\n  isRoundTrip: (trip: FlightTrip) => boolean;\n}\n\nexport function useFlightLogic(\n  flightAdapter: FlightPort,\n  stateAdapter: FlightStatePort,\n  options: UseFlightLogicOptions,\n): UseFlightLogicReturn {\n  const { trips, flights, lock = false } = options;\n\n  const displayTrips = useMemo(\n    () =>\n      stateAdapter.computeDisplayTrips(\n        trips,\n        flights,\n        flightAdapter.pairFlightsIntoTrips.bind(flightAdapter),\n      ),\n    [stateAdapter, flightAdapter, trips, flights],\n  );\n\n  const hasContent = displayTrips.length > 0;\n\n  return {\n    displayTrips,\n    hasContent,\n    getTripKey: flightAdapter.getTripKey.bind(flightAdapter),\n    isRoundTrip: flightAdapter.isRoundTrip.bind(flightAdapter),\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport {\n  type ComponentRenderProps,\n  SelectableItem,\n  useDomainAutoSave,\n} from \"@onegenui/react\";\nimport {\n  MapPin,\n  Star,\n  Calendar,\n  Bed,\n  Users,\n  Hotel as HotelIcon,\n  ArrowRight,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { formatCurrency, formatDateShort } from \"../../utils/format-utils\";\nimport { StatusBadge } from \"../../utils/shared-components\";\nimport { motion } from \"framer-motion\";\nimport type { HotelData, HotelStatus as HotelStatusType } from \"./ports\";\nimport { getHotelAdapter } from \"./adapters\";\n\nconst hotelAdapter = getHotelAdapter();\n\nconst HotelStatusBadge = ({ status }: { status: HotelStatusType }) => (\n  <StatusBadge\n    label={status}\n    variant={hotelAdapter.getStatusVariant(status)}\n    pulse\n  />\n);\n\nexport const Hotel = memo(function Hotel({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    hotels,\n    layout = \"list\", // 'list' | 'card'\n  } = element.props as {\n    title?: string | null;\n    hotels?: HotelData[] | null;\n    layout?: \"list\" | \"card\";\n  };\n\n  // Calculate check-in/out dates and total price\n  const { checkIn, checkOut, totalPrice, currency } = useMemo(() => {\n    const hotelList = hotels || [];\n    let minCheckIn: Date | null = null;\n    let maxCheckOut: Date | null = null;\n    let total = 0;\n    let curr = \"EUR\";\n\n    for (const hotel of hotelList) {\n      if (hotel.dates?.checkIn) {\n        const cin = new Date(hotel.dates.checkIn);\n        if (!minCheckIn || cin < minCheckIn) minCheckIn = cin;\n      }\n      if (hotel.dates?.checkOut) {\n        const cout = new Date(hotel.dates.checkOut);\n        if (!maxCheckOut || cout > maxCheckOut) maxCheckOut = cout;\n      }\n      if (hotel.price?.amount) {\n        total += hotel.price.amount;\n        curr = hotel.price.currency || curr;\n      }\n    }\n\n    return {\n      checkIn: minCheckIn?.toISOString() || null,\n      checkOut: maxCheckOut?.toISOString() || null,\n      totalPrice: total > 0 ? total : null,\n      currency: curr,\n    };\n  }, [hotels]);\n\n  useDomainAutoSave(\"hotel\", element.key, {\n    title,\n    hotels: hotels || [],\n    status: \"search\",\n    checkIn,\n    checkOut,\n    totalPrice,\n    currency,\n  });\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      {title && (\n        <h3 className=\"m-0 text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-white/60 tracking-tight flex items-center gap-2\">\n          <HotelIcon size={24} className=\"text-amber-400 hidden\" />\n          {title}\n        </h3>\n      )}\n\n      <div\n        className={cn(\n          \"grid gap-6\",\n          layout === \"card\"\n            ? \"grid-cols-[repeat(auto-fill,minmax(300px,1fr))]\"\n            : \"grid-cols-1\",\n        )}\n      >\n        {(hotels || []).map((hotel, i) => {\n          return (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: i * 0.1 }}\n              key={hotel.id}\n            >\n              <SelectableItem\n                elementKey={element.key}\n                itemId={hotel.id}\n                className={cn(\n                  \"group relative bg-zinc-900/40 backdrop-blur-md border border-white/10 rounded-3xl overflow-hidden cursor-pointer transition-all duration-500 hover:shadow-2xl hover:shadow-black/50 hover:border-white/20 hover:-translate-y-1 flex isolate\",\n                  layout === \"card\" ? \"flex-col\" : \"flex-row min-h-[200px]\",\n                )}\n              >\n                {/* Hotel Image & Overlay */}\n                <div\n                  className={cn(\n                    \"relative overflow-hidden z-0\",\n                    layout === \"card\"\n                      ? \"h-48 w-full\"\n                      : \"w-[240px] min-w-[240px] h-full absolute inset-y-0 left-0\",\n                  )}\n                >\n                  {hotel.image ? (\n                    <div className=\"absolute inset-0 transition-transform duration-700 group-hover:scale-110\">\n                      <img\n                        src={hotel.image}\n                        alt={hotel.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"absolute inset-0 bg-gradient-to-br from-zinc-800 to-zinc-950 flex items-center justify-center\">\n                      <HotelIcon size={48} className=\"text-white/10\" />\n                    </div>\n                  )}\n\n                  {/* Gradients */}\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-80\" />\n                  {layout !== \"card\" && (\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-black/60 to-zinc-950\" />\n                  )}\n\n                  {/* Status Badge */}\n                  {hotel.status && (\n                    <div className=\"absolute top-4 left-4\">\n                      <HotelStatusBadge status={hotel.status} />\n                    </div>\n                  )}\n                </div>\n\n                {/* Content Section */}\n                <div\n                  className={cn(\n                    \"relative z-10 flex flex-col p-6 flex-1\",\n                    layout !== \"card\" && \"pl-[220px]\",\n                  )}\n                >\n                  <div className=\"flex justify-between items-start gap-4 mb-2\">\n                    <div className=\"space-y-1\">\n                      <h4 className=\"text-xl font-bold text-white group-hover:text-amber-400 transition-colors leading-tight\">\n                        {hotel.name}\n                      </h4>\n                      {hotel.address && (\n                        <div className=\"flex items-center gap-1.5 text-xs font-medium text-white/60\">\n                          <MapPin size={12} className=\"text-white/40\" />\n                          {hotel.address}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Rating */}\n                    {hotel.rating && (\n                      <div className=\"flex items-center gap-1 bg-black/40 backdrop-blur-md px-2 py-1 rounded-lg border border-white/10 shrink-0\">\n                        <Star\n                          size={12}\n                          className=\"fill-amber-400 text-amber-400\"\n                        />\n                        <span className=\"text-sm font-bold text-white\">\n                          {hotel.rating}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Divider */}\n                  <div className=\"h-px bg-white/10 w-full my-4 group-hover:bg-white/20 transition-colors\" />\n\n                  {/* Trip Details */}\n                  <div className=\"grid grid-cols-2 gap-4 text-xs\">\n                    {hotel.dates && (\n                      <div className=\"space-y-1\">\n                        <div className=\"text-white/40 uppercase tracking-wider font-bold text-[10px]\">\n                          Dates\n                        </div>\n                        <div className=\"text-white font-medium flex items-center gap-1.5\">\n                          <Calendar size={12} className=\"text-indigo-400\" />\n                          {formatDateShort(hotel.dates.checkIn)}\n                          <span className=\"text-white/30\">-</span>\n                          {formatDateShort(hotel.dates.checkOut)}\n                        </div>\n                      </div>\n                    )}\n\n                    <div className=\"space-y-1\">\n                      <div className=\"text-white/40 uppercase tracking-wider font-bold text-[10px]\">\n                        Details\n                      </div>\n                      <div className=\"text-white font-medium flex items-center gap-2\">\n                        {hotel.guests && (\n                          <span className=\"flex items-center gap-1\">\n                            <Users size={12} className=\"text-emerald-400\" />{\" \"}\n                            {hotel.guests}\n                          </span>\n                        )}\n                        {hotel.roomType && (\n                          <span\n                            className=\"flex items-center gap-1 truncate max-w-[100px]\"\n                            title={hotel.roomType}\n                          >\n                            <Bed size={12} className=\"text-rose-400\" />{\" \"}\n                            {hotel.roomType}\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Footer: Price & Action */}\n                  <div className=\"mt-auto pt-6 flex w-full items-end justify-between\">\n                    {hotel.amenities && hotel.amenities.length > 0 && (\n                      <div className=\"flex -space-x-2 hidden sm:flex\">\n                        {hotel.amenities.slice(0, 3).map((a, idx) => (\n                          <div\n                            key={idx}\n                            className=\"w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center text-[10px] text-zinc-400 font-bold uppercase overflow-hidden\"\n                            title={a}\n                          >\n                            {a[0]}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n\n                    {hotel.price && (\n                      <div className=\"ml-auto flex items-center gap-4\">\n                        <div className=\"text-right\">\n                          <div className=\"text-[10px] text-white/40 font-bold uppercase tracking-wide\">\n                            {hotel.price.perNight ? \"Per Night\" : \"Total\"}\n                          </div>\n                          <div className=\"text-2xl font-black text-white tracking-tight leading-none\">\n                            {formatCurrency(\n                              hotel.price.amount,\n                              hotel.price.currency,\n                            )}\n                          </div>\n                        </div>\n\n                        {hotel.bookingUrl ? (\n                          <a\n                            href={hotel.bookingUrl}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"h-10 w-10 flex items-center justify-center rounded-full bg-white text-black hover:scale-110 transition-transform shadow-lg shadow-white/10\"\n                          >\n                            <ArrowRight size={18} strokeWidth={2.5} />\n                          </a>\n                        ) : (\n                          <button className=\"h-10 w-10 flex items-center justify-center rounded-full bg-white text-black hover:scale-110 transition-transform shadow-lg shadow-white/10\">\n                            <ArrowRight size={18} strokeWidth={2.5} />\n                          </button>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </SelectableItem>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","/**\n * Hotel Adapter - Implementation of HotelPort\n * Pure functions for hotel operations\n */\n\nimport type {\n  HotelPort,\n  HotelStatePort,\n  HotelData,\n  HotelStatus,\n  StatusVariantType,\n} from \"../ports\";\n\nconst STATUS_VARIANT_MAP: Record<HotelStatus, StatusVariantType> = {\n  Available: \"info\",\n  Booked: \"success\",\n  Reserved: \"success\",\n  \"Sold Out\": \"error\",\n};\n\n/**\n * Create a hotel adapter with hotel operations\n */\nexport function createHotelAdapter(): HotelPort {\n  return {\n    getStatusVariant(status: HotelStatus): StatusVariantType {\n      return STATUS_VARIANT_MAP[status] || \"neutral\";\n    },\n\n    calculateNights(checkIn: string, checkOut: string): number {\n      const start = new Date(checkIn);\n      const end = new Date(checkOut);\n      const diffTime = end.getTime() - start.getTime();\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    },\n\n    calculateTotalPrice(\n      pricePerNight: number,\n      checkIn: string,\n      checkOut: string,\n    ): number {\n      const nights = this.calculateNights(checkIn, checkOut);\n      return pricePerNight * Math.max(1, nights);\n    },\n\n    formatAmenities(amenities: string[], limit: number): string[] {\n      return amenities.slice(0, limit);\n    },\n\n    isBookable(status?: HotelStatus): boolean {\n      if (!status) return true;\n      return status === \"Available\";\n    },\n  };\n}\n\n/**\n * Create a hotel state adapter for selection management\n */\nexport function createHotelStateAdapter(): HotelStatePort {\n  return {\n    toggleSelection(\n      selections: Record<string, boolean>,\n      hotelId: string,\n    ): Record<string, boolean> {\n      const current = selections[hotelId] ?? false;\n      return { ...selections, [hotelId]: !current };\n    },\n\n    getSelectedIds(selections: Record<string, boolean>): string[] {\n      return Object.entries(selections)\n        .filter(([, selected]) => selected)\n        .map(([id]) => id);\n    },\n\n    filterByStatus(hotels: HotelData[], status?: HotelStatus): HotelData[] {\n      if (!status) return hotels;\n      return hotels.filter((hotel) => hotel.status === status);\n    },\n\n    sortByPrice(hotels: HotelData[], ascending: boolean): HotelData[] {\n      return [...hotels].sort((a, b) => {\n        const priceA = a.price?.amount ?? 0;\n        const priceB = b.price?.amount ?? 0;\n        return ascending ? priceA - priceB : priceB - priceA;\n      });\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet hotelAdapterInstance: HotelPort | null = null;\nlet stateAdapterInstance: HotelStatePort | null = null;\n\nexport function getHotelAdapter(): HotelPort {\n  if (!hotelAdapterInstance) {\n    hotelAdapterInstance = createHotelAdapter();\n  }\n  return hotelAdapterInstance;\n}\n\nexport function getHotelStateAdapter(): HotelStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createHotelStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useHotelLogic - Custom hook for hotel state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport type {\n  HotelPort,\n  HotelStatePort,\n  HotelData,\n  HotelStatus,\n} from \"../ports\";\n\nexport interface UseHotelLogicOptions {\n  initialHotels: HotelData[];\n  lock?: boolean;\n}\n\nexport interface UseHotelLogicReturn {\n  // State\n  hotels: HotelData[];\n  selections: Record<string, boolean>;\n  filterStatus: HotelStatus | undefined;\n  sortAscending: boolean;\n\n  // Derived\n  filteredHotels: HotelData[];\n  selectedIds: string[];\n  selectedCount: number;\n\n  // Actions\n  toggleSelection: (hotelId: string) => void;\n  setFilterStatus: (status: HotelStatus | undefined) => void;\n  toggleSortOrder: () => void;\n  clearSelections: () => void;\n\n  // Utilities\n  getStatusVariant: HotelPort[\"getStatusVariant\"];\n  isBookable: HotelPort[\"isBookable\"];\n  calculateNights: HotelPort[\"calculateNights\"];\n  calculateTotalPrice: HotelPort[\"calculateTotalPrice\"];\n}\n\nexport function useHotelLogic(\n  hotelAdapter: HotelPort,\n  stateAdapter: HotelStatePort,\n  options: UseHotelLogicOptions,\n): UseHotelLogicReturn {\n  const { initialHotels, lock = false } = options;\n\n  // Selection state\n  const [selections, setSelections] = useState<Record<string, boolean>>({});\n\n  // Filter state\n  const [filterStatus, setFilterStatus] = useState<HotelStatus | undefined>(\n    undefined,\n  );\n\n  // Sort state\n  const [sortAscending, setSortAscending] = useState(true);\n\n  // Derived: filtered and sorted hotels\n  const filteredHotels = useMemo(() => {\n    const filtered = stateAdapter.filterByStatus(initialHotels, filterStatus);\n    return stateAdapter.sortByPrice(filtered, sortAscending);\n  }, [stateAdapter, initialHotels, filterStatus, sortAscending]);\n\n  // Derived: selected IDs\n  const selectedIds = useMemo(\n    () => stateAdapter.getSelectedIds(selections),\n    [stateAdapter, selections],\n  );\n\n  const selectedCount = selectedIds.length;\n\n  // Actions\n  const toggleSelection = useCallback(\n    (hotelId: string) => {\n      if (lock) return;\n      setSelections((prev) => stateAdapter.toggleSelection(prev, hotelId));\n    },\n    [lock, stateAdapter],\n  );\n\n  const toggleSortOrder = useCallback(() => {\n    setSortAscending((prev) => !prev);\n  }, []);\n\n  const clearSelections = useCallback(() => {\n    if (lock) return;\n    setSelections({});\n  }, [lock]);\n\n  return {\n    // State\n    hotels: initialHotels,\n    selections,\n    filterStatus,\n    sortAscending,\n\n    // Derived\n    filteredHotels,\n    selectedIds,\n    selectedCount,\n\n    // Actions\n    toggleSelection,\n    setFilterStatus,\n    toggleSortOrder,\n    clearSelections,\n\n    // Utilities from adapter\n    getStatusVariant: hotelAdapter.getStatusVariant.bind(hotelAdapter),\n    isBookable: hotelAdapter.isBookable.bind(hotelAdapter),\n    calculateNights: hotelAdapter.calculateNights.bind(hotelAdapter),\n    calculateTotalPrice: hotelAdapter.calculateTotalPrice.bind(hotelAdapter),\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plane, Hotel, MapPin, Calendar, Wallet } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { TripProps } from \"./schema\";\nimport { formatCurrency } from \"../../utils/format-utils\";\nimport { StatusBadge, type StatusVariant } from \"../../utils/shared-components\";\n\n// --- Types ---\n\ntype TripData = {\n  id: string;\n  title: string;\n  dates?: {\n    start: string;\n    end: string;\n  };\n  destination?: string;\n  status: \"Upcoming\" | \"Completed\" | \"Draft\" | \"Cancelled\";\n  totalCost?: {\n    amount: number;\n    currency: string;\n  };\n  stats?: {\n    flights: number;\n    hotels: number;\n    activities: number;\n  };\n  imageUrl?: string;\n};\n\n// Map trip status to badge variant\nconst STATUS_TO_VARIANT: Record<string, StatusVariant> = {\n  Upcoming: \"info\",\n  Completed: \"success\",\n  Draft: \"warning\",\n  Cancelled: \"error\",\n};\n\nexport const Trip = memo(function Trip({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, trips, activeTripId } = element.props as {\n    title?: string | null;\n    trips?: TripData[] | null;\n    activeTripId?: string | null;\n  };\n\n  const activeTrip = useMemo(\n    () => trips?.find((t) => t.id === activeTripId),\n    [trips, activeTripId],\n  );\n\n  // Auto-save trip data to database when it changes\n  useDomainAutoSave(\n    \"trip\",\n    element.key,\n    activeTrip\n      ? {\n          name: activeTrip.title,\n          destinations: [activeTrip.destination],\n          startDate: activeTrip.dates?.start,\n          endDate: activeTrip.dates?.end,\n          status: activeTrip.status?.toLowerCase() || \"planning\",\n          budget: activeTrip.totalCost?.amount,\n          currency: activeTrip.totalCost?.currency,\n        }\n      : null,\n  );\n\n  return (\n    <div className=\"flex flex-col gap-8 w-full\">\n      {/* Header Section */}\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50\">\n          {title || \"My Trips\"}\n        </h2>\n      </div>\n\n      {/* Trip Selector / Cards */}\n      {trips && trips.length > 0 && (\n        <div className=\"flex gap-4 overflow-x-auto pb-4 -mx-1 px-1 scrollbar-none snap-x snap-mandatory perspective-[1000px]\">\n          {trips.map((trip, index) => {\n            const isActive = activeTripId === trip.id;\n\n            return (\n              <motion.div\n                key={trip.id}\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ duration: 0.5, delay: index * 0.1 }}\n                data-selectable-item\n                data-element-key={element.key}\n                data-item-id={trip.id}\n                className={cn(\n                  \"min-w-[280px] h-[180px] p-5 rounded-3xl cursor-pointer relative overflow-hidden group snap-center transition-all duration-500 border\",\n                  isActive\n                    ? \"border-primary/50 shadow-[0_0_40px_-10px_rgba(99,102,241,0.4)] scale-100\"\n                    : \"border-white/5 hover:border-white/20 bg-black/40 hover:bg-black/60 scale-[0.98] hover:scale-[1.0]\",\n                )}\n              >\n                {/* Background Image / Gradient */}\n                <div className=\"absolute inset-0 z-0\">\n                  <div\n                    className={cn(\n                      \"absolute inset-0 bg-gradient-to-br transition-opacity duration-500\",\n                      isActive\n                        ? \"from-indigo-600/20 to-purple-600/20 opacity-100\"\n                        : \"from-zinc-900 to-black opacity-100\",\n                    )}\n                  />\n                  {/* Placeholder for future Image integration */}\n                  {trip.imageUrl && (\n                    <img\n                      src={trip.imageUrl}\n                      alt=\"\"\n                      className=\"w-full h-full object-cover opacity-30 mix-blend-overlay transition-transform duration-700 group-hover:scale-110\"\n                    />\n                  )}\n                </div>\n\n                {/* Content Layer */}\n                <div className=\"relative z-10 flex flex-col h-full justify-between\">\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex items-center gap-1.5 text-white/90 font-bold tracking-tight bg-black/30 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/5\">\n                      <MapPin size={12} className=\"text-indigo-400\" />\n                      <span className=\"text-xs uppercase whitespace-nowrap\">\n                        {trip.destination || \"Unknown\"}\n                      </span>\n                    </div>\n                    <StatusBadge\n                      label={trip.status}\n                      variant={STATUS_TO_VARIANT[trip.status] || \"neutral\"}\n                    />\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    <h4\n                      className={cn(\n                        \"text-xl font-bold leading-tight transition-colors\",\n                        isActive ? \"text-white\" : \"text-zinc-200\",\n                      )}\n                    >\n                      {trip.title}\n                    </h4>\n                    <div className=\"flex items-center gap-2 text-xs font-medium text-white/50\">\n                      <Calendar size={12} />\n                      {trip.dates?.start\n                        ? new Date(trip.dates.start).toLocaleDateString(\n                            undefined,\n                            { month: \"short\", day: \"numeric\" },\n                          )\n                        : \"TBD\"}\n                      {\" - \"}\n                      {trip.dates?.end\n                        ? new Date(trip.dates.end).toLocaleDateString(\n                            undefined,\n                            { month: \"short\", day: \"numeric\" },\n                          )\n                        : \"TBD\"}\n                    </div>\n                  </div>\n\n                  {/* Stats Strip */}\n                  <div className=\"pt-4 mt-auto border-t border-white/10 flex items-center gap-4 text-xs font-medium text-white/60\">\n                    {trip.stats?.flights ? (\n                      <span className=\"flex items-center gap-1\">\n                        <Plane size={12} className=\"text-sky-400\" />{\" \"}\n                        {trip.stats.flights} Flights\n                      </span>\n                    ) : null}\n                    {trip.stats?.hotels ? (\n                      <span className=\"flex items-center gap-1\">\n                        <Hotel size={12} className=\"text-amber-400\" />{\" \"}\n                        {trip.stats.hotels} Hotels\n                      </span>\n                    ) : null}\n                  </div>\n                </div>\n              </motion.div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Trip Details & Children */}\n      <AnimatePresence mode=\"wait\">\n        {activeTripId && (\n          <motion.div\n            key={activeTripId}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            transition={{ duration: 0.4 }}\n            className=\"flex flex-col gap-6\"\n          >\n            {/* Total Budget Overview if Available */}\n            {activeTrip?.totalCost && (\n              <div className=\"glass-panel p-6 rounded-2xl flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/20\">\n                    <Wallet size={20} />\n                  </div>\n                  <div>\n                    <div className=\"text-sm font-medium text-muted-foreground\">\n                      Total Budget\n                    </div>\n                    <div className=\"text-2xl font-bold tracking-tight font-mono\">\n                      {formatCurrency(\n                        activeTrip.totalCost.amount,\n                        activeTrip.totalCost.currency,\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-xs text-muted-foreground bg-white/5 px-3 py-1.5 rounded-full\">\n                  Estimated\n                </div>\n              </div>\n            )}\n\n            {/* Itinerary Container */}\n            <div className=\"relative pl-6 sm:pl-8 border-l-2 border-dashed border-white/10 space-y-8\">\n              {/* Render Children (Flights, Hotels, Activities) */}\n              {children}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport {\n  Plane,\n  Hotel,\n  ArrowRight,\n  Calendar,\n  MapPin,\n  User,\n  Search,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { BookingType, BookingMode } from \"./ports\";\nimport {\n  getBookingFormsValidationAdapter,\n  getBookingFormsStateAdapter,\n} from \"./adapters\";\nimport { useBookingFormsLogic } from \"./hooks\";\n\nexport const BookingForms = memo(function BookingForms({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    type = \"flight\",\n    mode = \"create\",\n    title,\n  } = element.props as {\n    type: BookingType;\n    mode: BookingMode;\n    title?: string;\n  };\n\n  const validationAdapter = getBookingFormsValidationAdapter();\n  const stateAdapter = getBookingFormsStateAdapter();\n\n  const {\n    activeTab,\n    setActiveTab,\n    flightForm,\n    hotelForm,\n    updateFlightField,\n    updateHotelField,\n    actionLabel,\n    promoText,\n  } = useBookingFormsLogic(validationAdapter, stateAdapter, {\n    initialType: type,\n    mode,\n  });\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.98 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"glass-panel w-full max-w-[500px] rounded-3xl border border-white/10 bg-zinc-900/60 backdrop-blur-xl shadow-2xl relative overflow-hidden isolate\"\n    >\n      {/* Decorative Top Bar */}\n      <div className=\"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r from-sky-500 via-indigo-500 to-purple-500\" />\n\n      <div className=\"p-6 sm:p-8\">\n        {/* Header & Tabs */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <h3 className=\"text-xl font-bold tracking-tight text-white m-0\">\n            {title || \"Booking\"}\n          </h3>\n\n          <div className=\"flex bg-black/40 p-1 rounded-xl border border-white/5\">\n            {([\"flight\", \"hotel\"] as const).map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={cn(\n                  \"px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider flex items-center gap-2 transition-all relative\",\n                  activeTab === tab\n                    ? \"text-white\"\n                    : \"text-zinc-500 hover:text-zinc-300\",\n                )}\n              >\n                {activeTab === tab && (\n                  <motion.div\n                    layoutId=\"activeTab\"\n                    className=\"absolute inset-0 bg-white/10 rounded-lg border border-white/10 shadow-sm\"\n                  />\n                )}\n                <span className=\"relative z-10 flex items-center gap-1.5\">\n                  {tab === \"flight\" ? <Plane size={12} /> : <Hotel size={12} />}\n                  {tab}\n                </span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Form Content */}\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, x: 10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -10 }}\n            transition={{ duration: 0.2 }}\n            className=\"flex flex-col gap-6\"\n          >\n            {activeTab === \"flight\" ? (\n              <>\n                {/* Route Input Group (Ticket Style) */}\n                <div className=\"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center gap-4 relative\">\n                  <div className=\"flex-1\">\n                    <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest pl-1 mb-1 block\">\n                      From\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"JFK\"\n                      value={flightForm.from}\n                      onChange={(e) =>\n                        updateFlightField(\"from\", e.target.value.toUpperCase())\n                      }\n                      className=\"w-full bg-transparent text-2xl font-black text-white placeholder-zinc-700 outline-none uppercase font-mono tracking-tight\"\n                    />\n                    <div className=\"text-xs text-zinc-500 font-medium\">\n                      {flightForm.fromCity || \"Origin City\"}\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col items-center justify-center opacity-50\">\n                    <div className=\"w-px h-8 bg-zinc-700 mx-auto mb-1\" />\n                    <div className=\"p-1.5 rounded-full bg-zinc-800 border border-zinc-700\">\n                      <Plane size={12} className=\"rotate-90 text-zinc-400\" />\n                    </div>\n                    <div className=\"w-px h-8 bg-zinc-700 mx-auto mt-1\" />\n                  </div>\n\n                  <div className=\"flex-1 text-right\">\n                    <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest pr-1 mb-1 block\">\n                      To\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"LHR\"\n                      value={flightForm.to}\n                      onChange={(e) =>\n                        updateFlightField(\"to\", e.target.value.toUpperCase())\n                      }\n                      className=\"w-full bg-transparent text-2xl font-black text-white placeholder-zinc-700 outline-none uppercase font-mono tracking-tight text-right\"\n                    />\n                    <div className=\"text-xs text-zinc-500 font-medium\">\n                      {flightForm.toCity || \"Destination City\"}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Detail Inputs */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-black/20 border border-white/5 rounded-xl p-3 hover:border-white/20 transition-colors cursor-pointer group\">\n                    <div className=\"flex items-center gap-2 mb-1 text-zinc-500 group-hover:text-zinc-300\">\n                      <Calendar size={12} />\n                      <span className=\"text-[10px] font-bold uppercase tracking-widest\">\n                        Date\n                      </span>\n                    </div>\n                    <div className=\"text-sm font-semibold text-white\">\n                      {flightForm.date || \"Select Date\"}\n                    </div>\n                  </div>\n                  <div className=\"bg-black/20 border border-white/5 rounded-xl p-3 hover:border-white/20 transition-colors cursor-pointer group\">\n                    <div className=\"flex items-center gap-2 mb-1 text-zinc-500 group-hover:text-zinc-300\">\n                      <User size={12} />\n                      <span className=\"text-[10px] font-bold uppercase tracking-widest\">\n                        Passengers\n                      </span>\n                    </div>\n                    <div className=\"text-sm font-semibold text-white\">\n                      {flightForm.passengers} Adult\n                      {flightForm.passengers > 1 ? \"s\" : \"\"}\n                    </div>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <>\n                {/* Location Input */}\n                <div className=\"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center gap-4 group hover:border-white/20 transition-colors\">\n                  <MapPin\n                    className=\"text-zinc-600 group-hover:text-sky-500 transition-colors\"\n                    size={24}\n                  />\n                  <div className=\"flex-1\">\n                    <label className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-0.5 block\">\n                      Destination\n                    </label>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Where to?\"\n                      value={hotelForm.destination}\n                      onChange={(e) =>\n                        updateHotelField(\"destination\", e.target.value)\n                      }\n                      className=\"w-full bg-transparent text-lg font-bold text-white placeholder-zinc-700 outline-none\"\n                    />\n                  </div>\n                </div>\n\n                {/* Date Range */}\n                <div className=\"grid grid-cols-2 gap-px bg-white/10 rounded-xl overflow-hidden border border-white/5\">\n                  <div className=\"bg-black/30 p-3 hover:bg-black/40 transition-colors cursor-pointer text-center\">\n                    <div className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1\">\n                      Check-in\n                    </div>\n                    <div className=\"text-sm font-semibold text-white\">\n                      {hotelForm.checkIn || \"Add Date\"}\n                    </div>\n                  </div>\n                  <div className=\"bg-black/30 p-3 hover:bg-black/40 transition-colors cursor-pointer text-center\">\n                    <div className=\"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1\">\n                      Check-out\n                    </div>\n                    <div className=\"text-sm font-semibold text-white\">\n                      {hotelForm.checkOut || \"Add Date\"}\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n          </motion.div>\n        </AnimatePresence>\n\n        {/* Action Button */}\n        <div className=\"mt-8 pt-6 border-t border-dashed border-white/10 flex items-center justify-between\">\n          <div className=\"text-xs text-zinc-500 font-medium\">{promoText}</div>\n          <button className=\"h-10 px-6 bg-white text-black text-sm font-bold uppercase tracking-wide rounded-lg flex items-center gap-2 hover:scale-105 transition-transform shadow-lg shadow-white/10\">\n            {mode === \"create\" ? (\n              <Search size={14} strokeWidth={3} />\n            ) : (\n              <ArrowRight size={14} strokeWidth={3} />\n            )}\n            {actionLabel}\n          </button>\n        </div>\n      </div>\n      {children}\n    </motion.div>\n  );\n});\n","/**\n * BookingForms Adapter - Implementation of BookingForms ports\n * Pure functions for form validation and state management\n */\n\nimport type {\n  BookingFormsValidationPort,\n  BookingFormsStatePort,\n  FlightFormData,\n  HotelFormData,\n  ValidationResult,\n  BookingMode,\n  BookingType,\n} from \"../ports\";\n\n/**\n * Create a validation adapter for booking forms\n */\nexport function createBookingFormsValidationAdapter(): BookingFormsValidationPort {\n  return {\n    validateFlightForm(data: FlightFormData): ValidationResult {\n      const errors: Record<string, string> = {};\n\n      if (!data.from || !this.isValidAirportCode(data.from)) {\n        errors.from = \"Valid airport code required\";\n      }\n      if (!data.to || !this.isValidAirportCode(data.to)) {\n        errors.to = \"Valid airport code required\";\n      }\n      if (data.from && data.to && data.from === data.to) {\n        errors.to = \"Destination must differ from origin\";\n      }\n      if (!data.date) {\n        errors.date = \"Date required\";\n      }\n      if (data.passengers < 1) {\n        errors.passengers = \"At least 1 passenger required\";\n      }\n\n      return {\n        isValid: Object.keys(errors).length === 0,\n        errors,\n      };\n    },\n\n    validateHotelForm(data: HotelFormData): ValidationResult {\n      const errors: Record<string, string> = {};\n\n      if (!data.destination || data.destination.trim().length < 2) {\n        errors.destination = \"Destination required\";\n      }\n      if (!data.checkIn) {\n        errors.checkIn = \"Check-in date required\";\n      }\n      if (!data.checkOut) {\n        errors.checkOut = \"Check-out date required\";\n      }\n      if (data.checkIn && data.checkOut && data.checkIn >= data.checkOut) {\n        errors.checkOut = \"Check-out must be after check-in\";\n      }\n      if (data.guests < 1) {\n        errors.guests = \"At least 1 guest required\";\n      }\n\n      return {\n        isValid: Object.keys(errors).length === 0,\n        errors,\n      };\n    },\n\n    isValidAirportCode(code: string): boolean {\n      return /^[A-Z]{3}$/i.test(code.trim());\n    },\n  };\n}\n\n/**\n * Create a state adapter for booking forms\n */\nexport function createBookingFormsStateAdapter(): BookingFormsStatePort {\n  return {\n    getDefaultFlightForm(): FlightFormData {\n      return {\n        from: \"\",\n        fromCity: \"\",\n        to: \"\",\n        toCity: \"\",\n        date: null,\n        passengers: 1,\n      };\n    },\n\n    getDefaultHotelForm(): HotelFormData {\n      return {\n        destination: \"\",\n        checkIn: null,\n        checkOut: null,\n        guests: 1,\n      };\n    },\n\n    updateFlightField<K extends keyof FlightFormData>(\n      form: FlightFormData,\n      field: K,\n      value: FlightFormData[K],\n    ): FlightFormData {\n      return { ...form, [field]: value };\n    },\n\n    updateHotelField<K extends keyof HotelFormData>(\n      form: HotelFormData,\n      field: K,\n      value: HotelFormData[K],\n    ): HotelFormData {\n      return { ...form, [field]: value };\n    },\n\n    getActionLabel(mode: BookingMode): string {\n      return mode === \"create\" ? \"Search\" : \"Update\";\n    },\n\n    getPromoText(type: BookingType): string {\n      return type === \"flight\"\n        ? \"Best price guaranteed\"\n        : \"Free cancellation available\";\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet validationAdapterInstance: BookingFormsValidationPort | null = null;\nlet stateAdapterInstance: BookingFormsStatePort | null = null;\n\nexport function getBookingFormsValidationAdapter(): BookingFormsValidationPort {\n  if (!validationAdapterInstance) {\n    validationAdapterInstance = createBookingFormsValidationAdapter();\n  }\n  return validationAdapterInstance;\n}\n\nexport function getBookingFormsStateAdapter(): BookingFormsStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createBookingFormsStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useBookingFormsLogic - Custom hook for booking form state management\n * Separates business logic from presentation\n */\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport type {\n  BookingType,\n  BookingMode,\n  FlightFormData,\n  HotelFormData,\n  BookingFormsValidationPort,\n  BookingFormsStatePort,\n  ValidationResult,\n} from \"../ports\";\n\nexport interface UseBookingFormsLogicOptions {\n  initialType?: BookingType;\n  mode?: BookingMode;\n}\n\nexport interface UseBookingFormsLogicReturn {\n  // State\n  activeTab: BookingType;\n  flightForm: FlightFormData;\n  hotelForm: HotelFormData;\n  flightValidation: ValidationResult | null;\n  hotelValidation: ValidationResult | null;\n\n  // Derived\n  actionLabel: string;\n  promoText: string;\n  isFlightFormValid: boolean;\n  isHotelFormValid: boolean;\n\n  // Actions\n  setActiveTab: (tab: BookingType) => void;\n  updateFlightField: <K extends keyof FlightFormData>(\n    field: K,\n    value: FlightFormData[K],\n  ) => void;\n  updateHotelField: <K extends keyof HotelFormData>(\n    field: K,\n    value: HotelFormData[K],\n  ) => void;\n  validateFlight: () => ValidationResult;\n  validateHotel: () => ValidationResult;\n  resetFlightForm: () => void;\n  resetHotelForm: () => void;\n}\n\nexport function useBookingFormsLogic(\n  validationAdapter: BookingFormsValidationPort,\n  stateAdapter: BookingFormsStatePort,\n  options: UseBookingFormsLogicOptions,\n): UseBookingFormsLogicReturn {\n  const { initialType = \"flight\", mode = \"create\" } = options;\n\n  // Tab state\n  const [activeTab, setActiveTab] = useState<BookingType>(initialType);\n\n  // Form state\n  const [flightForm, setFlightForm] = useState<FlightFormData>(() =>\n    stateAdapter.getDefaultFlightForm(),\n  );\n  const [hotelForm, setHotelForm] = useState<HotelFormData>(() =>\n    stateAdapter.getDefaultHotelForm(),\n  );\n\n  // Validation state\n  const [flightValidation, setFlightValidation] =\n    useState<ValidationResult | null>(null);\n  const [hotelValidation, setHotelValidation] =\n    useState<ValidationResult | null>(null);\n\n  // Derived values\n  const actionLabel = stateAdapter.getActionLabel(mode);\n  const promoText = stateAdapter.getPromoText(activeTab);\n\n  const isFlightFormValid = useMemo(\n    () => validationAdapter.validateFlightForm(flightForm).isValid,\n    [validationAdapter, flightForm],\n  );\n\n  const isHotelFormValid = useMemo(\n    () => validationAdapter.validateHotelForm(hotelForm).isValid,\n    [validationAdapter, hotelForm],\n  );\n\n  // Actions\n  const updateFlightField = useCallback(\n    <K extends keyof FlightFormData>(field: K, value: FlightFormData[K]) => {\n      setFlightForm((prev) =>\n        stateAdapter.updateFlightField(prev, field, value),\n      );\n      setFlightValidation(null);\n    },\n    [stateAdapter],\n  );\n\n  const updateHotelField = useCallback(\n    <K extends keyof HotelFormData>(field: K, value: HotelFormData[K]) => {\n      setHotelForm((prev) => stateAdapter.updateHotelField(prev, field, value));\n      setHotelValidation(null);\n    },\n    [stateAdapter],\n  );\n\n  const validateFlight = useCallback(() => {\n    const result = validationAdapter.validateFlightForm(flightForm);\n    setFlightValidation(result);\n    return result;\n  }, [validationAdapter, flightForm]);\n\n  const validateHotel = useCallback(() => {\n    const result = validationAdapter.validateHotelForm(hotelForm);\n    setHotelValidation(result);\n    return result;\n  }, [validationAdapter, hotelForm]);\n\n  const resetFlightForm = useCallback(() => {\n    setFlightForm(stateAdapter.getDefaultFlightForm());\n    setFlightValidation(null);\n  }, [stateAdapter]);\n\n  const resetHotelForm = useCallback(() => {\n    setHotelForm(stateAdapter.getDefaultHotelForm());\n    setHotelValidation(null);\n  }, [stateAdapter]);\n\n  return {\n    // State\n    activeTab,\n    flightForm,\n    hotelForm,\n    flightValidation,\n    hotelValidation,\n\n    // Derived\n    actionLabel,\n    promoText,\n    isFlightFormValid,\n    isHotelFormValid,\n\n    // Actions\n    setActiveTab,\n    updateFlightField,\n    updateHotelField,\n    validateFlight,\n    validateHotel,\n    resetFlightForm,\n    resetHotelForm,\n  };\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  MapPin,\n  Link as LinkIcon,\n  Calendar,\n  MessageCircle,\n  UserPlus,\n  Check,\n  User,\n} from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype Profile = {\n  name: string;\n  handle: string;\n  bio?: string;\n  avatar?: string;\n  coverImage?: string;\n  location?: string;\n  website?: string;\n  joinedDate?: string;\n  stats?: {\n    followers: number;\n    following: number;\n    posts: number;\n  };\n  isFollowing?: boolean;\n};\n\nexport type ProfileCardProps = {\n  profile?: Profile;\n};\n\nexport const ProfileCard = memo(function ProfileCard({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { profile } = element.props as ProfileCardProps;\n\n  if (!profile) {\n    return (\n      <EmptyState icon={<User className=\"w-10 h-10\" />} message=\"No profile\" />\n    );\n  }\n\n  return (\n    <div className=\"group relative rounded-3xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden shadow-2xl\">\n      {/* Cover Image */}\n      <div className=\"h-32 sm:h-40 relative bg-zinc-800 border-b border-white/5\">\n        {profile.coverImage ? (\n          <div className=\"absolute inset-0\">\n            <img\n              src={profile.coverImage}\n              className=\"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-700\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-t from-zinc-900 to-transparent opacity-80\" />\n          </div>\n        ) : (\n          <div className=\"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-zinc-900 to-zinc-950\" />\n        )}\n\n        {/* Tech Grid Overlay */}\n        <div\n          className=\"absolute inset-0 opacity-10\"\n          style={{\n            backgroundImage: \"radial-gradient(#fff 1px, transparent 1px)\",\n            backgroundSize: \"16px 16px\",\n          }}\n        />\n      </div>\n\n      <div className=\"px-6 pb-6 relative\">\n        {/* Avatar - Floating */}\n        <div className=\"absolute -top-12 left-6\">\n          <div className=\"w-24 h-24 rounded-2xl bg-black border-4 border-zinc-900 shadow-2xl overflow-hidden ring-1 ring-white/10 group-hover:ring-white/30 transition-all group-hover:scale-105 duration-300\">\n            {profile.avatar ? (\n              <img\n                src={profile.avatar}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-zinc-800 text-2xl font-bold text-zinc-500 uppercase\">\n                {profile.name[0]}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex justify-end pt-4 mb-4 gap-2\">\n          <button className=\"h-9 px-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 text-white font-bold text-xs uppercase tracking-wider flex items-center gap-2 transition-colors\">\n            <MessageCircle size={14} />\n            <span className=\"hidden sm:inline\">Message</span>\n          </button>\n          <button\n            className={cn(\n              \"h-9 px-4 rounded-lg font-bold text-xs uppercase tracking-wider flex items-center gap-2 transition-all shadow-lg\",\n              profile.isFollowing\n                ? \"bg-transparent border border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/10 shadow-emerald-500/10\"\n                : \"bg-white text-black hover:bg-zinc-200 border border-transparent shadow-white/10\",\n            )}\n          >\n            {profile.isFollowing ? (\n              <Check size={14} strokeWidth={3} />\n            ) : (\n              <UserPlus size={14} strokeWidth={3} />\n            )}\n            {profile.isFollowing ? \"Following\" : \"Follow\"}\n          </button>\n        </div>\n\n        {/* Info */}\n        <div className=\"mt-2\">\n          <h2 className=\"text-2xl font-black text-white tracking-tight leading-none mb-1 flex items-center gap-2\">\n            {profile.name}\n            {profile.isFollowing && (\n              <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgb(16,185,129)]\" />\n            )}\n          </h2>\n          <div className=\"text-sm text-zinc-500 font-mono mb-4\">\n            @{profile.handle}\n          </div>\n\n          {profile.bio && (\n            <p className=\"text-sm text-zinc-300 leading-relaxed mb-6 max-w-md border-l-2 border-white/10 pl-3 italic\">\n              {profile.bio}\n            </p>\n          )}\n\n          {/* Meta Grid */}\n          <div className=\"flex flex-wrap gap-4 text-xs text-zinc-500 mb-6 font-medium\">\n            {profile.location && (\n              <div className=\"flex items-center gap-1.5\">\n                <MapPin size={12} className=\"text-zinc-600\" />\n                {profile.location}\n              </div>\n            )}\n            {profile.website && (\n              <a\n                href={profile.website}\n                target=\"_blank\"\n                className=\"flex items-center gap-1.5 text-sky-500/80 hover:text-sky-400 hover:underline transition-colors decoration-sky-500/30\"\n              >\n                <LinkIcon size={12} />\n                {profile.website.replace(/^https?:\\/\\//, \"\")}\n              </a>\n            )}\n            {profile.joinedDate && (\n              <div className=\"flex items-center gap-1.5\">\n                <Calendar size={12} className=\"text-zinc-600\" />\n                Joined {profile.joinedDate}\n              </div>\n            )}\n          </div>\n\n          {/* Stats Bar */}\n          <div className=\"flex items-center gap-8 pt-6 border-t border-dashed border-white/10\">\n            {profile.stats &&\n              Object.entries(profile.stats).map(([key, value]) => (\n                <div\n                  key={key}\n                  className=\"flex flex-col gap-0.5 hover:opacity-80 transition-opacity cursor-pointer\"\n                >\n                  <span className=\"text-lg font-black text-white leading-none\">\n                    {value}\n                  </span>\n                  <span className=\"text-[10px] font-bold text-zinc-600 uppercase tracking-wider\">\n                    {key}\n                  </span>\n                </div>\n              ))}\n          </div>\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport {\n  MessageSquare,\n  Heart,\n  Share2,\n  MoreHorizontal,\n  Activity,\n} from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype FeedItem = {\n  id: string;\n  user: {\n    name: string;\n    avatar?: string;\n    handle?: string;\n  };\n  content: string;\n  image?: string;\n  likes?: number;\n  comments?: number;\n  timestamp: string;\n};\n\nexport type ActivityFeedProps = {\n  items?: FeedItem[];\n};\n\nexport const ActivityFeed = memo(function ActivityFeed({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { items = [] } = element.props as ActivityFeedProps;\n\n  if (!items || items.length === 0) {\n    return (\n      <EmptyState\n        icon={<Activity className=\"w-10 h-10\" />}\n        message=\"No activity\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4 max-w-xl mx-auto\">\n      {items.map((item, index) => (\n        <div\n          key={item.id}\n          className=\"group relative pl-8 pb-8 last:pb-0\"\n          data-selectable-item\n          data-element-key={element.key}\n          data-item-id={item.id}\n        >\n          {/* Timeline Line */}\n          <div className=\"absolute left-[15px] top-10 bottom-0 w-px bg-white/10 group-last:hidden\" />\n\n          {/* Avatar Node */}\n          <div className=\"absolute left-0 top-0 w-8 h-8 rounded-lg bg-zinc-900 border border-white/10 overflow-hidden ring-4 ring-zinc-950 z-10 transition-transform group-hover:scale-110\">\n            {item.user.avatar ? (\n              <img\n                src={item.user.avatar}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center bg-zinc-800 text-[10px] font-bold text-zinc-500 uppercase\">\n                {item.user.name[0]}\n              </div>\n            )}\n          </div>\n\n          {/* Card Content */}\n          <div className=\"bg-zinc-900/60 backdrop-blur-md border border-white/10 rounded-2xl p-5 hover:bg-zinc-900/80 hover:border-white/20 transition-all shadow-lg hover:shadow-2xl hover:-translate-y-1\">\n            {/* Decorative corner accent */}\n            <div className=\"absolute top-0 right-0 p-2 opacity-50\">\n              <div className=\"w-2 h-2 rounded-full border border-white/20\" />\n            </div>\n\n            <div className=\"flex justify-between items-start mb-3\">\n              <div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm font-bold text-white tracking-tight\">\n                    {item.user.name}\n                  </span>\n                  <span className=\"text-xs text-zinc-500 font-mono\">\n                    @\n                    {item.user.handle ||\n                      item.user.name.toLowerCase().replace(\" \", \"\")}\n                  </span>\n                </div>\n                <div className=\"text-[10px] font-mono text-zinc-600 mt-1 uppercase tracking-wide flex items-center gap-1.5\">\n                  <span>Logged</span>\n                  <span className=\"w-1 h-1 rounded-full bg-zinc-700\" />\n                  {item.timestamp}\n                </div>\n              </div>\n              <button className=\"text-zinc-600 hover:text-white transition-colors p-1 rounded hover:bg-white/5\">\n                <MoreHorizontal size={14} />\n              </button>\n            </div>\n\n            <div className=\"text-sm text-zinc-300 leading-relaxed mb-4\">\n              {render(item.content, { inline: true })}\n            </div>\n\n            {item.image && (\n              <div className=\"rounded-xl overflow-hidden border border-white/10 mb-4 bg-zinc-950 min-h-[150px] relative group/image\">\n                <img\n                  src={item.image}\n                  className=\"w-full h-auto object-cover max-h-[300px] transition-transform duration-700 group-hover/image:scale-105\"\n                />\n                <div className=\"absolute inset-0 ring-1 ring-inset ring-white/5 rounded-xl pointer-events-none\" />\n              </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"flex items-center gap-6 border-t border-dashed border-white/10 pt-3 mt-2\">\n              <button className=\"flex items-center gap-2 text-xs font-bold text-zinc-500 hover:text-rose-400 transition-colors group/action py-1 px-2 rounded hover:bg-white/5 -ml-2\">\n                <Heart\n                  size={14}\n                  className=\"group-hover/action:scale-110 transition-transform\"\n                />\n                {item.likes || 0}\n              </button>\n              <button className=\"flex items-center gap-2 text-xs font-bold text-zinc-500 hover:text-sky-400 transition-colors group/action py-1 px-2 rounded hover:bg-white/5\">\n                <MessageSquare\n                  size={14}\n                  className=\"group-hover/action:scale-110 transition-transform\"\n                />\n                {item.comments || 0}\n              </button>\n              <button className=\"flex items-center gap-2 text-xs font-bold text-zinc-500 hover:text-emerald-400 transition-colors ml-auto py-1 px-2 rounded hover:bg-white/5 -mr-2\">\n                <Share2 size={14} />\n                <span className=\"hidden sm:inline\">Share</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      ))}\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { Check, Star } from \"lucide-react\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype PricingPlan = {\n  id?: string | null;\n  name: string;\n  price: string;\n  cadence?: string | null;\n  description?: string | null;\n  features?: string[] | null;\n  highlight?: boolean | null;\n  badge?: string | null;\n};\n\nexport type PricingProps = {\n  title?: string | null;\n  plans?: PricingPlan[] | null;\n};\n\nexport const Pricing = memo(function Pricing({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { title, plans = [] } = element.props as PricingProps;\n\n  if (!plans || plans.length === 0) {\n    return (\n      <EmptyState\n        icon={<Star className=\"w-10 h-10\" />}\n        message=\"No pricing plans\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {title && (\n        <h3 className=\"m-0 text-xl font-bold tracking-tight text-white\">\n          {title}\n        </h3>\n      )}\n      <div className=\"grid grid-cols-[repeat(auto-fit,minmax(280px,1fr))] gap-6\">\n        {plans.map((plan, index) => {\n          const isHighlight = plan.highlight;\n\n          return (\n            <div\n              key={plan.id ?? `${index}`}\n              data-selectable-item\n              data-element-key={element.key}\n              data-item-id={plan.id ?? `${index}`}\n              className={cn(\n                \"group relative bg-zinc-900 border transition-all duration-300 flex flex-col isolate overflow-hidden\",\n                // Flight/Invoice Style:\n                \"rounded-none sm:rounded-2xl border-white/10\",\n                isHighlight\n                  ? \"shadow-2xl shadow-indigo-500/10 ring-1 ring-indigo-500/50 bg-zinc-900/80\"\n                  : \"hover:border-white/20 hover:shadow-xl hover:-translate-y-1\",\n              )}\n            >\n              {isHighlight && (\n                <div className=\"absolute top-0 inset-x-0 h-1 bg-indigo-500 z-10\" />\n              )}\n\n              <div className=\"p-6 pb-8 border-b border-dashed border-white/10\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h4 className=\"font-bold text-lg text-white mb-1\">\n                      {plan.name}\n                    </h4>\n                    {plan.badge && (\n                      <span className=\"inline-block px-1.5 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-white/10 text-white/80 border border-white/10\">\n                        {plan.badge}\n                      </span>\n                    )}\n                  </div>\n                  {isHighlight && (\n                    <div className=\"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg shadow-indigo-500/40\">\n                      <Star size={14} fill=\"currentColor\" />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex items-baseline gap-1\">\n                  <span className=\"text-4xl font-black text-white tracking-tight leading-none\">\n                    {plan.price}\n                  </span>\n                  {plan.cadence && (\n                    <span className=\"text-xs font-mono text-zinc-500 uppercase\">\n                      /{plan.cadence}\n                    </span>\n                  )}\n                </div>\n\n                {plan.description && (\n                  <p className=\"mt-3 text-sm text-zinc-400 leading-snug\">\n                    {render(plan.description, { inline: true })}\n                  </p>\n                )}\n              </div>\n\n              {/* Receipt edge visual (perforations) */}\n              <div className=\"relative h-px w-full my-0 -mt-px z-10\">\n                <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-r border-white/10\" />\n                <div className=\"absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-black border-l border-white/10\" />\n              </div>\n\n              <div className=\"p-6 flex-1 bg-black/20\">\n                {plan.features && plan.features.length > 0 && (\n                  <ul className=\"space-y-3 mb-8\">\n                    {plan.features.map((feature) => (\n                      <li\n                        key={feature}\n                        className=\"flex items-start gap-3 text-sm text-zinc-300\"\n                      >\n                        <div\n                          className={cn(\n                            \"w-4 h-4 rounded-full flex items-center justify-center shrink-0 mt-0.5\",\n                            isHighlight\n                              ? \"bg-indigo-500/20 text-indigo-400\"\n                              : \"bg-white/10 text-zinc-400\",\n                          )}\n                        >\n                          <Check size={10} strokeWidth={4} />\n                        </div>\n                        <span className=\"leading-tight\">\n                          {render(feature, { inline: true })}\n                        </span>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n\n                <button\n                  className={cn(\n                    \"w-full py-3 rounded-lg text-xs font-bold uppercase tracking-widest transition-all\",\n                    isHighlight\n                      ? \"bg-indigo-500 hover:bg-indigo-400 text-white shadow-lg shadow-indigo-500/25\"\n                      : \"bg-zinc-800 hover:bg-zinc-700 text-white border border-white/5\",\n                  )}\n                >\n                  Get Started\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { ArrowUpRight, Clock, Calendar, FileText } from \"lucide-react\";\nimport { formatDateShort } from \"../../utils/format-utils\";\nimport { EmptyState } from \"../../utils/shared-components\";\n\ntype Article = {\n  id?: string;\n  title: string;\n  excerpt?: string;\n  coverImage?: string;\n  author?: {\n    name: string;\n    avatar?: string;\n  };\n  date?: string;\n  readTime?: string;\n  category?: string;\n  url?: string;\n};\n\nexport type ArticleCardProps = {\n  article?: Article;\n};\n\nexport const ArticleCard = memo(function ArticleCard({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const { article } = element.props as ArticleCardProps;\n\n  if (!article) {\n    return (\n      <EmptyState\n        icon={<FileText className=\"w-10 h-10\" />}\n        message=\"No article\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"group relative rounded-2xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden hover:border-white/20 hover:shadow-2xl transition-all duration-500 hover:-translate-y-1\">\n      {/* Top Accent */}\n      <div className=\"absolute top-0 left-0 right-0 h-1 bg-white/5 group-hover:bg-gradient-to-r from-sky-500 to-indigo-500 transition-all duration-500 z-10\" />\n\n      <div className=\"flex flex-col sm:flex-row h-full\">\n        {/* Image Section */}\n        <div className=\"sm:w-1/3 min-h-[200px] relative overflow-hidden bg-zinc-800\">\n          {article.coverImage ? (\n            <div className=\"absolute inset-0 transition-transform duration-700 group-hover:scale-105\">\n              <img\n                src={article.coverImage}\n                className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\"\n              />\n            </div>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-zinc-800 to-zinc-900 flex items-center justify-center\">\n              <span className=\"text-[10px] font-mono text-zinc-500 uppercase tracking-widest\">\n                No Cover\n              </span>\n            </div>\n          )}\n          {article.category && (\n            <div className=\"absolute top-4 left-4 px-2 py-1 bg-black/60 backdrop-blur-md rounded text-[10px] font-bold text-white uppercase tracking-wider border border-white/10\">\n              {article.category}\n            </div>\n          )}\n        </div>\n\n        {/* Content Section */}\n        <div className=\"flex-1 p-6 flex flex-col\">\n          <div className=\"flex items-center gap-3 text-xs text-zinc-500 font-mono mb-3\">\n            {article.date && (\n              <div className=\"flex items-center gap-1.5\">\n                <Calendar size={12} />\n                {new Date(article.date).toLocaleDateString()}\n              </div>\n            )}\n            {article.readTime && (\n              <>\n                <span></span>\n                <div className=\"flex items-center gap-1.5\">\n                  <Clock size={12} />\n                  {article.readTime}\n                </div>\n              </>\n            )}\n          </div>\n\n          <h3 className=\"text-xl font-bold text-white leading-tight mb-3 group-hover:text-sky-300 transition-colors\">\n            {article.title}\n          </h3>\n\n          {article.excerpt && (\n            <p className=\"text-sm text-zinc-400 line-clamp-2 leading-relaxed mb-6 flex-1\">\n              {render(article.excerpt, { inline: true })}\n            </p>\n          )}\n\n          <div className=\"flex items-center justify-between pt-4 border-t border-dashed border-white/10 mt-auto\">\n            {article.author && (\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-6 h-6 rounded-full bg-zinc-800 border border-white/10 overflow-hidden\">\n                  {article.author.avatar && <img src={article.author.avatar} />}\n                </div>\n                <span className=\"text-xs font-bold text-zinc-300 uppercase tracking-wide\">\n                  {article.author.name}\n                </span>\n              </div>\n            )}\n\n            <div className=\"relative overflow-hidden w-8 h-8 rounded-full border border-white/10 flex items-center justify-center text-zinc-400 group-hover:text-white group-hover:border-white/30 transition-colors\">\n              <ArrowUpRight size={16} />\n            </div>\n          </div>\n        </div>\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Plus, Layout } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { KanbanCard, type KanbanColumn } from \"./components\";\nimport { getKanbanAdapter, getKanbanDragAdapter } from \"./adapters\";\nimport { useKanbanState, useKanbanDrag } from \"./hooks\";\n\nexport const Kanban = memo(function Kanban({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    columns: initialColumns,\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    columns?: KanbanColumn[] | null;\n    lock?: boolean;\n  };\n\n  // Use adapters\n  const adapter = useMemo(() => getKanbanAdapter(), []);\n  const dragAdapter = useMemo(() => getKanbanDragAdapter(), []);\n\n  // Use state hook\n  const { displayColumns, moveItem, toggleSubItem, isSubItemCompleted } =\n    useKanbanState(adapter, {\n      initialColumns: initialColumns || [],\n      lock,\n    });\n\n  // Use drag hook\n  const {\n    draggedItem,\n    dropTarget,\n    handleDragStart,\n    handleDragEnd,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragOver,\n    handleDrop,\n  } = useKanbanDrag(dragAdapter, { lock, onMoveItem: moveItem });\n\n  useDomainAutoSave(\"project\", element.key, {\n    title: title || \"Kanban Board\",\n    viewType: \"kanban\",\n    status: \"active\",\n    columns: displayColumns.map((col) => ({\n      id: col.id,\n      title: col.title,\n      color: col.color,\n      itemIds: col.items.map((item) => item.id),\n    })),\n    items: displayColumns.flatMap((col) =>\n      col.items.map((item) => ({\n        id: item.id,\n        title: item.title,\n        description: item.description,\n        columnId: col.id,\n        tags: item.tags,\n        assignee: item.assignee,\n        priority: item.priority,\n        dueDate: item.dueDate,\n      })),\n    ),\n  });\n\n  if (!displayColumns.length) {\n    return (\n      <div className=\"flex flex-col w-full min-h-[200px]\">\n        {title && (\n          <h3 className=\"text-2xl font-black tracking-tight text-foreground mb-6\">\n            {title}\n          </h3>\n        )}\n        <EmptyState\n          icon={<Layout className=\"w-10 h-10\" />}\n          message=\"No columns\"\n        />\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {title && (\n        <div className=\"mb-6 flex items-center justify-between flex-wrap gap-4\">\n          <h3 className=\"text-2xl font-black tracking-tight text-foreground\">\n            {title}\n          </h3>\n          {!lock && (\n            <button className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary text-primary-foreground text-xs font-bold shadow-lg shadow-primary/20 hover:scale-105 transition-transform\">\n              <Plus size={14} />\n              NEW TASK\n            </button>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex flex-col md:flex-row gap-4 overflow-x-auto pb-6 min-h-[200px] snap-x snap-mandatory scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent\">\n        {displayColumns.map((col) => (\n          <div\n            key={col.id}\n            onDragEnter={(e) => handleDragEnter(e, col.id)}\n            onDragLeave={(e) => handleDragLeave(e, col.id)}\n            onDragOver={handleDragOver}\n            onDrop={(e) => handleDrop(e, col.id)}\n            className={cn(\n              \"min-w-full md:min-w-[300px] flex-shrink-0 snap-center md:snap-start flex flex-col min-h-[200px] rounded-2xl bg-zinc-900/40 backdrop-blur-md border border-white/5 relative overflow-hidden transition-all duration-200\",\n              dropTarget === col.id &&\n                \"border-primary/50 bg-primary/5 ring-2 ring-primary/30\",\n            )}\n          >\n            <div\n              className=\"absolute top-0 left-0 right-0 h-1\"\n              style={{ backgroundColor: col.color || \"var(--border)\" }}\n            />\n\n            <div className=\"flex justify-between items-center p-4 border-b border-white/5 bg-white/[0.02]\">\n              <span className=\"font-bold text-sm tracking-wide text-foreground\">\n                {col.title}\n              </span>\n              <span className=\"text-[10px] font-bold text-muted-foreground bg-white/5 px-2 py-0.5 rounded-full border border-white/10\">\n                {col.items.length}\n              </span>\n            </div>\n\n            <div className=\"flex flex-col gap-3 overflow-y-auto p-3 flex-1 min-h-[100px]\">\n              <AnimatePresence mode=\"popLayout\">\n                {col.items.map((item) => (\n                  <KanbanCard\n                    key={item.id}\n                    item={item}\n                    elementKey={element.key}\n                    colId={col.id}\n                    lock={lock}\n                    isDragging={draggedItem?.item.id === item.id}\n                    onDragStart={handleDragStart}\n                    onDragEnd={handleDragEnd}\n                    isSubItemCompleted={isSubItemCompleted}\n                    toggleSubItem={toggleSubItem}\n                  />\n                ))}\n              </AnimatePresence>\n\n              {col.items.length === 0 && (\n                <div\n                  className={cn(\n                    \"flex-1 min-h-[80px] rounded-lg border-2 border-dashed border-white/10 flex items-center justify-center text-xs text-muted-foreground\",\n                    dropTarget === col.id && \"border-primary/50 bg-primary/5\",\n                  )}\n                >\n                  {dropTarget === col.id ? \"Drop here\" : \"No items\"}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","import type { StatusVariant } from \"../../../utils/shared-components\";\n\nexport type KanbanItem = {\n  id: string;\n  title: string;\n  description?: string | null;\n  assignee?: string | null;\n  priority?: \"low\" | \"medium\" | \"high\" | null;\n  dueDate?: string | null;\n  tags?: string[] | null;\n  subItems?: KanbanItem[] | null;\n};\n\nexport type KanbanColumn = {\n  id: string;\n  title: string;\n  color?: string | null;\n  items?: KanbanItem[] | null;\n};\n\nexport type DisplayColumn = {\n  id: string;\n  title: string;\n  color?: string | null;\n  items: KanbanItem[];\n};\n\nexport const PRIORITY_TO_VARIANT: Record<string, StatusVariant> = {\n  high: \"error\",\n  medium: \"warning\",\n  low: \"success\",\n};\n","import { memo } from \"react\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { KanbanItem } from \"./types\";\n\ninterface SubItemsListProps {\n  item: KanbanItem;\n  lock: boolean;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n}\n\nexport const SubItemsList = memo(function SubItemsList({\n  item,\n  lock,\n  isSubItemCompleted,\n  toggleSubItem,\n}: SubItemsListProps) {\n  if (!item.subItems || item.subItems.length === 0) return null;\n\n  return (\n    <div className=\"mt-3 flex flex-col gap-2 p-2 rounded-lg bg-black/20 border border-white/5\">\n      {item.subItems.map((subItem) => {\n        const completed = isSubItemCompleted(item.id, subItem.id);\n        return (\n          <div\n            key={subItem.id}\n            className={cn(\n              \"flex items-center gap-2.5 text-xs transition-all\",\n              completed\n                ? \"text-muted-foreground line-through opacity-60\"\n                : \"text-foreground\",\n            )}\n          >\n            <div\n              onClick={(e) => {\n                e.stopPropagation();\n                toggleSubItem(item.id, subItem.id);\n              }}\n              data-interactive\n              className={cn(\n                \"w-3.5 h-3.5 rounded border-[1.5px] flex items-center justify-center cursor-pointer transition-colors shrink-0\",\n                completed\n                  ? \"bg-emerald-500 border-emerald-500 text-black\"\n                  : \"border-muted-foreground/40 hover:border-primary/60 bg-transparent\",\n                lock && \"pointer-events-none opacity-50\",\n              )}\n            >\n              {completed && (\n                <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }}>\n                  <Check size={8} strokeWidth={4} />\n                </motion.div>\n              )}\n            </div>\n            <span className=\"truncate\">{subItem.title}</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport { GripVertical } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport { StatusBadge } from \"../../../utils/shared-components\";\nimport type { KanbanItem } from \"./types\";\nimport { PRIORITY_TO_VARIANT } from \"./types\";\nimport { SubItemsList } from \"./sub-items-list\";\n\ninterface KanbanCardProps {\n  item: KanbanItem;\n  elementKey: string;\n  colId: string;\n  lock: boolean;\n  isDragging: boolean;\n  onDragStart: (e: React.DragEvent, item: KanbanItem, colId: string) => void;\n  onDragEnd: (e: React.DragEvent) => void;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n}\n\nexport const KanbanCard = memo(function KanbanCard({\n  item,\n  elementKey,\n  colId,\n  lock,\n  isDragging,\n  onDragStart,\n  onDragEnd,\n  isSubItemCompleted,\n  toggleSubItem,\n}: KanbanCardProps) {\n  return (\n    <div\n      draggable={!lock}\n      onDragStart={(e) => onDragStart(e, item, colId)}\n      onDragEnd={onDragEnd}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={item.id}\n    >\n      <motion.div\n        layout\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.9 }}\n        transition={{ duration: 0.2 }}\n        className={cn(\n          \"group relative bg-card/40 hover:bg-card/60 p-3.5 rounded-xl border border-white/5 transition-all shadow-sm hover:shadow-lg hover:border-white/10\",\n          !lock && \"cursor-grab active:cursor-grabbing hover:-translate-y-0.5\",\n          isDragging && \"opacity-50\",\n        )}\n      >\n        {!lock && (\n          <div\n            data-interactive\n            className=\"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-foreground cursor-grab active:cursor-grabbing\"\n          >\n            <GripVertical size={14} />\n          </div>\n        )}\n\n        <div\n          className={cn(\n            \"text-sm font-medium text-foreground leading-snug\",\n            !lock && \"pl-5 group-hover:pl-5\",\n          )}\n        >\n          {item.title}\n        </div>\n\n        {item.description && (\n          <div\n            className={cn(\n              \"text-xs text-muted-foreground mt-1 line-clamp-2\",\n              !lock && \"pl-5 group-hover:pl-5\",\n            )}\n          >\n            {item.description}\n          </div>\n        )}\n\n        <SubItemsList\n          item={item}\n          lock={lock}\n          isSubItemCompleted={isSubItemCompleted}\n          toggleSubItem={toggleSubItem}\n        />\n\n        <div className=\"flex justify-between items-center pt-3 mt-2 border-t border-white/5\">\n          <div className=\"flex flex-wrap gap-1.5 items-center\">\n            {item.priority && (\n              <StatusBadge\n                label={item.priority}\n                variant={PRIORITY_TO_VARIANT[item.priority] || \"neutral\"}\n              />\n            )}\n            {(item.tags || []).map((tag) => (\n              <span\n                key={tag}\n                className=\"text-[10px] bg-white/5 text-muted-foreground px-2 py-0.5 rounded border border-white/5 font-semibold\"\n              >\n                {tag}\n              </span>\n            ))}\n          </div>\n\n          {item.assignee && (\n            <div\n              title={item.assignee}\n              className=\"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 text-white flex items-center justify-center text-[10px] font-bold shadow-md border border-white/10\"\n            >\n              {item.assignee.charAt(0).toUpperCase()}\n            </div>\n          )}\n        </div>\n      </motion.div>\n    </div>\n  );\n});\n","/**\n * Kanban Adapter - Implementation of KanbanPort\n */\nimport type {\n  KanbanPort,\n  KanbanDragPort,\n  KanbanColumn,\n  DisplayColumn,\n} from \"../ports\";\n\nexport function createKanbanAdapter(): KanbanPort {\n  return {\n    buildDisplayColumns(\n      columns: KanbanColumn[],\n      itemMoves: Record<string, string>,\n    ): DisplayColumn[] {\n      const colMap = new Map<string, DisplayColumn>();\n\n      columns.forEach((col) => {\n        colMap.set(col.id, {\n          id: col.id,\n          title: col.title,\n          color: col.color,\n          items: [],\n        });\n      });\n\n      columns.forEach((col) => {\n        (col.items || []).forEach((item) => {\n          const targetColId = itemMoves[item.id] || col.id;\n          const targetCol = colMap.get(targetColId);\n          if (targetCol) {\n            targetCol.items.push(item);\n          }\n        });\n      });\n\n      return Array.from(colMap.values());\n    },\n\n    getTotalItemCount(columns: DisplayColumn[]): number {\n      return columns.reduce((sum, col) => sum + col.items.length, 0);\n    },\n  };\n}\n\nexport function createKanbanDragAdapter(): KanbanDragPort {\n  return {\n    isValidDrop(fromColId: string, targetColId: string): boolean {\n      return fromColId !== targetColId;\n    },\n  };\n}\n\n// Singleton instances\nlet kanbanAdapter: KanbanPort | null = null;\nlet kanbanDragAdapter: KanbanDragPort | null = null;\n\nexport function getKanbanAdapter(): KanbanPort {\n  if (!kanbanAdapter) {\n    kanbanAdapter = createKanbanAdapter();\n  }\n  return kanbanAdapter;\n}\n\nexport function getKanbanDragAdapter(): KanbanDragPort {\n  if (!kanbanDragAdapter) {\n    kanbanDragAdapter = createKanbanDragAdapter();\n  }\n  return kanbanDragAdapter;\n}\n","/**\n * useKanbanDrag - Custom hook for Kanban drag and drop logic\n */\nimport { useState, useCallback, useRef } from \"react\";\nimport type { KanbanItem, KanbanDragPort } from \"../ports\";\n\nexport interface DragState {\n  item: KanbanItem;\n  fromColId: string;\n}\n\nexport interface UseKanbanDragOptions {\n  lock: boolean;\n  onMoveItem: (itemId: string, targetColId: string) => void;\n}\n\nexport interface UseKanbanDragReturn {\n  draggedItem: DragState | null;\n  dropTarget: string | null;\n  handleDragStart: (\n    e: React.DragEvent,\n    item: KanbanItem,\n    fromColId: string,\n  ) => void;\n  handleDragEnd: (e: React.DragEvent) => void;\n  handleDragEnter: (e: React.DragEvent, colId: string) => void;\n  handleDragLeave: (e: React.DragEvent, colId: string) => void;\n  handleDragOver: (e: React.DragEvent) => void;\n  handleDrop: (e: React.DragEvent, targetColId: string) => void;\n}\n\nexport function useKanbanDrag(\n  adapter: KanbanDragPort,\n  options: UseKanbanDragOptions,\n): UseKanbanDragReturn {\n  const { lock, onMoveItem } = options;\n\n  const [draggedItem, setDraggedItem] = useState<DragState | null>(null);\n  const [dropTarget, setDropTarget] = useState<string | null>(null);\n  const dragCounter = useRef<Record<string, number>>({});\n\n  const handleDragStart = useCallback(\n    (e: React.DragEvent, item: KanbanItem, fromColId: string) => {\n      if (lock) {\n        e.preventDefault();\n        return;\n      }\n      e.stopPropagation();\n      setDraggedItem({ item, fromColId });\n      e.dataTransfer.effectAllowed = \"move\";\n      e.dataTransfer.setData(\"application/x-kanban-item\", item.id);\n      e.dataTransfer.setData(\"text/plain\", item.id);\n      if (e.currentTarget instanceof HTMLElement) {\n        e.currentTarget.style.opacity = \"0.5\";\n      }\n    },\n    [lock],\n  );\n\n  const handleDragEnd = useCallback((e: React.DragEvent) => {\n    e.stopPropagation();\n    if (e.currentTarget instanceof HTMLElement) {\n      e.currentTarget.style.opacity = \"1\";\n    }\n    setDraggedItem(null);\n    setDropTarget(null);\n    dragCounter.current = {};\n  }, []);\n\n  const handleDragEnter = useCallback(\n    (e: React.DragEvent, colId: string) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dragCounter.current[colId] = (dragCounter.current[colId] || 0) + 1;\n      if (draggedItem && adapter.isValidDrop(draggedItem.fromColId, colId)) {\n        setDropTarget(colId);\n      }\n    },\n    [adapter, draggedItem],\n  );\n\n  const handleDragLeave = useCallback(\n    (e: React.DragEvent, colId: string) => {\n      e.preventDefault();\n      e.stopPropagation();\n      dragCounter.current[colId] = (dragCounter.current[colId] || 1) - 1;\n      if (dragCounter.current[colId] <= 0) {\n        dragCounter.current[colId] = 0;\n        if (dropTarget === colId) {\n          setDropTarget(null);\n        }\n      }\n    },\n    [dropTarget],\n  );\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    if (e.dataTransfer.types.includes(\"application/x-kanban-item\")) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.dataTransfer.dropEffect = \"move\";\n    }\n  }, []);\n\n  const handleDrop = useCallback(\n    (e: React.DragEvent, targetColId: string) => {\n      if (!e.dataTransfer.types.includes(\"application/x-kanban-item\")) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      if (\n        draggedItem &&\n        adapter.isValidDrop(draggedItem.fromColId, targetColId)\n      ) {\n        onMoveItem(draggedItem.item.id, targetColId);\n      }\n      setDraggedItem(null);\n      setDropTarget(null);\n      dragCounter.current = {};\n    },\n    [adapter, draggedItem, onMoveItem],\n  );\n\n  return {\n    draggedItem,\n    dropTarget,\n    handleDragStart,\n    handleDragEnd,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragOver,\n    handleDrop,\n  };\n}\n","/**\n * useKanbanState - Custom hook for Kanban state management\n */\nimport { useState, useMemo, useCallback } from \"react\";\nimport type { KanbanPort, KanbanColumn, DisplayColumn } from \"../ports\";\n\nexport interface UseKanbanStateOptions {\n  initialColumns: KanbanColumn[];\n  lock: boolean;\n}\n\nexport interface UseKanbanStateReturn {\n  displayColumns: DisplayColumn[];\n  itemMoves: Record<string, string>;\n  subItemCompletions: Record<string, Record<string, boolean>>;\n  moveItem: (itemId: string, targetColId: string) => void;\n  toggleSubItem: (itemId: string, subItemId: string) => void;\n  isSubItemCompleted: (itemId: string, subItemId: string) => boolean;\n}\n\nexport function useKanbanState(\n  adapter: KanbanPort,\n  options: UseKanbanStateOptions,\n): UseKanbanStateReturn {\n  const { initialColumns, lock } = options;\n\n  const [itemMoves, setItemMoves] = useState<Record<string, string>>({});\n  const [subItemCompletions, setSubItemCompletions] = useState<\n    Record<string, Record<string, boolean>>\n  >({});\n\n  const displayColumns = useMemo(\n    () => adapter.buildDisplayColumns(initialColumns, itemMoves),\n    [adapter, initialColumns, itemMoves],\n  );\n\n  const moveItem = useCallback(\n    (itemId: string, targetColId: string) => {\n      if (lock) return;\n      setItemMoves((prev) => ({ ...prev, [itemId]: targetColId }));\n    },\n    [lock],\n  );\n\n  const toggleSubItem = useCallback(\n    (itemId: string, subItemId: string) => {\n      if (lock) return;\n      setSubItemCompletions((prev) => {\n        const itemCompletions = prev[itemId] || {};\n        const current = itemCompletions[subItemId] ?? false;\n        return {\n          ...prev,\n          [itemId]: { ...itemCompletions, [subItemId]: !current },\n        };\n      });\n    },\n    [lock],\n  );\n\n  const isSubItemCompleted = useCallback(\n    (itemId: string, subItemId: string) => {\n      return subItemCompletions[itemId]?.[subItemId] ?? false;\n    },\n    [subItemCompletions],\n  );\n\n  return {\n    displayColumns,\n    itemMoves,\n    subItemCompletions,\n    moveItem,\n    toggleSubItem,\n    isSubItemCompleted,\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Check, Clock, Plus, Sparkles } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { StatusBadge, type StatusVariant } from \"../../utils/shared-components\";\nimport { getTodoListAdapter } from \"./adapters\";\nimport { useTodoListLogic } from \"./hooks\";\nimport type { TodoItem } from \"./ports\";\n\n// Map priority to shared badge variant\nconst PRIORITY_TO_VARIANT: Record<string, StatusVariant> = {\n  high: \"error\",\n  medium: \"warning\",\n  low: \"success\",\n};\n\nexport const TodoList = memo(function TodoList({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const { title, items: initialItems } = element.props as {\n    title?: string | null;\n    items?: TodoItem[] | null;\n  };\n\n  // Use adapter and hook for logic\n  const adapter = useMemo(() => getTodoListAdapter(), []);\n  const { items, completedCount, totalCount, toggleItem } = useTodoListLogic(\n    adapter,\n    { initialItems: initialItems || [] },\n  );\n\n  // Auto-save task list data to database\n  useDomainAutoSave(\"task\", element.key, {\n    title: title || \"Todo List\",\n    items: items.map((item) => ({\n      id: item.id,\n      title: item.text,\n      status: item.status || \"pending\",\n      priority: item.priority || \"medium\",\n      time: item.time,\n      subItems: item.subItems?.map((sub) => ({\n        id: sub.id,\n        title: sub.text,\n        status: sub.status || \"pending\",\n        priority: sub.priority,\n      })),\n    })),\n  });\n\n  const renderItems = (itemsToRender: TodoItem[], depth = 0) => (\n    <div className=\"flex flex-col gap-3\">\n      <AnimatePresence mode=\"popLayout\" initial={false}>\n        {itemsToRender.map((item, i) => {\n          return (\n            <motion.div\n              layout\n              initial={{ opacity: 0, y: 10, scale: 0.98 }}\n              animate={{ opacity: 1, y: 0, scale: 1 }}\n              transition={{ duration: 0.2, delay: i * 0.05 }}\n              key={item.id}\n              className=\"flex flex-col gap-2\"\n            >\n              <div\n                data-selectable-item\n                data-element-key={element.key}\n                data-item-id={item.id}\n                onClick={() => toggleItem(item.id)}\n                className={cn(\n                  \"group relative flex items-center gap-4 py-3.5 px-5 rounded-2xl border transition-all duration-300 cursor-pointer overflow-hidden isolate\",\n                  item.status === \"done\"\n                    ? \"bg-white/[0.02] border-white/5 opacity-60\"\n                    : \"glass-panel bg-card/60 hover:bg-card/80 border-white/10 hover:border-white/20 hover:shadow-lg hover:shadow-black/10 hover:-translate-y-0.5\",\n                  depth > 0 && \"ml-6 border-l-2 border-l-white/10\",\n                )}\n              >\n                {depth === 0 && (\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-10\" />\n                )}\n\n                {/* Custom Checkbox */}\n                <div\n                  data-checkbox\n                  data-interactive\n                  className={cn(\n                    \"w-6 h-6 rounded-lg border flex items-center justify-center transition-all duration-300 cursor-pointer shrink-0 shadow-sm relative overflow-hidden\",\n                    item.status === \"done\"\n                      ? \"bg-gradient-to-br from-indigo-500 to-purple-500 border-transparent shadow-[0_0_12px_rgba(99,102,241,0.4)]\"\n                      : \"border-white/20 bg-black/20 group-hover:border-indigo-400/50\",\n                  )}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    toggleItem(item.id);\n                  }}\n                >\n                  <AnimatePresence>\n                    {item.status === \"done\" && (\n                      <motion.div\n                        initial={{ scale: 0, rotate: -45 }}\n                        animate={{ scale: 1, rotate: 0 }}\n                        exit={{ scale: 0, rotate: 45 }}\n                        transition={{\n                          type: \"spring\",\n                          stiffness: 400,\n                          damping: 20,\n                        }}\n                      >\n                        <Check\n                          size={14}\n                          strokeWidth={3.5}\n                          className=\"text-white drop-shadow-sm\"\n                        />\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0 flex flex-col gap-0.5\">\n                  <span\n                    className={cn(\n                      \"text-[15px] font-medium transition-all duration-300 truncate\",\n                      item.status === \"done\"\n                        ? \"text-muted-foreground line-through decoration-white/20 decoration-2\"\n                        : \"text-foreground group-hover:text-white\",\n                    )}\n                  >\n                    {item.text}\n                  </span>\n\n                  {item.time && (\n                    <div className=\"flex items-center gap-1.5 text-xs font-medium text-muted-foreground/80\">\n                      <Clock\n                        size={11}\n                        className={\n                          item.status === \"done\"\n                            ? \"opacity-50\"\n                            : \"text-indigo-400\"\n                        }\n                      />\n                      {item.time}\n                    </div>\n                  )}\n                </div>\n\n                {/* Priority Badge */}\n                {item.priority && (\n                  <StatusBadge\n                    label={item.priority}\n                    variant={PRIORITY_TO_VARIANT[item.priority] || \"neutral\"}\n                  />\n                )}\n              </div>\n\n              {item.subItems &&\n                item.subItems.length > 0 &&\n                renderItems(item.subItems, depth + 1)}\n            </motion.div>\n          );\n        })}\n      </AnimatePresence>\n    </div>\n  );\n\n  if (!items || items.length === 0) {\n    return (\n      <div className=\"relative overflow-hidden rounded-[24px] border border-white/10 bg-zinc-950 p-10 flex flex-col items-center justify-center text-center group\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-500/5 via-purple-500/5 to-transparent opacity-50\" />\n        {title && (\n          <h3 className=\"relative z-10 m-0 mb-2 text-xl font-bold text-foreground\">\n            {title}\n          </h3>\n        )}\n        <div className=\"relative z-10 flex flex-col items-center gap-3 text-muted-foreground mt-4\">\n          <div className=\"w-14 h-14 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-1 group-hover:scale-110 transition-transform duration-500 shadow-xl\">\n            <Sparkles className=\"text-indigo-400 opacity-60\" size={24} />\n          </div>\n          <p className=\"text-sm font-medium\">No tasks yet</p>\n          <button className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/10 text-xs font-bold text-foreground transition-all\">\n            <Plus size={14} /> Add First Task\n          </button>\n        </div>\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto flex flex-col gap-6\">\n      {/* Header */}\n      {title && (\n        <div className=\"flex items-center justify-between px-2\">\n          <h3 className=\"text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/50\">\n            {title}\n          </h3>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"text-xs font-bold text-muted-foreground bg-white/5 px-2.5 py-1 rounded-full border border-white/5\">\n              {completedCount}/{totalCount} Done\n            </div>\n          </div>\n        </div>\n      )}\n\n      {renderItems(items)}\n      {children}\n    </div>\n  );\n});\n","/**\n * TodoList Adapter - Implementation of TodoListPort\n */\nimport type { TodoListPort, TodoItem } from \"../ports\";\n\nexport function createTodoListAdapter(): TodoListPort {\n  return {\n    toggleItemStatus(items: TodoItem[], id: string): TodoItem[] {\n      return items.map((item) => {\n        if (item.id === id) {\n          const nextStatus = item.status === \"done\" ? \"pending\" : \"done\";\n          return { ...item, status: nextStatus };\n        }\n        if (item.subItems && item.subItems.length > 0) {\n          return {\n            ...item,\n            subItems: this.toggleItemStatus(item.subItems, id),\n          };\n        }\n        return item;\n      });\n    },\n\n    countCompleted(items: TodoItem[]): number {\n      let count = 0;\n      for (const item of items) {\n        if (item.status === \"done\") count++;\n        if (item.subItems) {\n          count += this.countCompleted(item.subItems);\n        }\n      }\n      return count;\n    },\n\n    countTotal(items: TodoItem[]): number {\n      let count = items.length;\n      for (const item of items) {\n        if (item.subItems) {\n          count += this.countTotal(item.subItems);\n        }\n      }\n      return count;\n    },\n\n    flattenItems(items: TodoItem[]): TodoItem[] {\n      const result: TodoItem[] = [];\n      for (const item of items) {\n        result.push(item);\n        if (item.subItems) {\n          result.push(...this.flattenItems(item.subItems));\n        }\n      }\n      return result;\n    },\n  };\n}\n\n// Singleton instance\nlet todoListAdapter: TodoListPort | null = null;\n\nexport function getTodoListAdapter(): TodoListPort {\n  if (!todoListAdapter) {\n    todoListAdapter = createTodoListAdapter();\n  }\n  return todoListAdapter;\n}\n","/**\n * useTodoListLogic - Custom hook for TodoList state management\n */\nimport { useState, useCallback, useEffect, useMemo } from \"react\";\nimport type { TodoListPort, TodoItem } from \"../ports\";\n\nexport interface UseTodoListLogicOptions {\n  initialItems: TodoItem[];\n}\n\nexport interface UseTodoListLogicReturn {\n  items: TodoItem[];\n  completedCount: number;\n  totalCount: number;\n  toggleItem: (id: string) => void;\n}\n\nexport function useTodoListLogic(\n  adapter: TodoListPort,\n  options: UseTodoListLogicOptions,\n): UseTodoListLogicReturn {\n  const { initialItems } = options;\n  const [items, setItems] = useState<TodoItem[]>(initialItems);\n\n  // Sync with prop changes\n  useEffect(() => {\n    if (initialItems) {\n      setItems(initialItems);\n    }\n  }, [initialItems]);\n\n  const toggleItem = useCallback(\n    (id: string) => {\n      setItems((prev) => adapter.toggleItemStatus(prev, id));\n    },\n    [adapter],\n  );\n\n  const completedCount = useMemo(\n    () => adapter.countCompleted(items),\n    [adapter, items],\n  );\n\n  const totalCount = useMemo(() => adapter.countTotal(items), [adapter, items]);\n\n  return {\n    items,\n    completedCount,\n    totalCount,\n    toggleItem,\n  };\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Calendar, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { RoutineSchedulerProps } from \"./schema\";\nimport { DayColumn, CATEGORY_CONFIG } from \"./components\";\nimport {\n  getRoutineSchedulerAdapter,\n  getRoutineSchedulerStateAdapter,\n} from \"./adapters\";\nimport { useRoutineSchedulerLogic } from \"./hooks\";\n\n// --- Main Component ---\n\nexport const RoutineScheduler = memo(function RoutineScheduler({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    view = \"day\",\n    selectedDate: initialSelectedDate,\n    days: initialDays,\n    timeRange,\n    granularity = \"30min\",\n    lock = false,\n    showCategories,\n  } = element.props as RoutineSchedulerProps;\n\n  const adapter = getRoutineSchedulerAdapter();\n  const stateAdapter = getRoutineSchedulerStateAdapter();\n\n  const {\n    currentView,\n    selectedDate,\n    visibleDays,\n    timeSlots,\n    slotHeight,\n    dayStart,\n    todayStr,\n    setCurrentView,\n    setSelectedDate,\n    navigateDate,\n    handleToggleBlock,\n    displayDays,\n  } = useRoutineSchedulerLogic(adapter, stateAdapter, {\n    initialDate: initialSelectedDate ?? undefined,\n    initialView: view === \"timeline\" ? \"day\" : view,\n    initialDays: initialDays || [],\n    timeRange: timeRange ?? undefined,\n    granularity,\n    showCategories: showCategories ?? undefined,\n    lock: lock ?? false,\n  });\n\n  useDomainAutoSave(\"schedule\", element.key, {\n    type: \"routine_schedule\",\n    days: displayDays,\n    selectedDate,\n    view: currentView,\n  });\n\n  return (\n    <div className=\"flex flex-col gap-4 w-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Calendar className=\"w-5 h-5 text-indigo-500\" />\n          <h3 className=\"text-xl font-bold tracking-tight text-white\">\n            {title || \"Routine\"}\n          </h3>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {/* View Toggle */}\n          <div className=\"flex rounded-lg border border-white/10 overflow-hidden\">\n            {([\"day\", \"week\"] as const).map((v) => (\n              <button\n                key={v}\n                onClick={() => setCurrentView(v)}\n                className={cn(\n                  \"px-3 py-1.5 text-xs font-bold uppercase tracking-wider transition-colors\",\n                  currentView === v\n                    ? \"bg-indigo-500/20 text-indigo-400\"\n                    : \"text-white/40 hover:text-white/60\",\n                )}\n              >\n                {v}\n              </button>\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => navigateDate(-1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 transition-colors\"\n            >\n              <ChevronLeft size={16} />\n            </button>\n            <button\n              onClick={() => setSelectedDate(todayStr)}\n              className=\"px-3 py-1.5 rounded-lg border border-white/10 text-xs font-bold text-white/60 hover:text-white hover:bg-white/5 transition-colors\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateDate(1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5 transition-colors\"\n            >\n              <ChevronRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Date Display */}\n      <div className=\"text-sm text-white/50 font-mono\">\n        {currentView === \"day\"\n          ? new Date(selectedDate).toLocaleDateString(undefined, {\n              weekday: \"long\",\n              month: \"long\",\n              day: \"numeric\",\n              year: \"numeric\",\n            })\n          : `Week of ${new Date(visibleDays[0]?.date ?? selectedDate).toLocaleDateString(undefined, { month: \"short\", day: \"numeric\" })}`}\n      </div>\n\n      {/* Schedule Grid */}\n      <div className=\"bg-zinc-900/50 border border-white/10 rounded-2xl overflow-hidden\">\n        <div className=\"flex\">\n          {/* Time Labels */}\n          <div className=\"w-14 flex-shrink-0 border-r border-white/5\">\n            {currentView === \"week\" && (\n              <div className=\"h-[60px] border-b border-white/5\" />\n            )}\n            {timeSlots.map((slot, i) => (\n              <div\n                key={slot}\n                className=\"relative border-b border-white/5 text-[10px] font-mono text-white/30\"\n                style={{ height: `${slotHeight}px` }}\n              >\n                <span className=\"absolute -top-2 left-2\">{slot}</span>\n              </div>\n            ))}\n          </div>\n\n          {/* Day Columns */}\n          <div className=\"flex-1 flex overflow-x-auto\">\n            <AnimatePresence mode=\"wait\">\n              {visibleDays.length === 0 ? (\n                <div className=\"flex-1 py-12\">\n                  <EmptyState\n                    icon={<Calendar className=\"w-10 h-10\" />}\n                    message=\"No schedule\"\n                  />\n                </div>\n              ) : (\n                visibleDays.map((day) => (\n                  <DayColumn\n                    key={day.date}\n                    day={day}\n                    blocks={day.blocks}\n                    timeSlots={timeSlots}\n                    granularity={granularity}\n                    dayStart={dayStart}\n                    slotHeight={slotHeight}\n                    onToggle={handleToggleBlock}\n                    lock={!!lock}\n                    elementKey={element.key}\n                    isToday={day.date === todayStr}\n                    showHeader={currentView === \"week\"}\n                  />\n                ))\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n\n      {/* Category Legend */}\n      <div className=\"flex flex-wrap gap-3\">\n        {Object.entries(CATEGORY_CONFIG).map(([key, config]) => {\n          const Icon = config.icon;\n          return (\n            <div\n              key={key}\n              className=\"flex items-center gap-1.5 text-xs text-white/50\"\n            >\n              <Icon size={12} className={config.color} />\n              <span className=\"capitalize\">{key}</span>\n            </div>\n          );\n        })}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Check } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { TimeBlock } from \"../schema\";\nimport { getCategoryConfig, formatTimeRange } from \"./utils\";\n\nexport const TimeBlockCard = memo(function TimeBlockCard({\n  block,\n  onToggle,\n  lock,\n  elementKey,\n  slotHeight,\n  slots,\n}: {\n  block: TimeBlock;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n  slotHeight: number;\n  slots: number;\n}) {\n  const config = getCategoryConfig(block.category);\n  const Icon = config.icon;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      style={{ height: `${slots * slotHeight}px`, minHeight: \"44px\" }}\n      data-selectable-item\n      data-element-key={elementKey}\n      data-item-id={block.id}\n      className={cn(\n        \"absolute left-14 right-2 rounded-xl border p-2 overflow-hidden cursor-pointer transition-all group\",\n        config.bg,\n        block.completed && \"opacity-60\",\n      )}\n      onClick={() => !lock && onToggle(block.id)}\n    >\n      <div className=\"flex items-start gap-2 h-full\">\n        <div\n          className={cn(\n            \"w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0\",\n            block.completed ? \"bg-emerald-500\" : \"bg-white/10\",\n          )}\n        >\n          {block.completed ? (\n            <Check size={12} className=\"text-black\" />\n          ) : (\n            <Icon size={12} className={config.color} />\n          )}\n        </div>\n        <div className=\"flex-1 min-w-0 overflow-hidden\">\n          <div\n            className={cn(\n              \"text-sm font-semibold text-white truncate\",\n              block.completed && \"line-through opacity-70\",\n            )}\n          >\n            {block.title}\n          </div>\n          <div className=\"text-[10px] text-white/50 font-mono mt-0.5\">\n            {formatTimeRange(block.startTime, block.endTime)}\n          </div>\n          {block.description && slots > 2 && (\n            <div className=\"text-xs text-white/40 mt-1 line-clamp-2\">\n              {block.description}\n            </div>\n          )}\n        </div>\n        {block.priority === \"high\" && (\n          <div className=\"w-1.5 h-1.5 rounded-full bg-rose-500 flex-shrink-0\" />\n        )}\n      </div>\n    </motion.div>\n  );\n});\n","import {\n  Calendar,\n  Clock,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Briefcase,\n  Moon,\n  Coffee,\n  User,\n  MoreHorizontal,\n} from \"lucide-react\";\n\n// --- Types ---\n\nexport type CategoryConfig = {\n  icon: typeof Calendar;\n  color: string;\n  bg: string;\n};\n\n// --- Constants ---\n\nexport const DEFAULT_CATEGORY_CONFIG: CategoryConfig = {\n  icon: MoreHorizontal,\n  color: \"text-zinc-400\",\n  bg: \"bg-zinc-500/10 border-zinc-500/20\",\n};\n\nexport const CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  workout: {\n    icon: Dumbbell,\n    color: \"text-emerald-400\",\n    bg: \"bg-emerald-500/10 border-emerald-500/20\",\n  },\n  meal: {\n    icon: Utensils,\n    color: \"text-amber-400\",\n    bg: \"bg-amber-500/10 border-amber-500/20\",\n  },\n  supplement: {\n    icon: Pill,\n    color: \"text-violet-400\",\n    bg: \"bg-violet-500/10 border-violet-500/20\",\n  },\n  work: {\n    icon: Briefcase,\n    color: \"text-blue-400\",\n    bg: \"bg-blue-500/10 border-blue-500/20\",\n  },\n  rest: {\n    icon: Coffee,\n    color: \"text-orange-400\",\n    bg: \"bg-orange-500/10 border-orange-500/20\",\n  },\n  sleep: {\n    icon: Moon,\n    color: \"text-indigo-400\",\n    bg: \"bg-indigo-500/10 border-indigo-500/20\",\n  },\n  personal: {\n    icon: User,\n    color: \"text-pink-400\",\n    bg: \"bg-pink-500/10 border-pink-500/20\",\n  },\n  other: {\n    icon: MoreHorizontal,\n    color: \"text-zinc-400\",\n    bg: \"bg-zinc-500/10 border-zinc-500/20\",\n  },\n};\n\nexport const DAYS_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\n// --- Helpers ---\n\nexport function getCategoryConfig(\n  category: string | null | undefined,\n): CategoryConfig {\n  return CATEGORY_CONFIG[category ?? \"other\"] ?? DEFAULT_CATEGORY_CONFIG;\n}\n\nexport function parseTime(time: string): number {\n  const parts = time.split(\":\").map(Number);\n  const hours = parts[0] ?? 0;\n  const minutes = parts[1] ?? 0;\n  return hours * 60 + minutes;\n}\n\nexport function formatTimeRange(start: string, end: string): string {\n  return `${start} - ${end}`;\n}\n\nexport function getBlockHeight(\n  startTime: string,\n  endTime: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): number {\n  const duration = parseTime(endTime) - parseTime(startTime);\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  return Math.max(1, Math.round(duration / slotMinutes));\n}\n\nexport function getBlockTop(\n  startTime: string,\n  dayStart: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): number {\n  const diff = parseTime(startTime) - parseTime(dayStart);\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  return Math.max(0, Math.round(diff / slotMinutes));\n}\n\nexport function generateTimeSlots(\n  start: string,\n  end: string,\n  granularity: \"15min\" | \"30min\" | \"1hr\",\n): string[] {\n  const slots: string[] = [];\n  const slotMinutes =\n    granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n  let current = parseTime(start);\n  const endMin = parseTime(end);\n\n  while (current <= endMin) {\n    const hours = Math.floor(current / 60);\n    const mins = current % 60;\n    slots.push(\n      `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`,\n    );\n    current += slotMinutes;\n  }\n  return slots;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\nimport { DAYS_SHORT, getBlockTop, getBlockHeight } from \"./utils\";\nimport { TimeBlockCard } from \"./time-block-card\";\n\nexport const DayColumn = memo(function DayColumn({\n  day,\n  blocks,\n  timeSlots,\n  granularity,\n  dayStart,\n  slotHeight,\n  onToggle,\n  lock,\n  elementKey,\n  isToday,\n  showHeader,\n}: {\n  day: DaySchedule;\n  blocks: TimeBlock[];\n  timeSlots: string[];\n  granularity: \"15min\" | \"30min\" | \"1hr\";\n  dayStart: string;\n  slotHeight: number;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n  isToday: boolean;\n  showHeader: boolean;\n}) {\n  const date = new Date(day.date);\n  const dayNum = date.getDate();\n  const dayName = DAYS_SHORT[date.getDay()];\n\n  return (\n    <div className=\"flex-1 min-w-[140px] relative\">\n      {showHeader && (\n        <div\n          className={cn(\n            \"sticky top-0 z-10 bg-zinc-950/90 backdrop-blur-sm border-b border-white/5 p-2 text-center\",\n            isToday && \"bg-indigo-500/10 border-indigo-500/20\",\n          )}\n        >\n          <div className=\"text-[10px] font-bold text-white/40 uppercase tracking-wider\">\n            {dayName}\n          </div>\n          <div\n            className={cn(\n              \"text-lg font-bold\",\n              isToday ? \"text-indigo-400\" : \"text-white\",\n            )}\n          >\n            {dayNum}\n          </div>\n        </div>\n      )}\n\n      <div\n        className=\"relative\"\n        style={{ height: `${timeSlots.length * slotHeight}px` }}\n      >\n        {timeSlots.map((slot, i) => (\n          <div\n            key={slot}\n            className=\"absolute left-0 right-0 border-b border-white/5\"\n            style={{ top: `${i * slotHeight}px`, height: `${slotHeight}px` }}\n          />\n        ))}\n\n        {blocks.map((block) => {\n          const topSlot = getBlockTop(block.startTime, dayStart, granularity);\n          const heightSlots = getBlockHeight(\n            block.startTime,\n            block.endTime,\n            granularity,\n          );\n\n          return (\n            <div\n              key={block.id}\n              style={{ top: `${topSlot * slotHeight}px` }}\n              className=\"absolute left-0 right-0\"\n            >\n              <TimeBlockCard\n                block={block}\n                onToggle={onToggle}\n                lock={lock}\n                elementKey={elementKey}\n                slotHeight={slotHeight}\n                slots={heightSlots}\n              />\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n});\n","/**\n * RoutineScheduler Adapter - Implementation of RoutineSchedulerPort\n * Pure functions for schedule calculations\n */\n\nimport type { RoutineSchedulerPort, RoutineSchedulerStatePort } from \"../ports\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\n\n/**\n * Create a routine scheduler adapter for time grid operations\n */\nexport function createRoutineSchedulerAdapter(): RoutineSchedulerPort {\n  return {\n    generateTimeSlots(\n      start: string,\n      end: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): string[] {\n      const slots: string[] = [];\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      let current = this.parseTime(start);\n      const endMin = this.parseTime(end);\n\n      while (current <= endMin) {\n        const hours = Math.floor(current / 60);\n        const mins = current % 60;\n        slots.push(\n          `${hours.toString().padStart(2, \"0\")}:${mins.toString().padStart(2, \"0\")}`,\n        );\n        current += slotMinutes;\n      }\n      return slots;\n    },\n\n    parseTime(time: string): number {\n      const parts = time.split(\":\").map(Number);\n      const hours = parts[0] ?? 0;\n      const minutes = parts[1] ?? 0;\n      return hours * 60 + minutes;\n    },\n\n    getBlockTop(\n      startTime: string,\n      dayStart: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): number {\n      const diff = this.parseTime(startTime) - this.parseTime(dayStart);\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      return Math.max(0, Math.round(diff / slotMinutes));\n    },\n\n    getBlockHeight(\n      startTime: string,\n      endTime: string,\n      granularity: \"15min\" | \"30min\" | \"1hr\",\n    ): number {\n      const duration = this.parseTime(endTime) - this.parseTime(startTime);\n      const slotMinutes =\n        granularity === \"15min\" ? 15 : granularity === \"30min\" ? 30 : 60;\n      return Math.max(1, Math.round(duration / slotMinutes));\n    },\n\n    getSlotHeight(granularity: \"15min\" | \"30min\" | \"1hr\"): number {\n      return granularity === \"15min\" ? 24 : granularity === \"30min\" ? 36 : 48;\n    },\n\n    formatDate(date: string, format: \"full\" | \"short\"): string {\n      const d = new Date(date);\n      if (format === \"full\") {\n        return d.toLocaleDateString(undefined, {\n          weekday: \"long\",\n          month: \"long\",\n          day: \"numeric\",\n          year: \"numeric\",\n        });\n      }\n      return d.toLocaleDateString(undefined, {\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n\n    getTodayString(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n  };\n}\n\n/**\n * Create a routine scheduler state adapter for state management\n */\nexport function createRoutineSchedulerStateAdapter(): RoutineSchedulerStatePort {\n  return {\n    mergeEdits(\n      days: DaySchedule[],\n      edits: Record<string, Partial<TimeBlock>>,\n    ): DaySchedule[] {\n      return days.map((day) => ({\n        ...day,\n        blocks: day.blocks.map((block) => {\n          const edit = edits[block.id];\n          return edit ? { ...block, ...edit } : block;\n        }),\n      }));\n    },\n\n    filterByCategories(\n      days: DaySchedule[],\n      categories: string[] | null | undefined,\n    ): DaySchedule[] {\n      if (!categories || categories.length === 0) return days;\n      return days.map((day) => ({\n        ...day,\n        blocks: day.blocks.filter((b) =>\n          categories.includes(b.category as string),\n        ),\n      }));\n    },\n\n    toggleBlockCompletion(\n      edits: Record<string, Partial<TimeBlock>>,\n      blockId: string,\n      currentCompleted: boolean,\n    ): Record<string, Partial<TimeBlock>> {\n      return {\n        ...edits,\n        [blockId]: { completed: !currentCompleted },\n      };\n    },\n\n    navigateDate(\n      currentDate: string,\n      direction: -1 | 1,\n      view: \"day\" | \"week\",\n    ): string {\n      const date = new Date(currentDate);\n      date.setDate(\n        date.getDate() + (view === \"week\" ? 7 * direction : direction),\n      );\n      return date.toISOString().split(\"T\")[0]!;\n    },\n\n    getVisibleDays(\n      days: DaySchedule[],\n      selectedDate: string,\n      view: \"day\" | \"week\",\n    ): DaySchedule[] {\n      if (view === \"day\") {\n        return days.filter((d) => d.date === selectedDate);\n      }\n      const selected = new Date(selectedDate);\n      const weekStart = new Date(selected);\n      weekStart.setDate(selected.getDate() - selected.getDay());\n\n      return Array.from({ length: 7 }, (_, i) => {\n        const date = new Date(weekStart);\n        date.setDate(weekStart.getDate() + i);\n        const dateStr = date.toISOString().split(\"T\")[0]!;\n        const existingDay = days.find((d) => d.date === dateStr);\n        return existingDay ?? { date: dateStr, blocks: [] };\n      });\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet schedulerAdapterInstance: RoutineSchedulerPort | null = null;\nlet stateAdapterInstance: RoutineSchedulerStatePort | null = null;\n\nexport function getRoutineSchedulerAdapter(): RoutineSchedulerPort {\n  if (!schedulerAdapterInstance) {\n    schedulerAdapterInstance = createRoutineSchedulerAdapter();\n  }\n  return schedulerAdapterInstance;\n}\n\nexport function getRoutineSchedulerStateAdapter(): RoutineSchedulerStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createRoutineSchedulerStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useRoutineSchedulerLogic - Custom hook for routine scheduler state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport type { RoutineSchedulerPort, RoutineSchedulerStatePort } from \"../ports\";\nimport type { TimeBlock, DaySchedule } from \"../schema\";\n\nexport interface UseRoutineSchedulerLogicOptions {\n  initialDate?: string;\n  initialView?: \"day\" | \"week\";\n  initialDays?: DaySchedule[];\n  timeRange?: { start: string; end: string };\n  granularity?: \"15min\" | \"30min\" | \"1hr\";\n  showCategories?: string[];\n  lock?: boolean;\n}\n\nexport interface UseRoutineSchedulerLogicReturn {\n  // State\n  currentView: \"day\" | \"week\";\n  selectedDate: string;\n  visibleDays: DaySchedule[];\n  timeSlots: string[];\n\n  // Derived\n  slotHeight: number;\n  dayStart: string;\n  dayEnd: string;\n  todayStr: string;\n\n  // Actions\n  setCurrentView: (view: \"day\" | \"week\") => void;\n  setSelectedDate: (date: string) => void;\n  navigateDate: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleBlock: (blockId: string) => void;\n\n  // For auto-save\n  displayDays: DaySchedule[];\n}\n\nexport function useRoutineSchedulerLogic(\n  adapter: RoutineSchedulerPort,\n  stateAdapter: RoutineSchedulerStatePort,\n  options: UseRoutineSchedulerLogicOptions,\n): UseRoutineSchedulerLogicReturn {\n  const {\n    initialDate,\n    initialView = \"day\",\n    initialDays = [],\n    timeRange,\n    granularity = \"30min\",\n    showCategories,\n    lock = false,\n  } = options;\n\n  // Local edits state\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Partial<TimeBlock>>\n  >({});\n\n  // View state\n  const [currentView, setCurrentView] = useState<\"day\" | \"week\">(initialView);\n\n  // Selected date state\n  const [selectedDate, setSelectedDate] = useState<string>(\n    initialDate ?? adapter.getTodayString(),\n  );\n\n  // Time range\n  const dayStart = timeRange?.start || \"06:00\";\n  const dayEnd = timeRange?.end || \"22:00\";\n\n  // Derived: today string\n  const todayStr = adapter.getTodayString();\n\n  // Derived: slot height\n  const slotHeight = adapter.getSlotHeight(granularity);\n\n  // Derived: time slots\n  const timeSlots = useMemo(\n    () => adapter.generateTimeSlots(dayStart, dayEnd, granularity),\n    [adapter, dayStart, dayEnd, granularity],\n  );\n\n  // Derived: merge edits with days\n  const displayDays = useMemo(\n    () => stateAdapter.mergeEdits(initialDays, localEdits),\n    [stateAdapter, initialDays, localEdits],\n  );\n\n  // Derived: filter by categories\n  const filteredDays = useMemo(\n    () => stateAdapter.filterByCategories(displayDays, showCategories),\n    [stateAdapter, displayDays, showCategories],\n  );\n\n  // Derived: visible days for current view\n  const visibleDays = useMemo(\n    () => stateAdapter.getVisibleDays(filteredDays, selectedDate, currentView),\n    [stateAdapter, filteredDays, selectedDate, currentView],\n  );\n\n  // Actions\n  const navigateDate = useCallback(\n    (direction: -1 | 1) => {\n      setSelectedDate((prev) =>\n        stateAdapter.navigateDate(prev, direction, currentView),\n      );\n    },\n    [stateAdapter, currentView],\n  );\n\n  const goToToday = useCallback(() => {\n    setSelectedDate(adapter.getTodayString());\n  }, [adapter]);\n\n  const handleToggleBlock = useCallback(\n    (blockId: string) => {\n      if (lock) return;\n\n      const allBlocks = displayDays.flatMap((d) => d.blocks);\n      const block = allBlocks.find((b) => b.id === blockId);\n      if (!block) return;\n\n      setLocalEdits((prev) =>\n        stateAdapter.toggleBlockCompletion(\n          prev,\n          blockId,\n          block.completed ?? false,\n        ),\n      );\n    },\n    [lock, displayDays, stateAdapter],\n  );\n\n  return {\n    // State\n    currentView,\n    selectedDate,\n    visibleDays,\n    timeSlots,\n\n    // Derived\n    slotHeight,\n    dayStart,\n    dayEnd,\n    todayStr,\n\n    // Actions\n    setCurrentView,\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleBlock,\n\n    // For auto-save\n    displayDays,\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { Pill, Package } from \"lucide-react\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport { TimingGroup, ProgressDashboard, TIMING_ORDER } from \"./components\";\nimport type { SupplementTrackerProps } from \"./schema\";\nimport {\n  getSupplementTrackerAdapter,\n  getSupplementStateAdapter,\n} from \"./adapters\";\nimport { useSupplementTrackerLogic } from \"./hooks\";\n\nexport const SupplementTracker = memo(function SupplementTracker({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    supplements: initialSupplements,\n    schedule: initialSchedule,\n    selectedDate: initialSelectedDate,\n    lock: rawLock = false,\n  } = element.props as SupplementTrackerProps;\n\n  const lock = rawLock ?? false;\n\n  // Get adapters\n  const trackerAdapter = useMemo(() => getSupplementTrackerAdapter(), []);\n  const stateAdapter = useMemo(() => getSupplementStateAdapter(), []);\n\n  // Use custom hook for all logic\n  const {\n    selectedDate,\n    supplements,\n    displayDoses,\n    groupedByTiming,\n    stats,\n    formattedDate,\n    handleToggle,\n    handleSkip,\n  } = useSupplementTrackerLogic(trackerAdapter, stateAdapter, {\n    initialSupplements,\n    initialSchedule,\n    initialSelectedDate,\n    lock,\n  });\n\n  // AutoSave\n  useDomainAutoSave(\"supplement\", element.key, {\n    type: \"supplement_schedule\",\n    supplements,\n    schedule: [{ date: selectedDate, doses: displayDoses }],\n  });\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xl font-bold tracking-tight flex items-center gap-3\">\n          <Pill className=\"w-5 h-5 text-violet-500\" />\n          {title || \"Supplements\"}\n        </h3>\n        <div className=\"text-xs font-mono text-white/40\">{formattedDate}</div>\n      </div>\n\n      <ProgressDashboard stats={stats} />\n\n      {/* Supplement Groups */}\n      <div className=\"flex flex-col gap-6\">\n        {supplements.length === 0 ? (\n          <EmptyState\n            icon={<Package className=\"w-10 h-10\" />}\n            message=\"No supplements configured\"\n          />\n        ) : (\n          <AnimatePresence mode=\"popLayout\">\n            {TIMING_ORDER.map((timing) => {\n              const items = groupedByTiming.get(timing);\n              if (!items || items.length === 0) return null;\n              return (\n                <TimingGroup\n                  key={timing}\n                  timing={timing}\n                  items={items}\n                  onToggle={handleToggle}\n                  onSkip={handleSkip}\n                  lock={lock}\n                  elementKey={element.key}\n                />\n              );\n            })}\n          </AnimatePresence>\n        )}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { Pill, Check, X, Utensils } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { CATEGORY_COLORS } from \"./utils\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\nexport interface SupplementCardProps {\n  supplement: SupplementItem;\n  dose?: ScheduledDose;\n  onToggle: (suppId: string, doseId?: string) => void;\n  onSkip: (suppId: string, doseId?: string) => void;\n  lock: boolean;\n  elementKey: string;\n}\n\nexport const SupplementCard = memo(function SupplementCard({\n  supplement,\n  dose,\n  onToggle,\n  onSkip,\n  lock,\n  elementKey,\n}: SupplementCardProps) {\n  const isTaken = dose?.taken ?? false;\n  const isSkipped = dose?.skipped ?? false;\n  const categoryStyle =\n    CATEGORY_COLORS[supplement.category] || CATEGORY_COLORS.other;\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={supplement.id}\n      className={cn(\n        \"group relative p-3 rounded-xl border transition-all duration-200\",\n        isTaken\n          ? \"bg-emerald-500/10 border-emerald-500/20\"\n          : isSkipped\n            ? \"bg-zinc-800/50 border-zinc-700/50 opacity-50\"\n            : \"bg-zinc-900/60 border-white/10 hover:border-white/20\",\n      )}\n    >\n      <div className=\"flex items-center gap-3\">\n        {/* Toggle Button */}\n        <button\n          onClick={() => !lock && onToggle(supplement.id, dose?.id)}\n          disabled={lock}\n          className={cn(\n            \"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 transition-all\",\n            isTaken\n              ? \"bg-emerald-500 text-black\"\n              : \"bg-white/5 border border-white/10 text-white/40 hover:text-white hover:border-white/20\",\n          )}\n        >\n          {isTaken ? <Check size={16} strokeWidth={3} /> : <Pill size={14} />}\n        </button>\n\n        {/* Info */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={cn(\n                \"text-sm font-semibold\",\n                isTaken && \"line-through opacity-70\",\n                isSkipped && \"line-through\",\n              )}\n            >\n              {supplement.name}\n            </span>\n            <span\n              className={cn(\n                \"text-[10px] font-bold px-1.5 py-0.5 rounded border\",\n                categoryStyle,\n              )}\n            >\n              {supplement.category.replace(\"_\", \" \")}\n            </span>\n          </div>\n          <div className=\"flex items-center gap-2 mt-1 text-xs text-white/50\">\n            <span className=\"font-mono\">{supplement.dosage}</span>\n            {supplement.withFood && (\n              <span className=\"flex items-center gap-1\">\n                <Utensils size={10} /> with food\n              </span>\n            )}\n            {supplement.brand && <span>({supplement.brand})</span>}\n          </div>\n        </div>\n\n        {/* Skip Button */}\n        {!isTaken && !isSkipped && !lock && (\n          <button\n            onClick={() => onSkip(supplement.id, dose?.id)}\n            className=\"w-6 h-6 rounded flex items-center justify-center text-white/20 hover:text-rose-400 hover:bg-rose-500/10 transition-colors\"\n          >\n            <X size={12} />\n          </button>\n        )}\n\n        {/* Time */}\n        {dose?.scheduledTime && (\n          <div className=\"text-[10px] font-mono text-white/30\">\n            {dose.scheduledTime}\n          </div>\n        )}\n      </div>\n\n      {supplement.notes && (\n        <div className=\"mt-2 text-xs text-white/40 pl-11\">\n          {supplement.notes}\n        </div>\n      )}\n    </SelectableItem>\n  );\n});\n","import type { LucideIcon } from \"lucide-react\";\nimport { Clock, Sun, Moon, Utensils, Dumbbell } from \"lucide-react\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\n// --- Types ---\n\nexport interface TimingConfig {\n  icon: LucideIcon;\n  label: string;\n  color: string;\n}\n\n// --- Constants ---\n\nconst DEFAULT_TIMING_CONFIG: TimingConfig = {\n  icon: Clock,\n  label: \"Anytime\",\n  color: \"text-white/60\",\n};\n\nexport const TIMING_CONFIG: Record<string, TimingConfig> = {\n  morning: { icon: Sun, label: \"Morning\", color: \"text-amber-400\" },\n  pre_meal: { icon: Utensils, label: \"Before Meal\", color: \"text-orange-400\" },\n  with_meal: { icon: Utensils, label: \"With Meal\", color: \"text-green-400\" },\n  post_meal: { icon: Utensils, label: \"After Meal\", color: \"text-teal-400\" },\n  pre_workout: { icon: Dumbbell, label: \"Pre-Workout\", color: \"text-rose-400\" },\n  post_workout: {\n    icon: Dumbbell,\n    label: \"Post-Workout\",\n    color: \"text-emerald-400\",\n  },\n  evening: { icon: Moon, label: \"Evening\", color: \"text-indigo-400\" },\n  bedtime: { icon: Moon, label: \"Bedtime\", color: \"text-violet-400\" },\n};\n\nexport const CATEGORY_COLORS: Record<string, string> = {\n  vitamin: \"bg-amber-500/20 border-amber-500/30 text-amber-300\",\n  mineral: \"bg-slate-500/20 border-slate-500/30 text-slate-300\",\n  amino_acid: \"bg-blue-500/20 border-blue-500/30 text-blue-300\",\n  herb: \"bg-green-500/20 border-green-500/30 text-green-300\",\n  probiotic: \"bg-cyan-500/20 border-cyan-500/30 text-cyan-300\",\n  omega: \"bg-sky-500/20 border-sky-500/30 text-sky-300\",\n  protein: \"bg-rose-500/20 border-rose-500/30 text-rose-300\",\n  pre_workout: \"bg-red-500/20 border-red-500/30 text-red-300\",\n  post_workout: \"bg-emerald-500/20 border-emerald-500/30 text-emerald-300\",\n  medication: \"bg-purple-500/20 border-purple-500/30 text-purple-300\",\n  other: \"bg-zinc-500/20 border-zinc-500/30 text-zinc-300\",\n};\n\nexport const TIMING_ORDER = [\n  \"morning\",\n  \"pre_meal\",\n  \"with_meal\",\n  \"post_meal\",\n  \"pre_workout\",\n  \"post_workout\",\n  \"evening\",\n  \"bedtime\",\n];\n\n// --- Helpers ---\n\nexport function getTimingConfig(timing: string): TimingConfig {\n  return TIMING_CONFIG[timing] ?? DEFAULT_TIMING_CONFIG;\n}\n\nexport function groupByTiming(\n  supplements: SupplementItem[],\n  doses: ScheduledDose[],\n): Map<string, { supplement: SupplementItem; dose?: ScheduledDose }[]> {\n  const groups = new Map<\n    string,\n    { supplement: SupplementItem; dose?: ScheduledDose }[]\n  >();\n\n  for (const supp of supplements) {\n    const timing = supp.timing || \"morning\";\n    if (!groups.has(timing)) groups.set(timing, []);\n    const dose = doses.find((d) => d.supplementId === supp.id);\n    groups.get(timing)!.push({ supplement: supp, dose });\n  }\n\n  return groups;\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { getTimingConfig } from \"./utils\";\nimport { SupplementCard } from \"./supplement-card\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\nexport interface TimingGroupProps {\n  timing: string;\n  items: { supplement: SupplementItem; dose?: ScheduledDose }[];\n  onToggle: (suppId: string, doseId?: string) => void;\n  onSkip: (suppId: string, doseId?: string) => void;\n  lock: boolean;\n  elementKey: string;\n}\n\nexport const TimingGroup = memo(function TimingGroup({\n  timing,\n  items,\n  onToggle,\n  onSkip,\n  lock,\n  elementKey,\n}: TimingGroupProps) {\n  const config = getTimingConfig(timing);\n  const Icon = config.icon;\n  const takenCount = items.filter((i) => i.dose?.taken).length;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"space-y-3\"\n    >\n      {/* Timing Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Icon size={14} className={config.color} />\n          <span className=\"text-sm font-bold text-white\">{config.label}</span>\n        </div>\n        <div className=\"text-xs font-mono text-white/40\">\n          {takenCount}/{items.length}\n        </div>\n      </div>\n\n      {/* Supplements */}\n      <div className=\"flex flex-col gap-2\">\n        {items.map(({ supplement, dose }) => (\n          <SupplementCard\n            key={supplement.id}\n            supplement={supplement}\n            dose={dose}\n            onToggle={onToggle}\n            onSkip={onSkip}\n            lock={lock}\n            elementKey={elementKey}\n          />\n        ))}\n      </div>\n    </motion.div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport interface ProgressDashboardProps {\n  stats: {\n    total: number;\n    taken: number;\n    skipped: number;\n    remaining: number;\n  };\n}\n\nexport const ProgressDashboard = memo(function ProgressDashboard({\n  stats,\n}: ProgressDashboardProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"p-4 rounded-2xl bg-zinc-900 border border-white/10\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <div className=\"text-[10px] font-bold text-white/40 uppercase tracking-widest\">\n            Today's Progress\n          </div>\n          <div className=\"text-2xl font-black text-white\">\n            {stats.taken}\n            <span className=\"text-sm font-medium text-white/40 ml-1\">\n              / {stats.total}\n            </span>\n          </div>\n        </div>\n        {stats.remaining > 0 && (\n          <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-amber-500/10 border border-amber-500/20\">\n            <AlertCircle size={14} className=\"text-amber-400\" />\n            <span className=\"text-xs font-bold text-amber-400\">\n              {stats.remaining} remaining\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"h-2 bg-white/5 rounded-full overflow-hidden\">\n        <motion.div\n          initial={{ width: 0 }}\n          animate={{ width: `${(stats.taken / stats.total) * 100}%` }}\n          className=\"h-full bg-gradient-to-r from-violet-500 to-emerald-500 rounded-full\"\n        />\n      </div>\n    </motion.div>\n  );\n});\n","/**\n * SupplementTracker Adapter - Implementation of SupplementTrackerPort\n * Pure functions for supplement tracking operations\n */\n\nimport type { SupplementTrackerPort, SupplementStatePort } from \"../ports\";\nimport type { SupplementItem, ScheduledDose } from \"../schema\";\n\n/**\n * Create a supplement tracker adapter with tracking operations\n */\nexport function createSupplementTrackerAdapter(): SupplementTrackerPort {\n  return {\n    getTodayDate(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n\n    formatDisplayDate(dateStr: string): string {\n      return new Date(dateStr).toLocaleDateString(undefined, {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n\n    groupByTiming(\n      supplements: SupplementItem[],\n      doses: ScheduledDose[],\n    ): Map<string, { supplement: SupplementItem; dose?: ScheduledDose }[]> {\n      const groups = new Map<\n        string,\n        { supplement: SupplementItem; dose?: ScheduledDose }[]\n      >();\n\n      for (const supp of supplements) {\n        const timing = supp.timing || \"morning\";\n        if (!groups.has(timing)) groups.set(timing, []);\n        const dose = doses.find((d) => d.supplementId === supp.id);\n        groups.get(timing)!.push({ supplement: supp, dose });\n      }\n\n      return groups;\n    },\n\n    calculateStats(supplements: SupplementItem[], doses: ScheduledDose[]) {\n      const total = supplements.length;\n      const taken = doses.filter((d) => d.taken).length;\n      const skipped = doses.filter((d) => d.skipped).length;\n      return { total, taken, skipped, remaining: total - taken - skipped };\n    },\n  };\n}\n\n/**\n * Create a supplement state adapter for state management\n */\nexport function createSupplementStateAdapter(): SupplementStatePort {\n  return {\n    mergeEdits(\n      doses: ScheduledDose[],\n      edits: Record<string, Partial<ScheduledDose>>,\n    ): ScheduledDose[] {\n      return doses.map((dose) => {\n        const edit = edits[dose.id];\n        return edit ? { ...dose, ...edit } : dose;\n      });\n    },\n\n    toggleDose(\n      edits: Record<string, Partial<ScheduledDose>>,\n      doseId: string,\n      currentTaken: boolean,\n    ): Record<string, Partial<ScheduledDose>> {\n      return {\n        ...edits,\n        [doseId]: {\n          taken: !currentTaken,\n          takenAt: !currentTaken ? new Date().toISOString() : null,\n          skipped: false,\n        },\n      };\n    },\n\n    skipDose(\n      edits: Record<string, Partial<ScheduledDose>>,\n      doseId: string,\n    ): Record<string, Partial<ScheduledDose>> {\n      return {\n        ...edits,\n        [doseId]: { skipped: true, taken: false },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet trackerAdapterInstance: SupplementTrackerPort | null = null;\nlet stateAdapterInstance: SupplementStatePort | null = null;\n\nexport function getSupplementTrackerAdapter(): SupplementTrackerPort {\n  if (!trackerAdapterInstance) {\n    trackerAdapterInstance = createSupplementTrackerAdapter();\n  }\n  return trackerAdapterInstance;\n}\n\nexport function getSupplementStateAdapter(): SupplementStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createSupplementStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useSupplementTrackerLogic - Custom hook for supplement tracker state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport type {\n  SupplementTrackerPort,\n  SupplementStatePort,\n  SupplementStats,\n} from \"../ports\";\nimport type {\n  SupplementItem,\n  ScheduledDose,\n  DailySupplementSchedule,\n} from \"../schema\";\n\nexport interface UseSupplementTrackerLogicOptions {\n  initialSupplements?: SupplementItem[] | null;\n  initialSchedule?: DailySupplementSchedule[] | null;\n  initialSelectedDate?: string | null;\n  lock?: boolean | null;\n}\n\nexport interface UseSupplementTrackerLogicReturn {\n  // State\n  selectedDate: string;\n  supplements: SupplementItem[];\n  displayDoses: ScheduledDose[];\n  groupedByTiming: Map<\n    string,\n    { supplement: SupplementItem; dose?: ScheduledDose }[]\n  >;\n  stats: SupplementStats;\n\n  // Derived\n  formattedDate: string;\n\n  // Actions\n  handleToggle: (suppId: string, doseId?: string) => void;\n  handleSkip: (suppId: string, doseId?: string) => void;\n}\n\nexport function useSupplementTrackerLogic(\n  trackerAdapter: SupplementTrackerPort,\n  stateAdapter: SupplementStatePort,\n  options: UseSupplementTrackerLogicOptions,\n): UseSupplementTrackerLogicReturn {\n  const {\n    initialSupplements,\n    initialSchedule,\n    initialSelectedDate,\n    lock: rawLock,\n  } = options;\n\n  const lock = rawLock ?? false;\n\n  // Local edits state\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Partial<ScheduledDose>>\n  >({});\n\n  // Selected date state\n  const [selectedDate] = useState<string>(\n    initialSelectedDate ?? trackerAdapter.getTodayDate(),\n  );\n\n  // Memoized supplements\n  const supplements = useMemo(\n    () => initialSupplements || [],\n    [initialSupplements],\n  );\n\n  // Memoized schedule\n  const schedule = useMemo(() => initialSchedule || [], [initialSchedule]);\n\n  // Get today's schedule\n  const todaySchedule = useMemo(() => {\n    return schedule.find((s) => s.date === selectedDate);\n  }, [schedule, selectedDate]);\n\n  // Merge doses with local edits\n  const displayDoses = useMemo(() => {\n    const doses = todaySchedule?.doses || [];\n    return stateAdapter.mergeEdits(doses, localEdits);\n  }, [stateAdapter, todaySchedule, localEdits]);\n\n  // Group by timing\n  const groupedByTiming = useMemo(() => {\n    return trackerAdapter.groupByTiming(supplements, displayDoses);\n  }, [trackerAdapter, supplements, displayDoses]);\n\n  // Calculate stats\n  const stats = useMemo(() => {\n    return trackerAdapter.calculateStats(supplements, displayDoses);\n  }, [trackerAdapter, supplements, displayDoses]);\n\n  // Format date for display\n  const formattedDate = useMemo(() => {\n    return trackerAdapter.formatDisplayDate(selectedDate);\n  }, [trackerAdapter, selectedDate]);\n\n  // Toggle dose taken\n  const handleToggle = useCallback(\n    (suppId: string, doseId?: string) => {\n      if (lock) return;\n      const key = doseId || `temp-${suppId}`;\n      const current = displayDoses.find((d) => d.id === key);\n      const isTaken = current?.taken ?? false;\n      setLocalEdits((prev) => stateAdapter.toggleDose(prev, key, isTaken));\n    },\n    [lock, displayDoses, stateAdapter],\n  );\n\n  // Skip dose\n  const handleSkip = useCallback(\n    (suppId: string, doseId?: string) => {\n      if (lock) return;\n      const key = doseId || `temp-${suppId}`;\n      setLocalEdits((prev) => stateAdapter.skipDose(prev, key));\n    },\n    [lock, stateAdapter],\n  );\n\n  return {\n    // State\n    selectedDate,\n    supplements,\n    displayDoses,\n    groupedByTiming,\n    stats,\n\n    // Derived\n    formattedDate,\n\n    // Actions\n    handleToggle,\n    handleSkip,\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport {\n  Calendar as CalendarIcon,\n  ChevronLeft,\n  ChevronRight,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { CalendarProps } from \"./schema\";\nimport {\n  EventCard,\n  DayCell,\n  DAYS_SHORT,\n  MONTHS,\n  CATEGORY_CONFIG,\n} from \"./components\";\nimport { getCalendarAdapter, getCalendarStateAdapter } from \"./adapters\";\nimport { useCalendarLogic } from \"./hooks\";\n\n// --- Main Component ---\n\nexport const Calendar = memo(function Calendar({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    view: initialView = \"month\",\n    selectedDate: initialSelectedDate,\n    events: initialEvents,\n    firstDayOfWeek = 1,\n    highlightToday = true,\n    lock: rawLock = false,\n  } = element.props as CalendarProps;\n\n  const lock = rawLock ?? false;\n\n  // Get adapters\n  const calendarAdapter = useMemo(() => getCalendarAdapter(), []);\n  const stateAdapter = useMemo(() => getCalendarStateAdapter(), []);\n\n  // Use custom hook for all logic\n  const {\n    currentView,\n    selectedDate,\n    displayEvents,\n    calendarDays,\n    eventsByDate,\n    selectedDayEvents,\n    currentMonth,\n    currentYear,\n    todayStr,\n    selectedDateStr,\n    setCurrentView,\n    setSelectedDate,\n    navigateMonth,\n    goToToday,\n    handleToggleEvent,\n  } = useCalendarLogic(calendarAdapter, stateAdapter, {\n    initialDate: initialSelectedDate ?? undefined,\n    initialView,\n    initialEvents,\n    firstDayOfWeek,\n    lock,\n  });\n\n  // AutoSave\n  useDomainAutoSave(\"calendar\", element.key, {\n    type: \"calendar\",\n    events: displayEvents,\n    selectedDate: selectedDateStr,\n    view: currentView,\n  });\n\n  // Ordered days for display\n  const orderedDays = useMemo(() => {\n    const days = [...DAYS_SHORT];\n    const shifted = days.splice(0, firstDayOfWeek);\n    return [...days, ...shifted];\n  }, [firstDayOfWeek]);\n\n  return (\n    <div className=\"flex flex-col gap-4 w-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <CalendarIcon className=\"w-5 h-5 text-indigo-500\" />\n          <h3 className=\"text-xl font-bold tracking-tight text-white\">\n            {title || \"Calendar\"}\n          </h3>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {/* View Toggle */}\n          <div className=\"flex rounded-lg border border-white/10 overflow-hidden\">\n            {([\"month\", \"agenda\"] as const).map((v) => (\n              <button\n                key={v}\n                onClick={() => setCurrentView(v)}\n                className={cn(\n                  \"px-3 py-1.5 text-xs font-bold uppercase tracking-wider transition-colors\",\n                  currentView === v\n                    ? \"bg-indigo-500/20 text-indigo-400\"\n                    : \"text-white/40 hover:text-white/60\",\n                )}\n              >\n                {v}\n              </button>\n            ))}\n          </div>\n\n          {/* Navigation */}\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => navigateMonth(-1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5\"\n            >\n              <ChevronLeft size={16} />\n            </button>\n            <button\n              onClick={goToToday}\n              className=\"px-3 py-1.5 rounded-lg border border-white/10 text-xs font-bold text-white/60 hover:text-white hover:bg-white/5\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateMonth(1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5\"\n            >\n              <ChevronRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Month/Year Display */}\n      <div className=\"text-lg font-bold text-white\">\n        {MONTHS[currentMonth]} {currentYear}\n      </div>\n\n      {currentView === \"month\" ? (\n        /* Month View */\n        <div className=\"bg-zinc-900/50 border border-white/10 rounded-2xl overflow-hidden\">\n          {/* Day Headers */}\n          <div className=\"grid grid-cols-7 border-b border-white/10\">\n            {orderedDays.map((day) => (\n              <div\n                key={day}\n                className=\"py-2 text-center text-xs font-bold text-white/40 uppercase tracking-wider\"\n              >\n                {day}\n              </div>\n            ))}\n          </div>\n\n          {/* Calendar Grid */}\n          <div className=\"grid grid-cols-7\">\n            {calendarDays.map((date, i) => {\n              const dateStr = date?.toISOString().split(\"T\")[0] || \"\";\n              const dayEvents = eventsByDate.get(dateStr) || [];\n              const isToday = highlightToday && dateStr === todayStr;\n              const isSelected = dateStr === selectedDateStr;\n\n              return (\n                <DayCell\n                  key={i}\n                  date={date}\n                  events={dayEvents}\n                  isToday={isToday}\n                  isSelected={isSelected}\n                  onClick={(d) => setSelectedDate(d)}\n                  onToggleEvent={handleToggleEvent}\n                  lock={lock}\n                  elementKey={element.key}\n                />\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        /* Agenda View */\n        <div className=\"flex flex-col gap-3\">\n          {selectedDayEvents.length === 0 ? (\n            <EmptyState\n              icon={<CalendarIcon className=\"w-10 h-10\" />}\n              message=\"No events\"\n            />\n          ) : (\n            <AnimatePresence mode=\"popLayout\">\n              {selectedDayEvents.map((event) => (\n                <motion.div\n                  key={event.id}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                >\n                  <EventCard\n                    event={event}\n                    onToggle={handleToggleEvent}\n                    lock={lock}\n                    elementKey={element.key}\n                  />\n                </motion.div>\n              ))}\n            </AnimatePresence>\n          )}\n        </div>\n      )}\n\n      {/* Category Legend */}\n      <div className=\"flex flex-wrap gap-3\">\n        {Object.entries(CATEGORY_CONFIG)\n          .slice(0, 6)\n          .map(([key, config]) => (\n            <div\n              key={key}\n              className=\"flex items-center gap-1.5 text-xs text-white/50\"\n            >\n              <div className={cn(\"w-2 h-2 rounded-full\", config.color)} />\n              <span className=\"capitalize\">{key}</span>\n            </div>\n          ))}\n      </div>\n\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Clock, MapPin } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport type { CalendarEvent } from \"../schema\";\nimport { getCategoryConfig, formatTime } from \"./utils\";\n\nexport const EventDot = memo(function EventDot({\n  event,\n}: {\n  event: CalendarEvent;\n}) {\n  const config = getCategoryConfig(event.category);\n  return (\n    <div\n      className={cn(\"w-1.5 h-1.5 rounded-full flex-shrink-0\", config.color)}\n      title={event.title}\n    />\n  );\n});\n\nexport const EventCard = memo(function EventCard({\n  event,\n  compact,\n  onToggle,\n  lock,\n  elementKey,\n}: {\n  event: CalendarEvent;\n  compact?: boolean;\n  onToggle: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n}) {\n  const config = getCategoryConfig(event.category);\n  const Icon = config.icon;\n\n  if (compact) {\n    return (\n      <div\n        className={cn(\n          \"text-[10px] px-1.5 py-0.5 rounded truncate cursor-pointer transition-opacity\",\n          config.color,\n          \"text-white font-medium\",\n          event.completed && \"opacity-50 line-through\",\n        )}\n        onClick={() => !lock && onToggle(event.id)}\n        title={event.title}\n      >\n        {event.title}\n      </div>\n    );\n  }\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={event.id}\n      className={cn(\n        \"p-3 rounded-xl border transition-all cursor-pointer group\",\n        event.completed\n          ? \"bg-zinc-800/50 border-zinc-700/50 opacity-60\"\n          : \"bg-zinc-900/60 border-white/10 hover:border-white/20\",\n      )}\n    >\n      <div\n        className=\"flex items-start gap-3\"\n        onClick={() => !lock && onToggle(event.id)}\n      >\n        <div\n          className={cn(\"w-1 h-full min-h-[40px] rounded-full\", config.color)}\n        />\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <Icon size={12} className=\"text-white/40\" />\n            <span\n              className={cn(\n                \"text-sm font-semibold text-white truncate\",\n                event.completed && \"line-through\",\n              )}\n            >\n              {event.title}\n            </span>\n            {event.priority === \"high\" && (\n              <span className=\"w-1.5 h-1.5 rounded-full bg-rose-500\" />\n            )}\n          </div>\n          <div className=\"flex items-center gap-3 mt-1 text-xs text-white/40\">\n            {!event.allDay && (\n              <span className=\"flex items-center gap-1\">\n                <Clock size={10} />\n                {formatTime(event.start)}\n                {event.end && ` - ${formatTime(event.end)}`}\n              </span>\n            )}\n            {event.allDay && <span>All day</span>}\n            {event.location && (\n              <span className=\"flex items-center gap-1 truncate\">\n                <MapPin size={10} />\n                {event.location}\n              </span>\n            )}\n          </div>\n          {event.description && (\n            <div className=\"text-xs text-white/30 mt-1 line-clamp-2\">\n              {event.description}\n            </div>\n          )}\n        </div>\n      </div>\n    </SelectableItem>\n  );\n});\n","import {\n  Calendar as CalendarIcon,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Briefcase,\n  Heart,\n  Users,\n  Plane,\n  Bell,\n  MoreHorizontal,\n} from \"lucide-react\";\n\n// --- Types ---\n\nexport type CategoryConfig = { icon: typeof CalendarIcon; color: string };\n\n// --- Constants ---\n\nexport const DAYS_SHORT = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\nexport const MONTHS = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nexport const CATEGORY_CONFIG: Record<string, CategoryConfig> = {\n  workout: { icon: Dumbbell, color: \"bg-emerald-500\" },\n  meal: { icon: Utensils, color: \"bg-amber-500\" },\n  supplement: { icon: Pill, color: \"bg-violet-500\" },\n  work: { icon: Briefcase, color: \"bg-blue-500\" },\n  personal: { icon: Heart, color: \"bg-pink-500\" },\n  health: { icon: Heart, color: \"bg-red-500\" },\n  social: { icon: Users, color: \"bg-cyan-500\" },\n  travel: { icon: Plane, color: \"bg-indigo-500\" },\n  reminder: { icon: Bell, color: \"bg-orange-500\" },\n  other: { icon: MoreHorizontal, color: \"bg-zinc-500\" },\n};\n\nexport const DEFAULT_CATEGORY_CONFIG: CategoryConfig = {\n  icon: MoreHorizontal,\n  color: \"bg-zinc-500\",\n};\n\n// --- Helpers ---\n\nexport function getCategoryConfig(\n  category: string | null | undefined,\n): CategoryConfig {\n  return CATEGORY_CONFIG[category ?? \"other\"] ?? DEFAULT_CATEGORY_CONFIG;\n}\n\nexport function getDaysInMonth(year: number, month: number): Date[] {\n  const days: Date[] = [];\n  const date = new Date(year, month, 1);\n  while (date.getMonth() === month) {\n    days.push(new Date(date));\n    date.setDate(date.getDate() + 1);\n  }\n  return days;\n}\n\nexport function getCalendarDays(\n  year: number,\n  month: number,\n  firstDayOfWeek: number,\n): (Date | null)[] {\n  const days = getDaysInMonth(year, month);\n  const firstDate = days[0];\n  if (!firstDate) return [];\n  const firstDay = firstDate.getDay();\n  const leadingDays = (firstDay - firstDayOfWeek + 7) % 7;\n\n  const calendar: (Date | null)[] = [];\n  for (let i = 0; i < leadingDays; i++) {\n    calendar.push(null);\n  }\n  calendar.push(...days);\n\n  while (calendar.length % 7 !== 0) {\n    calendar.push(null);\n  }\n\n  return calendar;\n}\n\nexport function isSameDay(d1: Date, d2: Date): boolean {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n}\n\nexport function formatTime(isoString: string): string {\n  const date = new Date(isoString);\n  return date.toLocaleTimeString(undefined, {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  });\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { CalendarEvent } from \"../schema\";\nimport { EventCard } from \"./event-card\";\n\nexport const DayCell = memo(function DayCell({\n  date,\n  events,\n  isToday,\n  isSelected,\n  onClick,\n  onToggleEvent,\n  lock,\n  elementKey,\n}: {\n  date: Date | null;\n  events: CalendarEvent[];\n  isToday: boolean;\n  isSelected: boolean;\n  onClick: (date: Date) => void;\n  onToggleEvent: (id: string) => void;\n  lock: boolean;\n  elementKey: string;\n}) {\n  if (!date) {\n    return <div className=\"min-h-[100px] bg-zinc-950/30\" />;\n  }\n\n  const maxVisibleEvents = 3;\n  const visibleEvents = events.slice(0, maxVisibleEvents);\n  const hiddenCount = events.length - maxVisibleEvents;\n\n  return (\n    <div\n      className={cn(\n        \"min-h-[100px] p-1.5 border-b border-r border-white/5 cursor-pointer transition-colors\",\n        isSelected && \"bg-indigo-500/10\",\n        isToday && \"bg-emerald-500/5\",\n      )}\n      onClick={() => onClick(date)}\n    >\n      <div\n        className={cn(\n          \"w-7 h-7 rounded-full flex items-center justify-center text-sm font-medium mb-1\",\n          isToday && \"bg-emerald-500 text-black font-bold\",\n          isSelected && !isToday && \"bg-indigo-500/30 text-indigo-300\",\n          !isToday && !isSelected && \"text-white/60 hover:bg-white/5\",\n        )}\n      >\n        {date.getDate()}\n      </div>\n      <div className=\"flex flex-col gap-0.5\">\n        {visibleEvents.map((event) => (\n          <EventCard\n            key={event.id}\n            event={event}\n            compact\n            onToggle={onToggleEvent}\n            lock={lock}\n            elementKey={elementKey}\n          />\n        ))}\n        {hiddenCount > 0 && (\n          <div className=\"text-[10px] text-white/30 pl-1.5\">\n            +{hiddenCount} more\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n","/**\n * Calendar Adapter - Implementation of CalendarPort\n * Pure functions for calendar calculations\n */\n\nimport type { CalendarPort, CalendarStatePort } from \"../ports\";\nimport type { CalendarEvent } from \"../schema\";\n\n/**\n * Create a calendar adapter with date operations\n */\nexport function createCalendarAdapter(): CalendarPort {\n  return {\n    getDaysInMonth(year: number, month: number): Date[] {\n      const days: Date[] = [];\n      const date = new Date(year, month, 1);\n      while (date.getMonth() === month) {\n        days.push(new Date(date));\n        date.setDate(date.getDate() + 1);\n      }\n      return days;\n    },\n\n    getCalendarDays(\n      year: number,\n      month: number,\n      firstDayOfWeek: number,\n    ): (Date | null)[] {\n      const days = this.getDaysInMonth(year, month);\n      const firstDate = days[0];\n      if (!firstDate) return [];\n\n      const firstDay = firstDate.getDay();\n      const leadingDays = (firstDay - firstDayOfWeek + 7) % 7;\n\n      const calendar: (Date | null)[] = [];\n      for (let i = 0; i < leadingDays; i++) {\n        calendar.push(null);\n      }\n      calendar.push(...days);\n\n      while (calendar.length % 7 !== 0) {\n        calendar.push(null);\n      }\n\n      return calendar;\n    },\n\n    isSameDay(d1: Date, d2: Date): boolean {\n      return (\n        d1.getFullYear() === d2.getFullYear() &&\n        d1.getMonth() === d2.getMonth() &&\n        d1.getDate() === d2.getDate()\n      );\n    },\n\n    formatTime(isoString: string): string {\n      const date = new Date(isoString);\n      return date.toLocaleTimeString(undefined, {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    },\n\n    groupEventsByDate(events: CalendarEvent[]): Map<string, CalendarEvent[]> {\n      const map = new Map<string, CalendarEvent[]>();\n      for (const event of events) {\n        const dateKey = event.start.split(\"T\")[0]!;\n        if (!map.has(dateKey)) map.set(dateKey, []);\n        map.get(dateKey)!.push(event);\n      }\n      return map;\n    },\n\n    toDateString(date: Date): string {\n      return date.toISOString().split(\"T\")[0]!;\n    },\n  };\n}\n\n/**\n * Create a calendar state adapter for state management\n */\nexport function createCalendarStateAdapter(): CalendarStatePort {\n  return {\n    navigateMonth(current: Date, direction: -1 | 1): Date {\n      const next = new Date(current);\n      next.setMonth(next.getMonth() + direction);\n      return next;\n    },\n\n    mergeEdits(\n      events: CalendarEvent[],\n      edits: Record<string, Partial<CalendarEvent>>,\n    ): CalendarEvent[] {\n      return events.map((event) => {\n        const edit = edits[event.id];\n        return edit ? { ...event, ...edit } : event;\n      });\n    },\n\n    toggleEventCompletion(\n      edits: Record<string, Partial<CalendarEvent>>,\n      eventId: string,\n      currentCompleted: boolean,\n    ): Record<string, Partial<CalendarEvent>> {\n      return {\n        ...edits,\n        [eventId]: { completed: !currentCompleted },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet calendarAdapterInstance: CalendarPort | null = null;\nlet stateAdapterInstance: CalendarStatePort | null = null;\n\nexport function getCalendarAdapter(): CalendarPort {\n  if (!calendarAdapterInstance) {\n    calendarAdapterInstance = createCalendarAdapter();\n  }\n  return calendarAdapterInstance;\n}\n\nexport function getCalendarStateAdapter(): CalendarStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createCalendarStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useCalendarLogic - Custom hook for calendar state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport type { CalendarPort, CalendarStatePort } from \"../ports\";\nimport type { CalendarEvent, CalendarView } from \"../schema\";\n\nexport interface UseCalendarLogicOptions {\n  initialDate?: string;\n  initialView?: CalendarView;\n  initialEvents?: CalendarEvent[];\n  firstDayOfWeek?: number;\n  lock?: boolean;\n}\n\nexport interface UseCalendarLogicReturn {\n  // State\n  currentView: CalendarView;\n  selectedDate: Date;\n  displayEvents: CalendarEvent[];\n  calendarDays: (Date | null)[];\n  eventsByDate: Map<string, CalendarEvent[]>;\n  selectedDayEvents: CalendarEvent[];\n\n  // Derived\n  currentMonth: number;\n  currentYear: number;\n  todayStr: string;\n  selectedDateStr: string;\n\n  // Actions\n  setCurrentView: (view: CalendarView) => void;\n  setSelectedDate: (date: Date) => void;\n  navigateMonth: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleEvent: (eventId: string) => void;\n}\n\nexport function useCalendarLogic(\n  calendarAdapter: CalendarPort,\n  stateAdapter: CalendarStatePort,\n  options: UseCalendarLogicOptions,\n): UseCalendarLogicReturn {\n  const {\n    initialDate,\n    initialView = \"month\",\n    initialEvents = [],\n    firstDayOfWeek = 1,\n    lock = false,\n  } = options;\n\n  // Local edits state\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Partial<CalendarEvent>>\n  >({});\n\n  // View state\n  const [currentView, setCurrentView] = useState<CalendarView>(initialView);\n\n  // Selected date state\n  const [selectedDate, setSelectedDate] = useState(() => {\n    if (initialDate) return new Date(initialDate);\n    return new Date();\n  });\n\n  // Derived: merge events with local edits\n  const displayEvents = useMemo(\n    () => stateAdapter.mergeEdits(initialEvents, localEdits),\n    [stateAdapter, initialEvents, localEdits],\n  );\n\n  // Derived: current month/year\n  const currentMonth = selectedDate.getMonth();\n  const currentYear = selectedDate.getFullYear();\n\n  // Derived: calendar grid\n  const calendarDays = useMemo(\n    () =>\n      calendarAdapter.getCalendarDays(\n        currentYear,\n        currentMonth,\n        firstDayOfWeek,\n      ),\n    [calendarAdapter, currentYear, currentMonth, firstDayOfWeek],\n  );\n\n  // Derived: events grouped by date\n  const eventsByDate = useMemo(\n    () => calendarAdapter.groupEventsByDate(displayEvents),\n    [calendarAdapter, displayEvents],\n  );\n\n  // Derived: date strings\n  const todayStr = calendarAdapter.toDateString(new Date());\n  const selectedDateStr = calendarAdapter.toDateString(selectedDate);\n\n  // Derived: events for selected day\n  const selectedDayEvents = useMemo(\n    () => eventsByDate.get(selectedDateStr) || [],\n    [eventsByDate, selectedDateStr],\n  );\n\n  // Actions\n  const navigateMonth = useCallback(\n    (direction: -1 | 1) => {\n      setSelectedDate((prev) => stateAdapter.navigateMonth(prev, direction));\n    },\n    [stateAdapter],\n  );\n\n  const goToToday = useCallback(() => {\n    setSelectedDate(new Date());\n  }, []);\n\n  const handleToggleEvent = useCallback(\n    (eventId: string) => {\n      if (lock) return;\n\n      const event = displayEvents.find((e) => e.id === eventId);\n      if (!event) return;\n\n      setLocalEdits((prev) =>\n        stateAdapter.toggleEventCompletion(\n          prev,\n          eventId,\n          event.completed ?? false,\n        ),\n      );\n    },\n    [lock, displayEvents, stateAdapter],\n  );\n\n  return {\n    // State\n    currentView,\n    selectedDate,\n    displayEvents,\n    calendarDays,\n    eventsByDate,\n    selectedDayEvents,\n\n    // Derived\n    currentMonth,\n    currentYear,\n    todayStr,\n    selectedDateStr,\n\n    // Actions\n    setCurrentView,\n    setSelectedDate,\n    navigateMonth,\n    goToToday,\n    handleToggleEvent,\n  };\n}\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport { type ComponentRenderProps, useDomainAutoSave } from \"@onegenui/react\";\nimport { BookOpen, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { EmptyState } from \"../../utils/shared-components\";\nimport type { DiaryProps } from \"./schema\";\nimport { DiaryEntryCard } from \"./components\";\nimport { getDiaryAdapter, getDiaryStateAdapter } from \"./adapters\";\nimport { useDiaryLogic } from \"./hooks\";\n\nexport const Diary = memo(function Diary({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    entries: initialEntries,\n    selectedDate: initialSelectedDate,\n    view = \"single\",\n    showMoodTracker = true,\n    showEnergyTracker = true,\n    showGratitude = true,\n    showLinkedEntities = true,\n    lock: rawLock = false,\n  } = element.props as DiaryProps;\n\n  const lock = rawLock ?? false;\n\n  // Get adapters\n  const diaryAdapter = useMemo(() => getDiaryAdapter(), []);\n  const stateAdapter = useMemo(() => getDiaryStateAdapter(), []);\n\n  // Use custom hook for all logic\n  const {\n    selectedDate,\n    displayEntries,\n    selectedEntry,\n    sortedEntries,\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleGoal,\n  } = useDiaryLogic(diaryAdapter, stateAdapter, {\n    initialEntries,\n    initialSelectedDate,\n    view,\n    lock,\n  });\n\n  // AutoSave\n  useDomainAutoSave(\"diary\", element.key, {\n    type: \"diary\",\n    entries: displayEntries,\n    selectedDate,\n  });\n\n  return (\n    <div className=\"flex flex-col gap-6 w-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xl font-bold tracking-tight flex items-center gap-3\">\n          <BookOpen className=\"w-5 h-5 text-indigo-500\" />\n          {title || \"Diary\"}\n        </h3>\n\n        {view === \"single\" && (\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => navigateDate(-1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5\"\n            >\n              <ChevronLeft size={16} />\n            </button>\n            <button\n              onClick={goToToday}\n              className=\"px-3 py-1.5 rounded-lg border border-white/10 text-xs font-bold text-white/60 hover:text-white hover:bg-white/5\"\n            >\n              Today\n            </button>\n            <button\n              onClick={() => navigateDate(1)}\n              className=\"w-8 h-8 rounded-lg border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/5\"\n            >\n              <ChevronRight size={16} />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      <AnimatePresence mode=\"wait\">\n        {view === \"single\" ? (\n          selectedEntry ? (\n            <motion.div\n              key={selectedEntry.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -10 }}\n            >\n              <DiaryEntryCard\n                entry={selectedEntry}\n                onToggleGoal={handleToggleGoal}\n                lock={lock}\n                elementKey={element.key}\n                showMoodTracker={showMoodTracker}\n                showEnergyTracker={showEnergyTracker}\n                showGratitude={showGratitude}\n                showLinkedEntities={showLinkedEntities}\n              />\n            </motion.div>\n          ) : (\n            <EmptyState\n              icon={<BookOpen className=\"w-10 h-10\" />}\n              message=\"No entry for this day\"\n            />\n          )\n        ) : (\n          <div className=\"flex flex-col gap-3\">\n            {sortedEntries.length === 0 ? (\n              <EmptyState\n                icon={<BookOpen className=\"w-10 h-10\" />}\n                message=\"No diary entries\"\n              />\n            ) : (\n              sortedEntries.map((entry) => (\n                <motion.div\n                  key={entry.id}\n                  initial={{ opacity: 0, y: 10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                >\n                  <DiaryEntryCard\n                    entry={entry}\n                    onToggleGoal={handleToggleGoal}\n                    lock={lock}\n                    elementKey={element.key}\n                    compact={view === \"timeline\"}\n                    showMoodTracker={showMoodTracker}\n                    showEnergyTracker={showEnergyTracker}\n                    showGratitude={showGratitude}\n                    showLinkedEntities={showLinkedEntities}\n                  />\n                </motion.div>\n              ))\n            )}\n          </div>\n        )}\n      </AnimatePresence>\n\n      {children}\n    </div>\n  );\n});\n","import { memo } from \"react\";\nimport { SelectableItem } from \"@onegenui/react\";\nimport { Heart, Star, Target, Link, Tag } from \"lucide-react\";\nimport type { DiaryEntry } from \"../schema\";\nimport { PerforatedDivider } from \"../../../utils/shared-components\";\nimport {\n  MoodBadge,\n  EnergyBar,\n  SleepInfo,\n  GoalItem,\n  LinkedEntityBadge,\n} from \"./sub-components\";\nimport { formatDate, formatShortDate } from \"./utils\";\n\nexport const DiaryEntryCard = memo(function DiaryEntryCard({\n  entry,\n  onToggleGoal,\n  lock,\n  elementKey,\n  compact,\n  showMoodTracker,\n  showEnergyTracker,\n  showGratitude,\n  showLinkedEntities,\n}: {\n  entry: DiaryEntry;\n  onToggleGoal: (entryId: string, goalId: string) => void;\n  lock: boolean;\n  elementKey: string;\n  compact?: boolean;\n  showMoodTracker: boolean;\n  showEnergyTracker: boolean;\n  showGratitude: boolean;\n  showLinkedEntities: boolean;\n}) {\n  if (compact) {\n    return (\n      <SelectableItem\n        elementKey={elementKey}\n        itemId={entry.id}\n        className=\"p-3 rounded-xl border border-white/10 bg-zinc-900/60 hover:border-white/20 transition-all cursor-pointer\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"text-sm font-mono text-white/40\">\n              {formatShortDate(entry.date)}\n            </div>\n            {entry.mood && <MoodBadge mood={entry.mood} />}\n          </div>\n          {entry.title && (\n            <div className=\"text-sm font-medium text-white truncate\">\n              {entry.title}\n            </div>\n          )}\n        </div>\n      </SelectableItem>\n    );\n  }\n\n  return (\n    <SelectableItem\n      elementKey={elementKey}\n      itemId={entry.id}\n      className=\"p-5 rounded-2xl border border-white/10 bg-zinc-900/60\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between mb-4\">\n        <div>\n          <div className=\"text-xs font-mono text-white/40 mb-1\">\n            {formatDate(entry.date)}\n          </div>\n          {entry.title && (\n            <h4 className=\"text-lg font-bold text-white\">{entry.title}</h4>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {entry.mood && showMoodTracker && <MoodBadge mood={entry.mood} />}\n          {entry.sleep && <SleepInfo sleep={entry.sleep} />}\n        </div>\n      </div>\n\n      {/* Energy */}\n      {entry.energy && showEnergyTracker && (\n        <div className=\"mb-4\">\n          <EnergyBar level={entry.energy} />\n        </div>\n      )}\n\n      {/* Content */}\n      {entry.content && (\n        <div className=\"prose prose-invert prose-sm max-w-none mb-4 text-white/80\">\n          {entry.content}\n        </div>\n      )}\n\n      <PerforatedDivider className=\"my-4\" />\n\n      {/* Gratitude */}\n      {showGratitude && entry.gratitude && entry.gratitude.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Heart size={14} className=\"text-rose-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Gratitude\n            </span>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {entry.gratitude.map((item, i) => (\n              <div\n                key={i}\n                className=\"px-2 py-1 rounded-lg bg-rose-500/10 border border-rose-500/20 text-xs text-rose-300\"\n              >\n                {item}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Highlights */}\n      {entry.highlights && entry.highlights.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Star size={14} className=\"text-amber-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Highlights\n            </span>\n          </div>\n          <ul className=\"space-y-1\">\n            {entry.highlights.map((item, i) => (\n              <li\n                key={i}\n                className=\"text-sm text-white/70 flex items-start gap-2\"\n              >\n                <span className=\"text-amber-400\">*</span>\n                {item}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Goals */}\n      {entry.goals && entry.goals.length > 0 && (\n        <div className=\"mb-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Target size={14} className=\"text-emerald-400\" />\n            <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n              Daily Goals\n            </span>\n          </div>\n          <div className=\"space-y-1\">\n            {entry.goals.map((goal) => (\n              <GoalItem\n                key={goal.id}\n                goal={goal}\n                onToggle={(goalId) => onToggleGoal(entry.id, goalId)}\n                lock={lock}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Linked Entities */}\n      {showLinkedEntities &&\n        entry.linkedEntities &&\n        entry.linkedEntities.length > 0 && (\n          <div className=\"mb-4\">\n            <div className=\"flex items-center gap-2 mb-2\">\n              <Link size={14} className=\"text-indigo-400\" />\n              <span className=\"text-xs font-bold text-white/50 uppercase tracking-wider\">\n                Related\n              </span>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {entry.linkedEntities.map((entity, i) => (\n                <LinkedEntityBadge key={i} entity={entity} />\n              ))}\n            </div>\n          </div>\n        )}\n\n      {/* Tags */}\n      {entry.tags && entry.tags.length > 0 && (\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <Tag size={12} className=\"text-white/30\" />\n          {entry.tags.map((tag, i) => (\n            <span key={i} className=\"text-xs text-white/40\">\n              #{tag}\n            </span>\n          ))}\n        </div>\n      )}\n    </SelectableItem>\n  );\n});\n","import { memo } from \"react\";\nimport { Zap, Moon, Check, Link } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { getMoodConfig, ENTITY_ICONS } from \"./utils\";\n\nexport const MoodBadge = memo(function MoodBadge({ mood }: { mood: string }) {\n  const config = getMoodConfig(mood);\n  const Icon = config.icon;\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-1.5 px-2 py-1 rounded-lg\",\n        config.color,\n      )}\n    >\n      <Icon size={14} />\n      <span className=\"text-xs font-bold\">{config.label}</span>\n    </div>\n  );\n});\n\nexport const EnergyBar = memo(function EnergyBar({ level }: { level: number }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Zap size={14} className=\"text-amber-400\" />\n      <div className=\"flex-1 h-1.5 bg-white/10 rounded-full overflow-hidden\">\n        <div\n          className=\"h-full bg-gradient-to-r from-amber-500 to-emerald-500 rounded-full transition-all\"\n          style={{ width: `${level * 10}%` }}\n        />\n      </div>\n      <span className=\"text-xs font-mono text-white/40\">{level}/10</span>\n    </div>\n  );\n});\n\nexport const SleepInfo = memo(function SleepInfo({\n  sleep,\n}: {\n  sleep: { hours?: number | null; quality?: string | null };\n}) {\n  return (\n    <div className=\"flex items-center gap-2 text-xs text-white/50\">\n      <Moon size={12} className=\"text-indigo-400\" />\n      {sleep.hours && <span>{sleep.hours}h</span>}\n      {sleep.quality && (\n        <span\n          className={cn(\n            \"px-1.5 py-0.5 rounded text-[10px] font-bold\",\n            sleep.quality === \"great\" && \"bg-emerald-500/20 text-emerald-400\",\n            sleep.quality === \"good\" && \"bg-green-500/20 text-green-400\",\n            sleep.quality === \"fair\" && \"bg-amber-500/20 text-amber-400\",\n            sleep.quality === \"poor\" && \"bg-rose-500/20 text-rose-400\",\n          )}\n        >\n          {sleep.quality}\n        </span>\n      )}\n    </div>\n  );\n});\n\nexport const GoalItem = memo(function GoalItem({\n  goal,\n  onToggle,\n  lock,\n}: {\n  goal: { id: string; text: string; completed?: boolean | null };\n  onToggle: (id: string) => void;\n  lock: boolean;\n}) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-2 p-2 rounded-lg transition-colors cursor-pointer\",\n        goal.completed ? \"bg-emerald-500/10\" : \"bg-white/5 hover:bg-white/10\",\n      )}\n      onClick={() => !lock && onToggle(goal.id)}\n    >\n      <div\n        className={cn(\n          \"w-4 h-4 rounded border flex items-center justify-center flex-shrink-0\",\n          goal.completed\n            ? \"bg-emerald-500 border-emerald-500\"\n            : \"border-white/20\",\n        )}\n      >\n        {goal.completed && <Check size={10} className=\"text-black\" />}\n      </div>\n      <span\n        className={cn(\n          \"text-sm\",\n          goal.completed && \"line-through text-white/40\",\n        )}\n      >\n        {goal.text}\n      </span>\n    </div>\n  );\n});\n\nexport const LinkedEntityBadge = memo(function LinkedEntityBadge({\n  entity,\n}: {\n  entity: { type: string; id: string; label?: string | null };\n}) {\n  const Icon = ENTITY_ICONS[entity.type] || Link;\n  return (\n    <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-white/5 border border-white/10\">\n      <Icon size={12} className=\"text-white/40\" />\n      <span className=\"text-xs text-white/60\">\n        {entity.label || entity.type}\n      </span>\n    </div>\n  );\n});\n","import {\n  Smile,\n  Meh,\n  Frown,\n  Dumbbell,\n  Utensils,\n  Pill,\n  Calendar,\n  Link,\n} from \"lucide-react\";\n\nexport type MoodConfig = { icon: typeof Smile; color: string; label: string };\n\nexport const DEFAULT_MOOD_CONFIG: MoodConfig = {\n  icon: Meh,\n  color: \"text-zinc-400 bg-zinc-500/20\",\n  label: \"Unknown\",\n};\n\nexport const MOOD_CONFIG: Record<string, MoodConfig> = {\n  great: {\n    icon: Smile,\n    color: \"text-emerald-400 bg-emerald-500/20\",\n    label: \"Great\",\n  },\n  good: { icon: Smile, color: \"text-green-400 bg-green-500/20\", label: \"Good\" },\n  neutral: {\n    icon: Meh,\n    color: \"text-amber-400 bg-amber-500/20\",\n    label: \"Neutral\",\n  },\n  bad: { icon: Frown, color: \"text-orange-400 bg-orange-500/20\", label: \"Bad\" },\n  terrible: {\n    icon: Frown,\n    color: \"text-rose-400 bg-rose-500/20\",\n    label: \"Terrible\",\n  },\n};\n\nexport function getMoodConfig(mood: string | null | undefined): MoodConfig {\n  return MOOD_CONFIG[mood ?? \"neutral\"] ?? DEFAULT_MOOD_CONFIG;\n}\n\nexport const ENTITY_ICONS: Record<string, typeof Dumbbell> = {\n  workout: Dumbbell,\n  meal: Utensils,\n  supplement: Pill,\n  calendar_event: Calendar,\n  routine: Calendar,\n};\n\nexport function formatDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, {\n    weekday: \"long\",\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n}\n\nexport function formatShortDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, {\n    month: \"short\",\n    day: \"numeric\",\n  });\n}\n","/**\n * Diary Adapter - Implementation of DiaryPort\n * Pure functions for diary operations\n */\n\nimport type { DiaryPort, DiaryStatePort } from \"../ports\";\nimport type { DiaryEntry } from \"../schema\";\n\n/**\n * Create a diary adapter with date operations\n */\nexport function createDiaryAdapter(): DiaryPort {\n  return {\n    getTodayString(): string {\n      return new Date().toISOString().split(\"T\")[0]!;\n    },\n\n    parseDate(dateStr: string): Date {\n      return new Date(dateStr);\n    },\n\n    navigateDate(current: string, direction: -1 | 1): string {\n      const date = new Date(current);\n      date.setDate(date.getDate() + direction);\n      return date.toISOString().split(\"T\")[0]!;\n    },\n\n    sortEntriesByDate(entries: DiaryEntry[]): DiaryEntry[] {\n      return [...entries].sort(\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),\n      );\n    },\n\n    findEntryByDate(\n      entries: DiaryEntry[],\n      date: string,\n    ): DiaryEntry | undefined {\n      return entries.find((e) => e.date === date);\n    },\n\n    formatDisplayDate(dateStr: string): string {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString(undefined, {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      });\n    },\n  };\n}\n\n/**\n * Create a diary state adapter for state management\n */\nexport function createDiaryStateAdapter(): DiaryStatePort {\n  return {\n    mergeEdits(\n      entries: DiaryEntry[],\n      edits: Record<string, Partial<DiaryEntry>>,\n    ): DiaryEntry[] {\n      return entries.map((entry) => {\n        const edit = edits[entry.id];\n        return edit ? { ...entry, ...edit } : entry;\n      });\n    },\n\n    toggleGoal(\n      edits: Record<string, Partial<DiaryEntry>>,\n      entry: DiaryEntry,\n      goalId: string,\n    ): Record<string, Partial<DiaryEntry>> {\n      if (!entry.goals) return edits;\n\n      const updatedGoals = entry.goals.map((g) =>\n        g.id === goalId ? { ...g, completed: !g.completed } : g,\n      );\n\n      return {\n        ...edits,\n        [entry.id]: { goals: updatedGoals },\n      };\n    },\n  };\n}\n\n// Singleton instances for convenience\nlet diaryAdapterInstance: DiaryPort | null = null;\nlet stateAdapterInstance: DiaryStatePort | null = null;\n\nexport function getDiaryAdapter(): DiaryPort {\n  if (!diaryAdapterInstance) {\n    diaryAdapterInstance = createDiaryAdapter();\n  }\n  return diaryAdapterInstance;\n}\n\nexport function getDiaryStateAdapter(): DiaryStatePort {\n  if (!stateAdapterInstance) {\n    stateAdapterInstance = createDiaryStateAdapter();\n  }\n  return stateAdapterInstance;\n}\n","/**\n * useDiaryLogic - Custom hook for diary state management\n * Separates business logic from presentation\n */\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport type { DiaryPort, DiaryStatePort } from \"../ports\";\nimport type { DiaryEntry, DiaryProps } from \"../schema\";\n\nexport interface UseDiaryLogicOptions {\n  initialEntries?: DiaryEntry[];\n  initialSelectedDate?: string | null;\n  view?: DiaryProps[\"view\"];\n  lock?: boolean;\n}\n\nexport interface UseDiaryLogicReturn {\n  // State\n  selectedDate: string;\n  displayEntries: DiaryEntry[];\n  selectedEntry: DiaryEntry | undefined;\n  sortedEntries: DiaryEntry[];\n\n  // Actions\n  setSelectedDate: (date: string) => void;\n  navigateDate: (direction: -1 | 1) => void;\n  goToToday: () => void;\n  handleToggleGoal: (entryId: string, goalId: string) => void;\n}\n\nexport function useDiaryLogic(\n  diaryAdapter: DiaryPort,\n  stateAdapter: DiaryStatePort,\n  options: UseDiaryLogicOptions,\n): UseDiaryLogicReturn {\n  const { initialEntries = [], initialSelectedDate, lock = false } = options;\n\n  // Local edits state\n  const [localEdits, setLocalEdits] = useState<\n    Record<string, Partial<DiaryEntry>>\n  >({});\n\n  // Selected date state\n  const [selectedDate, setSelectedDate] = useState<string>(\n    initialSelectedDate ?? diaryAdapter.getTodayString(),\n  );\n\n  // Derived: merge entries with local edits\n  const displayEntries = useMemo(\n    () => stateAdapter.mergeEdits(initialEntries, localEdits),\n    [stateAdapter, initialEntries, localEdits],\n  );\n\n  // Derived: find selected entry\n  const selectedEntry = useMemo(\n    () => diaryAdapter.findEntryByDate(displayEntries, selectedDate),\n    [diaryAdapter, displayEntries, selectedDate],\n  );\n\n  // Derived: sorted entries for timeline view\n  const sortedEntries = useMemo(\n    () => diaryAdapter.sortEntriesByDate(displayEntries),\n    [diaryAdapter, displayEntries],\n  );\n\n  // Actions\n  const navigateDate = useCallback(\n    (direction: -1 | 1) => {\n      setSelectedDate((prev) => diaryAdapter.navigateDate(prev, direction));\n    },\n    [diaryAdapter],\n  );\n\n  const goToToday = useCallback(() => {\n    setSelectedDate(diaryAdapter.getTodayString());\n  }, [diaryAdapter]);\n\n  const handleToggleGoal = useCallback(\n    (entryId: string, goalId: string) => {\n      if (lock) return;\n\n      const entry = displayEntries.find((e) => e.id === entryId);\n      if (!entry || !entry.goals) return;\n\n      setLocalEdits((prev) => stateAdapter.toggleGoal(prev, entry, goalId));\n    },\n    [lock, displayEntries, stateAdapter],\n  );\n\n  return {\n    // State\n    selectedDate,\n    displayEntries,\n    selectedEntry,\n    sortedEntries,\n\n    // Actions\n    setSelectedDate,\n    navigateDate,\n    goToToday,\n    handleToggleGoal,\n  };\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { FileText } from \"lucide-react\";\nimport {\n  type Source,\n  type ReportSection,\n  type ResearchReportProps,\n  renderContentWithCitations,\n  SourceCard,\n  ReportSectionComponent,\n} from \"./components\";\n\n// Re-export types for convenience\nexport type { Source, ReportSection, ResearchReportProps };\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const ResearchReport = memo(function ResearchReport({\n  element,\n  children,\n  renderText,\n}: ComponentRenderProps) {\n  const render =\n    renderText ?? ((content: string | null | undefined) => content);\n  const props = element.props as ResearchReportProps;\n  const {\n    title,\n    summary,\n    sections = [],\n    sources = [],\n    relatedQueries = [],\n    searchQuery,\n    totalResults,\n  } = props;\n\n  if (!title && !summary && sections.length === 0) {\n    return (\n      <div className=\"p-8 text-center text-zinc-500\">\n        <FileText className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n        <p>No report content</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Report Card */}\n      <div className=\"rounded-2xl bg-zinc-900/60 backdrop-blur-xl border border-white/10 overflow-hidden\">\n        {/* Header */}\n        <div className=\"p-6 border-b border-white/5\">\n          <h2 className=\"text-2xl font-bold text-white mb-4\">{title}</h2>\n\n          {/* Summary with citations */}\n          <div className=\"text-zinc-300 leading-relaxed text-[15px]\">\n            {renderContentWithCitations(summary, sources, render)}\n          </div>\n        </div>\n\n        {/* Sections */}\n        <div className=\"p-6 space-y-8\">\n          {sections.map((section, i) => (\n            <ReportSectionComponent\n              key={i}\n              section={section}\n              sources={sources}\n              renderText={render}\n            />\n          ))}\n        </div>\n\n        {/* Related Queries */}\n        {relatedQueries.length > 0 && (\n          <div className=\"px-6 pb-6\">\n            <div className=\"flex flex-wrap gap-2\">\n              {relatedQueries.map((query, i) => (\n                <button\n                  key={i}\n                  className=\"px-3 py-1.5 text-sm text-zinc-400 bg-zinc-800/50 rounded-full border border-white/5 hover:border-sky-500/30 hover:text-sky-300 transition-all\"\n                >\n                  {query}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Sources Panel */}\n      {sources.length > 0 && (\n        <div className=\"rounded-2xl bg-zinc-900/40 border border-white/5 p-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"text-sm font-semibold text-zinc-400 uppercase tracking-wider\">\n              {sources.length} Sources\n            </h4>\n            {totalResults && totalResults > sources.length && (\n              <span className=\"text-xs text-zinc-500\">\n                da {totalResults} risultati totali\n              </span>\n            )}\n          </div>\n          <div className=\"grid gap-2 sm:grid-cols-2\">\n            {sources.map((source) => (\n              <SourceCard key={source.id} source={source} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {children}\n    </div>\n  );\n});\n\nexport default ResearchReport;\n","/**\n * Research Report Types\n */\n\nexport type Source = {\n  id: string;\n  title: string;\n  url: string;\n  domain?: string;\n  favicon?: string;\n  date?: string;\n};\n\nexport type ReportSection = {\n  title: string;\n  content: string; // Markdown content with [1], [2] citations\n  image?: {\n    url: string;\n    alt?: string;\n    caption?: string;\n  };\n  video?: {\n    url: string;\n    thumbnail?: string;\n    title?: string;\n  };\n};\n\nexport type ResearchReportProps = {\n  title: string;\n  summary: string; // Opening summary with inline citations [1], [2]\n  sections: ReportSection[];\n  sources: Source[];\n  relatedQueries?: string[];\n  searchQuery?: string;\n  totalResults?: number;\n};\n\n/**\n * Detect video embed URL from various video platforms.\n */\nexport function detectVideoEmbed(\n  url: string,\n): { embedUrl: string; provider: string } | null {\n  if (!url) return null;\n\n  // YouTube patterns\n  const youtubeMatch = url.match(\n    /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/|youtube\\.com\\/shorts\\/)([a-zA-Z0-9_-]{11})/,\n  );\n  if (youtubeMatch?.[1]) {\n    return {\n      provider: \"youtube\",\n      embedUrl: `https://www.youtube.com/embed/${youtubeMatch[1]}?rel=0&modestbranding=1`,\n    };\n  }\n\n  // Vimeo patterns\n  const vimeoMatch = url.match(/vimeo\\.com\\/(?:video\\/)?(\\d+)/);\n  if (vimeoMatch?.[1]) {\n    return {\n      provider: \"vimeo\",\n      embedUrl: `https://player.vimeo.com/video/${vimeoMatch[1]}?byline=0&portrait=0`,\n    };\n  }\n\n  // Dailymotion patterns\n  const dailymotionMatch = url.match(\n    /(?:dailymotion\\.com\\/video\\/|dai\\.ly\\/)([a-zA-Z0-9]+)/,\n  );\n  if (dailymotionMatch?.[1]) {\n    return {\n      provider: \"dailymotion\",\n      embedUrl: `https://www.dailymotion.com/embed/video/${dailymotionMatch[1]}`,\n    };\n  }\n\n  return null;\n}\n","\"use client\";\n\nimport { memo, useState } from \"react\";\nimport { PlayCircle, Play } from \"lucide-react\";\nimport { detectVideoEmbed } from \"./types\";\n\ninterface VideoPlayerProps {\n  video: { url: string; thumbnail?: string; title?: string };\n  title: string;\n}\n\nexport const VideoPlayer = memo(function VideoPlayer({\n  video,\n  title,\n}: VideoPlayerProps) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const embedInfo = detectVideoEmbed(video.url);\n\n  if (isPlaying) {\n    return (\n      <div className=\"mt-4 rounded-xl overflow-hidden border border-white/10 aspect-video bg-black\">\n        {embedInfo ? (\n          <iframe\n            src={embedInfo.embedUrl}\n            title={video.title || title}\n            className=\"w-full h-full border-0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen\"\n            allowFullScreen\n          />\n        ) : (\n          <video\n            src={video.url}\n            controls\n            autoPlay\n            className=\"w-full h-full object-contain\"\n          >\n            <source src={video.url} />\n          </video>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={() => setIsPlaying(true)}\n      className=\"mt-4 block w-full relative rounded-xl overflow-hidden border border-white/10 group text-left\"\n    >\n      {video.thumbnail ? (\n        <img\n          src={video.thumbnail}\n          alt={video.title || \"Video\"}\n          className=\"w-full h-48 sm:h-56 md:h-64 object-cover\"\n          loading=\"lazy\"\n        />\n      ) : (\n        <div className=\"w-full h-48 sm:h-56 md:h-64 bg-zinc-800 flex items-center justify-center\">\n          <PlayCircle className=\"w-12 h-12 text-zinc-600\" />\n        </div>\n      )}\n      <div className=\"absolute inset-0 bg-black/40 flex items-center justify-center group-hover:bg-black/30 transition-colors\">\n        <div className=\"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-black/60 border-2 border-white/40 flex items-center justify-center group-hover:scale-110 group-hover:bg-primary/80 transition-all\">\n          <Play className=\"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1\" />\n        </div>\n      </div>\n      {video.title && (\n        <div className=\"absolute bottom-0 left-0 right-0 p-3 sm:p-4 bg-gradient-to-t from-black/80 to-transparent\">\n          <div className=\"text-sm sm:text-base font-medium text-white\">\n            {video.title}\n          </div>\n        </div>\n      )}\n    </button>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { Source } from \"./types\";\n\ninterface CitationBadgeProps {\n  id: string;\n  source?: Source;\n}\n\nexport const CitationBadge = memo(function CitationBadge({\n  id,\n  source,\n}: CitationBadgeProps) {\n  if (!source) return <sup className=\"text-sky-400\">[{id}]</sup>;\n\n  return (\n    <a\n      href={source.url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"inline-flex items-center gap-0.5 px-1 py-0.5 mx-0.5 text-[10px] font-medium bg-sky-500/20 text-sky-400 rounded hover:bg-sky-500/30 transition-colors cursor-pointer\"\n    >\n      {source.favicon && (\n        <img src={source.favicon} alt=\"\" className=\"w-3 h-3 rounded-sm\" />\n      )}\n      <span>{source.domain || id}</span>\n    </a>\n  );\n});\n\n/**\n * Render content with citation badges replacing [1], [2], etc.\n */\nexport function renderContentWithCitations(\n  content: string,\n  sources: Source[],\n  renderText?: (\n    text: string,\n    options?: { inline?: boolean },\n  ) => React.ReactNode,\n): React.ReactNode[] {\n  const parts = content.split(/(\\[\\d+\\])/g);\n\n  return parts.map((part, i) => {\n    const match = part.match(/^\\[(\\d+)\\]$/);\n    if (match) {\n      const sourceId = match[1];\n      const source = sources.find((s) => s.id === sourceId);\n      return <CitationBadge key={i} id={sourceId!} source={source} />;\n    }\n    if (renderText) {\n      return <span key={i}>{renderText(part, { inline: true })}</span>;\n    }\n    return <span key={i}>{part}</span>;\n  });\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { ExternalLink, Globe } from \"lucide-react\";\nimport type { Source } from \"./types\";\n\ninterface SourceCardProps {\n  source: Source;\n}\n\nexport const SourceCard = memo(function SourceCard({\n  source,\n}: SourceCardProps) {\n  return (\n    <a\n      href={source.url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"group flex items-center gap-3 p-3 rounded-xl bg-zinc-800/50 border border-white/5 hover:border-sky-500/30 hover:bg-zinc-800 transition-all\"\n    >\n      <div className=\"w-8 h-8 rounded-lg bg-zinc-700/50 flex items-center justify-center flex-shrink-0\">\n        {source.favicon ? (\n          <img src={source.favicon} alt=\"\" className=\"w-5 h-5 rounded\" />\n        ) : (\n          <Globe className=\"w-4 h-4 text-zinc-400\" />\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"text-sm font-medium text-white truncate group-hover:text-sky-300 transition-colors\">\n          {source.title}\n        </div>\n        <div className=\"text-xs text-zinc-500 truncate\">{source.domain}</div>\n      </div>\n      <ExternalLink className=\"w-4 h-4 text-zinc-500 group-hover:text-sky-400 transition-colors flex-shrink-0\" />\n    </a>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { ReportSection, Source } from \"./types\";\nimport { VideoPlayer } from \"./video-player\";\nimport { renderContentWithCitations } from \"./citation-badge\";\n\ninterface ReportSectionComponentProps {\n  section: ReportSection;\n  sources: Source[];\n  renderText?: (\n    text: string,\n    options?: { inline?: boolean },\n  ) => React.ReactNode;\n}\n\nexport const ReportSectionComponent = memo(function ReportSectionComponent({\n  section,\n  sources,\n  renderText,\n}: ReportSectionComponentProps) {\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-bold text-white flex items-center gap-2\">\n        <div className=\"w-1 h-5 bg-sky-500 rounded-full\" />\n        {section.title}\n      </h3>\n\n      <div className=\"text-zinc-300 leading-relaxed text-[15px]\">\n        {renderContentWithCitations(section.content, sources, renderText)}\n      </div>\n\n      {section.image && (\n        <figure className=\"mt-4 rounded-xl overflow-hidden border border-white/10\">\n          <img\n            src={section.image.url}\n            alt={section.image.alt || section.title}\n            className=\"w-full h-auto min-h-[200px] max-h-[400px] sm:max-h-[500px] object-cover\"\n            loading=\"lazy\"\n          />\n          {section.image.caption && (\n            <figcaption className=\"px-4 py-2.5 text-xs sm:text-sm text-zinc-500 bg-zinc-900/50\">\n              {section.image.caption}\n            </figcaption>\n          )}\n        </figure>\n      )}\n\n      {section.video && (\n        <VideoPlayer video={section.video} title={section.title} />\n      )}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useCallback } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport {\n  FileText,\n  ChevronRight,\n  ChevronDown,\n  BookOpen,\n  Hash,\n  ExternalLink,\n} from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport type { DocumentIndexProps, DocumentIndexNode } from \"./schema\";\n\ninterface TreeNodeProps {\n  node: DocumentIndexNode;\n  depth: number;\n  accentColor?: string;\n  onNodeClick?: (node: DocumentIndexNode) => void;\n}\n\nconst TreeNodeItem = memo(function TreeNodeItem({\n  node,\n  depth,\n  accentColor,\n  onNodeClick,\n}: TreeNodeProps) {\n  // First level nodes start collapsed, deeper ones follow parent state\n  const [expanded, setExpanded] = useState(depth > 0);\n  const [showFullSummary, setShowFullSummary] = useState(false);\n  const hasChildren = node.children && node.children.length > 0;\n\n  const toggle = useCallback(() => {\n    if (hasChildren) {\n      setExpanded((prev) => !prev);\n    }\n  }, [hasChildren]);\n\n  const handleNodeClick = useCallback(\n    (e: React.MouseEvent) => {\n      e.stopPropagation();\n      // Toggle full summary display and trigger action\n      setShowFullSummary((prev) => !prev);\n      if (!expanded) setExpanded(true);\n      onNodeClick?.(node);\n    },\n    [onNodeClick, node, expanded],\n  );\n\n  const pageRange =\n    node.startPage === node.endPage\n      ? `p. ${node.startPage}`\n      : `pp. ${node.startPage}-${node.endPage}`;\n\n  return (\n    <div className=\"select-none\">\n      <div\n        onClick={toggle}\n        className={cn(\n          \"flex items-start gap-2 py-1.5 px-2 rounded-md transition-colors group\",\n          hasChildren && \"cursor-pointer hover:bg-white/5\",\n          depth === 0 && \"font-semibold\",\n        )}\n        style={{ paddingLeft: `${depth * 16 + 8}px` }}\n      >\n        {hasChildren ? (\n          <span className=\"mt-0.5 shrink-0 text-muted-foreground\">\n            {expanded ? (\n              <ChevronDown className=\"h-4 w-4\" />\n            ) : (\n              <ChevronRight className=\"h-4 w-4\" />\n            )}\n          </span>\n        ) : (\n          <span className=\"mt-0.5 shrink-0 w-4\" />\n        )}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={cn(\n                \"text-sm truncate\",\n                depth === 0 ? \"text-foreground\" : \"text-foreground/80\",\n              )}\n            >\n              {node.title}\n            </span>\n            <span\n              className=\"text-[10px] px-1.5 py-0.5 rounded bg-white/10 text-muted-foreground shrink-0\"\n              style={accentColor ? { backgroundColor: `${accentColor}20` } : {}}\n            >\n              {pageRange}\n            </span>\n            {onNodeClick && (\n              <button\n                onClick={handleNodeClick}\n                className={cn(\n                  \"transition-opacity p-0.5 rounded hover:bg-white/10\",\n                  showFullSummary\n                    ? \"opacity-100\"\n                    : \"opacity-0 group-hover:opacity-100\",\n                )}\n                title={\n                  showFullSummary ? \"Hide details\" : \"View section details\"\n                }\n              >\n                {showFullSummary ? (\n                  <ChevronDown\n                    className=\"h-3 w-3\"\n                    style={{ color: accentColor }}\n                  />\n                ) : (\n                  <ExternalLink\n                    className=\"h-3 w-3\"\n                    style={{ color: accentColor }}\n                  />\n                )}\n              </button>\n            )}\n          </div>\n          {node.summary && expanded && (\n            <p\n              className={cn(\n                \"text-xs text-muted-foreground mt-1\",\n                !showFullSummary && \"line-clamp-2\",\n              )}\n            >\n              {node.summary}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <AnimatePresence>\n        {expanded && hasChildren && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            {node.children!.map((child, index) => (\n              <TreeNodeItem\n                key={child.nodeId || index}\n                node={child}\n                depth={depth + 1}\n                accentColor={accentColor}\n                onNodeClick={onNodeClick}\n              />\n            ))}\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n\nexport const DocumentIndex = memo(function DocumentIndex({\n  element,\n  onAction,\n}: ComponentRenderProps) {\n  const {\n    title,\n    description,\n    pageCount,\n    nodes,\n    accentColor = \"#3b82f6\",\n    collapsed: initialCollapsed = false,\n  } = element.props as DocumentIndexProps;\n\n  const [collapsed, setCollapsed] = useState(initialCollapsed);\n\n  const handleNodeClick = useCallback(\n    (node: DocumentIndexNode) => {\n      // Use standard onAction callback to emit selection event\n      onAction?.({\n        name: \"view_section\",\n        params: {\n          elementKey: element.key,\n          nodeId: node.nodeId,\n          title: node.title,\n          startPage: node.startPage,\n          endPage: node.endPage,\n          summary: node.summary,\n        },\n      });\n    },\n    [onAction, element.key],\n  );\n\n  return (\n    <div className=\"rounded-xl border border-white/10 bg-card/50 backdrop-blur-sm overflow-hidden\">\n      {/* Header */}\n      <div\n        className=\"flex items-center justify-between px-4 py-3 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors\"\n        onClick={() => setCollapsed((prev) => !prev)}\n      >\n        <div className=\"flex items-center gap-3\">\n          <div\n            className=\"w-10 h-10 rounded-lg flex items-center justify-center\"\n            style={{ backgroundColor: `${accentColor}20` }}\n          >\n            <FileText className=\"h-5 w-5\" style={{ color: accentColor }} />\n          </div>\n          <div>\n            <h3 className=\"text-sm font-semibold text-foreground\">{title}</h3>\n            {description && (\n              <p className=\"text-xs text-muted-foreground line-clamp-1 max-w-md\">\n                {description}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n            <BookOpen className=\"h-3.5 w-3.5\" />\n            <span>{pageCount} pages</span>\n          </div>\n          <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n            <Hash className=\"h-3.5 w-3.5\" />\n            <span>{nodes?.length || 0} sections</span>\n          </div>\n          {collapsed ? (\n            <ChevronRight className=\"h-5 w-5 text-muted-foreground\" />\n          ) : (\n            <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\n          )}\n        </div>\n      </div>\n\n      {/* Tree Content */}\n      <AnimatePresence>\n        {!collapsed && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"p-3\">\n              {nodes && nodes.length > 0 ? (\n                nodes.map((node, index) => (\n                  <TreeNodeItem\n                    key={node.nodeId || index}\n                    node={node}\n                    depth={0}\n                    accentColor={accentColor}\n                    onNodeClick={handleNodeClick}\n                  />\n                ))\n              ) : (\n                <p className=\"text-sm text-muted-foreground text-center py-4\">\n                  No sections found\n                </p>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n});\n","export { DocumentIndex } from \"./component\";\nexport {\n  DocumentIndexPropsSchema,\n  DocumentIndexNodeSchema,\n  type DocumentIndexProps,\n  type DocumentIndexNode,\n} from \"./schema\";\n\nimport { DocumentIndex } from \"./component\";\nimport { DocumentIndexPropsSchema } from \"./schema\";\n\nexport const DocumentIndexDefinition = {\n  type: \"DocumentIndex\",\n  component: DocumentIndex,\n  schema: DocumentIndexPropsSchema,\n};\n","\"use client\";\n\nimport { memo, useState } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { FileText, ChevronDown, BookOpen } from \"lucide-react\";\nimport { cn } from \"../../utils/cn\";\nimport { motion } from \"framer-motion\";\nimport type { SourceCitationProps, Citation } from \"./schema\";\n\n/**\n * Compact SourceCitation component - similar style to web sources\n * Shows citations as small, discrete items that expand on demand\n */\nexport const SourceCitation = memo(function SourceCitation({\n  element,\n}: ComponentRenderProps) {\n  const {\n    title,\n    citations = [],\n    collapsed: initialCollapsed = true,\n    accentColor = \"#3b82f6\",\n  } = element.props as SourceCitationProps;\n\n  const [expanded, setExpanded] = useState(!initialCollapsed);\n  const visibleCitations = expanded ? citations : citations.slice(0, 4);\n\n  if (citations.length === 0) return null;\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      {/* Compact header */}\n      <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n        <div className=\"flex -space-x-1\">\n          {citations.slice(0, 3).map((c, i) => (\n            <div\n              key={i}\n              className=\"w-5 h-5 rounded-full border-2 border-zinc-900 flex items-center justify-center\"\n              style={{ backgroundColor: `${accentColor}20` }}\n            >\n              <FileText size={10} style={{ color: accentColor }} />\n            </div>\n          ))}\n        </div>\n        <span className=\"font-medium\">{citations.length} sources</span>\n        <span className=\"text-muted-foreground/60\"></span>\n        <span className=\"text-muted-foreground/60 truncate max-w-32\">\n          {title}\n        </span>\n      </div>\n\n      {/* Compact citation list */}\n      <div className=\"flex flex-col gap-1\">\n        {visibleCitations.map((citation, idx) => (\n          <CompactCitation\n            key={citation.id || idx}\n            citation={citation}\n            index={idx}\n            accentColor={accentColor}\n          />\n        ))}\n      </div>\n\n      {/* Show all button */}\n      {citations.length > 4 && (\n        <button\n          onClick={() => setExpanded(!expanded)}\n          className=\"flex items-center justify-center gap-1 py-1.5 text-xs text-muted-foreground hover:text-foreground transition-colors rounded-lg hover:bg-white/5\"\n        >\n          {expanded ? \"Mostra meno\" : `Mostra tutte (${citations.length})`}\n          <ChevronDown\n            size={14}\n            className={cn(\"transition-transform\", expanded && \"rotate-180\")}\n          />\n        </button>\n      )}\n    </div>\n  );\n});\n\nconst CompactCitation = memo(function CompactCitation({\n  citation,\n  index,\n  accentColor,\n}: {\n  citation: Citation;\n  index: number;\n  accentColor: string;\n}) {\n  const [showExcerpt, setShowExcerpt] = useState(false);\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 10 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: index * 0.03 }}\n      className=\"group\"\n    >\n      <button\n        onClick={() => setShowExcerpt(!showExcerpt)}\n        className=\"w-full flex items-start gap-2 p-2 rounded-lg bg-white/[0.03] hover:bg-white/[0.08] border border-transparent hover:border-white/10 transition-all text-left\"\n      >\n        {/* Citation number badge */}\n        <span\n          className=\"shrink-0 w-5 h-5 rounded-md flex items-center justify-center text-[10px] font-medium\"\n          style={{ backgroundColor: `${accentColor}20`, color: accentColor }}\n        >\n          {citation.id}\n        </span>\n\n        <div className=\"flex-1 min-w-0\">\n          {/* Section title */}\n          <div className=\"text-xs font-medium text-foreground/80 line-clamp-1 leading-tight\">\n            {citation.sectionTitle || citation.text?.slice(0, 50) || \"Source\"}\n          </div>\n          {/* Page number */}\n          <div className=\"flex items-center gap-1 mt-0.5\">\n            <BookOpen size={10} className=\"text-muted-foreground/50\" />\n            <span className=\"text-[10px] text-muted-foreground/60\">\n              p. {citation.pageNumber}\n            </span>\n          </div>\n        </div>\n\n        <ChevronDown\n          size={12}\n          className={cn(\n            \"shrink-0 text-muted-foreground/40 transition-transform\",\n            showExcerpt && \"rotate-180\",\n          )}\n        />\n      </button>\n\n      {/* Expandable excerpt */}\n      {showExcerpt && citation.text && (\n        <motion.div\n          initial={{ height: 0, opacity: 0 }}\n          animate={{ height: \"auto\", opacity: 1 }}\n          exit={{ height: 0, opacity: 0 }}\n          className=\"ml-7 mt-1 mb-2 p-2 rounded-lg bg-white/[0.02] border-l-2\"\n          style={{ borderColor: accentColor }}\n        >\n          <p className=\"text-xs text-foreground/70 italic leading-relaxed\">\n            \"{citation.text}\"\n          </p>\n        </motion.div>\n      )}\n    </motion.div>\n  );\n});\n","export { SourceCitation } from \"./component\";\nexport {\n  SourceCitationPropsSchema,\n  CitationSchema,\n  type SourceCitationProps,\n  type Citation,\n} from \"./schema\";\n\nimport { SourceCitation } from \"./component\";\nimport { SourceCitationPropsSchema } from \"./schema\";\n\nexport const SourceCitationDefinition = {\n  type: \"SourceCitation\",\n  component: SourceCitation,\n  schema: SourceCitationPropsSchema,\n};\n","\"use client\";\n\nimport { memo, useState, useEffect } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { cn } from \"../../utils/cn\";\nimport { Send, User } from \"lucide-react\";\n\ntype AgentParticipant = {\n  id: string;\n  name: string;\n  role: string;\n  avatar?: string;\n  color?: string;\n};\n\ntype MessageItem = {\n  id: string;\n  sender: string; // ID or Name\n  avatar?: string;\n  content: string;\n  timestamp: string;\n  status?: \"read\" | \"unread\";\n  isOwn?: boolean;\n  participantId?: string; // Link to specific agent\n};\n\nexport const Message = memo(function Message({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    messages: initialMessages,\n    participants = [],\n    activeAgents = [],\n    lock = false,\n  } = element.props as {\n    title?: string | null;\n    messages?: MessageItem[] | null;\n    participants?: AgentParticipant[];\n    activeAgents?: string[]; // IDs of agents currently \"typing\"\n    lock?: boolean;\n  };\n\n  const [messages, setMessages] = useState<MessageItem[]>(\n    initialMessages || [],\n  );\n\n  useEffect(() => {\n    if (initialMessages) {\n      setMessages(initialMessages);\n    }\n  }, [initialMessages]);\n  const [replyText, setReplyText] = useState(\"\");\n\n  const handleSendReply = () => {\n    if (lock || !replyText.trim()) return;\n\n    const newMessage: MessageItem = {\n      id: crypto.randomUUID(),\n      sender: \"Me\",\n      content: replyText,\n      timestamp: \"Just now\",\n      isOwn: true,\n      status: \"read\",\n    };\n\n    setMessages([...messages, newMessage]);\n    setReplyText(\"\");\n  };\n\n  const getParticipant = (id?: string) => participants.find((p) => p.id === id);\n\n  return (\n    <div className=\"flex flex-col h-full max-h-[600px] overflow-hidden rounded-xl border border-border/50 glass-panel bg-card/80 backdrop-blur-md shadow-lg\">\n      {title && (\n        <div className=\"flex items-center justify-between border-b border-border px-4 py-3 bg-muted/20\">\n          <div className=\"font-semibold text-base\">{title}</div>\n\n          {/* Participants Avatars */}\n          {participants.length > 0 && (\n            <div className=\"flex -space-x-2 ml-3\">\n              {participants.map((p) => (\n                <div\n                  key={p.id}\n                  className=\"relative flex h-7 w-7 items-center justify-center rounded-full border-2 border-background text-[10px] font-medium text-white shadow-sm ring-1 ring-black/5 bg-[var(--avatar-bg,var(--primary))]\"\n                  style={\n                    {\n                      \"--avatar-bg\": p.color,\n                    } as React.CSSProperties\n                  }\n                  title={`${p.name} (${p.role})`}\n                >\n                  {p.avatar ? (\n                    <img\n                      src={p.avatar}\n                      alt={p.name}\n                      className=\"h-full w-full rounded-full object-cover\"\n                    />\n                  ) : (\n                    <span>{p.name[0]}</span>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex flex-1 flex-col gap-4 overflow-y-auto p-4 bg-muted/5 min-h-0\">\n        {messages.map((msg) => {\n          const participant = getParticipant(msg.participantId);\n          const senderName = participant ? participant.name : msg.sender;\n          const role = participant?.role;\n\n          return (\n            <div\n              key={msg.id}\n              data-selectable-item\n              data-element-key={element.key}\n              data-item-id={msg.id}\n              className={cn(\n                \"flex flex-col max-w-[85%] cursor-pointer group transition-all\",\n                msg.isOwn ? \"self-end items-end\" : \"self-start items-start\",\n              )}\n            >\n              <div\n                className={cn(\n                  \"flex items-center gap-2 mb-1 text-xs text-muted-foreground\",\n                  msg.isOwn ? \"flex-row-reverse\" : \"flex-row\",\n                )}\n              >\n                <span className=\"font-semibold text-foreground\">\n                  {senderName}\n                </span>\n                {role && (\n                  <span className=\"px-1.5 py-0.5 rounded text-[10px] bg-secondary text-secondary-foreground border border-border/50\">\n                    {role}\n                  </span>\n                )}\n                <span className=\"opacity-70 text-[10px]\">{msg.timestamp}</span>\n              </div>\n\n              <div\n                className={cn(\n                  \"relative px-4 py-3 text-sm shadow-sm transition-all duration-200 border\",\n                  msg.isOwn\n                    ? \"rounded-2xl rounded-tr-md bg-primary text-primary-foreground border-primary/20 bg-gradient-to-br from-blue-600 to-indigo-600\"\n                    : \"rounded-2xl rounded-tl-md bg-card text-card-foreground border-border break-words\",\n                  !msg.isOwn &&\n                    participant?.color &&\n                    \"border-l-[3px] border-l-[var(--msg-border)]\",\n                )}\n                style={\n                  {\n                    \"--msg-border\": participant?.color,\n                  } as React.CSSProperties\n                }\n              >\n                {msg.content}\n              </div>\n            </div>\n          );\n        })}\n\n        {/* Active Agents \"Thinking\" Indicator */}\n        {activeAgents.length > 0 && (\n          <div className=\"flex gap-3 mt-2 px-2\">\n            {activeAgents.map((agentId) => {\n              const p = getParticipant(agentId);\n              if (!p) return null;\n              return (\n                <div\n                  key={agentId}\n                  className=\"flex items-center gap-2 text-xs text-muted-foreground animate-pulse\"\n                >\n                  <div\n                    className=\"h-2 w-2 rounded-full bg-[var(--agent-color,currentColor)]\"\n                    style={\n                      {\n                        \"--agent-color\": p.color,\n                      } as React.CSSProperties\n                    }\n                  />\n                  <span>{p.name} is typing...</span>\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {messages.length === 0 && activeAgents.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground opacity-50 space-y-2\">\n            <div className=\"p-4 rounded-full bg-muted/50\">\n              <User className=\"h-8 w-8 opacity-50\" />\n            </div>\n            <p className=\"text-sm\">No messages yet</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"p-4 border-t border-border bg-background flex gap-2 items-end\">\n        <textarea\n          data-interactive\n          value={replyText}\n          onChange={(e) => setReplyText(e.target.value)}\n          placeholder={lock ? \"Conversation locked\" : \"Type a message...\"}\n          disabled={lock}\n          className={cn(\n            \"flex-1 min-h-[44px] max-h-[120px] rounded-lg border border-input bg-transparent px-3 py-2.5 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 resize-y\",\n            lock && \"bg-muted text-muted-foreground\",\n          )}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              handleSendReply();\n            }\n          }}\n        />\n        <button\n          data-interactive\n          onClick={handleSendReply}\n          disabled={lock || !replyText.trim()}\n          className={cn(\n            \"inline-flex items-center justify-center shrink-0 rounded-lg h-[44px] w-[44px] text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\n            !replyText.trim()\n              ? \"bg-muted text-muted-foreground\"\n              : \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm\",\n          )}\n        >\n          <Send size={18} />\n        </button>\n      </div>\n      {children}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useEffect, useRef, useCallback } from \"react\";\nimport { type ComponentRenderProps } from \"@onegenui/react\";\nimport { PenSquare, Mail } from \"lucide-react\";\nimport {\n  ComposeModal,\n  EmailList,\n  EmailDetail,\n  type EmailItem,\n  type DraftEmail,\n  type ComposeMode,\n} from \"./components\";\n\n// =============================================================================\n// Main Component\n// =============================================================================\n\nexport const Email = memo(function Email({\n  element,\n  children,\n}: ComponentRenderProps) {\n  const {\n    title,\n    description,\n    emails: initialEmails,\n    lock = false,\n    onSendEmail,\n  } = element.props as {\n    title?: string | null;\n    description?: string | null;\n    emails?: EmailItem[] | null;\n    lock?: boolean;\n    onSendEmail?: (draft: DraftEmail) => Promise<void>;\n  };\n\n  const isInitialMount = useRef(true);\n  const [localEmails, setLocalEmails] = useState<EmailItem[]>([]);\n  const [selectedEmailId, setSelectedEmailId] = useState<string | null>(null);\n  const [composeMode, setComposeMode] = useState<ComposeMode>(\"none\");\n  const [hoveredId, setHoveredId] = useState<string | null>(null);\n\n  // Sync from props\n  const emailsKey = JSON.stringify(initialEmails);\n\n  useEffect(() => {\n    const newEmails = initialEmails || [];\n    setLocalEmails(newEmails);\n\n    if (newEmails.length === 1 && isInitialMount.current) {\n      setSelectedEmailId(newEmails[0]?.id ?? null);\n    }\n\n    isInitialMount.current = false;\n  }, [emailsKey]);\n\n  const emails = localEmails;\n  const selectedEmail = emails.find((e) => e.id === selectedEmailId);\n\n  // Handlers\n  const handleDelete = useCallback(\n    (id: string, e?: React.MouseEvent) => {\n      e?.stopPropagation();\n      if (lock) return;\n      setLocalEmails((prev) => prev.filter((email) => email.id !== id));\n      if (selectedEmailId === id) setSelectedEmailId(null);\n    },\n    [lock, selectedEmailId],\n  );\n\n  const handleArchive = useCallback(\n    (id: string, e?: React.MouseEvent) => {\n      e?.stopPropagation();\n      if (lock) return;\n      setLocalEmails((prev) => prev.filter((email) => email.id !== id));\n      if (selectedEmailId === id) setSelectedEmailId(null);\n    },\n    [lock, selectedEmailId],\n  );\n\n  const handleMarkAsRead = useCallback((id: string) => {\n    setLocalEmails((prev) =>\n      prev.map((email) => (email.id === id ? { ...email, read: true } : email)),\n    );\n  }, []);\n\n  const handleToggleStar = useCallback((id: string, e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    setLocalEmails((prev) =>\n      prev.map((email) =>\n        email.id === id ? { ...email, starred: !email.starred } : email,\n      ),\n    );\n  }, []);\n\n  const handleSelectEmail = useCallback(\n    (id: string) => {\n      setSelectedEmailId(id);\n      handleMarkAsRead(id);\n    },\n    [handleMarkAsRead],\n  );\n\n  const handleSendEmail = useCallback(\n    async (draft: DraftEmail) => {\n      console.log(\"[Email] Sending email:\", draft);\n      if (onSendEmail) {\n        await onSendEmail(draft);\n      } else {\n        console.log(\"[Email] Email sent (simulated):\", draft);\n      }\n    },\n    [onSendEmail],\n  );\n\n  // ==========================================================================\n  // Main Render\n  // ==========================================================================\n\n  return (\n    <div className=\"glass-panel w-full min-h-[400px] h-full flex flex-col rounded-2xl border border-white/10 overflow-hidden relative shadow-2xl\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center px-5 py-4 border-b border-border/40 bg-black/20\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg shadow-red-500/20 text-white\">\n            <Mail size={20} />\n          </div>\n          <div>\n            <h3 className=\"m-0 text-base font-bold leading-tight\">\n              {title || \"Gmail\"}\n            </h3>\n            {description && (\n              <div className=\"text-xs text-muted-foreground mt-0.5\">\n                {description}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          <div className=\"hidden sm:block px-3 py-1 rounded-full bg-muted/30 text-xs font-medium text-muted-foreground border border-white/5\">\n            {emails.filter((e) => !e.read).length} non lett\n            {emails.filter((e) => !e.read).length === 1 ? \"a\" : \"e\"}\n          </div>\n\n          <button\n            onClick={() => setComposeMode(\"new\")}\n            className=\"flex items-center gap-2 pl-3 pr-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-sm font-medium transition-all shadow-lg shadow-blue-500/20\"\n          >\n            <PenSquare size={16} />\n            <span className=\"hidden sm:inline\">Scrivi</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex flex-1 overflow-hidden relative\">\n        {selectedEmail ? (\n          <EmailDetail\n            email={selectedEmail}\n            lock={lock}\n            onBack={() => setSelectedEmailId(null)}\n            onCompose={setComposeMode}\n            onArchive={handleArchive}\n            onDelete={handleDelete}\n            onToggleStar={handleToggleStar}\n          />\n        ) : (\n          <EmailList\n            emails={emails}\n            elementKey={element.key}\n            hoveredId={hoveredId}\n            onSelectEmail={handleSelectEmail}\n            onToggleStar={handleToggleStar}\n            onHoverEmail={setHoveredId}\n          />\n        )}\n      </div>\n\n      {/* Compose Modal */}\n      {composeMode !== \"none\" && (\n        <ComposeModal\n          mode={composeMode}\n          originalEmail={selectedEmail}\n          onClose={() => setComposeMode(\"none\")}\n          onSend={handleSendEmail}\n        />\n      )}\n      {children}\n    </div>\n  );\n});\n","export function UnreadDot() {\n  return (\n    <div className=\"w-2.5 h-2.5 rounded-full shrink-0 shadow-[0_0_8px_rgba(234,67,53,0.5)] bg-gradient-to-br from-red-500 to-red-700\" />\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Send, X, Paperclip } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport type { EmailItem, DraftEmail, ComposeMode } from \"./types\";\nimport { extractEmailAddress } from \"./types\";\n\ninterface ComposeModalProps {\n  mode: ComposeMode;\n  originalEmail?: EmailItem | null;\n  onClose: () => void;\n  onSend: (draft: DraftEmail) => void;\n}\n\nexport function ComposeModal({\n  mode,\n  originalEmail,\n  onClose,\n  onSend,\n}: ComposeModalProps) {\n  const [to, setTo] = useState(\"\");\n  const [cc, setCc] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [sending, setSending] = useState(false);\n\n  useEffect(() => {\n    if (mode === \"reply\" && originalEmail) {\n      setTo(extractEmailAddress(originalEmail.from));\n      setSubject(`Re: ${originalEmail.subject.replace(/^Re:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Original Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    } else if (mode === \"replyAll\" && originalEmail) {\n      setTo(extractEmailAddress(originalEmail.from));\n      setCc(originalEmail.cc || \"\");\n      setSubject(`Re: ${originalEmail.subject.replace(/^Re:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Original Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    } else if (mode === \"forward\" && originalEmail) {\n      setTo(\"\");\n      setSubject(`Fwd: ${originalEmail.subject.replace(/^Fwd:\\s*/i, \"\")}`);\n      setBody(\n        `\\n\\n--- Forwarded Message ---\\nFrom: ${originalEmail.from}\\nDate: ${originalEmail.date}\\nSubject: ${originalEmail.subject}\\n\\n${originalEmail.body}`,\n      );\n    }\n  }, [mode, originalEmail]);\n\n  const handleSend = async () => {\n    if (!to.trim()) return;\n    setSending(true);\n\n    const draft: DraftEmail = {\n      to: to.trim(),\n      cc: cc.trim() || undefined,\n      subject: subject.trim(),\n      body: body.trim(),\n      inReplyTo: originalEmail?.id,\n      threadId: originalEmail?.threadId || undefined,\n    };\n\n    try {\n      await onSend(draft);\n      onClose();\n    } catch (error) {\n      console.error(\"Failed to send email:\", error);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const modeTitle = {\n    new: \"Nuovo messaggio\",\n    reply: \"Rispondi\",\n    replyAll: \"Rispondi a tutti\",\n    forward: \"Inoltra\",\n    none: \"\",\n  }[mode];\n\n  return (\n    <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4\">\n      <div\n        className=\"flex flex-col w-full max-w-[600px] max-h-[90vh] bg-card border border-border rounded-xl shadow-2xl overflow-hidden\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex justify-between items-center px-5 py-4 border-b border-border bg-muted/20\">\n          <span className=\"font-semibold text-base\">{modeTitle}</span>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground transition-colors\"\n          >\n            <X size={16} />\n          </button>\n        </div>\n\n        {/* Form */}\n        <div className=\"flex flex-col gap-3 p-5 flex-1 overflow-y-auto\">\n          <div className=\"flex items-center gap-3\">\n            <label className=\"w-10 text-sm text-muted-foreground\">A:</label>\n            <input\n              type=\"email\"\n              value={to}\n              onChange={(e) => setTo(e.target.value)}\n              placeholder=\"destinatario@email.com\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all\"\n              autoFocus\n            />\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <label className=\"w-10 text-sm text-muted-foreground\">Cc:</label>\n            <input\n              type=\"email\"\n              value={cc}\n              onChange={(e) => setCc(e.target.value)}\n              placeholder=\"cc@email.com\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all\"\n            />\n          </div>\n\n          <div className=\"flex items-center gap-3\">\n            <label className=\"w-10 text-sm text-muted-foreground\">Ogg:</label>\n            <input\n              type=\"text\"\n              value={subject}\n              onChange={(e) => setSubject(e.target.value)}\n              placeholder=\"Oggetto\"\n              className=\"flex-1 bg-muted/20 border border-border rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all\"\n            />\n          </div>\n\n          <textarea\n            value={body}\n            onChange={(e) => setBody(e.target.value)}\n            placeholder=\"Scrivi il tuo messaggio...\"\n            className=\"flex-1 min-h-[200px] resize-y bg-muted/20 border border-border rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary/50 transition-all leading-relaxed font-sans\"\n          />\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-between items-center px-5 py-4 border-t border-border bg-muted/20\">\n          <button\n            className=\"p-2.5 rounded-lg text-muted-foreground hover:bg-muted hover:text-foreground transition-colors opacity-50 cursor-pointer\"\n            title=\"Allega file\"\n          >\n            <Paperclip size={18} />\n          </button>\n\n          <button\n            onClick={handleSend}\n            disabled={!to.trim() || sending}\n            className={cn(\n              \"flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium text-sm transition-all shadow-lg shadow-blue-500/20\",\n              !to.trim() || sending\n                ? \"bg-slate-700 text-slate-400 cursor-not-allowed opacity-50\"\n                : \"bg-blue-600 hover:bg-blue-500 text-white cursor-pointer hover:shadow-blue-500/30\",\n            )}\n          >\n            <Send size={16} />\n            {sending ? \"Invio...\" : \"Invia\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Email types and utilities\n */\n\nexport interface EmailItem {\n  id: string;\n  from: string;\n  subject: string;\n  body: string;\n  date: string;\n  read?: boolean | null;\n  to?: string | null;\n  cc?: string | null;\n  avatar?: string | null;\n  attachments?: Array<{ name: string; size?: string; url?: string }> | null;\n  threadId?: string | null;\n  starred?: boolean | null;\n  labels?: string[] | null;\n}\n\nexport interface DraftEmail {\n  to: string;\n  cc?: string;\n  bcc?: string;\n  subject: string;\n  body: string;\n  attachments?: Array<{ name: string; size?: string }>;\n  inReplyTo?: string;\n  threadId?: string;\n}\n\nexport type ComposeMode = \"none\" | \"new\" | \"reply\" | \"replyAll\" | \"forward\";\n\nexport function getPreview(body: string, maxLength = 120): string {\n  const cleaned = body\n    .replace(/<[^>]*>/g, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim();\n  if (cleaned.length <= maxLength) return cleaned;\n  return cleaned.substring(0, maxLength) + \"...\";\n}\n\nexport function getInitials(name: string | undefined | null): string {\n  if (!name) return \"?\";\n  // Handle email format \"Name <email@example.com>\"\n  const match = name.match(/^([^<]+)/);\n  const displayName = match?.[1]?.trim() ?? name;\n  return (\n    displayName\n      .split(\" \")\n      .slice(0, 2)\n      .map((n) => n[0] || \"\")\n      .join(\"\")\n      .toUpperCase() || \"?\"\n  );\n}\n\nexport function extractEmailAddress(from: string): string {\n  const match = from.match(/<([^>]+)>/);\n  return match?.[1] ?? from;\n}\n\nexport function formatDate(dateStr: string): string {\n  try {\n    const date = new Date(dateStr);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) {\n      return date.toLocaleTimeString(\"it-IT\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n      });\n    } else if (diffDays === 1) {\n      return \"Ieri\";\n    } else if (diffDays < 7) {\n      return date.toLocaleDateString(\"it-IT\", { weekday: \"short\" });\n    } else {\n      return date.toLocaleDateString(\"it-IT\", {\n        day: \"numeric\",\n        month: \"short\",\n      });\n    }\n  } catch {\n    return dateStr;\n  }\n}\n","\"use client\";\n\nimport { memo } from \"react\";\nimport { Star, Paperclip } from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport { UnreadDot } from \"./unread-dot\";\nimport { type EmailItem, getPreview, getInitials, formatDate } from \"./types\";\n\ninterface EmailListProps {\n  emails: EmailItem[];\n  elementKey: string;\n  hoveredId: string | null;\n  onSelectEmail: (id: string) => void;\n  onToggleStar: (id: string, e?: React.MouseEvent) => void;\n  onHoverEmail: (id: string | null) => void;\n}\n\nexport const EmailList = memo(function EmailList({\n  emails,\n  elementKey,\n  hoveredId,\n  onSelectEmail,\n  onToggleStar,\n  onHoverEmail,\n}: EmailListProps) {\n  if (emails.length === 0) {\n    return (\n      <div className=\"flex-1 overflow-y-auto overflow-x-hidden p-3 bg-background/50\">\n        <div className=\"flex flex-col items-center justify-center py-16 text-foreground/60 text-center\">\n          <div className=\"text-5xl mb-4 opacity-50\"></div>\n          <div className=\"text-lg font-semibold mb-1 text-foreground\">\n            Nessuna email\n          </div>\n          <div className=\"text-sm text-foreground/50\">La tua inbox  vuota</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-y-auto overflow-x-hidden p-3 bg-background/50\">\n      {emails.map((email) => (\n        <div\n          key={email.id}\n          data-selectable-item\n          data-element-key={elementKey}\n          data-item-id={email.id}\n          onClick={() => onSelectEmail(email.id)}\n          onMouseEnter={() => onHoverEmail(email.id)}\n          onMouseLeave={() => onHoverEmail(null)}\n          className={cn(\n            \"group relative border border-border/50 p-4 cursor-pointer transition-all duration-200 rounded-xl mb-2 bg-card/80 shadow-sm\",\n            hoveredId === email.id\n              ? \"bg-card border-primary/30 shadow-md\"\n              : !email.read\n                ? \"bg-card border-red-500/30\"\n                : \"bg-card/60\",\n          )}\n        >\n          <div className=\"flex items-start gap-3.5\">\n            {/* Unread indicator */}\n            <div className=\"w-2.5 mt-2 flex justify-center\">\n              {!email.read && <UnreadDot />}\n            </div>\n\n            {/* Avatar */}\n            <div className=\"w-[42px] h-[42px] rounded-full flex items-center justify-center shrink-0 text-sm font-semibold text-red-500 bg-red-500/10 border border-red-500/20 shadow-sm\">\n              {getInitials(email.from)}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex justify-between items-center mb-1\">\n                <span\n                  className={cn(\n                    \"text-sm truncate pr-2\",\n                    email.read\n                      ? \"font-medium text-foreground/90\"\n                      : \"font-bold text-foreground\",\n                  )}\n                >\n                  {email.from?.split(\"<\")[0]?.trim() || \"Mittente sconosciuto\"}\n                </span>\n\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={(e) => onToggleStar(email.id, e)}\n                    className={cn(\n                      \"p-1 rounded-full transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100\",\n                      email.starred\n                        ? \"text-yellow-400 opacity-100\"\n                        : \"text-muted-foreground hover:bg-muted\",\n                    )}\n                  >\n                    <Star\n                      size={14}\n                      fill={email.starred ? \"currentColor\" : \"none\"}\n                    />\n                  </button>\n                  <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\n                    {formatDate(email.date)}\n                  </span>\n                </div>\n              </div>\n\n              <div\n                className={cn(\n                  \"text-sm mb-1.5 truncate\",\n                  email.read\n                    ? \"font-normal text-foreground/80\"\n                    : \"font-semibold text-foreground\",\n                )}\n              >\n                {email.subject || \"(Nessun oggetto)\"}\n              </div>\n\n              <div className=\"text-xs text-foreground/50 truncate leading-relaxed\">\n                {getPreview(email.body)}\n              </div>\n\n              {email.attachments && email.attachments.length > 0 && (\n                <div className=\"flex items-center gap-1.5 mt-2\">\n                  <div className=\"bg-muted/50 px-2 py-0.5 rounded text-[10px] text-muted-foreground flex items-center gap-1 border border-border/50\">\n                    <Paperclip size={10} />\n                    <span>\n                      {email.attachments.length} allegat\n                      {email.attachments.length === 1 ? \"o\" : \"i\"}\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport {\n  ArrowLeft,\n  Archive,\n  Trash2,\n  Reply,\n  ReplyAll,\n  Forward,\n  Star,\n  Paperclip,\n} from \"lucide-react\";\nimport { cn } from \"../../../utils/cn\";\nimport {\n  type EmailItem,\n  type ComposeMode,\n  getInitials,\n  extractEmailAddress,\n} from \"./types\";\n\ninterface EmailDetailProps {\n  email: EmailItem;\n  lock: boolean;\n  onBack: () => void;\n  onCompose: (mode: ComposeMode) => void;\n  onArchive: (id: string, e?: React.MouseEvent) => void;\n  onDelete: (id: string, e?: React.MouseEvent) => void;\n  onToggleStar: (id: string, e?: React.MouseEvent) => void;\n}\n\nexport const EmailDetail = memo(function EmailDetail({\n  email,\n  lock,\n  onBack,\n  onCompose,\n  onArchive,\n  onDelete,\n  onToggleStar,\n}: EmailDetailProps) {\n  return (\n    <div className=\"flex flex-col flex-1 bg-background/30 overflow-hidden\">\n      {/* Header with actions */}\n      <div className=\"flex items-center gap-2 p-3 border-b border-border bg-muted/10\">\n        <button\n          onClick={onBack}\n          className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\n          title=\"Torna alla lista\"\n        >\n          <ArrowLeft size={18} />\n        </button>\n\n        <div className=\"flex-1\" />\n\n        {/* Action buttons */}\n        <div className=\"flex items-center gap-1\">\n          <button\n            onClick={() => onCompose(\"reply\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\n            title=\"Rispondi\"\n          >\n            <Reply size={18} />\n          </button>\n          <button\n            onClick={() => onCompose(\"replyAll\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\n            title=\"Rispondi a tutti\"\n          >\n            <ReplyAll size={18} />\n          </button>\n          <button\n            onClick={() => onCompose(\"forward\")}\n            className=\"p-2 rounded-lg hover:bg-muted text-muted-foreground hover:text-foreground transition-colors\"\n            title=\"Inoltra\"\n          >\n            <Forward size={18} />\n          </button>\n        </div>\n\n        <div className=\"w-px h-5 bg-border mx-1\" />\n\n        <div className=\"flex items-center gap-1\">\n          <button\n            onClick={(e) => onArchive(email.id, e)}\n            disabled={lock}\n            className={cn(\n              \"p-2 rounded-lg transition-colors\",\n              lock\n                ? \"text-muted-foreground/30 cursor-not-allowed\"\n                : \"text-muted-foreground hover:bg-muted hover:text-foreground cursor-pointer\",\n            )}\n            title=\"Archivia\"\n          >\n            <Archive size={18} />\n          </button>\n          <button\n            onClick={(e) => onDelete(email.id, e)}\n            disabled={lock}\n            className={cn(\n              \"p-2 rounded-lg transition-colors\",\n              lock\n                ? \"text-muted-foreground/30 cursor-not-allowed\"\n                : \"text-muted-foreground hover:bg-red-500/10 hover:text-red-500 cursor-pointer\",\n            )}\n            title=\"Elimina\"\n          >\n            <Trash2 size={18} />\n          </button>\n        </div>\n      </div>\n\n      {/* Email content */}\n      <div className=\"flex-1 overflow-y-auto p-6 md:p-8\">\n        {/* Subject */}\n        <h1 className=\"text-xl md:text-2xl font-bold mb-6 text-foreground leading-tight\">\n          {email.subject || \"(Nessun oggetto)\"}\n        </h1>\n\n        {/* Sender info */}\n        <div className=\"flex items-start gap-4 mb-8 pb-6 border-b border-border/60\">\n          <div className=\"w-12 h-12 rounded-full flex items-center justify-center text-base font-bold text-red-500 bg-red-500/10 border border-red-500/20 shadow-sm shrink-0\">\n            {getInitials(email.from)}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <span className=\"font-semibold text-base text-foreground truncate\">\n                {email.from?.split(\"<\")[0]?.trim() || \"Mittente sconosciuto\"}\n              </span>\n              <span className=\"text-sm text-muted-foreground truncate hidden sm:inline-block\">\n                {extractEmailAddress(email.from)}\n              </span>\n            </div>\n\n            <div className=\"text-xs text-muted-foreground flex flex-wrap gap-x-2 gap-y-1 items-center\">\n              <span>{email.date}</span>\n              {email.to && (\n                <>\n                  <span className=\"w-1 h-1 rounded-full bg-border\" />\n                  <span>A: {email.to}</span>\n                </>\n              )}\n            </div>\n          </div>\n\n          <button\n            onClick={(e) => onToggleStar(email.id, e)}\n            className={cn(\n              \"p-2 rounded-full hover:bg-muted transition-colors\",\n              email.starred ? \"text-yellow-400\" : \"text-muted-foreground\",\n            )}\n          >\n            <Star size={18} fill={email.starred ? \"currentColor\" : \"none\"} />\n          </button>\n        </div>\n\n        {/* Body */}\n        <div className=\"text-[15px] leading-relaxed text-foreground/90 whitespace-pre-wrap font-sans\">\n          {email.body || \"(Nessun contenuto)\"}\n        </div>\n\n        {/* Attachments */}\n        {email.attachments && email.attachments.length > 0 && (\n          <div className=\"mt-8 pt-6 border-t border-border/60\">\n            <div className=\"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3\">\n              {email.attachments.length} Allegat\n              {email.attachments.length === 1 ? \"o\" : \"i\"}\n            </div>\n\n            <div className=\"flex flex-wrap gap-2\">\n              {email.attachments.map((att, i) => (\n                <div\n                  key={i}\n                  className=\"group flex items-center gap-3 p-3 bg-muted/30 border border-border hover:border-primary/30 rounded-lg cursor-pointer transition-all hover:bg-muted/60\"\n                >\n                  <div className=\"w-8 h-8 rounded bg-background flex items-center justify-center text-muted-foreground\">\n                    <Paperclip size={16} />\n                  </div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-xs font-medium text-foreground group-hover:text-primary transition-colors\">\n                      {att.name}\n                    </span>\n                    {att.size && (\n                      <span className=\"text-[10px] text-muted-foreground\">\n                        {att.size}\n                      </span>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Quick reply bar */}\n      <div className=\"p-4 border-t border-border bg-muted/10\">\n        <button\n          onClick={() => onCompose(\"reply\")}\n          className=\"w-full flex items-center justify-center gap-2 p-3 rounded-xl border border-border bg-background hover:bg-muted/50 transition-all text-sm font-medium text-muted-foreground hover:text-foreground hover:border-primary/30 group\"\n        >\n          <Reply\n            size={16}\n            className=\"group-hover:text-primary transition-colors\"\n          />\n          Rispondi\n        </button>\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useCallback } from \"react\";\nimport type { KnowledgeNode } from \"@onegenui/vectorless\";\n\nexport interface DocumentExplorerProps {\n  tree: KnowledgeNode;\n  onNodeSelect?: (node: KnowledgeNode) => void;\n  selectedNodeId?: string;\n  expandedByDefault?: boolean;\n}\n\ninterface TreeNodeProps {\n  node: KnowledgeNode;\n  depth: number;\n  onSelect: (node: KnowledgeNode) => void;\n  selectedId?: string;\n  expanded: Set<string>;\n  onToggle: (id: string) => void;\n}\n\nconst TreeNodeItem = memo(function TreeNodeItem({\n  node,\n  depth,\n  onSelect,\n  selectedId,\n  expanded,\n  onToggle,\n}: TreeNodeProps) {\n  const isExpanded = expanded.has(node.id);\n  const isSelected = selectedId === node.id;\n  const hasChildren = node.children && node.children.length > 0;\n\n  return (\n    <div style={{ marginLeft: depth * 16 }}>\n      <div\n        onClick={() => onSelect(node)}\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 8,\n          padding: \"8px 12px\",\n          cursor: \"pointer\",\n          borderRadius: 6,\n          backgroundColor: isSelected ? \"#e3f2fd\" : \"transparent\",\n          borderLeft: isSelected\n            ? \"3px solid #1976d2\"\n            : \"3px solid transparent\",\n        }}\n      >\n        {hasChildren && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggle(node.id);\n            }}\n            style={{\n              border: \"none\",\n              background: \"none\",\n              cursor: \"pointer\",\n              padding: 0,\n              fontSize: 12,\n            }}\n          >\n            {isExpanded ? \"v\" : \">\"}\n          </button>\n        )}\n        {!hasChildren && <span style={{ width: 12 }} />}\n        <div style={{ flex: 1 }}>\n          <div style={{ fontWeight: 500, fontSize: 14 }}>{node.title}</div>\n          <div style={{ fontSize: 12, color: \"#666\" }}>\n            p{node.pageStart}-{node.pageEnd}\n          </div>\n        </div>\n      </div>\n      {hasChildren && isExpanded && (\n        <div>\n          {node.children.map((child) => (\n            <TreeNodeItem\n              key={child.id}\n              node={child}\n              depth={depth + 1}\n              onSelect={onSelect}\n              selectedId={selectedId}\n              expanded={expanded}\n              onToggle={onToggle}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport const DocumentExplorer = memo(function DocumentExplorer({\n  tree,\n  onNodeSelect,\n  selectedNodeId,\n  expandedByDefault = true,\n}: DocumentExplorerProps) {\n  const [expanded, setExpanded] = useState<Set<string>>(() => {\n    if (!expandedByDefault) return new Set();\n    const ids = new Set<string>();\n    const collect = (node: KnowledgeNode) => {\n      ids.add(node.id);\n      node.children?.forEach(collect);\n    };\n    collect(tree);\n    return ids;\n  });\n\n  const handleToggle = useCallback((id: string) => {\n    setExpanded((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      return next;\n    });\n  }, []);\n\n  const handleSelect = useCallback(\n    (node: KnowledgeNode) => {\n      onNodeSelect?.(node);\n    },\n    [onNodeSelect],\n  );\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          padding: \"12px 16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n          fontWeight: 600,\n        }}\n      >\n        Document Structure\n      </div>\n      <div style={{ padding: 8, maxHeight: 500, overflowY: \"auto\" }}>\n        <TreeNodeItem\n          node={tree}\n          depth={0}\n          onSelect={handleSelect}\n          selectedId={selectedNodeId}\n          expanded={expanded}\n          onToggle={handleToggle}\n        />\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useMemo } from \"react\";\nimport type { Entity, Relation } from \"@onegenui/vectorless\";\n\nexport interface KnowledgeGraphProps {\n  entities: Entity[];\n  relations: Relation[];\n  width?: number;\n  height?: number;\n  onEntityClick?: (entity: Entity) => void;\n}\n\ninterface GraphNode {\n  id: string;\n  label: string;\n  type: string;\n  x: number;\n  y: number;\n}\n\ninterface GraphEdge {\n  source: string;\n  target: string;\n  type: string;\n}\n\nexport const KnowledgeGraph = memo(function KnowledgeGraph({\n  entities,\n  relations,\n  width = 600,\n  height = 400,\n  onEntityClick,\n}: KnowledgeGraphProps) {\n  const { nodes, edges } = useMemo(() => {\n    // Create nodes from entities (top 30)\n    const topEntities = entities.slice(0, 30);\n    const graphNodes: GraphNode[] = topEntities.map((entity, i) => {\n      const angle = (i / topEntities.length) * 2 * Math.PI;\n      const radius = Math.min(width, height) * 0.35;\n      return {\n        id: entity.id,\n        label: entity.value.slice(0, 20),\n        type: entity.type,\n        x: width / 2 + radius * Math.cos(angle),\n        y: height / 2 + radius * Math.sin(angle),\n      };\n    });\n\n    // Create edges from relations\n    const graphEdges: GraphEdge[] = relations\n      .filter(\n        (r) =>\n          graphNodes.some((n) => n.id === r.sourceNodeId) &&\n          graphNodes.some((n) => n.id === r.targetNodeId),\n      )\n      .map((r) => ({\n        source: r.sourceNodeId,\n        target: r.targetNodeId,\n        type: r.type,\n      }));\n\n    return { nodes: graphNodes, edges: graphEdges };\n  }, [entities, relations, width, height]);\n\n  const typeColors: Record<string, string> = {\n    person: \"#4caf50\",\n    organization: \"#2196f3\",\n    place: \"#ff9800\",\n    date: \"#9c27b0\",\n    concept: \"#f44336\",\n    event: \"#00bcd4\",\n    number: \"#795548\",\n    term: \"#607d8b\",\n  };\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          padding: \"12px 16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n          fontWeight: 600,\n        }}\n      >\n        Knowledge Graph\n      </div>\n      <svg width={width} height={height} style={{ display: \"block\" }}>\n        {/* Edges */}\n        {edges.map((edge, i) => {\n          const sourceNode = nodes.find((n) => n.id === edge.source);\n          const targetNode = nodes.find((n) => n.id === edge.target);\n          if (!sourceNode || !targetNode) return null;\n          return (\n            <line\n              key={i}\n              x1={sourceNode.x}\n              y1={sourceNode.y}\n              x2={targetNode.x}\n              y2={targetNode.y}\n              stroke=\"#ccc\"\n              strokeWidth={1}\n            />\n          );\n        })}\n        {/* Nodes */}\n        {nodes.map((node) => (\n          <g\n            key={node.id}\n            transform={`translate(${node.x}, ${node.y})`}\n            style={{ cursor: \"pointer\" }}\n            onClick={() => {\n              const entity = entities.find((e) => e.id === node.id);\n              if (entity) onEntityClick?.(entity);\n            }}\n          >\n            <circle\n              r={20}\n              fill={typeColors[node.type] || \"#999\"}\n              stroke=\"white\"\n              strokeWidth={2}\n            />\n            <text y={30} textAnchor=\"middle\" fontSize={10} fill=\"#333\">\n              {node.label}\n            </text>\n          </g>\n        ))}\n      </svg>\n      {/* Legend */}\n      <div\n        style={{\n          padding: \"8px 16px\",\n          borderTop: \"1px solid #e0e0e0\",\n          display: \"flex\",\n          gap: 16,\n          flexWrap: \"wrap\",\n          fontSize: 12,\n        }}\n      >\n        {Object.entries(typeColors).map(([type, color]) => (\n          <div\n            key={type}\n            style={{ display: \"flex\", alignItems: \"center\", gap: 4 }}\n          >\n            <div\n              style={{\n                width: 12,\n                height: 12,\n                borderRadius: \"50%\",\n                backgroundColor: color,\n              }}\n            />\n            <span>{type}</span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { Entity } from \"@onegenui/vectorless\";\n\nexport interface DocumentTimelineProps {\n  entities: Entity[];\n  onEntityClick?: (entity: Entity) => void;\n}\n\ninterface TimelineEvent {\n  entity: Entity;\n  year: number;\n  month?: number;\n  day?: number;\n}\n\nfunction parseDate(value: string | undefined): number | null {\n  if (!value) return null;\n  // Try to extract year from various date formats\n  const yearMatch = value.match(/\\b(1[0-9]{3}|2[0-9]{3})\\b/);\n  if (yearMatch?.[1]) return parseInt(yearMatch[1], 10);\n  return null;\n}\n\nexport const DocumentTimeline = memo(function DocumentTimeline({\n  entities,\n  onEntityClick,\n}: DocumentTimelineProps) {\n  // Extract date entities and parse them\n  const dateEntities = entities.filter(\n    (e) => e.type === \"date\" || e.type === \"event\",\n  );\n\n  const events: TimelineEvent[] = dateEntities\n    .map((entity) => {\n      const year = parseDate(entity.value);\n      if (!year) return null;\n      return { entity, year };\n    })\n    .filter((e): e is TimelineEvent => e !== null)\n    .sort((a, b) => a.year - b.year);\n\n  if (events.length === 0) {\n    return (\n      <div\n        style={{\n          fontFamily: \"system-ui, sans-serif\",\n          border: \"1px solid #e0e0e0\",\n          borderRadius: 8,\n          padding: 16,\n          textAlign: \"center\",\n          color: \"#666\",\n        }}\n      >\n        No date entities found for timeline\n      </div>\n    );\n  }\n\n  const firstEvent = events[0];\n  const lastEvent = events[events.length - 1];\n  const minYear = firstEvent?.year ?? 0;\n  const maxYear = lastEvent?.year ?? 0;\n  const yearRange = Math.max(1, maxYear - minYear);\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          padding: \"12px 16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n          fontWeight: 600,\n        }}\n      >\n        Document Timeline\n      </div>\n      <div style={{ padding: 16, position: \"relative\", minHeight: 100 }}>\n        {/* Timeline line */}\n        <div\n          style={{\n            position: \"absolute\",\n            top: 50,\n            left: 20,\n            right: 20,\n            height: 4,\n            backgroundColor: \"#e0e0e0\",\n            borderRadius: 2,\n          }}\n        />\n        {/* Events */}\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            paddingTop: 60,\n          }}\n        >\n          {events.slice(0, 10).map((event, i) => {\n            const position =\n              yearRange > 0 ? ((event.year - minYear) / yearRange) * 100 : 50;\n            return (\n              <div\n                key={event.entity.id}\n                style={{\n                  position: \"absolute\",\n                  left: `calc(${position}% + 10px)`,\n                  top: 40,\n                  transform: \"translateX(-50%)\",\n                  textAlign: \"center\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => onEntityClick?.(event.entity)}\n              >\n                <div\n                  style={{\n                    width: 16,\n                    height: 16,\n                    borderRadius: \"50%\",\n                    backgroundColor: \"#1976d2\",\n                    margin: \"0 auto 8px\",\n                    border: \"3px solid white\",\n                    boxShadow: \"0 2px 4px rgba(0,0,0,0.2)\",\n                  }}\n                />\n                <div style={{ fontSize: 12, fontWeight: 600 }}>\n                  {event.year}\n                </div>\n                <div\n                  style={{\n                    fontSize: 11,\n                    color: \"#666\",\n                    maxWidth: 80,\n                    overflow: \"hidden\",\n                    textOverflow: \"ellipsis\",\n                    whiteSpace: \"nowrap\",\n                  }}\n                >\n                  {event.entity.value.slice(0, 15)}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      <div\n        style={{\n          padding: \"8px 16px\",\n          borderTop: \"1px solid #e0e0e0\",\n          fontSize: 12,\n          color: \"#666\",\n        }}\n      >\n        {events.length} date/event entities found\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { KnowledgeNode, Quote } from \"@onegenui/vectorless\";\n\nexport interface DeepAnalysisPanelProps {\n  node: KnowledgeNode;\n  quotes?: Quote[];\n  onQuoteClick?: (quote: Quote) => void;\n}\n\nexport const DeepAnalysisPanel = memo(function DeepAnalysisPanel({\n  node,\n  quotes = [],\n  onQuoteClick,\n}: DeepAnalysisPanelProps) {\n  const nodeQuotes = quotes.filter((q) => q.nodeId === node.id);\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          padding: \"16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n        }}\n      >\n        <h3 style={{ margin: 0, fontSize: 18 }}>{node.title}</h3>\n        <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>\n          Pages {node.pageStart}-{node.pageEnd}\n        </div>\n      </div>\n\n      {/* Summary */}\n      <div style={{ padding: 16, borderBottom: \"1px solid #e0e0e0\" }}>\n        <h4 style={{ margin: \"0 0 8px 0\", fontSize: 14, color: \"#1976d2\" }}>\n          Summary\n        </h4>\n        <p style={{ margin: 0, fontSize: 14, lineHeight: 1.6 }}>\n          {node.summary || \"No summary available\"}\n        </p>\n        {node.detailedSummary && (\n          <p\n            style={{\n              margin: \"12px 0 0 0\",\n              fontSize: 14,\n              lineHeight: 1.6,\n              color: \"#555\",\n            }}\n          >\n            {node.detailedSummary}\n          </p>\n        )}\n      </div>\n\n      {/* Key Points */}\n      {node.keyPoints.length > 0 && (\n        <div style={{ padding: 16, borderBottom: \"1px solid #e0e0e0\" }}>\n          <h4 style={{ margin: \"0 0 8px 0\", fontSize: 14, color: \"#1976d2\" }}>\n            Key Points\n          </h4>\n          <ul style={{ margin: 0, paddingLeft: 20 }}>\n            {node.keyPoints.map((point, i) => (\n              <li key={i} style={{ fontSize: 14, marginBottom: 4 }}>\n                {point}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Keywords */}\n      {node.keywords.length > 0 && (\n        <div style={{ padding: 16, borderBottom: \"1px solid #e0e0e0\" }}>\n          <h4 style={{ margin: \"0 0 8px 0\", fontSize: 14, color: \"#1976d2\" }}>\n            Keywords\n          </h4>\n          <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\n            {node.keywords.map((keyword, i) => (\n              <span\n                key={i}\n                style={{\n                  padding: \"4px 8px\",\n                  backgroundColor: \"#e3f2fd\",\n                  borderRadius: 4,\n                  fontSize: 12,\n                }}\n              >\n                {keyword}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Quotes */}\n      {nodeQuotes.length > 0 && (\n        <div style={{ padding: 16, borderBottom: \"1px solid #e0e0e0\" }}>\n          <h4 style={{ margin: \"0 0 8px 0\", fontSize: 14, color: \"#1976d2\" }}>\n            Notable Quotes\n          </h4>\n          {nodeQuotes.map((quote) => (\n            <div\n              key={quote.id}\n              onClick={() => onQuoteClick?.(quote)}\n              style={{\n                padding: 12,\n                backgroundColor: \"#fafafa\",\n                borderLeft: \"3px solid #1976d2\",\n                marginBottom: 8,\n                cursor: onQuoteClick ? \"pointer\" : \"default\",\n              }}\n            >\n              <p style={{ margin: 0, fontSize: 14, fontStyle: \"italic\" }}>\n                \"{quote.text}\"\n              </p>\n              <div style={{ fontSize: 12, color: \"#666\", marginTop: 4 }}>\n                Page {quote.pageNumber} - {quote.significance}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Metrics */}\n      {node.metrics && (\n        <div style={{ padding: 16 }}>\n          <h4 style={{ margin: \"0 0 8px 0\", fontSize: 14, color: \"#1976d2\" }}>\n            Metrics\n          </h4>\n          <div\n            style={{\n              display: \"grid\",\n              gridTemplateColumns: \"repeat(3, 1fr)\",\n              gap: 12,\n            }}\n          >\n            <div style={{ textAlign: \"center\" }}>\n              <div style={{ fontSize: 20, fontWeight: 600 }}>\n                {node.metrics.wordCount}\n              </div>\n              <div style={{ fontSize: 11, color: \"#666\" }}>Words</div>\n            </div>\n            <div style={{ textAlign: \"center\" }}>\n              <div style={{ fontSize: 20, fontWeight: 600 }}>\n                {node.metrics.readingTimeMinutes}m\n              </div>\n              <div style={{ fontSize: 11, color: \"#666\" }}>Reading Time</div>\n            </div>\n            <div style={{ textAlign: \"center\" }}>\n              <div\n                style={{\n                  fontSize: 20,\n                  fontWeight: 600,\n                  textTransform: \"capitalize\",\n                }}\n              >\n                {node.metrics.complexity}\n              </div>\n              <div style={{ fontSize: 11, color: \"#666\" }}>Complexity</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo } from \"react\";\nimport type { Citation } from \"@onegenui/vectorless\";\n\nexport interface CitationViewerProps {\n  citations: Citation[];\n  onCitationClick?: (citation: Citation) => void;\n}\n\nconst typeIcons: Record<string, string> = {\n  book: \"B\",\n  article: \"A\",\n  web: \"W\",\n  report: \"R\",\n  thesis: \"T\",\n  other: \"O\",\n};\n\nexport const CitationViewer = memo(function CitationViewer({\n  citations,\n  onCitationClick,\n}: CitationViewerProps) {\n  // Group citations by type\n  const byType = citations.reduce(\n    (acc, c) => {\n      const type = c.type ?? \"other\";\n      if (!acc[type]) acc[type] = [];\n      acc[type].push(c);\n      return acc;\n    },\n    {} as Record<string, Citation[]>,\n  );\n\n  if (citations.length === 0) {\n    return (\n      <div\n        style={{\n          fontFamily: \"system-ui, sans-serif\",\n          border: \"1px solid #e0e0e0\",\n          borderRadius: 8,\n          padding: 16,\n          textAlign: \"center\",\n          color: \"#666\",\n        }}\n      >\n        No citations found in document\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          padding: \"12px 16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n          fontWeight: 600,\n          display: \"flex\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <span>Citations</span>\n        <span style={{ color: \"#666\", fontWeight: 400 }}>\n          {citations.length} total\n        </span>\n      </div>\n\n      <div style={{ maxHeight: 400, overflowY: \"auto\" }}>\n        {Object.entries(byType).map(([type, typeCitations]) => (\n          <div key={type}>\n            <div\n              style={{\n                padding: \"8px 16px\",\n                backgroundColor: \"#fafafa\",\n                fontWeight: 500,\n                fontSize: 12,\n                textTransform: \"uppercase\",\n                color: \"#666\",\n                borderBottom: \"1px solid #e0e0e0\",\n              }}\n            >\n              {type} ({typeCitations.length})\n            </div>\n            {typeCitations.map((citation) => (\n              <div\n                key={citation.id}\n                onClick={() => onCitationClick?.(citation)}\n                style={{\n                  padding: \"12px 16px\",\n                  borderBottom: \"1px solid #f0f0f0\",\n                  cursor: onCitationClick ? \"pointer\" : \"default\",\n                  display: \"flex\",\n                  gap: 12,\n                }}\n              >\n                <div\n                  style={{\n                    width: 32,\n                    height: 32,\n                    borderRadius: 4,\n                    backgroundColor: \"#e3f2fd\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    fontWeight: 600,\n                    color: \"#1976d2\",\n                    flexShrink: 0,\n                  }}\n                >\n                  {typeIcons[citation.type] || \"?\"}\n                </div>\n                <div style={{ flex: 1, minWidth: 0 }}>\n                  {citation.title && (\n                    <div style={{ fontWeight: 500, fontSize: 14 }}>\n                      {citation.title}\n                    </div>\n                  )}\n                  {citation.authors && citation.authors.length > 0 && (\n                    <div style={{ fontSize: 13, color: \"#555\" }}>\n                      {citation.authors.join(\", \")}\n                    </div>\n                  )}\n                  {citation.year && (\n                    <span style={{ fontSize: 12, color: \"#666\" }}>\n                      ({citation.year})\n                    </span>\n                  )}\n                  <div\n                    style={{\n                      fontSize: 12,\n                      color: \"#888\",\n                      marginTop: 4,\n                      overflow: \"hidden\",\n                      textOverflow: \"ellipsis\",\n                      whiteSpace: \"nowrap\",\n                    }}\n                  >\n                    {citation.text}\n                  </div>\n                  <div style={{ fontSize: 11, color: \"#999\", marginTop: 4 }}>\n                    Page {citation.pageNumber}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { memo, useState, useMemo } from \"react\";\nimport type { Entity } from \"@onegenui/vectorless\";\n\nexport interface EntityExplorerProps {\n  entities: Entity[];\n  onEntityClick?: (entity: Entity) => void;\n  filterTypes?: string[];\n}\n\nconst typeColors: Record<string, string> = {\n  person: \"#4caf50\",\n  organization: \"#2196f3\",\n  place: \"#ff9800\",\n  date: \"#9c27b0\",\n  concept: \"#f44336\",\n  event: \"#00bcd4\",\n  number: \"#795548\",\n  term: \"#607d8b\",\n};\n\nexport const EntityExplorer = memo(function EntityExplorer({\n  entities,\n  onEntityClick,\n  filterTypes,\n}: EntityExplorerProps) {\n  const [selectedType, setSelectedType] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  // Get all unique types\n  const types = useMemo(() => {\n    const typeSet = new Set(entities.map((e) => e.type));\n    return Array.from(typeSet).sort();\n  }, [entities]);\n\n  // Filter entities\n  const filteredEntities = useMemo(() => {\n    let result = entities;\n\n    if (filterTypes && filterTypes.length > 0) {\n      result = result.filter((e) => filterTypes.includes(e.type));\n    }\n\n    if (selectedType) {\n      result = result.filter((e) => e.type === selectedType);\n    }\n\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(\n        (e) =>\n          e.value.toLowerCase().includes(query) ||\n          e.normalized?.toLowerCase().includes(query),\n      );\n    }\n\n    return result;\n  }, [entities, filterTypes, selectedType, searchQuery]);\n\n  // Group by type\n  const groupedEntities = useMemo(() => {\n    const groups: Record<string, Entity[]> = {};\n    for (const entity of filteredEntities) {\n      const type = entity.type;\n      if (!groups[type]) groups[type] = [];\n      groups[type].push(entity);\n    }\n    return groups;\n  }, [filteredEntities]);\n\n  return (\n    <div\n      style={{\n        fontFamily: \"system-ui, sans-serif\",\n        border: \"1px solid #e0e0e0\",\n        borderRadius: 8,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          padding: \"12px 16px\",\n          backgroundColor: \"#f5f5f5\",\n          borderBottom: \"1px solid #e0e0e0\",\n          fontWeight: 600,\n        }}\n      >\n        Entities ({filteredEntities.length})\n      </div>\n\n      {/* Search & Filter */}\n      <div\n        style={{\n          padding: \"12px 16px\",\n          borderBottom: \"1px solid #e0e0e0\",\n          display: \"flex\",\n          gap: 12,\n          flexWrap: \"wrap\",\n        }}\n      >\n        <input\n          type=\"text\"\n          placeholder=\"Search entities...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          style={{\n            flex: 1,\n            minWidth: 150,\n            padding: \"6px 12px\",\n            border: \"1px solid #ddd\",\n            borderRadius: 4,\n            fontSize: 14,\n          }}\n        />\n        <select\n          value={selectedType || \"\"}\n          onChange={(e) => setSelectedType(e.target.value || null)}\n          style={{\n            padding: \"6px 12px\",\n            border: \"1px solid #ddd\",\n            borderRadius: 4,\n            fontSize: 14,\n          }}\n        >\n          <option value=\"\">All types</option>\n          {types.map((type) => (\n            <option key={type} value={type}>\n              {type}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Type badges */}\n      <div\n        style={{\n          padding: \"8px 16px\",\n          borderBottom: \"1px solid #e0e0e0\",\n          display: \"flex\",\n          gap: 8,\n          flexWrap: \"wrap\",\n        }}\n      >\n        {types.map((type) => {\n          const count = entities.filter((e) => e.type === type).length;\n          return (\n            <button\n              key={type}\n              onClick={() =>\n                setSelectedType((prev) => (prev === type ? null : type))\n              }\n              style={{\n                padding: \"4px 8px\",\n                borderRadius: 12,\n                border: \"none\",\n                backgroundColor:\n                  selectedType === type ? typeColors[type] : \"#e0e0e0\",\n                color: selectedType === type ? \"white\" : \"#333\",\n                fontSize: 12,\n                cursor: \"pointer\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: 4,\n              }}\n            >\n              <span\n                style={{\n                  width: 8,\n                  height: 8,\n                  borderRadius: \"50%\",\n                  backgroundColor: typeColors[type] || \"#999\",\n                }}\n              />\n              {type} ({count})\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Entity list */}\n      <div style={{ maxHeight: 400, overflowY: \"auto\" }}>\n        {Object.entries(groupedEntities).map(([type, typeEntities]) => (\n          <div key={type}>\n            <div\n              style={{\n                padding: \"6px 16px\",\n                backgroundColor: \"#fafafa\",\n                fontSize: 12,\n                fontWeight: 500,\n                textTransform: \"uppercase\",\n                color: typeColors[type] || \"#666\",\n                position: \"sticky\",\n                top: 0,\n              }}\n            >\n              {type}\n            </div>\n            {typeEntities.map((entity) => (\n              <div\n                key={entity.id}\n                onClick={() => onEntityClick?.(entity)}\n                style={{\n                  padding: \"10px 16px\",\n                  borderBottom: \"1px solid #f0f0f0\",\n                  cursor: onEntityClick ? \"pointer\" : \"default\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <div>\n                  <div style={{ fontWeight: 500, fontSize: 14 }}>\n                    {entity.value}\n                  </div>\n                  {entity.normalized && entity.normalized !== entity.value && (\n                    <div style={{ fontSize: 12, color: \"#666\" }}>\n                      {entity.normalized}\n                    </div>\n                  )}\n                </div>\n                <div style={{ fontSize: 12, color: \"#999\" }}>\n                  {entity.occurrences.length} occurrences\n                </div>\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n","\"use client\";\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport type {\n  DocumentKnowledgeBase,\n  KnowledgeNode,\n  Entity,\n  Relation,\n  Quote,\n} from \"@onegenui/vectorless\";\n\nexport interface UseKnowledgeBaseOptions {\n  initialKnowledgeBase?: DocumentKnowledgeBase | null;\n}\n\nexport interface UseKnowledgeBaseReturn {\n  knowledgeBase: DocumentKnowledgeBase | null;\n  setKnowledgeBase: (kb: DocumentKnowledgeBase | null) => void;\n  entities: Entity[];\n  relations: Relation[];\n  quotes: Quote[];\n  getEntityById: (id: string) => Entity | undefined;\n  getRelationsByNode: (nodeId: string) => Relation[];\n  getQuotesByNode: (nodeId: string) => Quote[];\n  searchEntities: (query: string) => Entity[];\n  filterEntitiesByType: (type: string) => Entity[];\n}\n\nexport function useKnowledgeBase(\n  options: UseKnowledgeBaseOptions = {},\n): UseKnowledgeBaseReturn {\n  const [knowledgeBase, setKnowledgeBase] =\n    useState<DocumentKnowledgeBase | null>(\n      options.initialKnowledgeBase ?? null,\n    );\n\n  const entities = useMemo(\n    () => knowledgeBase?.entities ?? [],\n    [knowledgeBase],\n  );\n  const relations = useMemo(\n    () => knowledgeBase?.relations ?? [],\n    [knowledgeBase],\n  );\n  const quotes = useMemo(() => knowledgeBase?.quotes ?? [], [knowledgeBase]);\n\n  const getEntityById = useCallback(\n    (id: string) => entities.find((e) => e.id === id),\n    [entities],\n  );\n\n  const getRelationsByNode = useCallback(\n    (nodeId: string) =>\n      relations.filter(\n        (r) => r.sourceNodeId === nodeId || r.targetNodeId === nodeId,\n      ),\n    [relations],\n  );\n\n  const getQuotesByNode = useCallback(\n    (nodeId: string) => quotes.filter((q) => q.nodeId === nodeId),\n    [quotes],\n  );\n\n  const searchEntities = useCallback(\n    (query: string) => {\n      const q = query.toLowerCase();\n      return entities.filter(\n        (e) =>\n          e.value.toLowerCase().includes(q) ||\n          e.normalized?.toLowerCase().includes(q),\n      );\n    },\n    [entities],\n  );\n\n  const filterEntitiesByType = useCallback(\n    (type: string) => entities.filter((e) => e.type === type),\n    [entities],\n  );\n\n  return {\n    knowledgeBase,\n    setKnowledgeBase,\n    entities,\n    relations,\n    quotes,\n    getEntityById,\n    getRelationsByNode,\n    getQuotesByNode,\n    searchEntities,\n    filterEntitiesByType,\n  };\n}\n","\"use client\";\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport type { KnowledgeNode } from \"@onegenui/vectorless\";\n\nexport interface UseDocumentExplorerOptions {\n  initialTree?: KnowledgeNode | null;\n  onNodeSelect?: (node: KnowledgeNode) => void;\n}\n\nexport interface UseDocumentExplorerReturn {\n  tree: KnowledgeNode | null;\n  setTree: (tree: KnowledgeNode | null) => void;\n  selectedNode: KnowledgeNode | null;\n  expandedNodes: Set<string>;\n  selectNode: (node: KnowledgeNode) => void;\n  toggleNode: (nodeId: string) => void;\n  expandAll: () => void;\n  collapseAll: () => void;\n  searchNodes: (query: string) => KnowledgeNode[];\n  getNodePath: (nodeId: string) => KnowledgeNode[];\n}\n\nfunction collectAllNodeIds(node: KnowledgeNode, ids: Set<string>): void {\n  ids.add(node.id);\n  if (node.children) {\n    for (const child of node.children) {\n      collectAllNodeIds(child, ids);\n    }\n  }\n}\n\nfunction findNode(node: KnowledgeNode, id: string): KnowledgeNode | undefined {\n  if (node.id === id) return node;\n  if (node.children) {\n    for (const child of node.children) {\n      const found = findNode(child, id);\n      if (found) return found;\n    }\n  }\n  return undefined;\n}\n\nfunction findPath(\n  node: KnowledgeNode,\n  targetId: string,\n  path: KnowledgeNode[] = [],\n): KnowledgeNode[] | null {\n  const newPath = [...path, node];\n  if (node.id === targetId) return newPath;\n  if (node.children) {\n    for (const child of node.children) {\n      const result = findPath(child, targetId, newPath);\n      if (result) return result;\n    }\n  }\n  return null;\n}\n\nfunction searchTree(\n  node: KnowledgeNode,\n  query: string,\n  results: KnowledgeNode[] = [],\n): KnowledgeNode[] {\n  const q = query.toLowerCase();\n  if (\n    node.title.toLowerCase().includes(q) ||\n    node.summary?.toLowerCase().includes(q) ||\n    node.rawText?.toLowerCase().includes(q)\n  ) {\n    results.push(node);\n  }\n  if (node.children) {\n    for (const child of node.children) {\n      searchTree(child, query, results);\n    }\n  }\n  return results;\n}\n\nexport function useDocumentExplorer(\n  options: UseDocumentExplorerOptions = {},\n): UseDocumentExplorerReturn {\n  const [tree, setTree] = useState<KnowledgeNode | null>(\n    options.initialTree ?? null,\n  );\n  const [selectedNode, setSelectedNode] = useState<KnowledgeNode | null>(null);\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n\n  const selectNode = useCallback(\n    (node: KnowledgeNode) => {\n      setSelectedNode(node);\n      options.onNodeSelect?.(node);\n    },\n    [options],\n  );\n\n  const toggleNode = useCallback((nodeId: string) => {\n    setExpandedNodes((prev) => {\n      const next = new Set(prev);\n      if (next.has(nodeId)) {\n        next.delete(nodeId);\n      } else {\n        next.add(nodeId);\n      }\n      return next;\n    });\n  }, []);\n\n  const expandAll = useCallback(() => {\n    if (!tree) return;\n    const ids = new Set<string>();\n    collectAllNodeIds(tree, ids);\n    setExpandedNodes(ids);\n  }, [tree]);\n\n  const collapseAll = useCallback(() => {\n    setExpandedNodes(new Set());\n  }, []);\n\n  const searchNodes = useCallback(\n    (query: string) => {\n      if (!tree || !query) return [];\n      return searchTree(tree, query);\n    },\n    [tree],\n  );\n\n  const getNodePath = useCallback(\n    (nodeId: string) => {\n      if (!tree) return [];\n      return findPath(tree, nodeId) ?? [];\n    },\n    [tree],\n  );\n\n  return {\n    tree,\n    setTree,\n    selectedNode,\n    expandedNodes,\n    selectNode,\n    toggleNode,\n    expandAll,\n    collapseAll,\n    searchNodes,\n    getNodePath,\n  };\n}\n","\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport type { Answer } from \"@onegenui/vectorless\";\n\nexport interface UseQuestionAnswerOptions {\n  onAnswer?: (answer: Answer) => void;\n  onError?: (error: Error) => void;\n}\n\nexport interface UseQuestionAnswerReturn {\n  question: string;\n  setQuestion: (question: string) => void;\n  answer: Answer | null;\n  isLoading: boolean;\n  error: Error | null;\n  askQuestion: (\n    knowledgeBaseId: string,\n    question: string,\n  ) => Promise<Answer | null>;\n  clearAnswer: () => void;\n  history: Array<{ question: string; answer: Answer }>;\n  clearHistory: () => void;\n}\n\nexport function useQuestionAnswer(\n  options: UseQuestionAnswerOptions = {},\n): UseQuestionAnswerReturn {\n  const [question, setQuestion] = useState(\"\");\n  const [answer, setAnswer] = useState<Answer | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const [history, setHistory] = useState<\n    Array<{ question: string; answer: Answer }>\n  >([]);\n\n  const askQuestion = useCallback(\n    async (knowledgeBaseId: string, q: string): Promise<Answer | null> => {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        // For now, use a mock implementation that will be replaced\n        // when the full MCP integration is available\n        const result: Answer = {\n          id: crypto.randomUUID(),\n          question: q,\n          answer: \"This requires the full MCP integration to be active.\",\n          confidence: 0.5,\n          sources: [],\n          generatedAt: new Date().toISOString(),\n        };\n\n        setAnswer(result);\n        setHistory((prev) => [...prev, { question: q, answer: result }]);\n        options.onAnswer?.(result);\n        return result;\n      } catch (err) {\n        const error = err instanceof Error ? err : new Error(String(err));\n        setError(error);\n        options.onError?.(error);\n        return null;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [options],\n  );\n\n  const clearAnswer = useCallback(() => {\n    setAnswer(null);\n    setError(null);\n    setQuestion(\"\");\n  }, []);\n\n  const clearHistory = useCallback(() => {\n    setHistory([]);\n  }, []);\n\n  return {\n    question,\n    setQuestion,\n    answer,\n    isLoading,\n    error,\n    askQuestion,\n    clearAnswer,\n    history,\n    clearHistory,\n  };\n}\n"],"mappings":"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","names":["memo","CalendarIcon","motion","StatusBadge","ProgressBar","EmptyState","SectionHeader","CardContainer","AccentBar","PerforatedDivider","InfoPill","ErrorState","Skeleton","SkeletonText","SkeletonCard","LoadingState","memo","motion","jsx","jsxs","EventCard","memo","MapPin","Video","motion","jsx","jsxs","memo","EventDetailView","motion","MapPin","Video","jsx","jsxs","memo","CalendarAgenda","motion","CalendarIcon","memo","useMemo","Activity","memo","useState","jsx","jsxs","SessionTimer","formatTime","memo","ChevronDown","motion","AnimatePresence","memo","Flame","Clock","jsx","jsxs","memo","Clock","jsx","jsxs","memo","ProgressRing","CardioDetails","Clock","jsx","jsxs","Flame","memo","Clock","jsx","jsxs","memo","ExerciseItemCard","motion","ChevronDown","AnimatePresence","SupersetGroup","useState","useMemo","useEffect","jsx","jsxs","memo","Workout","useMemo","Activity","memo","useMemo","useState","useCallback","useDomainAutoSave","Flame","Target","motion","memo","motion","jsx","jsxs","memo","MacroMetric","motion","memo","motion","Check","jsx","jsxs","memo","MealTicket","motion","Check","jsx","jsxs","memo","Nutrition","useState","useMemo","useDomainAutoSave","useCallback","Flame","motion","Target","memo","useMemo","useDomainAutoSave","Plane","motion","AnimatePresence","memo","Clock","motion","jsx","jsxs","memo","FlightStatus","FlightSegment","motion","Clock","memo","ArrowRight","SelectableItem","motion","Fragment","jsx","jsxs","memo","RoundTripCard","motion","SelectableItem","ArrowRight","SingleFlightCard","stateAdapterInstance","useMemo","jsx","jsxs","memo","Flight","useMemo","useDomainAutoSave","motion","Plane","AnimatePresence","memo","useMemo","SelectableItem","useDomainAutoSave","MapPin","Calendar","ArrowRight","motion","STATUS_VARIANT_MAP","jsx","jsxs","memo","Hotel","useMemo","useDomainAutoSave","motion","SelectableItem","MapPin","Calendar","ArrowRight","useState","useMemo","useCallback","memo","useMemo","useDomainAutoSave","Plane","Hotel","MapPin","Calendar","motion","AnimatePresence","jsx","jsxs","memo","Trip","useMemo","useDomainAutoSave","motion","MapPin","Calendar","Plane","Hotel","AnimatePresence","memo","Plane","Hotel","ArrowRight","Calendar","MapPin","motion","AnimatePresence","stateAdapterInstance","useState","useCallback","useMemo","Fragment","jsx","jsxs","memo","BookingForms","motion","Plane","Hotel","AnimatePresence","Calendar","MapPin","ArrowRight","memo","MapPin","Calendar","Check","User","jsx","jsxs","memo","ProfileCard","User","Check","MapPin","Calendar","memo","Activity","jsx","jsxs","memo","ActivityFeed","Activity","memo","Check","Star","jsx","jsxs","memo","Pricing","Star","Check","memo","Clock","Calendar","Fragment","jsx","jsxs","memo","ArticleCard","Calendar","Clock","memo","useMemo","useDomainAutoSave","Plus","AnimatePresence","memo","Check","motion","jsx","jsxs","memo","SubItemsList","Check","memo","motion","jsx","jsxs","memo","KanbanCard","motion","useState","useCallback","useState","useMemo","useCallback","jsx","jsxs","memo","Kanban","useMemo","useDomainAutoSave","Plus","AnimatePresence","memo","useMemo","useDomainAutoSave","Check","Clock","Plus","motion","AnimatePresence","useState","useCallback","useEffect","useMemo","jsx","jsxs","PRIORITY_TO_VARIANT","memo","TodoList","useMemo","useDomainAutoSave","AnimatePresence","motion","Check","Clock","Plus","memo","useDomainAutoSave","Calendar","ChevronRight","AnimatePresence","memo","Check","motion","Dumbbell","Utensils","User","MoreHorizontal","jsx","jsxs","memo","TimeBlockCard","motion","Check","memo","jsx","jsxs","memo","DayColumn","stateAdapterInstance","useState","useMemo","useCallback","jsx","jsxs","memo","RoutineScheduler","useDomainAutoSave","Calendar","ChevronRight","AnimatePresence","memo","useMemo","useDomainAutoSave","Pill","AnimatePresence","memo","SelectableItem","Pill","Check","Utensils","Clock","Moon","Utensils","Dumbbell","jsx","jsxs","memo","SupplementCard","SelectableItem","Check","Pill","Utensils","memo","motion","jsx","jsxs","memo","TimingGroup","motion","memo","motion","jsx","jsxs","ProgressDashboard","stateAdapterInstance","useState","useMemo","useCallback","jsx","jsxs","memo","SupplementTracker","useMemo","useDomainAutoSave","Pill","AnimatePresence","memo","useMemo","useDomainAutoSave","CalendarIcon","ChevronLeft","ChevronRight","motion","AnimatePresence","memo","Clock","MapPin","SelectableItem","Dumbbell","Utensils","Pill","Briefcase","Heart","Users","Plane","MoreHorizontal","DAYS_SHORT","CATEGORY_CONFIG","DEFAULT_CATEGORY_CONFIG","getCategoryConfig","jsx","jsxs","memo","EventDot","getCategoryConfig","EventCard","SelectableItem","Clock","MapPin","memo","jsx","jsxs","memo","DayCell","EventCard","stateAdapterInstance","useState","useMemo","useCallback","jsx","jsxs","Calendar","memo","useMemo","useDomainAutoSave","DAYS_SHORT","CalendarIcon","ChevronLeft","ChevronRight","AnimatePresence","motion","EventCard","CATEGORY_CONFIG","memo","useMemo","useDomainAutoSave","ChevronLeft","ChevronRight","motion","AnimatePresence","memo","SelectableItem","Heart","Star","Target","Link","memo","Moon","Check","Link","Dumbbell","Utensils","Pill","Calendar","jsx","jsxs","memo","MoodBadge","EnergyBar","SleepInfo","Moon","GoalItem","Check","LinkedEntityBadge","Link","jsx","jsxs","memo","DiaryEntryCard","SelectableItem","Heart","Star","Target","Link","stateAdapterInstance","useState","useMemo","useCallback","jsx","jsxs","memo","Diary","useMemo","useDomainAutoSave","ChevronLeft","ChevronRight","AnimatePresence","motion","memo","FileText","memo","useState","Play","jsx","jsxs","memo","VideoPlayer","useState","Play","memo","jsx","jsxs","CitationBadge","memo","jsx","jsxs","SourceCard","memo","jsx","jsxs","memo","ReportSectionComponent","jsx","jsxs","memo","ResearchReport","FileText","memo","useState","useCallback","FileText","ChevronRight","ChevronDown","BookOpen","ExternalLink","motion","AnimatePresence","jsx","jsxs","memo","TreeNodeItem","useState","useCallback","ChevronDown","ChevronRight","ExternalLink","DocumentIndex","FileText","BookOpen","memo","useState","FileText","ChevronDown","BookOpen","motion","jsx","jsxs","memo","SourceCitation","useState","FileText","ChevronDown","CompactCitation","BookOpen","Video","memo","useState","useEffect","User","jsx","jsxs","memo","Message","useState","useEffect","memo","useState","useEffect","useRef","useCallback","jsx","useState","useEffect","Send","X","formatDate","jsx","jsxs","useState","useEffect","X","Send","memo","Star","Paperclip","jsx","jsxs","memo","EmailList","Star","formatDate","Paperclip","memo","ArrowLeft","Trash2","Star","Paperclip","Fragment","jsx","jsxs","memo","EmailDetail","ArrowLeft","Trash2","Star","Paperclip","jsx","jsxs","memo","Email","useRef","useState","useEffect","useCallback","memo","useState","useCallback","jsx","jsxs","TreeNodeItem","DocumentExplorer","memo","useMemo","jsx","jsxs","KnowledgeGraph","typeColors","memo","jsx","jsxs","DocumentTimeline","memo","jsx","jsxs","DeepAnalysisPanel","memo","jsx","jsxs","CitationViewer","memo","useState","useMemo","jsx","jsxs","EntityExplorer","useState","useCallback","useMemo","useState","useCallback","useState","useCallback","useState","useCallback","error","Video","Calendar"]}